(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var RA={exports:{}},c0={};var SO;function YW(){if(SO)return c0;SO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return c0.Fragment=t,c0.jsx=n,c0.jsxs=n,c0}var _O;function XW(){return _O||(_O=1,RA.exports=YW()),RA.exports}var le=XW(),zA={exports:{}},Ie={};var wO;function VW(){if(wO)return Ie;wO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),p=Symbol.iterator;function y(R){return R===null||typeof R!="object"?null:(R=p&&R[p]||R["@@iterator"],typeof R=="function"?R:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,E={};function S(R,q,J){this.props=R,this.context=q,this.refs=E,this.updater=J||v}S.prototype.isReactComponent={},S.prototype.setState=function(R,q){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,q,"setState")},S.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function _(){}_.prototype=S.prototype;function w(R,q,J){this.props=R,this.context=q,this.refs=E,this.updater=J||v}var D=w.prototype=new _;D.constructor=w,b(D,S.prototype),D.isPureReactComponent=!0;var T=Array.isArray;function M(){}var $={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function N(R,q,J){var ce=J.ref;return{$$typeof:e,type:R,key:q,ref:ce!==void 0?ce:null,props:J}}function U(R,q){return N(R.type,q,R.props)}function B(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function X(R){var q={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(J){return q[J]})}var G=/\/+/g;function P(R,q){return typeof R=="object"&&R!==null&&R.key!=null?X(""+R.key):q.toString(36)}function z(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(M,M):(R.status="pending",R.then(function(q){R.status==="pending"&&(R.status="fulfilled",R.value=q)},function(q){R.status==="pending"&&(R.status="rejected",R.reason=q)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function O(R,q,J,ce,me){var Me=typeof R;(Me==="undefined"||Me==="boolean")&&(R=null);var Pe=!1;if(R===null)Pe=!0;else switch(Me){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(R.$$typeof){case e:case t:Pe=!0;break;case d:return Pe=R._init,O(Pe(R._payload),q,J,ce,me)}}if(Pe)return me=me(R),Pe=ce===""?"."+P(R,0):ce,T(me)?(J="",Pe!=null&&(J=Pe.replace(G,"$&/")+"/"),O(me,q,J,"",function(Le){return Le})):me!=null&&(B(me)&&(me=U(me,J+(me.key==null||R&&R.key===me.key?"":(""+me.key).replace(G,"$&/")+"/")+Pe)),q.push(me)),1;Pe=0;var _t=ce===""?".":ce+":";if(T(R))for(var pe=0;pe<R.length;pe++)ce=R[pe],Me=_t+P(ce,pe),Pe+=O(ce,q,J,Me,me);else if(pe=y(R),typeof pe=="function")for(R=pe.call(R),pe=0;!(ce=R.next()).done;)ce=ce.value,Me=_t+P(ce,pe++),Pe+=O(ce,q,J,Me,me);else if(Me==="object"){if(typeof R.then=="function")return O(z(R),q,J,ce,me);throw q=String(R),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function j(R,q,J){if(R==null)return R;var ce=[],me=0;return O(R,ce,"","",function(Me){return q.call(J,Me,me++)}),ce}function Y(R){if(R._status===-1){var q=R._result;q=q(),q.then(function(J){(R._status===0||R._status===-1)&&(R._status=1,R._result=J)},function(J){(R._status===0||R._status===-1)&&(R._status=2,R._result=J)}),R._status===-1&&(R._status=0,R._result=q)}if(R._status===1)return R._result.default;throw R._result}var V=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},ee={map:j,forEach:function(R,q,J){j(R,function(){q.apply(this,arguments)},J)},count:function(R){var q=0;return j(R,function(){q++}),q},toArray:function(R){return j(R,function(q){return q})||[]},only:function(R){if(!B(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Ie.Activity=g,Ie.Children=ee,Ie.Component=S,Ie.Fragment=n,Ie.Profiler=r,Ie.PureComponent=w,Ie.StrictMode=i,Ie.Suspense=c,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(R){return $.H.useMemoCache(R)}},Ie.cache=function(R){return function(){return R.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(R,q,J){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ce=b({},R.props),me=R.key;if(q!=null)for(Me in q.key!==void 0&&(me=""+q.key),q)!F.call(q,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&q.ref===void 0||(ce[Me]=q[Me]);var Me=arguments.length-2;if(Me===1)ce.children=J;else if(1<Me){for(var Pe=Array(Me),_t=0;_t<Me;_t++)Pe[_t]=arguments[_t+2];ce.children=Pe}return N(R.type,me,ce)},Ie.createContext=function(R){return R={$$typeof:s,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},Ie.createElement=function(R,q,J){var ce,me={},Me=null;if(q!=null)for(ce in q.key!==void 0&&(Me=""+q.key),q)F.call(q,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(me[ce]=q[ce]);var Pe=arguments.length-2;if(Pe===1)me.children=J;else if(1<Pe){for(var _t=Array(Pe),pe=0;pe<Pe;pe++)_t[pe]=arguments[pe+2];me.children=_t}if(R&&R.defaultProps)for(ce in Pe=R.defaultProps,Pe)me[ce]===void 0&&(me[ce]=Pe[ce]);return N(R,Me,me)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(R){return{$$typeof:u,render:R}},Ie.isValidElement=B,Ie.lazy=function(R){return{$$typeof:d,_payload:{_status:-1,_result:R},_init:Y}},Ie.memo=function(R,q){return{$$typeof:f,type:R,compare:q===void 0?null:q}},Ie.startTransition=function(R){var q=$.T,J={};$.T=J;try{var ce=R(),me=$.S;me!==null&&me(J,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(M,V)}catch(Me){V(Me)}finally{q!==null&&J.types!==null&&(q.types=J.types),$.T=q}},Ie.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},Ie.use=function(R){return $.H.use(R)},Ie.useActionState=function(R,q,J){return $.H.useActionState(R,q,J)},Ie.useCallback=function(R,q){return $.H.useCallback(R,q)},Ie.useContext=function(R){return $.H.useContext(R)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(R,q){return $.H.useDeferredValue(R,q)},Ie.useEffect=function(R,q){return $.H.useEffect(R,q)},Ie.useEffectEvent=function(R){return $.H.useEffectEvent(R)},Ie.useId=function(){return $.H.useId()},Ie.useImperativeHandle=function(R,q,J){return $.H.useImperativeHandle(R,q,J)},Ie.useInsertionEffect=function(R,q){return $.H.useInsertionEffect(R,q)},Ie.useLayoutEffect=function(R,q){return $.H.useLayoutEffect(R,q)},Ie.useMemo=function(R,q){return $.H.useMemo(R,q)},Ie.useOptimistic=function(R,q){return $.H.useOptimistic(R,q)},Ie.useReducer=function(R,q,J){return $.H.useReducer(R,q,J)},Ie.useRef=function(R){return $.H.useRef(R)},Ie.useState=function(R){return $.H.useState(R)},Ie.useSyncExternalStore=function(R,q,J){return $.H.useSyncExternalStore(R,q,J)},Ie.useTransition=function(){return $.H.useTransition()},Ie.version="19.2.1",Ie}var CO;function JC(){return CO||(CO=1,zA.exports=VW()),zA.exports}var Ui=JC(),BA={exports:{}},f0={},LA={exports:{}},UA={};var DO;function WW(){return DO||(DO=1,(function(e){function t(O,j){var Y=O.length;O.push(j);e:for(;0<Y;){var V=Y-1>>>1,ee=O[V];if(0<r(ee,j))O[V]=j,O[Y]=ee,Y=V;else break e}}function n(O){return O.length===0?null:O[0]}function i(O){if(O.length===0)return null;var j=O[0],Y=O.pop();if(Y!==j){O[0]=Y;e:for(var V=0,ee=O.length,R=ee>>>1;V<R;){var q=2*(V+1)-1,J=O[q],ce=q+1,me=O[ce];if(0>r(J,Y))ce<ee&&0>r(me,J)?(O[V]=me,O[ce]=Y,V=ce):(O[V]=J,O[q]=Y,V=q);else if(ce<ee&&0>r(me,Y))O[V]=me,O[ce]=Y,V=ce;else break e}}return j}function r(O,j){var Y=O.sortIndex-j.sortIndex;return Y!==0?Y:O.id-j.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var c=[],f=[],d=1,g=null,p=3,y=!1,v=!1,b=!1,E=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(O){for(var j=n(f);j!==null;){if(j.callback===null)i(f);else if(j.startTime<=O)i(f),j.sortIndex=j.expirationTime,t(c,j);else break;j=n(f)}}function T(O){if(b=!1,D(O),!v)if(n(c)!==null)v=!0,M||(M=!0,X());else{var j=n(f);j!==null&&z(T,j.startTime-O)}}var M=!1,$=-1,F=5,N=-1;function U(){return E?!0:!(e.unstable_now()-N<F)}function B(){if(E=!1,M){var O=e.unstable_now();N=O;var j=!0;try{e:{v=!1,b&&(b=!1,_($),$=-1),y=!0;var Y=p;try{t:{for(D(O),g=n(c);g!==null&&!(g.expirationTime>O&&U());){var V=g.callback;if(typeof V=="function"){g.callback=null,p=g.priorityLevel;var ee=V(g.expirationTime<=O);if(O=e.unstable_now(),typeof ee=="function"){g.callback=ee,D(O),j=!0;break t}g===n(c)&&i(c),D(O)}else i(c);g=n(c)}if(g!==null)j=!0;else{var R=n(f);R!==null&&z(T,R.startTime-O),j=!1}}break e}finally{g=null,p=Y,y=!1}j=void 0}}finally{j?X():M=!1}}}var X;if(typeof w=="function")X=function(){w(B)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,P=G.port2;G.port1.onmessage=B,X=function(){P.postMessage(null)}}else X=function(){S(B,0)};function z(O,j){$=S(function(){O(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(O){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var Y=p;p=j;try{return O()}finally{p=Y}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(O,j){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return j()}finally{p=Y}},e.unstable_scheduleCallback=function(O,j,Y){var V=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?V+Y:V):Y=V,O){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Y+ee,O={id:d++,callback:j,priorityLevel:O,startTime:Y,expirationTime:ee,sortIndex:-1},Y>V?(O.sortIndex=Y,t(f,O),n(c)===null&&O===n(f)&&(b?(_($),$=-1):b=!0,z(T,Y-V))):(O.sortIndex=ee,t(c,O),v||y||(v=!0,M||(M=!0,X()))),O},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(O){var j=p;return function(){var Y=p;p=j;try{return O.apply(this,arguments)}finally{p=Y}}}})(UA)),UA}var $O;function QW(){return $O||($O=1,LA.exports=WW()),LA.exports}var jA={exports:{}},Zn={};var TO;function ZW(){if(TO)return Zn;TO=1;var e=JC();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:c,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Zn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Zn.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(c,f,null,d)},Zn.flushSync=function(c){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,c)return c()}finally{s.T=f,i.p=d,i.d.f()}},Zn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(c,f))},Zn.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},Zn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,g=u(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(c,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Zn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=u(f.as,f.crossOrigin);i.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(c)},Zn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=u(d,f.crossOrigin);i.d.L(c,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Zn.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=u(f.as,f.crossOrigin);i.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(c)},Zn.requestFormReset=function(c){i.d.r(c)},Zn.unstable_batchedUpdates=function(c,f){return c(f)},Zn.useFormState=function(c,f,d){return s.H.useFormState(c,f,d)},Zn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Zn.version="19.2.1",Zn}var MO;function KW(){if(MO)return jA.exports;MO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),jA.exports=ZW(),jA.exports}var FO;function JW(){if(FO)return f0;FO=1;var e=QW(),t=JC(),n=KW();function i(o){var l="https://react.dev/errors/"+o;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var l=o,h=o;if(o.alternate)for(;l.return;)l=l.return;else{o=l;do l=o,(l.flags&4098)!==0&&(h=l.return),o=l.return;while(o)}return l.tag===3?h:null}function s(o){if(o.tag===13){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function u(o){if(o.tag===31){var l=o.memoizedState;if(l===null&&(o=o.alternate,o!==null&&(l=o.memoizedState)),l!==null)return l.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(i(188))}function f(o){var l=o.alternate;if(!l){if(l=a(o),l===null)throw Error(i(188));return l!==o?null:o}for(var h=o,m=l;;){var x=h.return;if(x===null)break;var A=x.alternate;if(A===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===h)return c(x),o;if(A===m)return c(x),l;A=A.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=A;else{for(var C=!1,k=x.child;k;){if(k===h){C=!0,h=x,m=A;break}if(k===m){C=!0,m=x,h=A;break}k=k.sibling}if(!C){for(k=A.child;k;){if(k===h){C=!0,h=A,m=x;break}if(k===m){C=!0,m=A,h=x;break}k=k.sibling}if(!C)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:l}function d(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o;for(o=o.child;o!==null;){if(l=d(o),l!==null)return l;o=o.sibling}return null}var g=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),w=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=B&&o[B]||o["@@iterator"],typeof o=="function"?o:null)}var G=Symbol.for("react.client.reference");function P(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===G?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case b:return"Fragment";case S:return"Profiler";case E:return"StrictMode";case T:return"Suspense";case M:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case v:return"Portal";case w:return o.displayName||"Context";case _:return(o._context.displayName||"Context")+".Consumer";case D:var l=o.render;return o=o.displayName,o||(o=l.displayName||l.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case $:return l=o.displayName||null,l!==null?l:P(o.type)||"Memo";case F:l=o._payload,o=o._init;try{return P(o(l))}catch{}}return null}var z=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},V=[],ee=-1;function R(o){return{current:o}}function q(o){0>ee||(o.current=V[ee],V[ee]=null,ee--)}function J(o,l){ee++,V[ee]=o.current,o.current=l}var ce=R(null),me=R(null),Me=R(null),Pe=R(null);function _t(o,l){switch(J(Me,l),J(me,o),J(ce,null),l.nodeType){case 9:case 11:o=(o=l.documentElement)&&(o=o.namespaceURI)?Y6(o):0;break;default:if(o=l.tagName,l=l.namespaceURI)l=Y6(l),o=X6(l,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}q(ce),J(ce,o)}function pe(){q(ce),q(me),q(Me)}function Le(o){o.memoizedState!==null&&J(Pe,o);var l=ce.current,h=X6(l,o.type);l!==h&&(J(me,o),J(ce,h))}function ze(o){me.current===o&&(q(ce),q(me)),Pe.current===o&&(q(Pe),s0._currentValue=Y)}var de,qt;function Xe(o){if(de===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);de=l&&l[1]||"",qt=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+de+o+qt}var It=!1;function it(o,l){if(!o||It)return"";It=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(l){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(K){var Z=K}Reflect.construct(o,[],ue)}else{try{ue.call()}catch(K){Z=K}o.call(ue.prototype)}}else{try{throw Error()}catch(K){Z=K}(ue=o())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(K){if(K&&Z&&typeof K.stack=="string")return[K.stack,Z.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),C=A[0],k=A[1];if(C&&k){var L=C.split(`
`),Q=k.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<Q.length&&!Q[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===Q.length)for(m=L.length-1,x=Q.length-1;1<=m&&0<=x&&L[m]!==Q[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==Q[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==Q[x]){var ie=`
`+L[m].replace(" at new "," at ");return o.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",o.displayName)),ie}while(1<=m&&0<=x);break}}}finally{It=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Xe(h):""}function Rt(o,l){switch(o.tag){case 26:case 27:case 5:return Xe(o.type);case 16:return Xe("Lazy");case 13:return o.child!==l&&l!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return it(o.type,!1);case 11:return it(o.type.render,!1);case 1:return it(o.type,!0);case 31:return Xe("Activity");default:return""}}function Ba(o){try{var l="",h=null;do l+=Rt(o,h),h=o,o=o.return;while(o);return l}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var x2=Object.prototype.hasOwnProperty,E2=e.unstable_scheduleCallback,A2=e.unstable_cancelCallback,_X=e.unstable_shouldYield,wX=e.unstable_requestPaint,ir=e.unstable_now,CX=e.unstable_getCurrentPriorityLevel,_5=e.unstable_ImmediatePriority,w5=e.unstable_UserBlockingPriority,Kp=e.unstable_NormalPriority,DX=e.unstable_LowPriority,C5=e.unstable_IdlePriority,$X=e.log,TX=e.unstable_setDisableYieldValue,vh=null,rr=null;function Oo(o){if(typeof $X=="function"&&TX(o),rr&&typeof rr.setStrictMode=="function")try{rr.setStrictMode(vh,o)}catch{}}var ar=Math.clz32?Math.clz32:kX,MX=Math.log,FX=Math.LN2;function kX(o){return o>>>=0,o===0?32:31-(MX(o)/FX|0)|0}var Jp=256,em=262144,tm=4194304;function sl(o){var l=o&42;if(l!==0)return l;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function nm(o,l,h){var m=o.pendingLanes;if(m===0)return 0;var x=0,A=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var k=m&134217727;return k!==0?(m=k&~A,m!==0?x=sl(m):(C&=k,C!==0?x=sl(C):h||(h=k&~o,h!==0&&(x=sl(h))))):(k=m&~A,k!==0?x=sl(k):C!==0?x=sl(C):h||(h=m&~o,h!==0&&(x=sl(h)))),x===0?0:l!==0&&l!==x&&(l&A)===0&&(A=x&-x,h=l&-l,A>=h||A===32&&(h&4194048)!==0)?l:x}function bh(o,l){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&l)===0}function OX(o,l){switch(o){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D5(){var o=tm;return tm<<=1,(tm&62914560)===0&&(tm=4194304),o}function S2(o){for(var l=[],h=0;31>h;h++)l.push(o);return l}function xh(o,l){o.pendingLanes|=l,l!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function NX(o,l,h,m,x,A){var C=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var k=o.entanglements,L=o.expirationTimes,Q=o.hiddenUpdates;for(h=C&~h;0<h;){var ie=31-ar(h),ue=1<<ie;k[ie]=0,L[ie]=-1;var Z=Q[ie];if(Z!==null)for(Q[ie]=null,ie=0;ie<Z.length;ie++){var K=Z[ie];K!==null&&(K.lane&=-536870913)}h&=~ue}m!==0&&$5(o,m,0),A!==0&&x===0&&o.tag!==0&&(o.suspendedLanes|=A&~(C&~l))}function $5(o,l,h){o.pendingLanes|=l,o.suspendedLanes&=~l;var m=31-ar(l);o.entangledLanes|=l,o.entanglements[m]=o.entanglements[m]|1073741824|h&261930}function T5(o,l){var h=o.entangledLanes|=l;for(o=o.entanglements;h;){var m=31-ar(h),x=1<<m;x&l|o[m]&l&&(o[m]|=l),h&=~x}}function M5(o,l){var h=l&-l;return h=(h&42)!==0?1:_2(h),(h&(o.suspendedLanes|l))!==0?0:h}function _2(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function w2(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function F5(){var o=j.p;return o!==0?o:(o=window.event,o===void 0?32:mO(o.type))}function k5(o,l){var h=j.p;try{return j.p=o,l()}finally{j.p=h}}var No=Math.random().toString(36).slice(2),Rn="__reactFiber$"+No,ki="__reactProps$"+No,Yc="__reactContainer$"+No,C2="__reactEvents$"+No,RX="__reactListeners$"+No,zX="__reactHandles$"+No,O5="__reactResources$"+No,Eh="__reactMarker$"+No;function D2(o){delete o[Rn],delete o[ki],delete o[C2],delete o[RX],delete o[zX]}function Xc(o){var l=o[Rn];if(l)return l;for(var h=o.parentNode;h;){if(l=h[Yc]||h[Rn]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(o=eO(o);o!==null;){if(h=o[Rn])return h;o=eO(o)}return l}o=h,h=o.parentNode}return null}function Vc(o){if(o=o[Rn]||o[Yc]){var l=o.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return o}return null}function Ah(o){var l=o.tag;if(l===5||l===26||l===27||l===6)return o.stateNode;throw Error(i(33))}function Wc(o){var l=o[O5];return l||(l=o[O5]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function An(o){o[Eh]=!0}var N5=new Set,R5={};function ol(o,l){Qc(o,l),Qc(o+"Capture",l)}function Qc(o,l){for(R5[o]=l,o=0;o<l.length;o++)N5.add(l[o])}var BX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),z5={},B5={};function LX(o){return x2.call(B5,o)?!0:x2.call(z5,o)?!1:BX.test(o)?B5[o]=!0:(z5[o]=!0,!1)}function im(o,l,h){if(LX(l))if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(l);return;case"boolean":var m=l.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){o.removeAttribute(l);return}}o.setAttribute(l,""+h)}}function rm(o,l,h){if(h===null)o.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttribute(l,""+h)}}function Ts(o,l,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(l,h,""+m)}}function Dr(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function L5(o){var l=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function UX(o,l,h){var m=Object.getOwnPropertyDescriptor(o.constructor.prototype,l);if(!o.hasOwnProperty(l)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var x=m.get,A=m.set;return Object.defineProperty(o,l,{configurable:!0,get:function(){return x.call(this)},set:function(C){h=""+C,A.call(this,C)}}),Object.defineProperty(o,l,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(C){h=""+C},stopTracking:function(){o._valueTracker=null,delete o[l]}}}}function $2(o){if(!o._valueTracker){var l=L5(o)?"checked":"value";o._valueTracker=UX(o,l,""+o[l])}}function U5(o){if(!o)return!1;var l=o._valueTracker;if(!l)return!0;var h=l.getValue(),m="";return o&&(m=L5(o)?o.checked?"true":"false":o.value),o=m,o!==h?(l.setValue(o),!0):!1}function am(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var jX=/[\n"\\]/g;function $r(o){return o.replace(jX,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function T2(o,l,h,m,x,A,C,k){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),l!=null?C==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+Dr(l)):o.value!==""+Dr(l)&&(o.value=""+Dr(l)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),l!=null?M2(o,C,Dr(l)):h!=null?M2(o,C,Dr(h)):m!=null&&o.removeAttribute("value"),x==null&&A!=null&&(o.defaultChecked=!!A),x!=null&&(o.checked=x&&typeof x!="function"&&typeof x!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?o.name=""+Dr(k):o.removeAttribute("name")}function j5(o,l,h,m,x,A,C,k){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(o.type=A),l!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||l!=null)){$2(o);return}h=h!=null?""+Dr(h):"",l=l!=null?""+Dr(l):h,k||l===o.value||(o.value=l),o.defaultValue=l}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,o.checked=k?o.checked:!!m,o.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),$2(o)}function M2(o,l,h){l==="number"&&am(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Zc(o,l,h,m){if(o=o.options,l){l={};for(var x=0;x<h.length;x++)l["$"+h[x]]=!0;for(h=0;h<o.length;h++)x=l.hasOwnProperty("$"+o[h].value),o[h].selected!==x&&(o[h].selected=x),x&&m&&(o[h].defaultSelected=!0)}else{for(h=""+Dr(h),l=null,x=0;x<o.length;x++){if(o[x].value===h){o[x].selected=!0,m&&(o[x].defaultSelected=!0);return}l!==null||o[x].disabled||(l=o[x])}l!==null&&(l.selected=!0)}}function q5(o,l,h){if(l!=null&&(l=""+Dr(l),l!==o.value&&(o.value=l),h==null)){o.defaultValue!==l&&(o.defaultValue=l);return}o.defaultValue=h!=null?""+Dr(h):""}function I5(o,l,h,m){if(l==null){if(m!=null){if(h!=null)throw Error(i(92));if(z(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),l=h}h=Dr(l),o.defaultValue=h,m=o.textContent,m===h&&m!==""&&m!==null&&(o.value=m),$2(o)}function Kc(o,l){if(l){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=l;return}}o.textContent=l}var qX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function P5(o,l,h){var m=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?o.setProperty(l,""):l==="float"?o.cssFloat="":o[l]="":m?o.setProperty(l,h):typeof h!="number"||h===0||qX.has(l)?l==="float"?o.cssFloat=h:o[l]=(""+h).trim():o[l]=h+"px"}function H5(o,l,h){if(l!=null&&typeof l!="object")throw Error(i(62));if(o=o.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||l!=null&&l.hasOwnProperty(m)||(m.indexOf("--")===0?o.setProperty(m,""):m==="float"?o.cssFloat="":o[m]="");for(var x in l)m=l[x],l.hasOwnProperty(x)&&h[x]!==m&&P5(o,x,m)}else for(var A in l)l.hasOwnProperty(A)&&P5(o,A,l[A])}function F2(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sm(o){return PX.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Ms(){}var k2=null;function O2(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Jc=null,ef=null;function G5(o){var l=Vc(o);if(l&&(o=l.stateNode)){var h=o[ki]||null;e:switch(o=l.stateNode,l.type){case"input":if(T2(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+$r(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var m=h[l];if(m!==o&&m.form===o.form){var x=m[ki]||null;if(!x)throw Error(i(90));T2(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<h.length;l++)m=h[l],m.form===o.form&&U5(m)}break e;case"textarea":q5(o,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&Zc(o,!!h.multiple,l,!1)}}}var N2=!1;function Y5(o,l,h){if(N2)return o(l,h);N2=!0;try{var m=o(l);return m}finally{if(N2=!1,(Jc!==null||ef!==null)&&(Xm(),Jc&&(l=Jc,o=ef,ef=Jc=null,G5(l),o)))for(l=0;l<o.length;l++)G5(o[l])}}function Sh(o,l){var h=o.stateNode;if(h===null)return null;var m=h[ki]||null;if(m===null)return null;h=m[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,l,typeof h));return h}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R2=!1;if(Fs)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){R2=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{R2=!1}var Ro=null,z2=null,om=null;function X5(){if(om)return om;var o,l=z2,h=l.length,m,x="value"in Ro?Ro.value:Ro.textContent,A=x.length;for(o=0;o<h&&l[o]===x[o];o++);var C=h-o;for(m=1;m<=C&&l[h-m]===x[A-m];m++);return om=x.slice(o,1<m?1-m:void 0)}function um(o){var l=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&l===13&&(o=13)):o=l,o===10&&(o=13),32<=o||o===13?o:0}function lm(){return!0}function V5(){return!1}function Oi(o){function l(h,m,x,A,C){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=A,this.target=C,this.currentTarget=null;for(var k in o)o.hasOwnProperty(k)&&(h=o[k],this[k]=h?h(A):A[k]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?lm:V5,this.isPropagationStopped=V5,this}return g(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=lm)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=lm)},persist:function(){},isPersistent:lm}),l}var ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cm=Oi(ul),wh=g({},ul,{view:0,detail:0}),HX=Oi(wh),B2,L2,Ch,fm=g({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:j2,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ch&&(Ch&&o.type==="mousemove"?(B2=o.screenX-Ch.screenX,L2=o.screenY-Ch.screenY):L2=B2=0,Ch=o),B2)},movementY:function(o){return"movementY"in o?o.movementY:L2}}),W5=Oi(fm),GX=g({},fm,{dataTransfer:0}),YX=Oi(GX),XX=g({},wh,{relatedTarget:0}),U2=Oi(XX),VX=g({},ul,{animationName:0,elapsedTime:0,pseudoElement:0}),WX=Oi(VX),QX=g({},ul,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ZX=Oi(QX),KX=g({},ul,{data:0}),Q5=Oi(KX),JX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nV(o){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(o):(o=tV[o])?!!l[o]:!1}function j2(){return nV}var iV=g({},wh,{key:function(o){if(o.key){var l=JX[o.key]||o.key;if(l!=="Unidentified")return l}return o.type==="keypress"?(o=um(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?eV[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:j2,charCode:function(o){return o.type==="keypress"?um(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?um(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),rV=Oi(iV),aV=g({},fm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z5=Oi(aV),sV=g({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:j2}),oV=Oi(sV),uV=g({},ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),lV=Oi(uV),cV=g({},fm,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),fV=Oi(cV),dV=g({},ul,{newState:0,oldState:0}),hV=Oi(dV),gV=[9,13,27,32],q2=Fs&&"CompositionEvent"in window,Dh=null;Fs&&"documentMode"in document&&(Dh=document.documentMode);var pV=Fs&&"TextEvent"in window&&!Dh,K5=Fs&&(!q2||Dh&&8<Dh&&11>=Dh),J5=" ",eF=!1;function tF(o,l){switch(o){case"keyup":return gV.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nF(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var tf=!1;function mV(o,l){switch(o){case"compositionend":return nF(l);case"keypress":return l.which!==32?null:(eF=!0,J5);case"textInput":return o=l.data,o===J5&&eF?null:o;default:return null}}function yV(o,l){if(tf)return o==="compositionend"||!q2&&tF(o,l)?(o=X5(),om=z2=Ro=null,tf=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return K5&&l.locale!=="ko"?null:l.data;default:return null}}var vV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iF(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l==="input"?!!vV[o.type]:l==="textarea"}function rF(o,l,h,m){Jc?ef?ef.push(m):ef=[m]:Jc=m,l=e1(l,"onChange"),0<l.length&&(h=new cm("onChange","change",null,h,m),o.push({event:h,listeners:l}))}var $h=null,Th=null;function bV(o){j6(o,0)}function dm(o){var l=Ah(o);if(U5(l))return o}function aF(o,l){if(o==="change")return l}var sF=!1;if(Fs){var I2;if(Fs){var P2="oninput"in document;if(!P2){var oF=document.createElement("div");oF.setAttribute("oninput","return;"),P2=typeof oF.oninput=="function"}I2=P2}else I2=!1;sF=I2&&(!document.documentMode||9<document.documentMode)}function uF(){$h&&($h.detachEvent("onpropertychange",lF),Th=$h=null)}function lF(o){if(o.propertyName==="value"&&dm(Th)){var l=[];rF(l,Th,o,O2(o)),Y5(bV,l)}}function xV(o,l,h){o==="focusin"?(uF(),$h=l,Th=h,$h.attachEvent("onpropertychange",lF)):o==="focusout"&&uF()}function EV(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return dm(Th)}function AV(o,l){if(o==="click")return dm(l)}function SV(o,l){if(o==="input"||o==="change")return dm(l)}function _V(o,l){return o===l&&(o!==0||1/o===1/l)||o!==o&&l!==l}var sr=typeof Object.is=="function"?Object.is:_V;function Mh(o,l){if(sr(o,l))return!0;if(typeof o!="object"||o===null||typeof l!="object"||l===null)return!1;var h=Object.keys(o),m=Object.keys(l);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!x2.call(l,x)||!sr(o[x],l[x]))return!1}return!0}function cF(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function fF(o,l){var h=cF(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=l&&m>=l)return{node:h,offset:l-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=cF(h)}}function dF(o,l){return o&&l?o===l?!0:o&&o.nodeType===3?!1:l&&l.nodeType===3?dF(o,l.parentNode):"contains"in o?o.contains(l):o.compareDocumentPosition?!!(o.compareDocumentPosition(l)&16):!1:!1}function hF(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var l=am(o.document);l instanceof o.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)o=l.contentWindow;else break;l=am(o.document)}return l}function H2(o){var l=o&&o.nodeName&&o.nodeName.toLowerCase();return l&&(l==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||l==="textarea"||o.contentEditable==="true")}var wV=Fs&&"documentMode"in document&&11>=document.documentMode,nf=null,G2=null,Fh=null,Y2=!1;function gF(o,l,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Y2||nf==null||nf!==am(m)||(m=nf,"selectionStart"in m&&H2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fh&&Mh(Fh,m)||(Fh=m,m=e1(G2,"onSelect"),0<m.length&&(l=new cm("onSelect","select",null,l,h),o.push({event:l,listeners:m}),l.target=nf)))}function ll(o,l){var h={};return h[o.toLowerCase()]=l.toLowerCase(),h["Webkit"+o]="webkit"+l,h["Moz"+o]="moz"+l,h}var rf={animationend:ll("Animation","AnimationEnd"),animationiteration:ll("Animation","AnimationIteration"),animationstart:ll("Animation","AnimationStart"),transitionrun:ll("Transition","TransitionRun"),transitionstart:ll("Transition","TransitionStart"),transitioncancel:ll("Transition","TransitionCancel"),transitionend:ll("Transition","TransitionEnd")},X2={},pF={};Fs&&(pF=document.createElement("div").style,"AnimationEvent"in window||(delete rf.animationend.animation,delete rf.animationiteration.animation,delete rf.animationstart.animation),"TransitionEvent"in window||delete rf.transitionend.transition);function cl(o){if(X2[o])return X2[o];if(!rf[o])return o;var l=rf[o],h;for(h in l)if(l.hasOwnProperty(h)&&h in pF)return X2[o]=l[h];return o}var mF=cl("animationend"),yF=cl("animationiteration"),vF=cl("animationstart"),CV=cl("transitionrun"),DV=cl("transitionstart"),$V=cl("transitioncancel"),bF=cl("transitionend"),xF=new Map,V2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");V2.push("scrollEnd");function ia(o,l){xF.set(o,l),ol(l,[o])}var hm=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Tr=[],af=0,W2=0;function gm(){for(var o=af,l=W2=af=0;l<o;){var h=Tr[l];Tr[l++]=null;var m=Tr[l];Tr[l++]=null;var x=Tr[l];Tr[l++]=null;var A=Tr[l];if(Tr[l++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}A!==0&&EF(h,x,A)}}function pm(o,l,h,m){Tr[af++]=o,Tr[af++]=l,Tr[af++]=h,Tr[af++]=m,W2|=m,o.lanes|=m,o=o.alternate,o!==null&&(o.lanes|=m)}function Q2(o,l,h,m){return pm(o,l,h,m),mm(o)}function fl(o,l){return pm(o,null,null,l),mm(o)}function EF(o,l,h){o.lanes|=h;var m=o.alternate;m!==null&&(m.lanes|=h);for(var x=!1,A=o.return;A!==null;)A.childLanes|=h,m=A.alternate,m!==null&&(m.childLanes|=h),A.tag===22&&(o=A.stateNode,o===null||o._visibility&1||(x=!0)),o=A,A=A.return;return o.tag===3?(A=o.stateNode,x&&l!==null&&(x=31-ar(h),o=A.hiddenUpdates,m=o[x],m===null?o[x]=[l]:m.push(l),l.lane=h|536870912),A):null}function mm(o){if(50<Jh)throw Jh=0,aA=null,Error(i(185));for(var l=o.return;l!==null;)o=l,l=o.return;return o.tag===3?o.stateNode:null}var sf={};function TV(o,l,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(o,l,h,m){return new TV(o,l,h,m)}function Z2(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ks(o,l){var h=o.alternate;return h===null?(h=or(o.tag,l,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=l,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,l=o.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function AF(o,l){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=l,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,l=h.dependencies,o.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),o}function ym(o,l,h,m,x,A){var C=0;if(m=o,typeof o=="function")Z2(o)&&(C=1);else if(typeof o=="string")C=NW(o,h,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=or(31,h,l,x),o.elementType=N,o.lanes=A,o;case b:return dl(h.children,x,A,l);case E:C=8,x|=24;break;case S:return o=or(12,h,l,x|2),o.elementType=S,o.lanes=A,o;case T:return o=or(13,h,l,x),o.elementType=T,o.lanes=A,o;case M:return o=or(19,h,l,x),o.elementType=M,o.lanes=A,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case w:C=10;break e;case _:C=9;break e;case D:C=11;break e;case $:C=14;break e;case F:C=16,m=null;break e}C=29,h=Error(i(130,o===null?"null":typeof o,"")),m=null}return l=or(C,h,l,x),l.elementType=o,l.type=m,l.lanes=A,l}function dl(o,l,h,m){return o=or(7,o,m,l),o.lanes=h,o}function K2(o,l,h){return o=or(6,o,null,l),o.lanes=h,o}function SF(o){var l=or(18,null,null,0);return l.stateNode=o,l}function J2(o,l,h){return l=or(4,o.children!==null?o.children:[],o.key,l),l.lanes=h,l.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},l}var _F=new WeakMap;function Mr(o,l){if(typeof o=="object"&&o!==null){var h=_F.get(o);return h!==void 0?h:(l={value:o,source:l,stack:Ba(l)},_F.set(o,l),l)}return{value:o,source:l,stack:Ba(l)}}var of=[],uf=0,vm=null,kh=0,Fr=[],kr=0,zo=null,La=1,Ua="";function Os(o,l){of[uf++]=kh,of[uf++]=vm,vm=o,kh=l}function wF(o,l,h){Fr[kr++]=La,Fr[kr++]=Ua,Fr[kr++]=zo,zo=o;var m=La;o=Ua;var x=32-ar(m)-1;m&=~(1<<x),h+=1;var A=32-ar(l)+x;if(30<A){var C=x-x%5;A=(m&(1<<C)-1).toString(32),m>>=C,x-=C,La=1<<32-ar(l)+x|h<<x|m,Ua=A+o}else La=1<<A|h<<x|m,Ua=o}function eE(o){o.return!==null&&(Os(o,1),wF(o,1,0))}function tE(o){for(;o===vm;)vm=of[--uf],of[uf]=null,kh=of[--uf],of[uf]=null;for(;o===zo;)zo=Fr[--kr],Fr[kr]=null,Ua=Fr[--kr],Fr[kr]=null,La=Fr[--kr],Fr[kr]=null}function CF(o,l){Fr[kr++]=La,Fr[kr++]=Ua,Fr[kr++]=zo,La=l.id,Ua=l.overflow,zo=o}var zn=null,zt=null,rt=!1,Bo=null,Or=!1,nE=Error(i(519));function Lo(o){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oh(Mr(l,o)),nE}function DF(o){var l=o.stateNode,h=o.type,m=o.memoizedProps;switch(l[Rn]=o,l[ki]=m,h){case"dialog":Je("cancel",l),Je("close",l);break;case"iframe":case"object":case"embed":Je("load",l);break;case"video":case"audio":for(h=0;h<t0.length;h++)Je(t0[h],l);break;case"source":Je("error",l);break;case"img":case"image":case"link":Je("error",l),Je("load",l);break;case"details":Je("toggle",l);break;case"input":Je("invalid",l),j5(l,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Je("invalid",l);break;case"textarea":Je("invalid",l),I5(l,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||m.suppressHydrationWarning===!0||H6(l.textContent,h)?(m.popover!=null&&(Je("beforetoggle",l),Je("toggle",l)),m.onScroll!=null&&Je("scroll",l),m.onScrollEnd!=null&&Je("scrollend",l),m.onClick!=null&&(l.onclick=Ms),l=!0):l=!1,l||Lo(o,!0)}function $F(o){for(zn=o.return;zn;)switch(zn.tag){case 5:case 31:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:zn=zn.return}}function lf(o){if(o!==zn)return!1;if(!rt)return $F(o),rt=!0,!1;var l=o.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||xA(o.type,o.memoizedProps)),h=!h),h&&zt&&Lo(o),$F(o),l===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));zt=J6(o)}else if(l===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));zt=J6(o)}else l===27?(l=zt,Ko(o.type)?(o=wA,wA=null,zt=o):zt=l):zt=zn?Rr(o.stateNode.nextSibling):null;return!0}function hl(){zt=zn=null,rt=!1}function iE(){var o=Bo;return o!==null&&(Bi===null?Bi=o:Bi.push.apply(Bi,o),Bo=null),o}function Oh(o){Bo===null?Bo=[o]:Bo.push(o)}var rE=R(null),gl=null,Ns=null;function Uo(o,l,h){J(rE,l._currentValue),l._currentValue=h}function Rs(o){o._currentValue=rE.current,q(rE)}function aE(o,l,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&l)!==l?(o.childLanes|=l,m!==null&&(m.childLanes|=l)):m!==null&&(m.childLanes&l)!==l&&(m.childLanes|=l),o===h)break;o=o.return}}function sE(o,l,h,m){var x=o.child;for(x!==null&&(x.return=o);x!==null;){var A=x.dependencies;if(A!==null){var C=x.child;A=A.firstContext;e:for(;A!==null;){var k=A;A=x;for(var L=0;L<l.length;L++)if(k.context===l[L]){A.lanes|=h,k=A.alternate,k!==null&&(k.lanes|=h),aE(A.return,h,o),m||(C=null);break e}A=k.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=h,A=C.alternate,A!==null&&(A.lanes|=h),aE(C,h,o),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===o){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function cf(o,l,h,m){o=null;for(var x=l,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var k=x.type;sr(x.pendingProps.value,C.value)||(o!==null?o.push(k):o=[k])}}else if(x===Pe.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(o!==null?o.push(s0):o=[s0])}x=x.return}o!==null&&sE(l,o,h,m),l.flags|=262144}function bm(o){for(o=o.firstContext;o!==null;){if(!sr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function pl(o){gl=o,Ns=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Bn(o){return TF(gl,o)}function xm(o,l){return gl===null&&pl(o),TF(o,l)}function TF(o,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},Ns===null){if(o===null)throw Error(i(308));Ns=l,o.dependencies={lanes:0,firstContext:l},o.flags|=524288}else Ns=Ns.next=l;return h}var MV=typeof AbortController<"u"?AbortController:function(){var o=[],l=this.signal={aborted:!1,addEventListener:function(h,m){o.push(m)}};this.abort=function(){l.aborted=!0,o.forEach(function(h){return h()})}},FV=e.unstable_scheduleCallback,kV=e.unstable_NormalPriority,ln={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function oE(){return{controller:new MV,data:new Map,refCount:0}}function Nh(o){o.refCount--,o.refCount===0&&FV(kV,function(){o.controller.abort()})}var Rh=null,uE=0,ff=0,df=null;function OV(o,l){if(Rh===null){var h=Rh=[];uE=0,ff=fA(),df={status:"pending",value:void 0,then:function(m){h.push(m)}}}return uE++,l.then(MF,MF),l}function MF(){if(--uE===0&&Rh!==null){df!==null&&(df.status="fulfilled");var o=Rh;Rh=null,ff=0,df=null;for(var l=0;l<o.length;l++)(0,o[l])()}}function NV(o,l){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return o.then(function(){m.status="fulfilled",m.value=l;for(var x=0;x<h.length;x++)(0,h[x])(l)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var FF=O.S;O.S=function(o,l){g6=ir(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&OV(o,l),FF!==null&&FF(o,l)};var ml=R(null);function lE(){var o=ml.current;return o!==null?o:kt.pooledCache}function Em(o,l){l===null?J(ml,ml.current):J(ml,l.pool)}function kF(){var o=lE();return o===null?null:{parent:ln._currentValue,pool:o}}var hf=Error(i(460)),cE=Error(i(474)),Am=Error(i(542)),Sm={then:function(){}};function OF(o){return o=o.status,o==="fulfilled"||o==="rejected"}function NF(o,l,h){switch(h=o[h],h===void 0?o.push(l):h!==l&&(l.then(Ms,Ms),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,zF(o),o;default:if(typeof l.status=="string")l.then(Ms,Ms);else{if(o=kt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=l,o.status="pending",o.then(function(m){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=m}},function(m){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=m}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw o=l.reason,zF(o),o}throw vl=l,hf}}function yl(o){try{var l=o._init;return l(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(vl=h,hf):h}}var vl=null;function RF(){if(vl===null)throw Error(i(459));var o=vl;return vl=null,o}function zF(o){if(o===hf||o===Am)throw Error(i(483))}var gf=null,zh=0;function _m(o){var l=zh;return zh+=1,gf===null&&(gf=[]),NF(gf,o,l)}function Bh(o,l){l=l.props.ref,o.ref=l!==void 0?l:null}function wm(o,l){throw l.$$typeof===p?Error(i(525)):(o=Object.prototype.toString.call(l),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":o)))}function BF(o){function l(H,I){if(o){var W=H.deletions;W===null?(H.deletions=[I],H.flags|=16):W.push(I)}}function h(H,I){if(!o)return null;for(;I!==null;)l(H,I),I=I.sibling;return null}function m(H){for(var I=new Map;H!==null;)H.key!==null?I.set(H.key,H):I.set(H.index,H),H=H.sibling;return I}function x(H,I){return H=ks(H,I),H.index=0,H.sibling=null,H}function A(H,I,W){return H.index=W,o?(W=H.alternate,W!==null?(W=W.index,W<I?(H.flags|=67108866,I):W):(H.flags|=67108866,I)):(H.flags|=1048576,I)}function C(H){return o&&H.alternate===null&&(H.flags|=67108866),H}function k(H,I,W,oe){return I===null||I.tag!==6?(I=K2(W,H.mode,oe),I.return=H,I):(I=x(I,W),I.return=H,I)}function L(H,I,W,oe){var Ne=W.type;return Ne===b?ie(H,I,W.props.children,oe,W.key):I!==null&&(I.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===F&&yl(Ne)===I.type)?(I=x(I,W.props),Bh(I,W),I.return=H,I):(I=ym(W.type,W.key,W.props,null,H.mode,oe),Bh(I,W),I.return=H,I)}function Q(H,I,W,oe){return I===null||I.tag!==4||I.stateNode.containerInfo!==W.containerInfo||I.stateNode.implementation!==W.implementation?(I=J2(W,H.mode,oe),I.return=H,I):(I=x(I,W.children||[]),I.return=H,I)}function ie(H,I,W,oe,Ne){return I===null||I.tag!==7?(I=dl(W,H.mode,oe,Ne),I.return=H,I):(I=x(I,W),I.return=H,I)}function ue(H,I,W){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=K2(""+I,H.mode,W),I.return=H,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case y:return W=ym(I.type,I.key,I.props,null,H.mode,W),Bh(W,I),W.return=H,W;case v:return I=J2(I,H.mode,W),I.return=H,I;case F:return I=yl(I),ue(H,I,W)}if(z(I)||X(I))return I=dl(I,H.mode,W,null),I.return=H,I;if(typeof I.then=="function")return ue(H,_m(I),W);if(I.$$typeof===w)return ue(H,xm(H,I),W);wm(H,I)}return null}function Z(H,I,W,oe){var Ne=I!==null?I.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ne!==null?null:k(H,I,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case y:return W.key===Ne?L(H,I,W,oe):null;case v:return W.key===Ne?Q(H,I,W,oe):null;case F:return W=yl(W),Z(H,I,W,oe)}if(z(W)||X(W))return Ne!==null?null:ie(H,I,W,oe,null);if(typeof W.then=="function")return Z(H,I,_m(W),oe);if(W.$$typeof===w)return Z(H,I,xm(H,W),oe);wm(H,W)}return null}function K(H,I,W,oe,Ne){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return H=H.get(W)||null,k(I,H,""+oe,Ne);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case y:return H=H.get(oe.key===null?W:oe.key)||null,L(I,H,oe,Ne);case v:return H=H.get(oe.key===null?W:oe.key)||null,Q(I,H,oe,Ne);case F:return oe=yl(oe),K(H,I,W,oe,Ne)}if(z(oe)||X(oe))return H=H.get(W)||null,ie(I,H,oe,Ne,null);if(typeof oe.then=="function")return K(H,I,W,_m(oe),Ne);if(oe.$$typeof===w)return K(H,I,W,xm(I,oe),Ne);wm(I,oe)}return null}function we(H,I,W,oe){for(var Ne=null,ut=null,$e=I,Ve=I=0,tt=null;$e!==null&&Ve<W.length;Ve++){$e.index>Ve?(tt=$e,$e=null):tt=$e.sibling;var lt=Z(H,$e,W[Ve],oe);if(lt===null){$e===null&&($e=tt);break}o&&$e&&lt.alternate===null&&l(H,$e),I=A(lt,I,Ve),ut===null?Ne=lt:ut.sibling=lt,ut=lt,$e=tt}if(Ve===W.length)return h(H,$e),rt&&Os(H,Ve),Ne;if($e===null){for(;Ve<W.length;Ve++)$e=ue(H,W[Ve],oe),$e!==null&&(I=A($e,I,Ve),ut===null?Ne=$e:ut.sibling=$e,ut=$e);return rt&&Os(H,Ve),Ne}for($e=m($e);Ve<W.length;Ve++)tt=K($e,H,Ve,W[Ve],oe),tt!==null&&(o&&tt.alternate!==null&&$e.delete(tt.key===null?Ve:tt.key),I=A(tt,I,Ve),ut===null?Ne=tt:ut.sibling=tt,ut=tt);return o&&$e.forEach(function(iu){return l(H,iu)}),rt&&Os(H,Ve),Ne}function Ue(H,I,W,oe){if(W==null)throw Error(i(151));for(var Ne=null,ut=null,$e=I,Ve=I=0,tt=null,lt=W.next();$e!==null&&!lt.done;Ve++,lt=W.next()){$e.index>Ve?(tt=$e,$e=null):tt=$e.sibling;var iu=Z(H,$e,lt.value,oe);if(iu===null){$e===null&&($e=tt);break}o&&$e&&iu.alternate===null&&l(H,$e),I=A(iu,I,Ve),ut===null?Ne=iu:ut.sibling=iu,ut=iu,$e=tt}if(lt.done)return h(H,$e),rt&&Os(H,Ve),Ne;if($e===null){for(;!lt.done;Ve++,lt=W.next())lt=ue(H,lt.value,oe),lt!==null&&(I=A(lt,I,Ve),ut===null?Ne=lt:ut.sibling=lt,ut=lt);return rt&&Os(H,Ve),Ne}for($e=m($e);!lt.done;Ve++,lt=W.next())lt=K($e,H,Ve,lt.value,oe),lt!==null&&(o&&lt.alternate!==null&&$e.delete(lt.key===null?Ve:lt.key),I=A(lt,I,Ve),ut===null?Ne=lt:ut.sibling=lt,ut=lt);return o&&$e.forEach(function(GW){return l(H,GW)}),rt&&Os(H,Ve),Ne}function Dt(H,I,W,oe){if(typeof W=="object"&&W!==null&&W.type===b&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case y:e:{for(var Ne=W.key;I!==null;){if(I.key===Ne){if(Ne=W.type,Ne===b){if(I.tag===7){h(H,I.sibling),oe=x(I,W.props.children),oe.return=H,H=oe;break e}}else if(I.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===F&&yl(Ne)===I.type){h(H,I.sibling),oe=x(I,W.props),Bh(oe,W),oe.return=H,H=oe;break e}h(H,I);break}else l(H,I);I=I.sibling}W.type===b?(oe=dl(W.props.children,H.mode,oe,W.key),oe.return=H,H=oe):(oe=ym(W.type,W.key,W.props,null,H.mode,oe),Bh(oe,W),oe.return=H,H=oe)}return C(H);case v:e:{for(Ne=W.key;I!==null;){if(I.key===Ne)if(I.tag===4&&I.stateNode.containerInfo===W.containerInfo&&I.stateNode.implementation===W.implementation){h(H,I.sibling),oe=x(I,W.children||[]),oe.return=H,H=oe;break e}else{h(H,I);break}else l(H,I);I=I.sibling}oe=J2(W,H.mode,oe),oe.return=H,H=oe}return C(H);case F:return W=yl(W),Dt(H,I,W,oe)}if(z(W))return we(H,I,W,oe);if(X(W)){if(Ne=X(W),typeof Ne!="function")throw Error(i(150));return W=Ne.call(W),Ue(H,I,W,oe)}if(typeof W.then=="function")return Dt(H,I,_m(W),oe);if(W.$$typeof===w)return Dt(H,I,xm(H,W),oe);wm(H,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,I!==null&&I.tag===6?(h(H,I.sibling),oe=x(I,W),oe.return=H,H=oe):(h(H,I),oe=K2(W,H.mode,oe),oe.return=H,H=oe),C(H)):h(H,I)}return function(H,I,W,oe){try{zh=0;var Ne=Dt(H,I,W,oe);return gf=null,Ne}catch($e){if($e===hf||$e===Am)throw $e;var ut=or(29,$e,null,H.mode);return ut.lanes=oe,ut.return=H,ut}finally{}}}var bl=BF(!0),LF=BF(!1),jo=!1;function fE(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dE(o,l){o=o.updateQueue,l.updateQueue===o&&(l.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function qo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Io(o,l,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,(pt&2)!==0){var x=m.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),m.pending=l,l=mm(o),EF(o,null,h),l}return pm(o,m,l,h),mm(o)}function Lh(o,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var m=l.lanes;m&=o.pendingLanes,h|=m,l.lanes=h,T5(o,h)}}function hE(o,l){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var C={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?x=A=C:A=A.next=C,h=h.next}while(h!==null);A===null?x=A=l:A=A.next=l}else x=A=l;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=l:o.next=l,h.lastBaseUpdate=l}var gE=!1;function Uh(){if(gE){var o=df;if(o!==null)throw o}}function jh(o,l,h,m){gE=!1;var x=o.updateQueue;jo=!1;var A=x.firstBaseUpdate,C=x.lastBaseUpdate,k=x.shared.pending;if(k!==null){x.shared.pending=null;var L=k,Q=L.next;L.next=null,C===null?A=Q:C.next=Q,C=L;var ie=o.alternate;ie!==null&&(ie=ie.updateQueue,k=ie.lastBaseUpdate,k!==C&&(k===null?ie.firstBaseUpdate=Q:k.next=Q,ie.lastBaseUpdate=L))}if(A!==null){var ue=x.baseState;C=0,ie=Q=L=null,k=A;do{var Z=k.lane&-536870913,K=Z!==k.lane;if(K?(et&Z)===Z:(m&Z)===Z){Z!==0&&Z===ff&&(gE=!0),ie!==null&&(ie=ie.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var we=o,Ue=k;Z=l;var Dt=h;switch(Ue.tag){case 1:if(we=Ue.payload,typeof we=="function"){ue=we.call(Dt,ue,Z);break e}ue=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ue.payload,Z=typeof we=="function"?we.call(Dt,ue,Z):we,Z==null)break e;ue=g({},ue,Z);break e;case 2:jo=!0}}Z=k.callback,Z!==null&&(o.flags|=64,K&&(o.flags|=8192),K=x.callbacks,K===null?x.callbacks=[Z]:K.push(Z))}else K={lane:Z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},ie===null?(Q=ie=K,L=ue):ie=ie.next=K,C|=Z;if(k=k.next,k===null){if(k=x.shared.pending,k===null)break;K=k,k=K.next,K.next=null,x.lastBaseUpdate=K,x.shared.pending=null}}while(!0);ie===null&&(L=ue),x.baseState=L,x.firstBaseUpdate=Q,x.lastBaseUpdate=ie,A===null&&(x.shared.lanes=0),Xo|=C,o.lanes=C,o.memoizedState=ue}}function UF(o,l){if(typeof o!="function")throw Error(i(191,o));o.call(l)}function jF(o,l){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)UF(h[o],l)}var pf=R(null),Cm=R(0);function qF(o,l){o=Hs,J(Cm,o),J(pf,l),Hs=o|l.baseLanes}function pE(){J(Cm,Hs),J(pf,pf.current)}function mE(){Hs=Cm.current,q(pf),q(Cm)}var ur=R(null),Nr=null;function Po(o){var l=o.alternate;J(nn,nn.current&1),J(ur,o),Nr===null&&(l===null||pf.current!==null||l.memoizedState!==null)&&(Nr=o)}function yE(o){J(nn,nn.current),J(ur,o),Nr===null&&(Nr=o)}function IF(o){o.tag===22?(J(nn,nn.current),J(ur,o),Nr===null&&(Nr=o)):Ho()}function Ho(){J(nn,nn.current),J(ur,ur.current)}function lr(o){q(ur),Nr===o&&(Nr=null),q(nn)}var nn=R(0);function Dm(o){for(var l=o;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||SA(h)||_A(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var zs=0,He=null,wt=null,cn=null,$m=!1,mf=!1,xl=!1,Tm=0,qh=0,yf=null,RV=0;function Qt(){throw Error(i(321))}function vE(o,l){if(l===null)return!1;for(var h=0;h<l.length&&h<o.length;h++)if(!sr(o[h],l[h]))return!1;return!0}function bE(o,l,h,m,x,A){return zs=A,He=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,O.H=o===null||o.memoizedState===null?wk:NE,xl=!1,A=h(m,x),xl=!1,mf&&(A=HF(l,h,m,x)),PF(o),A}function PF(o){O.H=Hh;var l=wt!==null&&wt.next!==null;if(zs=0,cn=wt=He=null,$m=!1,qh=0,yf=null,l)throw Error(i(300));o===null||fn||(o=o.dependencies,o!==null&&bm(o)&&(fn=!0))}function HF(o,l,h,m){He=o;var x=0;do{if(mf&&(yf=null),qh=0,mf=!1,25<=x)throw Error(i(301));if(x+=1,cn=wt=null,o.updateQueue!=null){var A=o.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}O.H=Ck,A=l(h,m)}while(mf);return A}function zV(){var o=O.H,l=o.useState()[0];return l=typeof l.then=="function"?Ih(l):l,o=o.useState()[0],(wt!==null?wt.memoizedState:null)!==o&&(He.flags|=1024),l}function xE(){var o=Tm!==0;return Tm=0,o}function EE(o,l,h){l.updateQueue=o.updateQueue,l.flags&=-2053,o.lanes&=~h}function AE(o){if($m){for(o=o.memoizedState;o!==null;){var l=o.queue;l!==null&&(l.pending=null),o=o.next}$m=!1}zs=0,cn=wt=He=null,mf=!1,qh=Tm=0,yf=null}function gi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cn===null?He.memoizedState=cn=o:cn=cn.next=o,cn}function rn(){if(wt===null){var o=He.alternate;o=o!==null?o.memoizedState:null}else o=wt.next;var l=cn===null?He.memoizedState:cn.next;if(l!==null)cn=l,wt=o;else{if(o===null)throw He.alternate===null?Error(i(467)):Error(i(310));wt=o,o={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},cn===null?He.memoizedState=cn=o:cn=cn.next=o}return cn}function Mm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ih(o){var l=qh;return qh+=1,yf===null&&(yf=[]),o=NF(yf,o,l),l=He,(cn===null?l.memoizedState:cn.next)===null&&(l=l.alternate,O.H=l===null||l.memoizedState===null?wk:NE),o}function Fm(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ih(o);if(o.$$typeof===w)return Bn(o)}throw Error(i(438,String(o)))}function SE(o){var l=null,h=He.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var m=He.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(l={data:m.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=Mm(),He.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(o),m=0;m<o;m++)h[m]=U;return l.index++,h}function Bs(o,l){return typeof l=="function"?l(o):l}function km(o){var l=rn();return _E(l,wt,o)}function _E(o,l,h){var m=o.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=o.baseQueue,A=m.pending;if(A!==null){if(x!==null){var C=x.next;x.next=A.next,A.next=C}l.baseQueue=x=A,m.pending=null}if(A=o.baseState,x===null)o.memoizedState=A;else{l=x.next;var k=C=null,L=null,Q=l,ie=!1;do{var ue=Q.lane&-536870913;if(ue!==Q.lane?(et&ue)===ue:(zs&ue)===ue){var Z=Q.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),ue===ff&&(ie=!0);else if((zs&Z)===Z){Q=Q.next,Z===ff&&(ie=!0);continue}else ue={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(k=L=ue,C=A):L=L.next=ue,He.lanes|=Z,Xo|=Z;ue=Q.action,xl&&h(A,ue),A=Q.hasEagerState?Q.eagerState:h(A,ue)}else Z={lane:ue,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(k=L=Z,C=A):L=L.next=Z,He.lanes|=ue,Xo|=ue;Q=Q.next}while(Q!==null&&Q!==l);if(L===null?C=A:L.next=k,!sr(A,o.memoizedState)&&(fn=!0,ie&&(h=df,h!==null)))throw h;o.memoizedState=A,o.baseState=C,o.baseQueue=L,m.lastRenderedState=A}return x===null&&(m.lanes=0),[o.memoizedState,m.dispatch]}function wE(o){var l=rn(),h=l.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=h.dispatch,x=h.pending,A=l.memoizedState;if(x!==null){h.pending=null;var C=x=x.next;do A=o(A,C.action),C=C.next;while(C!==x);sr(A,l.memoizedState)||(fn=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),h.lastRenderedState=A}return[A,m]}function GF(o,l,h){var m=He,x=rn(),A=rt;if(A){if(h===void 0)throw Error(i(407));h=h()}else h=l();var C=!sr((wt||x).memoizedState,h);if(C&&(x.memoizedState=h,fn=!0),x=x.queue,$E(VF.bind(null,m,x,o),[o]),x.getSnapshot!==l||C||cn!==null&&cn.memoizedState.tag&1){if(m.flags|=2048,vf(9,{destroy:void 0},XF.bind(null,m,x,h,l),null),kt===null)throw Error(i(349));A||(zs&127)!==0||YF(m,l,h)}return h}function YF(o,l,h){o.flags|=16384,o={getSnapshot:l,value:h},l=He.updateQueue,l===null?(l=Mm(),He.updateQueue=l,l.stores=[o]):(h=l.stores,h===null?l.stores=[o]:h.push(o))}function XF(o,l,h,m){l.value=h,l.getSnapshot=m,WF(l)&&QF(o)}function VF(o,l,h){return h(function(){WF(l)&&QF(o)})}function WF(o){var l=o.getSnapshot;o=o.value;try{var h=l();return!sr(o,h)}catch{return!0}}function QF(o){var l=fl(o,2);l!==null&&Li(l,o,2)}function CE(o){var l=gi();if(typeof o=="function"){var h=o;if(o=h(),xl){Oo(!0);try{h()}finally{Oo(!1)}}}return l.memoizedState=l.baseState=o,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:o},l}function ZF(o,l,h,m){return o.baseState=h,_E(o,wt,typeof m=="function"?m:Bs)}function BV(o,l,h,m,x){if(Rm(o))throw Error(i(485));if(o=l.action,o!==null){var A={payload:x,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){A.listeners.push(C)}};O.T!==null?h(!0):A.isTransition=!1,m(A),h=l.pending,h===null?(A.next=l.pending=A,KF(l,A)):(A.next=h.next,l.pending=h.next=A)}}function KF(o,l){var h=l.action,m=l.payload,x=o.state;if(l.isTransition){var A=O.T,C={};O.T=C;try{var k=h(x,m),L=O.S;L!==null&&L(C,k),JF(o,l,k)}catch(Q){DE(o,l,Q)}finally{A!==null&&C.types!==null&&(A.types=C.types),O.T=A}}else try{A=h(x,m),JF(o,l,A)}catch(Q){DE(o,l,Q)}}function JF(o,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){ek(o,l,m)},function(m){return DE(o,l,m)}):ek(o,l,h)}function ek(o,l,h){l.status="fulfilled",l.value=h,tk(l),o.state=h,l=o.pending,l!==null&&(h=l.next,h===l?o.pending=null:(h=h.next,l.next=h,KF(o,h)))}function DE(o,l,h){var m=o.pending;if(o.pending=null,m!==null){m=m.next;do l.status="rejected",l.reason=h,tk(l),l=l.next;while(l!==m)}o.action=null}function tk(o){o=o.listeners;for(var l=0;l<o.length;l++)(0,o[l])()}function nk(o,l){return l}function ik(o,l){if(rt){var h=kt.formState;if(h!==null){e:{var m=He;if(rt){if(zt){t:{for(var x=zt,A=Or;x.nodeType!==8;){if(!A){x=null;break t}if(x=Rr(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){zt=Rr(x.nextSibling),m=x.data==="F!";break e}}Lo(m)}m=!1}m&&(l=h[0])}}return h=gi(),h.memoizedState=h.baseState=l,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nk,lastRenderedState:l},h.queue=m,h=Ak.bind(null,He,m),m.dispatch=h,m=CE(!1),A=OE.bind(null,He,!1,m.queue),m=gi(),x={state:l,dispatch:null,action:o,pending:null},m.queue=x,h=BV.bind(null,He,x,A,h),x.dispatch=h,m.memoizedState=o,[l,h,!1]}function rk(o){var l=rn();return ak(l,wt,o)}function ak(o,l,h){if(l=_E(o,l,nk)[0],o=km(Bs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var m=Ih(l)}catch(C){throw C===hf?Am:C}else m=l;l=rn();var x=l.queue,A=x.dispatch;return h!==l.memoizedState&&(He.flags|=2048,vf(9,{destroy:void 0},LV.bind(null,x,h),null)),[m,A,o]}function LV(o,l){o.action=l}function sk(o){var l=rn(),h=wt;if(h!==null)return ak(l,h,o);rn(),l=l.memoizedState,h=rn();var m=h.queue.dispatch;return h.memoizedState=o,[l,m,!1]}function vf(o,l,h,m){return o={tag:o,create:h,deps:m,inst:l,next:null},l=He.updateQueue,l===null&&(l=Mm(),He.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,l.lastEffect=o),o}function ok(){return rn().memoizedState}function Om(o,l,h,m){var x=gi();He.flags|=o,x.memoizedState=vf(1|l,{destroy:void 0},h,m===void 0?null:m)}function Nm(o,l,h,m){var x=rn();m=m===void 0?null:m;var A=x.memoizedState.inst;wt!==null&&m!==null&&vE(m,wt.memoizedState.deps)?x.memoizedState=vf(l,A,h,m):(He.flags|=o,x.memoizedState=vf(1|l,A,h,m))}function uk(o,l){Om(8390656,8,o,l)}function $E(o,l){Nm(2048,8,o,l)}function UV(o){He.flags|=4;var l=He.updateQueue;if(l===null)l=Mm(),He.updateQueue=l,l.events=[o];else{var h=l.events;h===null?l.events=[o]:h.push(o)}}function lk(o){var l=rn().memoizedState;return UV({ref:l,nextImpl:o}),function(){if((pt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function ck(o,l){return Nm(4,2,o,l)}function fk(o,l){return Nm(4,4,o,l)}function dk(o,l){if(typeof l=="function"){o=o();var h=l(o);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return o=o(),l.current=o,function(){l.current=null}}function hk(o,l,h){h=h!=null?h.concat([o]):null,Nm(4,4,dk.bind(null,l,o),h)}function TE(){}function gk(o,l){var h=rn();l=l===void 0?null:l;var m=h.memoizedState;return l!==null&&vE(l,m[1])?m[0]:(h.memoizedState=[o,l],o)}function pk(o,l){var h=rn();l=l===void 0?null:l;var m=h.memoizedState;if(l!==null&&vE(l,m[1]))return m[0];if(m=o(),xl){Oo(!0);try{o()}finally{Oo(!1)}}return h.memoizedState=[m,l],m}function ME(o,l,h){return h===void 0||(zs&1073741824)!==0&&(et&261930)===0?o.memoizedState=l:(o.memoizedState=h,o=m6(),He.lanes|=o,Xo|=o,h)}function mk(o,l,h,m){return sr(h,l)?h:pf.current!==null?(o=ME(o,h,m),sr(o,l)||(fn=!0),o):(zs&42)===0||(zs&1073741824)!==0&&(et&261930)===0?(fn=!0,o.memoizedState=h):(o=m6(),He.lanes|=o,Xo|=o,l)}function yk(o,l,h,m,x){var A=j.p;j.p=A!==0&&8>A?A:8;var C=O.T,k={};O.T=k,OE(o,!1,l,h);try{var L=x(),Q=O.S;if(Q!==null&&Q(k,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ie=NV(L,m);Ph(o,l,ie,dr(o))}else Ph(o,l,m,dr(o))}catch(ue){Ph(o,l,{then:function(){},status:"rejected",reason:ue},dr())}finally{j.p=A,C!==null&&k.types!==null&&(C.types=k.types),O.T=C}}function jV(){}function FE(o,l,h,m){if(o.tag!==5)throw Error(i(476));var x=vk(o).queue;yk(o,x,l,Y,h===null?jV:function(){return bk(o),h(m)})}function vk(o){var l=o.memoizedState;if(l!==null)return l;l={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:Y},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:h},next:null},o.memoizedState=l,o=o.alternate,o!==null&&(o.memoizedState=l),l}function bk(o){var l=vk(o);l.next===null&&(l=o.alternate.memoizedState),Ph(o,l.next.queue,{},dr())}function kE(){return Bn(s0)}function xk(){return rn().memoizedState}function Ek(){return rn().memoizedState}function qV(o){for(var l=o.return;l!==null;){switch(l.tag){case 24:case 3:var h=dr();o=qo(h);var m=Io(l,o,h);m!==null&&(Li(m,l,h),Lh(m,l,h)),l={cache:oE()},o.payload=l;return}l=l.return}}function IV(o,l,h){var m=dr();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Rm(o)?Sk(l,h):(h=Q2(o,l,h,m),h!==null&&(Li(h,o,m),_k(h,l,m)))}function Ak(o,l,h){var m=dr();Ph(o,l,h,m)}function Ph(o,l,h,m){var x={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Rm(o))Sk(l,x);else{var A=o.alternate;if(o.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var C=l.lastRenderedState,k=A(C,h);if(x.hasEagerState=!0,x.eagerState=k,sr(k,C))return pm(o,l,x,0),kt===null&&gm(),!1}catch{}finally{}if(h=Q2(o,l,x,m),h!==null)return Li(h,o,m),_k(h,l,m),!0}return!1}function OE(o,l,h,m){if(m={lane:2,revertLane:fA(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Rm(o)){if(l)throw Error(i(479))}else l=Q2(o,h,m,2),l!==null&&Li(l,o,2)}function Rm(o){var l=o.alternate;return o===He||l!==null&&l===He}function Sk(o,l){mf=$m=!0;var h=o.pending;h===null?l.next=l:(l.next=h.next,h.next=l),o.pending=l}function _k(o,l,h){if((h&4194048)!==0){var m=l.lanes;m&=o.pendingLanes,h|=m,l.lanes=h,T5(o,h)}}var Hh={readContext:Bn,use:Fm,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useLayoutEffect:Qt,useInsertionEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useSyncExternalStore:Qt,useId:Qt,useHostTransitionStatus:Qt,useFormState:Qt,useActionState:Qt,useOptimistic:Qt,useMemoCache:Qt,useCacheRefresh:Qt};Hh.useEffectEvent=Qt;var wk={readContext:Bn,use:Fm,useCallback:function(o,l){return gi().memoizedState=[o,l===void 0?null:l],o},useContext:Bn,useEffect:uk,useImperativeHandle:function(o,l,h){h=h!=null?h.concat([o]):null,Om(4194308,4,dk.bind(null,l,o),h)},useLayoutEffect:function(o,l){return Om(4194308,4,o,l)},useInsertionEffect:function(o,l){Om(4,2,o,l)},useMemo:function(o,l){var h=gi();l=l===void 0?null:l;var m=o();if(xl){Oo(!0);try{o()}finally{Oo(!1)}}return h.memoizedState=[m,l],m},useReducer:function(o,l,h){var m=gi();if(h!==void 0){var x=h(l);if(xl){Oo(!0);try{h(l)}finally{Oo(!1)}}}else x=l;return m.memoizedState=m.baseState=x,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:x},m.queue=o,o=o.dispatch=IV.bind(null,He,o),[m.memoizedState,o]},useRef:function(o){var l=gi();return o={current:o},l.memoizedState=o},useState:function(o){o=CE(o);var l=o.queue,h=Ak.bind(null,He,l);return l.dispatch=h,[o.memoizedState,h]},useDebugValue:TE,useDeferredValue:function(o,l){var h=gi();return ME(h,o,l)},useTransition:function(){var o=CE(!1);return o=yk.bind(null,He,o.queue,!0,!1),gi().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,l,h){var m=He,x=gi();if(rt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=l(),kt===null)throw Error(i(349));(et&127)!==0||YF(m,l,h)}x.memoizedState=h;var A={value:h,getSnapshot:l};return x.queue=A,uk(VF.bind(null,m,A,o),[o]),m.flags|=2048,vf(9,{destroy:void 0},XF.bind(null,m,A,h,l),null),h},useId:function(){var o=gi(),l=kt.identifierPrefix;if(rt){var h=Ua,m=La;h=(m&~(1<<32-ar(m)-1)).toString(32)+h,l="_"+l+"R_"+h,h=Tm++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=RV++,l="_"+l+"r_"+h.toString(32)+"_";return o.memoizedState=l},useHostTransitionStatus:kE,useFormState:ik,useActionState:ik,useOptimistic:function(o){var l=gi();l.memoizedState=l.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=OE.bind(null,He,!0,h),h.dispatch=l,[o,l]},useMemoCache:SE,useCacheRefresh:function(){return gi().memoizedState=qV.bind(null,He)},useEffectEvent:function(o){var l=gi(),h={impl:o};return l.memoizedState=h,function(){if((pt&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},NE={readContext:Bn,use:Fm,useCallback:gk,useContext:Bn,useEffect:$E,useImperativeHandle:hk,useInsertionEffect:ck,useLayoutEffect:fk,useMemo:pk,useReducer:km,useRef:ok,useState:function(){return km(Bs)},useDebugValue:TE,useDeferredValue:function(o,l){var h=rn();return mk(h,wt.memoizedState,o,l)},useTransition:function(){var o=km(Bs)[0],l=rn().memoizedState;return[typeof o=="boolean"?o:Ih(o),l]},useSyncExternalStore:GF,useId:xk,useHostTransitionStatus:kE,useFormState:rk,useActionState:rk,useOptimistic:function(o,l){var h=rn();return ZF(h,wt,o,l)},useMemoCache:SE,useCacheRefresh:Ek};NE.useEffectEvent=lk;var Ck={readContext:Bn,use:Fm,useCallback:gk,useContext:Bn,useEffect:$E,useImperativeHandle:hk,useInsertionEffect:ck,useLayoutEffect:fk,useMemo:pk,useReducer:wE,useRef:ok,useState:function(){return wE(Bs)},useDebugValue:TE,useDeferredValue:function(o,l){var h=rn();return wt===null?ME(h,o,l):mk(h,wt.memoizedState,o,l)},useTransition:function(){var o=wE(Bs)[0],l=rn().memoizedState;return[typeof o=="boolean"?o:Ih(o),l]},useSyncExternalStore:GF,useId:xk,useHostTransitionStatus:kE,useFormState:sk,useActionState:sk,useOptimistic:function(o,l){var h=rn();return wt!==null?ZF(h,wt,o,l):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:SE,useCacheRefresh:Ek};Ck.useEffectEvent=lk;function RE(o,l,h,m){l=o.memoizedState,h=h(m,l),h=h==null?l:g({},l,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var zE={enqueueSetState:function(o,l,h){o=o._reactInternals;var m=dr(),x=qo(m);x.payload=l,h!=null&&(x.callback=h),l=Io(o,x,m),l!==null&&(Li(l,o,m),Lh(l,o,m))},enqueueReplaceState:function(o,l,h){o=o._reactInternals;var m=dr(),x=qo(m);x.tag=1,x.payload=l,h!=null&&(x.callback=h),l=Io(o,x,m),l!==null&&(Li(l,o,m),Lh(l,o,m))},enqueueForceUpdate:function(o,l){o=o._reactInternals;var h=dr(),m=qo(h);m.tag=2,l!=null&&(m.callback=l),l=Io(o,m,h),l!==null&&(Li(l,o,h),Lh(l,o,h))}};function Dk(o,l,h,m,x,A,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,A,C):l.prototype&&l.prototype.isPureReactComponent?!Mh(h,m)||!Mh(x,A):!0}function $k(o,l,h,m){o=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,m),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,m),l.state!==o&&zE.enqueueReplaceState(l,l.state,null)}function El(o,l){var h=l;if("ref"in l){h={};for(var m in l)m!=="ref"&&(h[m]=l[m])}if(o=o.defaultProps){h===l&&(h=g({},h));for(var x in o)h[x]===void 0&&(h[x]=o[x])}return h}function Tk(o){hm(o)}function Mk(o){console.error(o)}function Fk(o){hm(o)}function zm(o,l){try{var h=o.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(m){setTimeout(function(){throw m})}}function kk(o,l,h){try{var m=o.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function BE(o,l,h){return h=qo(h),h.tag=3,h.payload={element:null},h.callback=function(){zm(o,l)},h}function Ok(o){return o=qo(o),o.tag=3,o}function Nk(o,l,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var A=m.value;o.payload=function(){return x(A)},o.callback=function(){kk(l,h,m)}}var C=h.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){kk(l,h,m),typeof x!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function PV(o,l,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(l=h.alternate,l!==null&&cf(l,h,x,!0),h=ur.current,h!==null){switch(h.tag){case 31:case 13:return Nr===null?Vm():h.alternate===null&&Zt===0&&(Zt=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===Sm?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([m]):l.add(m),uA(o,m,x)),!1;case 22:return h.flags|=65536,m===Sm?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([m]):h.add(m)),uA(o,m,x)),!1}throw Error(i(435,h.tag))}return uA(o,m,x),Vm(),!1}if(rt)return l=ur.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,m!==nE&&(o=Error(i(422),{cause:m}),Oh(Mr(o,h)))):(m!==nE&&(l=Error(i(423),{cause:m}),Oh(Mr(l,h))),o=o.current.alternate,o.flags|=65536,x&=-x,o.lanes|=x,m=Mr(m,h),x=BE(o.stateNode,m,x),hE(o,x),Zt!==4&&(Zt=2)),!1;var A=Error(i(520),{cause:m});if(A=Mr(A,h),Kh===null?Kh=[A]:Kh.push(A),Zt!==4&&(Zt=2),l===null)return!0;m=Mr(m,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,o=x&-x,h.lanes|=o,o=BE(h.stateNode,m,o),hE(h,o),!1;case 1:if(l=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Vo===null||!Vo.has(A))))return h.flags|=65536,x&=-x,h.lanes|=x,x=Ok(x),Nk(x,o,h,m),hE(h,x),!1}h=h.return}while(h!==null);return!1}var LE=Error(i(461)),fn=!1;function Ln(o,l,h,m){l.child=o===null?LF(l,null,h,m):bl(l,o.child,h,m)}function Rk(o,l,h,m,x){h=h.render;var A=l.ref;if("ref"in m){var C={};for(var k in m)k!=="ref"&&(C[k]=m[k])}else C=m;return pl(l),m=bE(o,l,h,C,A,x),k=xE(),o!==null&&!fn?(EE(o,l,x),Ls(o,l,x)):(rt&&k&&eE(l),l.flags|=1,Ln(o,l,m,x),l.child)}function zk(o,l,h,m,x){if(o===null){var A=h.type;return typeof A=="function"&&!Z2(A)&&A.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=A,Bk(o,l,A,m,x)):(o=ym(h.type,null,m,l,l.mode,x),o.ref=l.ref,o.return=l,l.child=o)}if(A=o.child,!YE(o,x)){var C=A.memoizedProps;if(h=h.compare,h=h!==null?h:Mh,h(C,m)&&o.ref===l.ref)return Ls(o,l,x)}return l.flags|=1,o=ks(A,m),o.ref=l.ref,o.return=l,l.child=o}function Bk(o,l,h,m,x){if(o!==null){var A=o.memoizedProps;if(Mh(A,m)&&o.ref===l.ref)if(fn=!1,l.pendingProps=m=A,YE(o,x))(o.flags&131072)!==0&&(fn=!0);else return l.lanes=o.lanes,Ls(o,l,x)}return UE(o,l,h,m,x)}function Lk(o,l,h,m){var x=m.children,A=o!==null?o.memoizedState:null;if(o===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((l.flags&128)!==0){if(A=A!==null?A.baseLanes|h:h,o!==null){for(m=l.child=o.child,x=0;m!==null;)x=x|m.lanes|m.childLanes,m=m.sibling;m=x&~A}else m=0,l.child=null;return Uk(o,l,A,h,m)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},o!==null&&Em(l,A!==null?A.cachePool:null),A!==null?qF(l,A):pE(),IF(l);else return m=l.lanes=536870912,Uk(o,l,A!==null?A.baseLanes|h:h,h,m)}else A!==null?(Em(l,A.cachePool),qF(l,A),Ho(),l.memoizedState=null):(o!==null&&Em(l,null),pE(),Ho());return Ln(o,l,x,h),l.child}function Gh(o,l){return o!==null&&o.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Uk(o,l,h,m,x){var A=lE();return A=A===null?null:{parent:ln._currentValue,pool:A},l.memoizedState={baseLanes:h,cachePool:A},o!==null&&Em(l,null),pE(),IF(l),o!==null&&cf(o,l,m,!0),l.childLanes=x,null}function Bm(o,l){return l=Um({mode:l.mode,children:l.children},o.mode),l.ref=o.ref,o.child=l,l.return=o,l}function jk(o,l,h){return bl(l,o.child,null,h),o=Bm(l,l.pendingProps),o.flags|=2,lr(l),l.memoizedState=null,o}function HV(o,l,h){var m=l.pendingProps,x=(l.flags&128)!==0;if(l.flags&=-129,o===null){if(rt){if(m.mode==="hidden")return o=Bm(l,m),l.lanes=536870912,Gh(null,o);if(yE(l),(o=zt)?(o=K6(o,Or),o=o!==null&&o.data==="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:zo!==null?{id:La,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},h=SF(o),h.return=l,l.child=h,zn=l,zt=null)):o=null,o===null)throw Lo(l);return l.lanes=536870912,null}return Bm(l,m)}var A=o.memoizedState;if(A!==null){var C=A.dehydrated;if(yE(l),x)if(l.flags&256)l.flags&=-257,l=jk(o,l,h);else if(l.memoizedState!==null)l.child=o.child,l.flags|=128,l=null;else throw Error(i(558));else if(fn||cf(o,l,h,!1),x=(h&o.childLanes)!==0,fn||x){if(m=kt,m!==null&&(C=M5(m,h),C!==0&&C!==A.retryLane))throw A.retryLane=C,fl(o,C),Li(m,o,C),LE;Vm(),l=jk(o,l,h)}else o=A.treeContext,zt=Rr(C.nextSibling),zn=l,rt=!0,Bo=null,Or=!1,o!==null&&CF(l,o),l=Bm(l,m),l.flags|=4096;return l}return o=ks(o.child,{mode:m.mode,children:m.children}),o.ref=l.ref,l.child=o,o.return=l,o}function Lm(o,l){var h=l.ref;if(h===null)o!==null&&o.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(l.flags|=4194816)}}function UE(o,l,h,m,x){return pl(l),h=bE(o,l,h,m,void 0,x),m=xE(),o!==null&&!fn?(EE(o,l,x),Ls(o,l,x)):(rt&&m&&eE(l),l.flags|=1,Ln(o,l,h,x),l.child)}function qk(o,l,h,m,x,A){return pl(l),l.updateQueue=null,h=HF(l,m,h,x),PF(o),m=xE(),o!==null&&!fn?(EE(o,l,A),Ls(o,l,A)):(rt&&m&&eE(l),l.flags|=1,Ln(o,l,h,A),l.child)}function Ik(o,l,h,m,x){if(pl(l),l.stateNode===null){var A=sf,C=h.contextType;typeof C=="object"&&C!==null&&(A=Bn(C)),A=new h(m,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=zE,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=m,A.state=l.memoizedState,A.refs={},fE(l),C=h.contextType,A.context=typeof C=="object"&&C!==null?Bn(C):sf,A.state=l.memoizedState,C=h.getDerivedStateFromProps,typeof C=="function"&&(RE(l,h,C,m),A.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(C=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),C!==A.state&&zE.enqueueReplaceState(A,A.state,null),jh(l,m,A,x),Uh(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),m=!0}else if(o===null){A=l.stateNode;var k=l.memoizedProps,L=El(h,k);A.props=L;var Q=A.context,ie=h.contextType;C=sf,typeof ie=="object"&&ie!==null&&(C=Bn(ie));var ue=h.getDerivedStateFromProps;ie=typeof ue=="function"||typeof A.getSnapshotBeforeUpdate=="function",k=l.pendingProps!==k,ie||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(k||Q!==C)&&$k(l,A,m,C),jo=!1;var Z=l.memoizedState;A.state=Z,jh(l,m,A,x),Uh(),Q=l.memoizedState,k||Z!==Q||jo?(typeof ue=="function"&&(RE(l,h,ue,m),Q=l.memoizedState),(L=jo||Dk(l,h,L,m,Z,Q,C))?(ie||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=m,l.memoizedState=Q),A.props=m,A.state=Q,A.context=C,m=L):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),m=!1)}else{A=l.stateNode,dE(o,l),C=l.memoizedProps,ie=El(h,C),A.props=ie,ue=l.pendingProps,Z=A.context,Q=h.contextType,L=sf,typeof Q=="object"&&Q!==null&&(L=Bn(Q)),k=h.getDerivedStateFromProps,(Q=typeof k=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(C!==ue||Z!==L)&&$k(l,A,m,L),jo=!1,Z=l.memoizedState,A.state=Z,jh(l,m,A,x),Uh();var K=l.memoizedState;C!==ue||Z!==K||jo||o!==null&&o.dependencies!==null&&bm(o.dependencies)?(typeof k=="function"&&(RE(l,h,k,m),K=l.memoizedState),(ie=jo||Dk(l,h,ie,m,Z,K,L)||o!==null&&o.dependencies!==null&&bm(o.dependencies))?(Q||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,K,L),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,K,L)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(l.flags|=1024),l.memoizedProps=m,l.memoizedState=K),A.props=m,A.state=K,A.context=L,m=ie):(typeof A.componentDidUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&Z===o.memoizedState||(l.flags|=1024),m=!1)}return A=m,Lm(o,l),m=(l.flags&128)!==0,A||m?(A=l.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,o!==null&&m?(l.child=bl(l,o.child,null,x),l.child=bl(l,null,h,x)):Ln(o,l,h,x),l.memoizedState=A.state,o=l.child):o=Ls(o,l,x),o}function Pk(o,l,h,m){return hl(),l.flags|=256,Ln(o,l,h,m),l.child}var jE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qE(o){return{baseLanes:o,cachePool:kF()}}function IE(o,l,h){return o=o!==null?o.childLanes&~h:0,l&&(o|=fr),o}function Hk(o,l,h){var m=l.pendingProps,x=!1,A=(l.flags&128)!==0,C;if((C=A)||(C=o!==null&&o.memoizedState===null?!1:(nn.current&2)!==0),C&&(x=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,o===null){if(rt){if(x?Po(l):Ho(),(o=zt)?(o=K6(o,Or),o=o!==null&&o.data!=="&"?o:null,o!==null&&(l.memoizedState={dehydrated:o,treeContext:zo!==null?{id:La,overflow:Ua}:null,retryLane:536870912,hydrationErrors:null},h=SF(o),h.return=l,l.child=h,zn=l,zt=null)):o=null,o===null)throw Lo(l);return _A(o)?l.lanes=32:l.lanes=536870912,null}var k=m.children;return m=m.fallback,x?(Ho(),x=l.mode,k=Um({mode:"hidden",children:k},x),m=dl(m,x,h,null),k.return=l,m.return=l,k.sibling=m,l.child=k,m=l.child,m.memoizedState=qE(h),m.childLanes=IE(o,C,h),l.memoizedState=jE,Gh(null,m)):(Po(l),PE(l,k))}var L=o.memoizedState;if(L!==null&&(k=L.dehydrated,k!==null)){if(A)l.flags&256?(Po(l),l.flags&=-257,l=HE(o,l,h)):l.memoizedState!==null?(Ho(),l.child=o.child,l.flags|=128,l=null):(Ho(),k=m.fallback,x=l.mode,m=Um({mode:"visible",children:m.children},x),k=dl(k,x,h,null),k.flags|=2,m.return=l,k.return=l,m.sibling=k,l.child=m,bl(l,o.child,null,h),m=l.child,m.memoizedState=qE(h),m.childLanes=IE(o,C,h),l.memoizedState=jE,l=Gh(null,m));else if(Po(l),_A(k)){if(C=k.nextSibling&&k.nextSibling.dataset,C)var Q=C.dgst;C=Q,m=Error(i(419)),m.stack="",m.digest=C,Oh({value:m,source:null,stack:null}),l=HE(o,l,h)}else if(fn||cf(o,l,h,!1),C=(h&o.childLanes)!==0,fn||C){if(C=kt,C!==null&&(m=M5(C,h),m!==0&&m!==L.retryLane))throw L.retryLane=m,fl(o,m),Li(C,o,m),LE;SA(k)||Vm(),l=HE(o,l,h)}else SA(k)?(l.flags|=192,l.child=o.child,l=null):(o=L.treeContext,zt=Rr(k.nextSibling),zn=l,rt=!0,Bo=null,Or=!1,o!==null&&CF(l,o),l=PE(l,m.children),l.flags|=4096);return l}return x?(Ho(),k=m.fallback,x=l.mode,L=o.child,Q=L.sibling,m=ks(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,Q!==null?k=ks(Q,k):(k=dl(k,x,h,null),k.flags|=2),k.return=l,m.return=l,m.sibling=k,l.child=m,Gh(null,m),m=l.child,k=o.child.memoizedState,k===null?k=qE(h):(x=k.cachePool,x!==null?(L=ln._currentValue,x=x.parent!==L?{parent:L,pool:L}:x):x=kF(),k={baseLanes:k.baseLanes|h,cachePool:x}),m.memoizedState=k,m.childLanes=IE(o,C,h),l.memoizedState=jE,Gh(o.child,m)):(Po(l),h=o.child,o=h.sibling,h=ks(h,{mode:"visible",children:m.children}),h.return=l,h.sibling=null,o!==null&&(C=l.deletions,C===null?(l.deletions=[o],l.flags|=16):C.push(o)),l.child=h,l.memoizedState=null,h)}function PE(o,l){return l=Um({mode:"visible",children:l},o.mode),l.return=o,o.child=l}function Um(o,l){return o=or(22,o,null,l),o.lanes=0,o}function HE(o,l,h){return bl(l,o.child,null,h),o=PE(l,l.pendingProps.children),o.flags|=2,l.memoizedState=null,o}function Gk(o,l,h){o.lanes|=l;var m=o.alternate;m!==null&&(m.lanes|=l),aE(o.return,l,h)}function GE(o,l,h,m,x,A){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x,treeForkCount:A}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=h,C.tailMode=x,C.treeForkCount=A)}function Yk(o,l,h){var m=l.pendingProps,x=m.revealOrder,A=m.tail;m=m.children;var C=nn.current,k=(C&2)!==0;if(k?(C=C&1|2,l.flags|=128):C&=1,J(nn,C),Ln(o,l,m,h),m=rt?kh:0,!k&&o!==null&&(o.flags&128)!==0)e:for(o=l.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Gk(o,h,l);else if(o.tag===19)Gk(o,h,l);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===l)break e;for(;o.sibling===null;){if(o.return===null||o.return===l)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(x){case"forwards":for(h=l.child,x=null;h!==null;)o=h.alternate,o!==null&&Dm(o)===null&&(x=h),h=h.sibling;h=x,h===null?(x=l.child,l.child=null):(x=h.sibling,h.sibling=null),GE(l,!1,x,h,A,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,x=l.child,l.child=null;x!==null;){if(o=x.alternate,o!==null&&Dm(o)===null){l.child=x;break}o=x.sibling,x.sibling=h,h=x,x=o}GE(l,!0,h,null,A,m);break;case"together":GE(l,!1,null,null,void 0,m);break;default:l.memoizedState=null}return l.child}function Ls(o,l,h){if(o!==null&&(l.dependencies=o.dependencies),Xo|=l.lanes,(h&l.childLanes)===0)if(o!==null){if(cf(o,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(o!==null&&l.child!==o.child)throw Error(i(153));if(l.child!==null){for(o=l.child,h=ks(o,o.pendingProps),l.child=h,h.return=l;o.sibling!==null;)o=o.sibling,h=h.sibling=ks(o,o.pendingProps),h.return=l;h.sibling=null}return l.child}function YE(o,l){return(o.lanes&l)!==0?!0:(o=o.dependencies,!!(o!==null&&bm(o)))}function GV(o,l,h){switch(l.tag){case 3:_t(l,l.stateNode.containerInfo),Uo(l,ln,o.memoizedState.cache),hl();break;case 27:case 5:Le(l);break;case 4:_t(l,l.stateNode.containerInfo);break;case 10:Uo(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,yE(l),null;break;case 13:var m=l.memoizedState;if(m!==null)return m.dehydrated!==null?(Po(l),l.flags|=128,null):(h&l.child.childLanes)!==0?Hk(o,l,h):(Po(l),o=Ls(o,l,h),o!==null?o.sibling:null);Po(l);break;case 19:var x=(o.flags&128)!==0;if(m=(h&l.childLanes)!==0,m||(cf(o,l,h,!1),m=(h&l.childLanes)!==0),x){if(m)return Yk(o,l,h);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),J(nn,nn.current),m)break;return null;case 22:return l.lanes=0,Lk(o,l,h,l.pendingProps);case 24:Uo(l,ln,o.memoizedState.cache)}return Ls(o,l,h)}function Xk(o,l,h){if(o!==null)if(o.memoizedProps!==l.pendingProps)fn=!0;else{if(!YE(o,h)&&(l.flags&128)===0)return fn=!1,GV(o,l,h);fn=(o.flags&131072)!==0}else fn=!1,rt&&(l.flags&1048576)!==0&&wF(l,kh,l.index);switch(l.lanes=0,l.tag){case 16:e:{var m=l.pendingProps;if(o=yl(l.elementType),l.type=o,typeof o=="function")Z2(o)?(m=El(o,m),l.tag=1,l=Ik(null,l,o,m,h)):(l.tag=0,l=UE(null,l,o,m,h));else{if(o!=null){var x=o.$$typeof;if(x===D){l.tag=11,l=Rk(null,l,o,m,h);break e}else if(x===$){l.tag=14,l=zk(null,l,o,m,h);break e}}throw l=P(o)||o,Error(i(306,l,""))}}return l;case 0:return UE(o,l,l.type,l.pendingProps,h);case 1:return m=l.type,x=El(m,l.pendingProps),Ik(o,l,m,x,h);case 3:e:{if(_t(l,l.stateNode.containerInfo),o===null)throw Error(i(387));m=l.pendingProps;var A=l.memoizedState;x=A.element,dE(o,l),jh(l,m,null,h);var C=l.memoizedState;if(m=C.cache,Uo(l,ln,m),m!==A.cache&&sE(l,[ln],h,!0),Uh(),m=C.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){l=Pk(o,l,m,h);break e}else if(m!==x){x=Mr(Error(i(424)),l),Oh(x),l=Pk(o,l,m,h);break e}else{switch(o=l.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(zt=Rr(o.firstChild),zn=l,rt=!0,Bo=null,Or=!0,h=LF(l,null,m,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(hl(),m===x){l=Ls(o,l,h);break e}Ln(o,l,m,h)}l=l.child}return l;case 26:return Lm(o,l),o===null?(h=rO(l.type,null,l.pendingProps,null))?l.memoizedState=h:rt||(h=l.type,o=l.pendingProps,m=t1(Me.current).createElement(h),m[Rn]=l,m[ki]=o,Un(m,h,o),An(m),l.stateNode=m):l.memoizedState=rO(l.type,o.memoizedProps,l.pendingProps,o.memoizedState),null;case 27:return Le(l),o===null&&rt&&(m=l.stateNode=tO(l.type,l.pendingProps,Me.current),zn=l,Or=!0,x=zt,Ko(l.type)?(wA=x,zt=Rr(m.firstChild)):zt=x),Ln(o,l,l.pendingProps.children,h),Lm(o,l),o===null&&(l.flags|=4194304),l.child;case 5:return o===null&&rt&&((x=m=zt)&&(m=EW(m,l.type,l.pendingProps,Or),m!==null?(l.stateNode=m,zn=l,zt=Rr(m.firstChild),Or=!1,x=!0):x=!1),x||Lo(l)),Le(l),x=l.type,A=l.pendingProps,C=o!==null?o.memoizedProps:null,m=A.children,xA(x,A)?m=null:C!==null&&xA(x,C)&&(l.flags|=32),l.memoizedState!==null&&(x=bE(o,l,zV,null,null,h),s0._currentValue=x),Lm(o,l),Ln(o,l,m,h),l.child;case 6:return o===null&&rt&&((o=h=zt)&&(h=AW(h,l.pendingProps,Or),h!==null?(l.stateNode=h,zn=l,zt=null,o=!0):o=!1),o||Lo(l)),null;case 13:return Hk(o,l,h);case 4:return _t(l,l.stateNode.containerInfo),m=l.pendingProps,o===null?l.child=bl(l,null,m,h):Ln(o,l,m,h),l.child;case 11:return Rk(o,l,l.type,l.pendingProps,h);case 7:return Ln(o,l,l.pendingProps,h),l.child;case 8:return Ln(o,l,l.pendingProps.children,h),l.child;case 12:return Ln(o,l,l.pendingProps.children,h),l.child;case 10:return m=l.pendingProps,Uo(l,l.type,m.value),Ln(o,l,m.children,h),l.child;case 9:return x=l.type._context,m=l.pendingProps.children,pl(l),x=Bn(x),m=m(x),l.flags|=1,Ln(o,l,m,h),l.child;case 14:return zk(o,l,l.type,l.pendingProps,h);case 15:return Bk(o,l,l.type,l.pendingProps,h);case 19:return Yk(o,l,h);case 31:return HV(o,l,h);case 22:return Lk(o,l,h,l.pendingProps);case 24:return pl(l),m=Bn(ln),o===null?(x=lE(),x===null&&(x=kt,A=oE(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=h),x=A),l.memoizedState={parent:m,cache:x},fE(l),Uo(l,ln,x)):((o.lanes&h)!==0&&(dE(o,l),jh(l,null,null,h),Uh()),x=o.memoizedState,A=l.memoizedState,x.parent!==m?(x={parent:m,cache:m},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),Uo(l,ln,m)):(m=A.cache,Uo(l,ln,m),m!==x.cache&&sE(l,[ln],h,!0))),Ln(o,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Us(o){o.flags|=4}function XE(o,l,h,m,x){if((l=(o.mode&32)!==0)&&(l=!1),l){if(o.flags|=16777216,(x&335544128)===x)if(o.stateNode.complete)o.flags|=8192;else if(x6())o.flags|=8192;else throw vl=Sm,cE}else o.flags&=-16777217}function Vk(o,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!lO(l))if(x6())o.flags|=8192;else throw vl=Sm,cE}function jm(o,l){l!==null&&(o.flags|=4),o.flags&16384&&(l=o.tag!==22?D5():536870912,o.lanes|=l,Af|=l)}function Yh(o,l){if(!rt)switch(o.tailMode){case"hidden":l=o.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Bt(o){var l=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(l)for(var x=o.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=o,x=x.sibling;else for(x=o.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=o,x=x.sibling;return o.subtreeFlags|=m,o.childLanes=h,l}function YV(o,l,h){var m=l.pendingProps;switch(tE(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(l),null;case 1:return Bt(l),null;case 3:return h=l.stateNode,m=null,o!==null&&(m=o.memoizedState.cache),l.memoizedState.cache!==m&&(l.flags|=2048),Rs(ln),pe(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(lf(l)?Us(l):o===null||o.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,iE())),Bt(l),null;case 26:var x=l.type,A=l.memoizedState;return o===null?(Us(l),A!==null?(Bt(l),Vk(l,A)):(Bt(l),XE(l,x,null,m,h))):A?A!==o.memoizedState?(Us(l),Bt(l),Vk(l,A)):(Bt(l),l.flags&=-16777217):(o=o.memoizedProps,o!==m&&Us(l),Bt(l),XE(l,x,o,m,h)),null;case 27:if(ze(l),h=Me.current,x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&Us(l);else{if(!m){if(l.stateNode===null)throw Error(i(166));return Bt(l),null}o=ce.current,lf(l)?DF(l):(o=tO(x,m,h),l.stateNode=o,Us(l))}return Bt(l),null;case 5:if(ze(l),x=l.type,o!==null&&l.stateNode!=null)o.memoizedProps!==m&&Us(l);else{if(!m){if(l.stateNode===null)throw Error(i(166));return Bt(l),null}if(A=ce.current,lf(l))DF(l);else{var C=t1(Me.current);switch(A){case 1:A=C.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:A=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":A=C.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":A=C.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":A=C.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?A.multiple=!0:m.size&&(A.size=m.size);break;default:A=typeof m.is=="string"?C.createElement(x,{is:m.is}):C.createElement(x)}}A[Rn]=l,A[ki]=m;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)A.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=A;e:switch(Un(A,x,m),x){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Us(l)}}return Bt(l),XE(l,l.type,o===null?null:o.memoizedProps,l.pendingProps,h),null;case 6:if(o&&l.stateNode!=null)o.memoizedProps!==m&&Us(l);else{if(typeof m!="string"&&l.stateNode===null)throw Error(i(166));if(o=Me.current,lf(l)){if(o=l.stateNode,h=l.memoizedProps,m=null,x=zn,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}o[Rn]=l,o=!!(o.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||H6(o.nodeValue,h)),o||Lo(l,!0)}else o=t1(o).createTextNode(m),o[Rn]=l,l.stateNode=o}return Bt(l),null;case 31:if(h=l.memoizedState,o===null||o.memoizedState!==null){if(m=lf(l),h!==null){if(o===null){if(!m)throw Error(i(318));if(o=l.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Rn]=l}else hl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),o=!1}else h=iE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return l.flags&256?(lr(l),l):(lr(l),null);if((l.flags&128)!==0)throw Error(i(558))}return Bt(l),null;case 13:if(m=l.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(x=lf(l),m!==null&&m.dehydrated!==null){if(o===null){if(!x)throw Error(i(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Rn]=l}else hl(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),x=!1}else x=iE(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(lr(l),l):(lr(l),null)}return lr(l),(l.flags&128)!==0?(l.lanes=h,l):(h=m!==null,o=o!==null&&o.memoizedState!==null,h&&(m=l.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(m.flags|=2048)),h!==o&&h&&(l.child.flags|=8192),jm(l,l.updateQueue),Bt(l),null);case 4:return pe(),o===null&&pA(l.stateNode.containerInfo),Bt(l),null;case 10:return Rs(l.type),Bt(l),null;case 19:if(q(nn),m=l.memoizedState,m===null)return Bt(l),null;if(x=(l.flags&128)!==0,A=m.rendering,A===null)if(x)Yh(m,!1);else{if(Zt!==0||o!==null&&(o.flags&128)!==0)for(o=l.child;o!==null;){if(A=Dm(o),A!==null){for(l.flags|=128,Yh(m,!1),o=A.updateQueue,l.updateQueue=o,jm(l,o),l.subtreeFlags=0,o=h,h=l.child;h!==null;)AF(h,o),h=h.sibling;return J(nn,nn.current&1|2),rt&&Os(l,m.treeForkCount),l.child}o=o.sibling}m.tail!==null&&ir()>Gm&&(l.flags|=128,x=!0,Yh(m,!1),l.lanes=4194304)}else{if(!x)if(o=Dm(A),o!==null){if(l.flags|=128,x=!0,o=o.updateQueue,l.updateQueue=o,jm(l,o),Yh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!A.alternate&&!rt)return Bt(l),null}else 2*ir()-m.renderingStartTime>Gm&&h!==536870912&&(l.flags|=128,x=!0,Yh(m,!1),l.lanes=4194304);m.isBackwards?(A.sibling=l.child,l.child=A):(o=m.last,o!==null?o.sibling=A:l.child=A,m.last=A)}return m.tail!==null?(o=m.tail,m.rendering=o,m.tail=o.sibling,m.renderingStartTime=ir(),o.sibling=null,h=nn.current,J(nn,x?h&1|2:h&1),rt&&Os(l,m.treeForkCount),o):(Bt(l),null);case 22:case 23:return lr(l),mE(),m=l.memoizedState!==null,o!==null?o.memoizedState!==null!==m&&(l.flags|=8192):m&&(l.flags|=8192),m?(h&536870912)!==0&&(l.flags&128)===0&&(Bt(l),l.subtreeFlags&6&&(l.flags|=8192)):Bt(l),h=l.updateQueue,h!==null&&jm(l,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),m=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==h&&(l.flags|=2048),o!==null&&q(ml),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Rs(ln),Bt(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function XV(o,l){switch(tE(l),l.tag){case 1:return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 3:return Rs(ln),pe(),o=l.flags,(o&65536)!==0&&(o&128)===0?(l.flags=o&-65537|128,l):null;case 26:case 27:case 5:return ze(l),null;case 31:if(l.memoizedState!==null){if(lr(l),l.alternate===null)throw Error(i(340));hl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 13:if(lr(l),o=l.memoizedState,o!==null&&o.dehydrated!==null){if(l.alternate===null)throw Error(i(340));hl()}return o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 19:return q(nn),null;case 4:return pe(),null;case 10:return Rs(l.type),null;case 22:case 23:return lr(l),mE(),o!==null&&q(ml),o=l.flags,o&65536?(l.flags=o&-65537|128,l):null;case 24:return Rs(ln),null;case 25:return null;default:return null}}function Wk(o,l){switch(tE(l),l.tag){case 3:Rs(ln),pe();break;case 26:case 27:case 5:ze(l);break;case 4:pe();break;case 31:l.memoizedState!==null&&lr(l);break;case 13:lr(l);break;case 19:q(nn);break;case 10:Rs(l.type);break;case 22:case 23:lr(l),mE(),o!==null&&q(ml);break;case 24:Rs(ln)}}function Xh(o,l){try{var h=l.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&o)===o){m=void 0;var A=h.create,C=h.inst;m=A(),C.destroy=m}h=h.next}while(h!==x)}}catch(k){bt(l,l.return,k)}}function Go(o,l,h){try{var m=l.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var A=x.next;m=A;do{if((m.tag&o)===o){var C=m.inst,k=C.destroy;if(k!==void 0){C.destroy=void 0,x=l;var L=h,Q=k;try{Q()}catch(ie){bt(x,L,ie)}}}m=m.next}while(m!==A)}}catch(ie){bt(l,l.return,ie)}}function Qk(o){var l=o.updateQueue;if(l!==null){var h=o.stateNode;try{jF(l,h)}catch(m){bt(o,o.return,m)}}}function Zk(o,l,h){h.props=El(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(m){bt(o,l,m)}}function Vh(o,l){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var m=o.stateNode;break;case 30:m=o.stateNode;break;default:m=o.stateNode}typeof h=="function"?o.refCleanup=h(m):h.current=m}}catch(x){bt(o,l,x)}}function ja(o,l){var h=o.ref,m=o.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){bt(o,l,x)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){bt(o,l,x)}else h.current=null}function Kk(o){var l=o.type,h=o.memoizedProps,m=o.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){bt(o,o.return,x)}}function VE(o,l,h){try{var m=o.stateNode;pW(m,o.type,h,l),m[ki]=l}catch(x){bt(o,o.return,x)}}function Jk(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ko(o.type)||o.tag===4}function WE(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Jk(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ko(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function QE(o,l,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(o),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Ms));else if(m!==4&&(m===27&&Ko(o.type)&&(h=o.stateNode,l=null),o=o.child,o!==null))for(QE(o,l,h),o=o.sibling;o!==null;)QE(o,l,h),o=o.sibling}function qm(o,l,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,l?h.insertBefore(o,l):h.appendChild(o);else if(m!==4&&(m===27&&Ko(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(qm(o,l,h),o=o.sibling;o!==null;)qm(o,l,h),o=o.sibling}function e6(o){var l=o.stateNode,h=o.memoizedProps;try{for(var m=o.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);Un(l,m,h),l[Rn]=o,l[ki]=h}catch(A){bt(o,o.return,A)}}var js=!1,dn=!1,ZE=!1,t6=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function VV(o,l){if(o=o.containerInfo,vA=u1,o=hF(o),H2(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break e}var C=0,k=-1,L=-1,Q=0,ie=0,ue=o,Z=null;t:for(;;){for(var K;ue!==h||x!==0&&ue.nodeType!==3||(k=C+x),ue!==A||m!==0&&ue.nodeType!==3||(L=C+m),ue.nodeType===3&&(C+=ue.nodeValue.length),(K=ue.firstChild)!==null;)Z=ue,ue=K;for(;;){if(ue===o)break t;if(Z===h&&++Q===x&&(k=C),Z===A&&++ie===m&&(L=C),(K=ue.nextSibling)!==null)break;ue=Z,Z=ue.parentNode}ue=K}h=k===-1||L===-1?null:{start:k,end:L}}else h=null}h=h||{start:0,end:0}}else h=null;for(bA={focusedElem:o,selectionRange:h},u1=!1,Sn=l;Sn!==null;)if(l=Sn,o=l.child,(l.subtreeFlags&1028)!==0&&o!==null)o.return=l,Sn=o;else for(;Sn!==null;){switch(l=Sn,A=l.alternate,o=l.flags,l.tag){case 0:if((o&4)!==0&&(o=l.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)x=o[h],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&A!==null){o=void 0,h=l,x=A.memoizedProps,A=A.memoizedState,m=h.stateNode;try{var we=El(h.type,x);o=m.getSnapshotBeforeUpdate(we,A),m.__reactInternalSnapshotBeforeUpdate=o}catch(Ue){bt(h,h.return,Ue)}}break;case 3:if((o&1024)!==0){if(o=l.stateNode.containerInfo,h=o.nodeType,h===9)AA(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":AA(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=l.sibling,o!==null){o.return=l.return,Sn=o;break}Sn=l.return}}function n6(o,l,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Is(o,h),m&4&&Xh(5,h);break;case 1:if(Is(o,h),m&4)if(o=h.stateNode,l===null)try{o.componentDidMount()}catch(C){bt(h,h.return,C)}else{var x=El(h.type,l.memoizedProps);l=l.memoizedState;try{o.componentDidUpdate(x,l,o.__reactInternalSnapshotBeforeUpdate)}catch(C){bt(h,h.return,C)}}m&64&&Qk(h),m&512&&Vh(h,h.return);break;case 3:if(Is(o,h),m&64&&(o=h.updateQueue,o!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{jF(o,l)}catch(C){bt(h,h.return,C)}}break;case 27:l===null&&m&4&&e6(h);case 26:case 5:Is(o,h),l===null&&m&4&&Kk(h),m&512&&Vh(h,h.return);break;case 12:Is(o,h);break;case 31:Is(o,h),m&4&&a6(o,h);break;case 13:Is(o,h),m&4&&s6(o,h),m&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=iW.bind(null,h),SW(o,h))));break;case 22:if(m=h.memoizedState!==null||js,!m){l=l!==null&&l.memoizedState!==null||dn,x=js;var A=dn;js=m,(dn=l)&&!A?Ps(o,h,(h.subtreeFlags&8772)!==0):Is(o,h),js=x,dn=A}break;case 30:break;default:Is(o,h)}}function i6(o){var l=o.alternate;l!==null&&(o.alternate=null,i6(l)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(l=o.stateNode,l!==null&&D2(l)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Pt=null,Ni=!1;function qs(o,l,h){for(h=h.child;h!==null;)r6(o,l,h),h=h.sibling}function r6(o,l,h){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(vh,h)}catch{}switch(h.tag){case 26:dn||ja(h,l),qs(o,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:dn||ja(h,l);var m=Pt,x=Ni;Ko(h.type)&&(Pt=h.stateNode,Ni=!1),qs(o,l,h),i0(h.stateNode),Pt=m,Ni=x;break;case 5:dn||ja(h,l);case 6:if(m=Pt,x=Ni,Pt=null,qs(o,l,h),Pt=m,Ni=x,Pt!==null)if(Ni)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(h.stateNode)}catch(A){bt(h,l,A)}else try{Pt.removeChild(h.stateNode)}catch(A){bt(h,l,A)}break;case 18:Pt!==null&&(Ni?(o=Pt,Q6(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),Mf(o)):Q6(Pt,h.stateNode));break;case 4:m=Pt,x=Ni,Pt=h.stateNode.containerInfo,Ni=!0,qs(o,l,h),Pt=m,Ni=x;break;case 0:case 11:case 14:case 15:Go(2,h,l),dn||Go(4,h,l),qs(o,l,h);break;case 1:dn||(ja(h,l),m=h.stateNode,typeof m.componentWillUnmount=="function"&&Zk(h,l,m)),qs(o,l,h);break;case 21:qs(o,l,h);break;case 22:dn=(m=dn)||h.memoizedState!==null,qs(o,l,h),dn=m;break;default:qs(o,l,h)}}function a6(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Mf(o)}catch(h){bt(l,l.return,h)}}}function s6(o,l){if(l.memoizedState===null&&(o=l.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Mf(o)}catch(h){bt(l,l.return,h)}}function WV(o){switch(o.tag){case 31:case 13:case 19:var l=o.stateNode;return l===null&&(l=o.stateNode=new t6),l;case 22:return o=o.stateNode,l=o._retryCache,l===null&&(l=o._retryCache=new t6),l;default:throw Error(i(435,o.tag))}}function Im(o,l){var h=WV(o);l.forEach(function(m){if(!h.has(m)){h.add(m);var x=rW.bind(null,o,m);m.then(x,x)}})}function Ri(o,l){var h=l.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],A=o,C=l,k=C;e:for(;k!==null;){switch(k.tag){case 27:if(Ko(k.type)){Pt=k.stateNode,Ni=!1;break e}break;case 5:Pt=k.stateNode,Ni=!1;break e;case 3:case 4:Pt=k.stateNode.containerInfo,Ni=!0;break e}k=k.return}if(Pt===null)throw Error(i(160));r6(A,C,x),Pt=null,Ni=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)o6(l,o),l=l.sibling}var ra=null;function o6(o,l){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ri(l,o),zi(o),m&4&&(Go(3,o,o.return),Xh(3,o),Go(5,o,o.return));break;case 1:Ri(l,o),zi(o),m&512&&(dn||h===null||ja(h,h.return)),m&64&&js&&(o=o.updateQueue,o!==null&&(m=o.callbacks,m!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=ra;if(Ri(l,o),zi(o),m&512&&(dn||h===null||ja(h,h.return)),m&4){var A=h!==null?h.memoizedState:null;if(m=o.memoizedState,h===null)if(m===null)if(o.stateNode===null){e:{m=o.type,h=o.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":A=x.getElementsByTagName("title")[0],(!A||A[Eh]||A[Rn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(m),x.head.insertBefore(A,x.querySelector("head > title"))),Un(A,m,h),A[Rn]=o,An(A),m=A;break e;case"link":var C=oO("link","href",x).get(m+(h.href||""));if(C){for(var k=0;k<C.length;k++)if(A=C[k],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){C.splice(k,1);break t}}A=x.createElement(m),Un(A,m,h),x.head.appendChild(A);break;case"meta":if(C=oO("meta","content",x).get(m+(h.content||""))){for(k=0;k<C.length;k++)if(A=C[k],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){C.splice(k,1);break t}}A=x.createElement(m),Un(A,m,h),x.head.appendChild(A);break;default:throw Error(i(468,m))}A[Rn]=o,An(A),m=A}o.stateNode=m}else uO(x,o.type,o.stateNode);else o.stateNode=sO(x,m,o.memoizedProps);else A!==m?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,m===null?uO(x,o.type,o.stateNode):sO(x,m,o.memoizedProps)):m===null&&o.stateNode!==null&&VE(o,o.memoizedProps,h.memoizedProps)}break;case 27:Ri(l,o),zi(o),m&512&&(dn||h===null||ja(h,h.return)),h!==null&&m&4&&VE(o,o.memoizedProps,h.memoizedProps);break;case 5:if(Ri(l,o),zi(o),m&512&&(dn||h===null||ja(h,h.return)),o.flags&32){x=o.stateNode;try{Kc(x,"")}catch(we){bt(o,o.return,we)}}m&4&&o.stateNode!=null&&(x=o.memoizedProps,VE(o,x,h!==null?h.memoizedProps:x)),m&1024&&(ZE=!0);break;case 6:if(Ri(l,o),zi(o),m&4){if(o.stateNode===null)throw Error(i(162));m=o.memoizedProps,h=o.stateNode;try{h.nodeValue=m}catch(we){bt(o,o.return,we)}}break;case 3:if(r1=null,x=ra,ra=n1(l.containerInfo),Ri(l,o),ra=x,zi(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Mf(l.containerInfo)}catch(we){bt(o,o.return,we)}ZE&&(ZE=!1,u6(o));break;case 4:m=ra,ra=n1(o.stateNode.containerInfo),Ri(l,o),zi(o),ra=m;break;case 12:Ri(l,o),zi(o);break;case 31:Ri(l,o),zi(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Im(o,m)));break;case 13:Ri(l,o),zi(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Hm=ir()),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Im(o,m)));break;case 22:x=o.memoizedState!==null;var L=h!==null&&h.memoizedState!==null,Q=js,ie=dn;if(js=Q||x,dn=ie||L,Ri(l,o),dn=ie,js=Q,zi(o),m&8192)e:for(l=o.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(h===null||L||js||dn||Al(o)),h=null,l=o;;){if(l.tag===5||l.tag===26){if(h===null){L=h=l;try{if(A=L.stateNode,x)C=A.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{k=L.stateNode;var ue=L.memoizedProps.style,Z=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;k.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(we){bt(L,L.return,we)}}}else if(l.tag===6){if(h===null){L=l;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(we){bt(L,L.return,we)}}}else if(l.tag===18){if(h===null){L=l;try{var K=L.stateNode;x?Z6(K,!0):Z6(L.stateNode,!1)}catch(we){bt(L,L.return,we)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===o)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===o)break e;for(;l.sibling===null;){if(l.return===null||l.return===o)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}m&4&&(m=o.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Im(o,h))));break;case 19:Ri(l,o),zi(o),m&4&&(m=o.updateQueue,m!==null&&(o.updateQueue=null,Im(o,m)));break;case 30:break;case 21:break;default:Ri(l,o),zi(o)}}function zi(o){var l=o.flags;if(l&2){try{for(var h,m=o.return;m!==null;){if(Jk(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,A=WE(o);qm(o,A,x);break;case 5:var C=h.stateNode;h.flags&32&&(Kc(C,""),h.flags&=-33);var k=WE(o);qm(o,k,C);break;case 3:case 4:var L=h.stateNode.containerInfo,Q=WE(o);QE(o,Q,L);break;default:throw Error(i(161))}}catch(ie){bt(o,o.return,ie)}o.flags&=-3}l&4096&&(o.flags&=-4097)}function u6(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var l=o;u6(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),o=o.sibling}}function Is(o,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)n6(o,l.alternate,l),l=l.sibling}function Al(o){for(o=o.child;o!==null;){var l=o;switch(l.tag){case 0:case 11:case 14:case 15:Go(4,l,l.return),Al(l);break;case 1:ja(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&Zk(l,l.return,h),Al(l);break;case 27:i0(l.stateNode);case 26:case 5:ja(l,l.return),Al(l);break;case 22:l.memoizedState===null&&Al(l);break;case 30:Al(l);break;default:Al(l)}o=o.sibling}}function Ps(o,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var m=l.alternate,x=o,A=l,C=A.flags;switch(A.tag){case 0:case 11:case 15:Ps(x,A,h),Xh(4,A);break;case 1:if(Ps(x,A,h),m=A,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Q){bt(m,m.return,Q)}if(m=A,x=m.updateQueue,x!==null){var k=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)UF(L[x],k)}catch(Q){bt(m,m.return,Q)}}h&&C&64&&Qk(A),Vh(A,A.return);break;case 27:e6(A);case 26:case 5:Ps(x,A,h),h&&m===null&&C&4&&Kk(A),Vh(A,A.return);break;case 12:Ps(x,A,h);break;case 31:Ps(x,A,h),h&&C&4&&a6(x,A);break;case 13:Ps(x,A,h),h&&C&4&&s6(x,A);break;case 22:A.memoizedState===null&&Ps(x,A,h),Vh(A,A.return);break;case 30:break;default:Ps(x,A,h)}l=l.sibling}}function KE(o,l){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&Nh(h))}function JE(o,l){o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Nh(o))}function aa(o,l,h,m){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)l6(o,l,h,m),l=l.sibling}function l6(o,l,h,m){var x=l.flags;switch(l.tag){case 0:case 11:case 15:aa(o,l,h,m),x&2048&&Xh(9,l);break;case 1:aa(o,l,h,m);break;case 3:aa(o,l,h,m),x&2048&&(o=null,l.alternate!==null&&(o=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==o&&(l.refCount++,o!=null&&Nh(o)));break;case 12:if(x&2048){aa(o,l,h,m),o=l.stateNode;try{var A=l.memoizedProps,C=A.id,k=A.onPostCommit;typeof k=="function"&&k(C,l.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){bt(l,l.return,L)}}else aa(o,l,h,m);break;case 31:aa(o,l,h,m);break;case 13:aa(o,l,h,m);break;case 23:break;case 22:A=l.stateNode,C=l.alternate,l.memoizedState!==null?A._visibility&2?aa(o,l,h,m):Wh(o,l):A._visibility&2?aa(o,l,h,m):(A._visibility|=2,bf(o,l,h,m,(l.subtreeFlags&10256)!==0||!1)),x&2048&&KE(C,l);break;case 24:aa(o,l,h,m),x&2048&&JE(l.alternate,l);break;default:aa(o,l,h,m)}}function bf(o,l,h,m,x){for(x=x&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var A=o,C=l,k=h,L=m,Q=C.flags;switch(C.tag){case 0:case 11:case 15:bf(A,C,k,L,x),Xh(8,C);break;case 23:break;case 22:var ie=C.stateNode;C.memoizedState!==null?ie._visibility&2?bf(A,C,k,L,x):Wh(A,C):(ie._visibility|=2,bf(A,C,k,L,x)),x&&Q&2048&&KE(C.alternate,C);break;case 24:bf(A,C,k,L,x),x&&Q&2048&&JE(C.alternate,C);break;default:bf(A,C,k,L,x)}l=l.sibling}}function Wh(o,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=o,m=l,x=m.flags;switch(m.tag){case 22:Wh(h,m),x&2048&&KE(m.alternate,m);break;case 24:Wh(h,m),x&2048&&JE(m.alternate,m);break;default:Wh(h,m)}l=l.sibling}}var Qh=8192;function xf(o,l,h){if(o.subtreeFlags&Qh)for(o=o.child;o!==null;)c6(o,l,h),o=o.sibling}function c6(o,l,h){switch(o.tag){case 26:xf(o,l,h),o.flags&Qh&&o.memoizedState!==null&&RW(h,ra,o.memoizedState,o.memoizedProps);break;case 5:xf(o,l,h);break;case 3:case 4:var m=ra;ra=n1(o.stateNode.containerInfo),xf(o,l,h),ra=m;break;case 22:o.memoizedState===null&&(m=o.alternate,m!==null&&m.memoizedState!==null?(m=Qh,Qh=16777216,xf(o,l,h),Qh=m):xf(o,l,h));break;default:xf(o,l,h)}}function f6(o){var l=o.alternate;if(l!==null&&(o=l.child,o!==null)){l.child=null;do l=o.sibling,o.sibling=null,o=l;while(o!==null)}}function Zh(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];Sn=m,h6(m,o)}f6(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)d6(o),o=o.sibling}function d6(o){switch(o.tag){case 0:case 11:case 15:Zh(o),o.flags&2048&&Go(9,o,o.return);break;case 3:Zh(o);break;case 12:Zh(o);break;case 22:var l=o.stateNode;o.memoizedState!==null&&l._visibility&2&&(o.return===null||o.return.tag!==13)?(l._visibility&=-3,Pm(o)):Zh(o);break;default:Zh(o)}}function Pm(o){var l=o.deletions;if((o.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var m=l[h];Sn=m,h6(m,o)}f6(o)}for(o=o.child;o!==null;){switch(l=o,l.tag){case 0:case 11:case 15:Go(8,l,l.return),Pm(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,Pm(l));break;default:Pm(l)}o=o.sibling}}function h6(o,l){for(;Sn!==null;){var h=Sn;switch(h.tag){case 0:case 11:case 15:Go(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Nh(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Sn=m;else e:for(h=o;Sn!==null;){m=Sn;var x=m.sibling,A=m.return;if(i6(m),m===h){Sn=null;break e}if(x!==null){x.return=A,Sn=x;break e}Sn=A}}}var QV={getCacheForType:function(o){var l=Bn(ln),h=l.data.get(o);return h===void 0&&(h=o(),l.data.set(o,h)),h},cacheSignal:function(){return Bn(ln).controller.signal}},ZV=typeof WeakMap=="function"?WeakMap:Map,pt=0,kt=null,Ke=null,et=0,vt=0,cr=null,Yo=!1,Ef=!1,eA=!1,Hs=0,Zt=0,Xo=0,Sl=0,tA=0,fr=0,Af=0,Kh=null,Bi=null,nA=!1,Hm=0,g6=0,Gm=1/0,Ym=null,Vo=null,gn=0,Wo=null,Sf=null,Gs=0,iA=0,rA=null,p6=null,Jh=0,aA=null;function dr(){return(pt&2)!==0&&et!==0?et&-et:O.T!==null?fA():F5()}function m6(){if(fr===0)if((et&536870912)===0||rt){var o=em;em<<=1,(em&3932160)===0&&(em=262144),fr=o}else fr=536870912;return o=ur.current,o!==null&&(o.flags|=32),fr}function Li(o,l,h){(o===kt&&(vt===2||vt===9)||o.cancelPendingCommit!==null)&&(_f(o,0),Qo(o,et,fr,!1)),xh(o,h),((pt&2)===0||o!==kt)&&(o===kt&&((pt&2)===0&&(Sl|=h),Zt===4&&Qo(o,et,fr,!1)),qa(o))}function y6(o,l,h){if((pt&6)!==0)throw Error(i(327));var m=!h&&(l&127)===0&&(l&o.expiredLanes)===0||bh(o,l),x=m?eW(o,l):oA(o,l,!0),A=m;do{if(x===0){Ef&&!m&&Qo(o,l,0,!1);break}else{if(h=o.current.alternate,A&&!KV(h)){x=oA(o,l,!1),A=!1;continue}if(x===2){if(A=l,o.errorRecoveryDisabledLanes&A)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var k=o;x=Kh;var L=k.current.memoizedState.isDehydrated;if(L&&(_f(k,C).flags|=256),C=oA(k,C,!1),C!==2){if(eA&&!L){k.errorRecoveryDisabledLanes|=A,Sl|=A,x=4;break e}A=Bi,Bi=x,A!==null&&(Bi===null?Bi=A:Bi.push.apply(Bi,A))}x=C}if(A=!1,x!==2)continue}}if(x===1){_f(o,0),Qo(o,l,0,!0);break}e:{switch(m=o,A=x,A){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Qo(m,l,fr,!Yo);break e;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(x=Hm+300-ir(),10<x)){if(Qo(m,l,fr,!Yo),nm(m,0,!0)!==0)break e;Gs=l,m.timeoutHandle=V6(v6.bind(null,m,h,Bi,Ym,nA,l,fr,Sl,Af,Yo,A,"Throttled",-0,0),x);break e}v6(m,h,Bi,Ym,nA,l,fr,Sl,Af,Yo,A,null,-0,0)}}break}while(!0);qa(o)}function v6(o,l,h,m,x,A,C,k,L,Q,ie,ue,Z,K){if(o.timeoutHandle=-1,ue=l.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ms},c6(l,A,ue);var we=(A&62914560)===A?Hm-ir():(A&4194048)===A?g6-ir():0;if(we=zW(ue,we),we!==null){Gs=A,o.cancelPendingCommit=we(C6.bind(null,o,l,A,h,m,x,C,k,L,ie,ue,null,Z,K)),Qo(o,A,C,!Q);return}}C6(o,l,A,h,m,x,C,k,L)}function KV(o){for(var l=o;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],A=x.getSnapshot;x=x.value;try{if(!sr(A(),x))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===o)break;for(;l.sibling===null;){if(l.return===null||l.return===o)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Qo(o,l,h,m){l&=~tA,l&=~Sl,o.suspendedLanes|=l,o.pingedLanes&=~l,m&&(o.warmLanes|=l),m=o.expirationTimes;for(var x=l;0<x;){var A=31-ar(x),C=1<<A;m[A]=-1,x&=~C}h!==0&&$5(o,h,l)}function Xm(){return(pt&6)===0?(e0(0),!1):!0}function sA(){if(Ke!==null){if(vt===0)var o=Ke.return;else o=Ke,Ns=gl=null,AE(o),gf=null,zh=0,o=Ke;for(;o!==null;)Wk(o.alternate,o),o=o.return;Ke=null}}function _f(o,l){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,vW(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),Gs=0,sA(),kt=o,Ke=h=ks(o.current,null),et=l,vt=0,cr=null,Yo=!1,Ef=bh(o,l),eA=!1,Af=fr=tA=Sl=Xo=Zt=0,Bi=Kh=null,nA=!1,(l&8)!==0&&(l|=l&32);var m=o.entangledLanes;if(m!==0)for(o=o.entanglements,m&=l;0<m;){var x=31-ar(m),A=1<<x;l|=o[x],m&=~A}return Hs=l,gm(),h}function b6(o,l){He=null,O.H=Hh,l===hf||l===Am?(l=RF(),vt=3):l===cE?(l=RF(),vt=4):vt=l===LE?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,cr=l,Ke===null&&(Zt=1,zm(o,Mr(l,o.current)))}function x6(){var o=ur.current;return o===null?!0:(et&4194048)===et?Nr===null:(et&62914560)===et||(et&536870912)!==0?o===Nr:!1}function E6(){var o=O.H;return O.H=Hh,o===null?Hh:o}function A6(){var o=O.A;return O.A=QV,o}function Vm(){Zt=4,Yo||(et&4194048)!==et&&ur.current!==null||(Ef=!0),(Xo&134217727)===0&&(Sl&134217727)===0||kt===null||Qo(kt,et,fr,!1)}function oA(o,l,h){var m=pt;pt|=2;var x=E6(),A=A6();(kt!==o||et!==l)&&(Ym=null,_f(o,l)),l=!1;var C=Zt;e:do try{if(vt!==0&&Ke!==null){var k=Ke,L=cr;switch(vt){case 8:sA(),C=6;break e;case 3:case 2:case 9:case 6:ur.current===null&&(l=!0);var Q=vt;if(vt=0,cr=null,wf(o,k,L,Q),h&&Ef){C=0;break e}break;default:Q=vt,vt=0,cr=null,wf(o,k,L,Q)}}JV(),C=Zt;break}catch(ie){b6(o,ie)}while(!0);return l&&o.shellSuspendCounter++,Ns=gl=null,pt=m,O.H=x,O.A=A,Ke===null&&(kt=null,et=0,gm()),C}function JV(){for(;Ke!==null;)S6(Ke)}function eW(o,l){var h=pt;pt|=2;var m=E6(),x=A6();kt!==o||et!==l?(Ym=null,Gm=ir()+500,_f(o,l)):Ef=bh(o,l);e:do try{if(vt!==0&&Ke!==null){l=Ke;var A=cr;t:switch(vt){case 1:vt=0,cr=null,wf(o,l,A,1);break;case 2:case 9:if(OF(A)){vt=0,cr=null,_6(l);break}l=function(){vt!==2&&vt!==9||kt!==o||(vt=7),qa(o)},A.then(l,l);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:OF(A)?(vt=0,cr=null,_6(l)):(vt=0,cr=null,wf(o,l,A,7));break;case 5:var C=null;switch(Ke.tag){case 26:C=Ke.memoizedState;case 5:case 27:var k=Ke;if(C?lO(C):k.stateNode.complete){vt=0,cr=null;var L=k.sibling;if(L!==null)Ke=L;else{var Q=k.return;Q!==null?(Ke=Q,Wm(Q)):Ke=null}break t}}vt=0,cr=null,wf(o,l,A,5);break;case 6:vt=0,cr=null,wf(o,l,A,6);break;case 8:sA(),Zt=6;break e;default:throw Error(i(462))}}tW();break}catch(ie){b6(o,ie)}while(!0);return Ns=gl=null,O.H=m,O.A=x,pt=h,Ke!==null?0:(kt=null,et=0,gm(),Zt)}function tW(){for(;Ke!==null&&!_X();)S6(Ke)}function S6(o){var l=Xk(o.alternate,o,Hs);o.memoizedProps=o.pendingProps,l===null?Wm(o):Ke=l}function _6(o){var l=o,h=l.alternate;switch(l.tag){case 15:case 0:l=qk(h,l,l.pendingProps,l.type,void 0,et);break;case 11:l=qk(h,l,l.pendingProps,l.type.render,l.ref,et);break;case 5:AE(l);default:Wk(h,l),l=Ke=AF(l,Hs),l=Xk(h,l,Hs)}o.memoizedProps=o.pendingProps,l===null?Wm(o):Ke=l}function wf(o,l,h,m){Ns=gl=null,AE(l),gf=null,zh=0;var x=l.return;try{if(PV(o,x,l,h,et)){Zt=1,zm(o,Mr(h,o.current)),Ke=null;return}}catch(A){if(x!==null)throw Ke=x,A;Zt=1,zm(o,Mr(h,o.current)),Ke=null;return}l.flags&32768?(rt||m===1?o=!0:Ef||(et&536870912)!==0?o=!1:(Yo=o=!0,(m===2||m===9||m===3||m===6)&&(m=ur.current,m!==null&&m.tag===13&&(m.flags|=16384))),w6(l,o)):Wm(l)}function Wm(o){var l=o;do{if((l.flags&32768)!==0){w6(l,Yo);return}o=l.return;var h=YV(l.alternate,l,Hs);if(h!==null){Ke=h;return}if(l=l.sibling,l!==null){Ke=l;return}Ke=l=o}while(l!==null);Zt===0&&(Zt=5)}function w6(o,l){do{var h=XV(o.alternate,o);if(h!==null){h.flags&=32767,Ke=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(o=o.sibling,o!==null)){Ke=o;return}Ke=o=h}while(o!==null);Zt=6,Ke=null}function C6(o,l,h,m,x,A,C,k,L){o.cancelPendingCommit=null;do Qm();while(gn!==0);if((pt&6)!==0)throw Error(i(327));if(l!==null){if(l===o.current)throw Error(i(177));if(A=l.lanes|l.childLanes,A|=W2,NX(o,h,A,C,k,L),o===kt&&(Ke=kt=null,et=0),Sf=l,Wo=o,Gs=h,iA=A,rA=x,p6=m,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,aW(Kp,function(){return F6(),null})):(o.callbackNode=null,o.callbackPriority=0),m=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||m){m=O.T,O.T=null,x=j.p,j.p=2,C=pt,pt|=4;try{VV(o,l,h)}finally{pt=C,j.p=x,O.T=m}}gn=1,D6(),$6(),T6()}}function D6(){if(gn===1){gn=0;var o=Wo,l=Sf,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=O.T,O.T=null;var m=j.p;j.p=2;var x=pt;pt|=4;try{o6(l,o);var A=bA,C=hF(o.containerInfo),k=A.focusedElem,L=A.selectionRange;if(C!==k&&k&&k.ownerDocument&&dF(k.ownerDocument.documentElement,k)){if(L!==null&&H2(k)){var Q=L.start,ie=L.end;if(ie===void 0&&(ie=Q),"selectionStart"in k)k.selectionStart=Q,k.selectionEnd=Math.min(ie,k.value.length);else{var ue=k.ownerDocument||document,Z=ue&&ue.defaultView||window;if(Z.getSelection){var K=Z.getSelection(),we=k.textContent.length,Ue=Math.min(L.start,we),Dt=L.end===void 0?Ue:Math.min(L.end,we);!K.extend&&Ue>Dt&&(C=Dt,Dt=Ue,Ue=C);var H=fF(k,Ue),I=fF(k,Dt);if(H&&I&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==I.node||K.focusOffset!==I.offset)){var W=ue.createRange();W.setStart(H.node,H.offset),K.removeAllRanges(),Ue>Dt?(K.addRange(W),K.extend(I.node,I.offset)):(W.setEnd(I.node,I.offset),K.addRange(W))}}}}for(ue=[],K=k;K=K.parentNode;)K.nodeType===1&&ue.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ue.length;k++){var oe=ue[k];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}u1=!!vA,bA=vA=null}finally{pt=x,j.p=m,O.T=h}}o.current=l,gn=2}}function $6(){if(gn===2){gn=0;var o=Wo,l=Sf,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=O.T,O.T=null;var m=j.p;j.p=2;var x=pt;pt|=4;try{n6(o,l.alternate,l)}finally{pt=x,j.p=m,O.T=h}}gn=3}}function T6(){if(gn===4||gn===3){gn=0,wX();var o=Wo,l=Sf,h=Gs,m=p6;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?gn=5:(gn=0,Sf=Wo=null,M6(o,o.pendingLanes));var x=o.pendingLanes;if(x===0&&(Vo=null),w2(h),l=l.stateNode,rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(vh,l,void 0,(l.current.flags&128)===128)}catch{}if(m!==null){l=O.T,x=j.p,j.p=2,O.T=null;try{for(var A=o.onRecoverableError,C=0;C<m.length;C++){var k=m[C];A(k.value,{componentStack:k.stack})}}finally{O.T=l,j.p=x}}(Gs&3)!==0&&Qm(),qa(o),x=o.pendingLanes,(h&261930)!==0&&(x&42)!==0?o===aA?Jh++:(Jh=0,aA=o):Jh=0,e0(0)}}function M6(o,l){(o.pooledCacheLanes&=l)===0&&(l=o.pooledCache,l!=null&&(o.pooledCache=null,Nh(l)))}function Qm(){return D6(),$6(),T6(),F6()}function F6(){if(gn!==5)return!1;var o=Wo,l=iA;iA=0;var h=w2(Gs),m=O.T,x=j.p;try{j.p=32>h?32:h,O.T=null,h=rA,rA=null;var A=Wo,C=Gs;if(gn=0,Sf=Wo=null,Gs=0,(pt&6)!==0)throw Error(i(331));var k=pt;if(pt|=4,d6(A.current),l6(A,A.current,C,h),pt=k,e0(0,!1),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(vh,A)}catch{}return!0}finally{j.p=x,O.T=m,M6(o,l)}}function k6(o,l,h){l=Mr(h,l),l=BE(o.stateNode,l,2),o=Io(o,l,2),o!==null&&(xh(o,2),qa(o))}function bt(o,l,h){if(o.tag===3)k6(o,o,h);else for(;l!==null;){if(l.tag===3){k6(l,o,h);break}else if(l.tag===1){var m=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Vo===null||!Vo.has(m))){o=Mr(h,o),h=Ok(2),m=Io(l,h,2),m!==null&&(Nk(h,m,l,o),xh(m,2),qa(m));break}}l=l.return}}function uA(o,l,h){var m=o.pingCache;if(m===null){m=o.pingCache=new ZV;var x=new Set;m.set(l,x)}else x=m.get(l),x===void 0&&(x=new Set,m.set(l,x));x.has(h)||(eA=!0,x.add(h),o=nW.bind(null,o,l,h),l.then(o,o))}function nW(o,l,h){var m=o.pingCache;m!==null&&m.delete(l),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,kt===o&&(et&h)===h&&(Zt===4||Zt===3&&(et&62914560)===et&&300>ir()-Hm?(pt&2)===0&&_f(o,0):tA|=h,Af===et&&(Af=0)),qa(o)}function O6(o,l){l===0&&(l=D5()),o=fl(o,l),o!==null&&(xh(o,l),qa(o))}function iW(o){var l=o.memoizedState,h=0;l!==null&&(h=l.retryLane),O6(o,h)}function rW(o,l){var h=0;switch(o.tag){case 31:case 13:var m=o.stateNode,x=o.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=o.stateNode;break;case 22:m=o.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(l),O6(o,h)}function aW(o,l){return E2(o,l)}var Zm=null,Cf=null,lA=!1,Km=!1,cA=!1,Zo=0;function qa(o){o!==Cf&&o.next===null&&(Cf===null?Zm=Cf=o:Cf=Cf.next=o),Km=!0,lA||(lA=!0,oW())}function e0(o,l){if(!cA&&Km){cA=!0;do for(var h=!1,m=Zm;m!==null;){if(o!==0){var x=m.pendingLanes;if(x===0)var A=0;else{var C=m.suspendedLanes,k=m.pingedLanes;A=(1<<31-ar(42|o)+1)-1,A&=x&~(C&~k),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,B6(m,A))}else A=et,A=nm(m,m===kt?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||bh(m,A)||(h=!0,B6(m,A));m=m.next}while(h);cA=!1}}function sW(){N6()}function N6(){Km=lA=!1;var o=0;Zo!==0&&yW()&&(o=Zo);for(var l=ir(),h=null,m=Zm;m!==null;){var x=m.next,A=R6(m,l);A===0?(m.next=null,h===null?Zm=x:h.next=x,x===null&&(Cf=h)):(h=m,(o!==0||(A&3)!==0)&&(Km=!0)),m=x}gn!==0&&gn!==5||e0(o),Zo!==0&&(Zo=0)}function R6(o,l){for(var h=o.suspendedLanes,m=o.pingedLanes,x=o.expirationTimes,A=o.pendingLanes&-62914561;0<A;){var C=31-ar(A),k=1<<C,L=x[C];L===-1?((k&h)===0||(k&m)!==0)&&(x[C]=OX(k,l)):L<=l&&(o.expiredLanes|=k),A&=~k}if(l=kt,h=et,h=nm(o,o===l?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m=o.callbackNode,h===0||o===l&&(vt===2||vt===9)||o.cancelPendingCommit!==null)return m!==null&&m!==null&&A2(m),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||bh(o,h)){if(l=h&-h,l===o.callbackPriority)return l;switch(m!==null&&A2(m),w2(h)){case 2:case 8:h=w5;break;case 32:h=Kp;break;case 268435456:h=C5;break;default:h=Kp}return m=z6.bind(null,o),h=E2(h,m),o.callbackPriority=l,o.callbackNode=h,l}return m!==null&&m!==null&&A2(m),o.callbackPriority=2,o.callbackNode=null,2}function z6(o,l){if(gn!==0&&gn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Qm()&&o.callbackNode!==h)return null;var m=et;return m=nm(o,o===kt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),m===0?null:(y6(o,m,l),R6(o,ir()),o.callbackNode!=null&&o.callbackNode===h?z6.bind(null,o):null)}function B6(o,l){if(Qm())return null;y6(o,l,!0)}function oW(){bW(function(){(pt&6)!==0?E2(_5,sW):N6()})}function fA(){if(Zo===0){var o=ff;o===0&&(o=Jp,Jp<<=1,(Jp&261888)===0&&(Jp=256)),Zo=o}return Zo}function L6(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:sm(""+o)}function U6(o,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,o.id&&h.setAttribute("form",o.id),l.parentNode.insertBefore(h,l),o=new FormData(o),h.parentNode.removeChild(h),o}function uW(o,l,h,m,x){if(l==="submit"&&h&&h.stateNode===x){var A=L6((x[ki]||null).action),C=m.submitter;C&&(l=(l=C[ki]||null)?L6(l.formAction):C.getAttribute("formAction"),l!==null&&(A=l,C=null));var k=new cm("action","action",null,m,x);o.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Zo!==0){var L=C?U6(x,C):new FormData(x);FE(h,{pending:!0,data:L,method:x.method,action:A},null,L)}}else typeof A=="function"&&(k.preventDefault(),L=C?U6(x,C):new FormData(x),FE(h,{pending:!0,data:L,method:x.method,action:A},A,L))},currentTarget:x}]})}}for(var dA=0;dA<V2.length;dA++){var hA=V2[dA],lW=hA.toLowerCase(),cW=hA[0].toUpperCase()+hA.slice(1);ia(lW,"on"+cW)}ia(mF,"onAnimationEnd"),ia(yF,"onAnimationIteration"),ia(vF,"onAnimationStart"),ia("dblclick","onDoubleClick"),ia("focusin","onFocus"),ia("focusout","onBlur"),ia(CV,"onTransitionRun"),ia(DV,"onTransitionStart"),ia($V,"onTransitionCancel"),ia(bF,"onTransitionEnd"),Qc("onMouseEnter",["mouseout","mouseover"]),Qc("onMouseLeave",["mouseout","mouseover"]),Qc("onPointerEnter",["pointerout","pointerover"]),Qc("onPointerLeave",["pointerout","pointerover"]),ol("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ol("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ol("onBeforeInput",["compositionend","keypress","textInput","paste"]),ol("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ol("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ol("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var t0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fW=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(t0));function j6(o,l){l=(l&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],x=m.event;m=m.listeners;e:{var A=void 0;if(l)for(var C=m.length-1;0<=C;C--){var k=m[C],L=k.instance,Q=k.currentTarget;if(k=k.listener,L!==A&&x.isPropagationStopped())break e;A=k,x.currentTarget=Q;try{A(x)}catch(ie){hm(ie)}x.currentTarget=null,A=L}else for(C=0;C<m.length;C++){if(k=m[C],L=k.instance,Q=k.currentTarget,k=k.listener,L!==A&&x.isPropagationStopped())break e;A=k,x.currentTarget=Q;try{A(x)}catch(ie){hm(ie)}x.currentTarget=null,A=L}}}}function Je(o,l){var h=l[C2];h===void 0&&(h=l[C2]=new Set);var m=o+"__bubble";h.has(m)||(q6(l,o,2,!1),h.add(m))}function gA(o,l,h){var m=0;l&&(m|=4),q6(h,o,m,l)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function pA(o){if(!o[Jm]){o[Jm]=!0,N5.forEach(function(h){h!=="selectionchange"&&(fW.has(h)||gA(h,!1,o),gA(h,!0,o))});var l=o.nodeType===9?o:o.ownerDocument;l===null||l[Jm]||(l[Jm]=!0,gA("selectionchange",!1,l))}}function q6(o,l,h,m){switch(mO(l)){case 2:var x=UW;break;case 8:x=jW;break;default:x=MA}h=x.bind(null,l,h,o),x=void 0,!R2||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),m?x!==void 0?o.addEventListener(l,h,{capture:!0,passive:x}):o.addEventListener(l,h,!0):x!==void 0?o.addEventListener(l,h,{passive:x}):o.addEventListener(l,h,!1)}function mA(o,l,h,m,x){var A=m;if((l&1)===0&&(l&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var k=m.stateNode.containerInfo;if(k===x)break;if(C===4)for(C=m.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;k!==null;){if(C=Xc(k),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){m=A=C;continue e}k=k.parentNode}}m=m.return}Y5(function(){var Q=A,ie=O2(h),ue=[];e:{var Z=xF.get(o);if(Z!==void 0){var K=cm,we=o;switch(o){case"keypress":if(um(h)===0)break e;case"keydown":case"keyup":K=rV;break;case"focusin":we="focus",K=U2;break;case"focusout":we="blur",K=U2;break;case"beforeblur":case"afterblur":K=U2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=W5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=YX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=oV;break;case mF:case yF:case vF:K=WX;break;case bF:K=lV;break;case"scroll":case"scrollend":K=HX;break;case"wheel":K=fV;break;case"copy":case"cut":case"paste":K=ZX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Z5;break;case"toggle":case"beforetoggle":K=hV}var Ue=(l&4)!==0,Dt=!Ue&&(o==="scroll"||o==="scrollend"),H=Ue?Z!==null?Z+"Capture":null:Z;Ue=[];for(var I=Q,W;I!==null;){var oe=I;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||H===null||(oe=Sh(I,H),oe!=null&&Ue.push(n0(I,oe,W))),Dt)break;I=I.return}0<Ue.length&&(Z=new K(Z,we,null,h,ie),ue.push({event:Z,listeners:Ue}))}}if((l&7)===0){e:{if(Z=o==="mouseover"||o==="pointerover",K=o==="mouseout"||o==="pointerout",Z&&h!==k2&&(we=h.relatedTarget||h.fromElement)&&(Xc(we)||we[Yc]))break e;if((K||Z)&&(Z=ie.window===ie?ie:(Z=ie.ownerDocument)?Z.defaultView||Z.parentWindow:window,K?(we=h.relatedTarget||h.toElement,K=Q,we=we?Xc(we):null,we!==null&&(Dt=a(we),Ue=we.tag,we!==Dt||Ue!==5&&Ue!==27&&Ue!==6)&&(we=null)):(K=null,we=Q),K!==we)){if(Ue=W5,oe="onMouseLeave",H="onMouseEnter",I="mouse",(o==="pointerout"||o==="pointerover")&&(Ue=Z5,oe="onPointerLeave",H="onPointerEnter",I="pointer"),Dt=K==null?Z:Ah(K),W=we==null?Z:Ah(we),Z=new Ue(oe,I+"leave",K,h,ie),Z.target=Dt,Z.relatedTarget=W,oe=null,Xc(ie)===Q&&(Ue=new Ue(H,I+"enter",we,h,ie),Ue.target=W,Ue.relatedTarget=Dt,oe=Ue),Dt=oe,K&&we)t:{for(Ue=dW,H=K,I=we,W=0,oe=H;oe;oe=Ue(oe))W++;oe=0;for(var Ne=I;Ne;Ne=Ue(Ne))oe++;for(;0<W-oe;)H=Ue(H),W--;for(;0<oe-W;)I=Ue(I),oe--;for(;W--;){if(H===I||I!==null&&H===I.alternate){Ue=H;break t}H=Ue(H),I=Ue(I)}Ue=null}else Ue=null;K!==null&&I6(ue,Z,K,Ue,!1),we!==null&&Dt!==null&&I6(ue,Dt,we,Ue,!0)}}e:{if(Z=Q?Ah(Q):window,K=Z.nodeName&&Z.nodeName.toLowerCase(),K==="select"||K==="input"&&Z.type==="file")var ut=aF;else if(iF(Z))if(sF)ut=SV;else{ut=EV;var $e=xV}else K=Z.nodeName,!K||K.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Q&&F2(Q.elementType)&&(ut=aF):ut=AV;if(ut&&(ut=ut(o,Q))){rF(ue,ut,h,ie);break e}$e&&$e(o,Z,Q),o==="focusout"&&Q&&Z.type==="number"&&Q.memoizedProps.value!=null&&M2(Z,"number",Z.value)}switch($e=Q?Ah(Q):window,o){case"focusin":(iF($e)||$e.contentEditable==="true")&&(nf=$e,G2=Q,Fh=null);break;case"focusout":Fh=G2=nf=null;break;case"mousedown":Y2=!0;break;case"contextmenu":case"mouseup":case"dragend":Y2=!1,gF(ue,h,ie);break;case"selectionchange":if(wV)break;case"keydown":case"keyup":gF(ue,h,ie)}var Ve;if(q2)e:{switch(o){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else tf?tF(o,h)&&(tt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(tt="onCompositionStart");tt&&(K5&&h.locale!=="ko"&&(tf||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&tf&&(Ve=X5()):(Ro=ie,z2="value"in Ro?Ro.value:Ro.textContent,tf=!0)),$e=e1(Q,tt),0<$e.length&&(tt=new Q5(tt,o,null,h,ie),ue.push({event:tt,listeners:$e}),Ve?tt.data=Ve:(Ve=nF(h),Ve!==null&&(tt.data=Ve)))),(Ve=pV?mV(o,h):yV(o,h))&&(tt=e1(Q,"onBeforeInput"),0<tt.length&&($e=new Q5("onBeforeInput","beforeinput",null,h,ie),ue.push({event:$e,listeners:tt}),$e.data=Ve)),uW(ue,o,Q,h,ie)}j6(ue,l)})}function n0(o,l,h){return{instance:o,listener:l,currentTarget:h}}function e1(o,l){for(var h=l+"Capture",m=[];o!==null;){var x=o,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=Sh(o,h),x!=null&&m.unshift(n0(o,x,A)),x=Sh(o,l),x!=null&&m.push(n0(o,x,A))),o.tag===3)return m;o=o.return}return[]}function dW(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function I6(o,l,h,m,x){for(var A=l._reactName,C=[];h!==null&&h!==m;){var k=h,L=k.alternate,Q=k.stateNode;if(k=k.tag,L!==null&&L===m)break;k!==5&&k!==26&&k!==27||Q===null||(L=Q,x?(Q=Sh(h,A),Q!=null&&C.unshift(n0(h,Q,L))):x||(Q=Sh(h,A),Q!=null&&C.push(n0(h,Q,L)))),h=h.return}C.length!==0&&o.push({event:l,listeners:C})}var hW=/\r\n?/g,gW=/\u0000|\uFFFD/g;function P6(o){return(typeof o=="string"?o:""+o).replace(hW,`
`).replace(gW,"")}function H6(o,l){return l=P6(l),P6(o)===l}function Ct(o,l,h,m,x,A){switch(h){case"children":typeof m=="string"?l==="body"||l==="textarea"&&m===""||Kc(o,m):(typeof m=="number"||typeof m=="bigint")&&l!=="body"&&Kc(o,""+m);break;case"className":rm(o,"class",m);break;case"tabIndex":rm(o,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":rm(o,h,m);break;case"style":H5(o,m,A);break;case"data":if(l!=="object"){rm(o,"data",m);break}case"src":case"href":if(m===""&&(l!=="a"||h!=="href")){o.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=sm(""+m),o.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(l!=="input"&&Ct(o,l,"name",x.name,x,null),Ct(o,l,"formEncType",x.formEncType,x,null),Ct(o,l,"formMethod",x.formMethod,x,null),Ct(o,l,"formTarget",x.formTarget,x,null)):(Ct(o,l,"encType",x.encType,x,null),Ct(o,l,"method",x.method,x,null),Ct(o,l,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){o.removeAttribute(h);break}m=sm(""+m),o.setAttribute(h,m);break;case"onClick":m!=null&&(o.onclick=Ms);break;case"onScroll":m!=null&&Je("scroll",o);break;case"onScrollEnd":m!=null&&Je("scrollend",o);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":o.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){o.removeAttribute("xlink:href");break}h=sm(""+m),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""+m):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":m===!0?o.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?o.setAttribute(h,m):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?o.setAttribute(h,m):o.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?o.removeAttribute(h):o.setAttribute(h,m);break;case"popover":Je("beforetoggle",o),Je("toggle",o),im(o,"popover",m);break;case"xlinkActuate":Ts(o,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Ts(o,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Ts(o,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Ts(o,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Ts(o,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Ts(o,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Ts(o,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Ts(o,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Ts(o,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":im(o,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=IX.get(h)||h,im(o,h,m))}}function yA(o,l,h,m,x,A){switch(h){case"style":H5(o,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof m=="string"?Kc(o,m):(typeof m=="number"||typeof m=="bigint")&&Kc(o,""+m);break;case"onScroll":m!=null&&Je("scroll",o);break;case"onScrollEnd":m!=null&&Je("scrollend",o);break;case"onClick":m!=null&&(o.onclick=Ms);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!R5.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),l=h.slice(2,x?h.length-7:void 0),A=o[ki]||null,A=A!=null?A[h]:null,typeof A=="function"&&o.removeEventListener(l,A,x),typeof m=="function")){typeof A!="function"&&A!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(l,m,x);break e}h in o?o[h]=m:m===!0?o.setAttribute(h,""):im(o,h,m)}}}function Un(o,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Je("error",o),Je("load",o);var m=!1,x=!1,A;for(A in h)if(h.hasOwnProperty(A)){var C=h[A];if(C!=null)switch(A){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ct(o,l,A,C,h,null)}}x&&Ct(o,l,"srcSet",h.srcSet,h,null),m&&Ct(o,l,"src",h.src,h,null);return;case"input":Je("invalid",o);var k=A=C=x=null,L=null,Q=null;for(m in h)if(h.hasOwnProperty(m)){var ie=h[m];if(ie!=null)switch(m){case"name":x=ie;break;case"type":C=ie;break;case"checked":L=ie;break;case"defaultChecked":Q=ie;break;case"value":A=ie;break;case"defaultValue":k=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,l));break;default:Ct(o,l,m,ie,h,null)}}j5(o,A,k,L,Q,C,x,!1);return;case"select":Je("invalid",o),m=C=A=null;for(x in h)if(h.hasOwnProperty(x)&&(k=h[x],k!=null))switch(x){case"value":A=k;break;case"defaultValue":C=k;break;case"multiple":m=k;default:Ct(o,l,x,k,h,null)}l=A,h=C,o.multiple=!!m,l!=null?Zc(o,!!m,l,!1):h!=null&&Zc(o,!!m,h,!0);return;case"textarea":Je("invalid",o),A=x=m=null;for(C in h)if(h.hasOwnProperty(C)&&(k=h[C],k!=null))switch(C){case"value":m=k;break;case"defaultValue":x=k;break;case"children":A=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Ct(o,l,C,k,h,null)}I5(o,m,x,A);return;case"option":for(L in h)if(h.hasOwnProperty(L)&&(m=h[L],m!=null))switch(L){case"selected":o.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Ct(o,l,L,m,h,null)}return;case"dialog":Je("beforetoggle",o),Je("toggle",o),Je("cancel",o),Je("close",o);break;case"iframe":case"object":Je("load",o);break;case"video":case"audio":for(m=0;m<t0.length;m++)Je(t0[m],o);break;case"image":Je("error",o),Je("load",o);break;case"details":Je("toggle",o);break;case"embed":case"source":case"link":Je("error",o),Je("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in h)if(h.hasOwnProperty(Q)&&(m=h[Q],m!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ct(o,l,Q,m,h,null)}return;default:if(F2(l)){for(ie in h)h.hasOwnProperty(ie)&&(m=h[ie],m!==void 0&&yA(o,l,ie,m,h,void 0));return}}for(k in h)h.hasOwnProperty(k)&&(m=h[k],m!=null&&Ct(o,l,k,m,h,null))}function pW(o,l,h,m){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,C=null,k=null,L=null,Q=null,ie=null;for(K in h){var ue=h[K];if(h.hasOwnProperty(K)&&ue!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=ue;default:m.hasOwnProperty(K)||Ct(o,l,K,null,m,ue)}}for(var Z in m){var K=m[Z];if(ue=h[Z],m.hasOwnProperty(Z)&&(K!=null||ue!=null))switch(Z){case"type":A=K;break;case"name":x=K;break;case"checked":Q=K;break;case"defaultChecked":ie=K;break;case"value":C=K;break;case"defaultValue":k=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,l));break;default:K!==ue&&Ct(o,l,Z,K,m,ue)}}T2(o,C,k,L,Q,ie,A,x);return;case"select":K=C=k=Z=null;for(A in h)if(L=h[A],h.hasOwnProperty(A)&&L!=null)switch(A){case"value":break;case"multiple":K=L;default:m.hasOwnProperty(A)||Ct(o,l,A,null,m,L)}for(x in m)if(A=m[x],L=h[x],m.hasOwnProperty(x)&&(A!=null||L!=null))switch(x){case"value":Z=A;break;case"defaultValue":k=A;break;case"multiple":C=A;default:A!==L&&Ct(o,l,x,A,m,L)}l=k,h=C,m=K,Z!=null?Zc(o,!!h,Z,!1):!!m!=!!h&&(l!=null?Zc(o,!!h,l,!0):Zc(o,!!h,h?[]:"",!1));return;case"textarea":K=Z=null;for(k in h)if(x=h[k],h.hasOwnProperty(k)&&x!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Ct(o,l,k,null,m,x)}for(C in m)if(x=m[C],A=h[C],m.hasOwnProperty(C)&&(x!=null||A!=null))switch(C){case"value":Z=x;break;case"defaultValue":K=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==A&&Ct(o,l,C,x,m,A)}q5(o,Z,K);return;case"option":for(var we in h)if(Z=h[we],h.hasOwnProperty(we)&&Z!=null&&!m.hasOwnProperty(we))switch(we){case"selected":o.selected=!1;break;default:Ct(o,l,we,null,m,Z)}for(L in m)if(Z=m[L],K=h[L],m.hasOwnProperty(L)&&Z!==K&&(Z!=null||K!=null))switch(L){case"selected":o.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Ct(o,l,L,Z,m,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ue in h)Z=h[Ue],h.hasOwnProperty(Ue)&&Z!=null&&!m.hasOwnProperty(Ue)&&Ct(o,l,Ue,null,m,Z);for(Q in m)if(Z=m[Q],K=h[Q],m.hasOwnProperty(Q)&&Z!==K&&(Z!=null||K!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,l));break;default:Ct(o,l,Q,Z,m,K)}return;default:if(F2(l)){for(var Dt in h)Z=h[Dt],h.hasOwnProperty(Dt)&&Z!==void 0&&!m.hasOwnProperty(Dt)&&yA(o,l,Dt,void 0,m,Z);for(ie in m)Z=m[ie],K=h[ie],!m.hasOwnProperty(ie)||Z===K||Z===void 0&&K===void 0||yA(o,l,ie,Z,m,K);return}}for(var H in h)Z=h[H],h.hasOwnProperty(H)&&Z!=null&&!m.hasOwnProperty(H)&&Ct(o,l,H,null,m,Z);for(ue in m)Z=m[ue],K=h[ue],!m.hasOwnProperty(ue)||Z===K||Z==null&&K==null||Ct(o,l,ue,Z,m,K)}function G6(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mW(){if(typeof performance.getEntriesByType=="function"){for(var o=0,l=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var x=h[m],A=x.transferSize,C=x.initiatorType,k=x.duration;if(A&&k&&G6(C)){for(C=0,k=x.responseEnd,m+=1;m<h.length;m++){var L=h[m],Q=L.startTime;if(Q>k)break;var ie=L.transferSize,ue=L.initiatorType;ie&&G6(ue)&&(L=L.responseEnd,C+=ie*(L<k?1:(k-Q)/(L-Q)))}if(--m,l+=8*(A+C)/(x.duration/1e3),o++,10<o)break}}if(0<o)return l/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var vA=null,bA=null;function t1(o){return o.nodeType===9?o:o.ownerDocument}function Y6(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X6(o,l){if(o===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&l==="foreignObject"?0:o}function xA(o,l){return o==="textarea"||o==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var EA=null;function yW(){var o=window.event;return o&&o.type==="popstate"?o===EA?!1:(EA=o,!0):(EA=null,!1)}var V6=typeof setTimeout=="function"?setTimeout:void 0,vW=typeof clearTimeout=="function"?clearTimeout:void 0,W6=typeof Promise=="function"?Promise:void 0,bW=typeof queueMicrotask=="function"?queueMicrotask:typeof W6<"u"?function(o){return W6.resolve(null).then(o).catch(xW)}:V6;function xW(o){setTimeout(function(){throw o})}function Ko(o){return o==="head"}function Q6(o,l){var h=l,m=0;do{var x=h.nextSibling;if(o.removeChild(h),x&&x.nodeType===8)if(h=x.data,h==="/$"||h==="/&"){if(m===0){o.removeChild(x),Mf(l);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")i0(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,i0(h);for(var A=h.firstChild;A;){var C=A.nextSibling,k=A.nodeName;A[Eh]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&A.rel.toLowerCase()==="stylesheet"||h.removeChild(A),A=C}}else h==="body"&&i0(o.ownerDocument.body);h=x}while(h);Mf(l)}function Z6(o,l){var h=o;o=0;do{var m=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=m}while(h)}function AA(o){var l=o.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":AA(h),D2(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function EW(o,l,h,m){for(;o.nodeType===1;){var x=h;if(o.nodeName.toLowerCase()!==l.toLowerCase()){if(!m&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(m){if(!o[Eh])switch(l){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(A=o.getAttribute("rel"),A==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(A!==x.rel||o.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||o.getAttribute("title")!==(x.title==null?null:x.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(A=o.getAttribute("src"),(A!==(x.src==null?null:x.src)||o.getAttribute("type")!==(x.type==null?null:x.type)||o.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(l==="input"&&o.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&o.getAttribute("name")===A)return o}else return o;if(o=Rr(o.nextSibling),o===null)break}return null}function AW(o,l,h){if(l==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=Rr(o.nextSibling),o===null))return null;return o}function K6(o,l){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Rr(o.nextSibling),o===null))return null;return o}function SA(o){return o.data==="$?"||o.data==="$~"}function _A(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function SW(o,l){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=l;else if(o.data!=="$?"||h.readyState!=="loading")l();else{var m=function(){l(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),o._reactRetry=m}}function Rr(o){for(;o!=null;o=o.nextSibling){var l=o.nodeType;if(l===1||l===3)break;if(l===8){if(l=o.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return o}var wA=null;function J6(o){o=o.nextSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(l===0)return Rr(o.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}o=o.nextSibling}return null}function eO(o){o=o.previousSibling;for(var l=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return o;l--}else h!=="/$"&&h!=="/&"||l++}o=o.previousSibling}return null}function tO(o,l,h){switch(l=t1(h),o){case"html":if(o=l.documentElement,!o)throw Error(i(452));return o;case"head":if(o=l.head,!o)throw Error(i(453));return o;case"body":if(o=l.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function i0(o){for(var l=o.attributes;l.length;)o.removeAttributeNode(l[0]);D2(o)}var zr=new Map,nO=new Set;function n1(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Ys=j.d;j.d={f:_W,r:wW,D:CW,C:DW,L:$W,m:TW,X:FW,S:MW,M:kW};function _W(){var o=Ys.f(),l=Xm();return o||l}function wW(o){var l=Vc(o);l!==null&&l.tag===5&&l.type==="form"?bk(l):Ys.r(o)}var Df=typeof document>"u"?null:document;function iO(o,l,h){var m=Df;if(m&&typeof l=="string"&&l){var x=$r(l);x='link[rel="'+o+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),nO.has(x)||(nO.add(x),o={rel:o,crossOrigin:h,href:l},m.querySelector(x)===null&&(l=m.createElement("link"),Un(l,"link",o),An(l),m.head.appendChild(l)))}}function CW(o){Ys.D(o),iO("dns-prefetch",o,null)}function DW(o,l){Ys.C(o,l),iO("preconnect",o,l)}function $W(o,l,h){Ys.L(o,l,h);var m=Df;if(m&&o&&l){var x='link[rel="preload"][as="'+$r(l)+'"]';l==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+$r(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+$r(h.imageSizes)+'"]')):x+='[href="'+$r(o)+'"]';var A=x;switch(l){case"style":A=$f(o);break;case"script":A=Tf(o)}zr.has(A)||(o=g({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:o,as:l},h),zr.set(A,o),m.querySelector(x)!==null||l==="style"&&m.querySelector(r0(A))||l==="script"&&m.querySelector(a0(A))||(l=m.createElement("link"),Un(l,"link",o),An(l),m.head.appendChild(l)))}}function TW(o,l){Ys.m(o,l);var h=Df;if(h&&o){var m=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+$r(m)+'"][href="'+$r(o)+'"]',A=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Tf(o)}if(!zr.has(A)&&(o=g({rel:"modulepreload",href:o},l),zr.set(A,o),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(a0(A)))return}m=h.createElement("link"),Un(m,"link",o),An(m),h.head.appendChild(m)}}}function MW(o,l,h){Ys.S(o,l,h);var m=Df;if(m&&o){var x=Wc(m).hoistableStyles,A=$f(o);l=l||"default";var C=x.get(A);if(!C){var k={loading:0,preload:null};if(C=m.querySelector(r0(A)))k.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":l},h),(h=zr.get(A))&&CA(o,h);var L=C=m.createElement("link");An(L),Un(L,"link",o),L._p=new Promise(function(Q,ie){L.onload=Q,L.onerror=ie}),L.addEventListener("load",function(){k.loading|=1}),L.addEventListener("error",function(){k.loading|=2}),k.loading|=4,i1(C,l,m)}C={type:"stylesheet",instance:C,count:1,state:k},x.set(A,C)}}}function FW(o,l){Ys.X(o,l);var h=Df;if(h&&o){var m=Wc(h).hoistableScripts,x=Tf(o),A=m.get(x);A||(A=h.querySelector(a0(x)),A||(o=g({src:o,async:!0},l),(l=zr.get(x))&&DA(o,l),A=h.createElement("script"),An(A),Un(A,"link",o),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(x,A))}}function kW(o,l){Ys.M(o,l);var h=Df;if(h&&o){var m=Wc(h).hoistableScripts,x=Tf(o),A=m.get(x);A||(A=h.querySelector(a0(x)),A||(o=g({src:o,async:!0,type:"module"},l),(l=zr.get(x))&&DA(o,l),A=h.createElement("script"),An(A),Un(A,"link",o),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(x,A))}}function rO(o,l,h,m){var x=(x=Me.current)?n1(x):null;if(!x)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=$f(h.href),h=Wc(x).hoistableStyles,m=h.get(l),m||(m={type:"style",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=$f(h.href);var A=Wc(x).hoistableStyles,C=A.get(o);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(o,C),(A=x.querySelector(r0(o)))&&!A._p&&(C.instance=A,C.state.loading=5),zr.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},zr.set(o,h),A||OW(x,o,h,C.state))),l&&m===null)throw Error(i(528,""));return C}if(l&&m!==null)throw Error(i(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Tf(h),h=Wc(x).hoistableScripts,m=h.get(l),m||(m={type:"script",instance:null,count:0,state:null},h.set(l,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function $f(o){return'href="'+$r(o)+'"'}function r0(o){return'link[rel="stylesheet"]['+o+"]"}function aO(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function OW(o,l,h,m){o.querySelector('link[rel="preload"][as="style"]['+l+"]")?m.loading=1:(l=o.createElement("link"),m.preload=l,l.addEventListener("load",function(){return m.loading|=1}),l.addEventListener("error",function(){return m.loading|=2}),Un(l,"link",h),An(l),o.head.appendChild(l))}function Tf(o){return'[src="'+$r(o)+'"]'}function a0(o){return"script[async]"+o}function sO(o,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var m=o.querySelector('style[data-href~="'+$r(h.href)+'"]');if(m)return l.instance=m,An(m),m;var x=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(o.ownerDocument||o).createElement("style"),An(m),Un(m,"style",x),i1(m,h.precedence,o),l.instance=m;case"stylesheet":x=$f(h.href);var A=o.querySelector(r0(x));if(A)return l.state.loading|=4,l.instance=A,An(A),A;m=aO(h),(x=zr.get(x))&&CA(m,x),A=(o.ownerDocument||o).createElement("link"),An(A);var C=A;return C._p=new Promise(function(k,L){C.onload=k,C.onerror=L}),Un(A,"link",m),l.state.loading|=4,i1(A,h.precedence,o),l.instance=A;case"script":return A=Tf(h.src),(x=o.querySelector(a0(A)))?(l.instance=x,An(x),x):(m=h,(x=zr.get(A))&&(m=g({},h),DA(m,x)),o=o.ownerDocument||o,x=o.createElement("script"),An(x),Un(x,"link",m),o.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(m=l.instance,l.state.loading|=4,i1(m,h.precedence,o));return l.instance}function i1(o,l,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,A=x,C=0;C<m.length;C++){var k=m[C];if(k.dataset.precedence===l)A=k;else if(A!==x)break}A?A.parentNode.insertBefore(o,A.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(o,l.firstChild))}function CA(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.title==null&&(o.title=l.title)}function DA(o,l){o.crossOrigin==null&&(o.crossOrigin=l.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=l.referrerPolicy),o.integrity==null&&(o.integrity=l.integrity)}var r1=null;function oO(o,l,h){if(r1===null){var m=new Map,x=r1=new Map;x.set(h,m)}else x=r1,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(o))return m;for(m.set(o,null),h=h.getElementsByTagName(o),x=0;x<h.length;x++){var A=h[x];if(!(A[Eh]||A[Rn]||o==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var C=A.getAttribute(l)||"";C=o+C;var k=m.get(C);k?k.push(A):m.set(C,[A])}}return m}function uO(o,l,h){o=o.ownerDocument||o,o.head.insertBefore(h,l==="title"?o.querySelector("head > title"):null)}function NW(o,l,h){if(h===1||l.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return o=l.disabled,typeof l.precedence=="string"&&o==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function lO(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function RW(o,l,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var x=$f(m.href),A=l.querySelector(r0(x));if(A){l=A._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(o.count++,o=a1.bind(o),l.then(o,o)),h.state.loading|=4,h.instance=A,An(A);return}A=l.ownerDocument||l,m=aO(m),(x=zr.get(x))&&CA(m,x),A=A.createElement("link"),An(A);var C=A;C._p=new Promise(function(k,L){C.onload=k,C.onerror=L}),Un(A,"link",m),h.instance=A}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=a1.bind(o),l.addEventListener("load",h),l.addEventListener("error",h))}}var $A=0;function zW(o,l){return o.stylesheets&&o.count===0&&o1(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var m=setTimeout(function(){if(o.stylesheets&&o1(o,o.stylesheets),o.unsuspend){var A=o.unsuspend;o.unsuspend=null,A()}},6e4+l);0<o.imgBytes&&$A===0&&($A=62500*mW());var x=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&o1(o,o.stylesheets),o.unsuspend)){var A=o.unsuspend;o.unsuspend=null,A()}},(o.imgBytes>$A?50:800)+l);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m),clearTimeout(x)}}:null}function a1(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)o1(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var s1=null;function o1(o,l){o.stylesheets=null,o.unsuspend!==null&&(o.count++,s1=new Map,l.forEach(BW,o),s1=null,a1.call(o))}function BW(o,l){if(!(l.state.loading&4)){var h=s1.get(o);if(h)var m=h.get(null);else{h=new Map,s1.set(o,h);for(var x=o.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var C=x[A];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(h.set(C.dataset.precedence,C),m=C)}m&&h.set(null,m)}x=l.instance,C=x.getAttribute("data-precedence"),A=h.get(C)||m,A===m&&h.set(null,x),h.set(C,x),this.count++,m=a1.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),A?A.parentNode.insertBefore(x,A.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(x,o.firstChild)),l.state.loading|=4}}var s0={$$typeof:w,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function LW(o,l,h,m,x,A,C,k,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=S2(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=S2(0),this.hiddenUpdates=S2(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function cO(o,l,h,m,x,A,C,k,L,Q,ie,ue){return o=new LW(o,l,h,C,L,Q,ie,ue,k),l=1,A===!0&&(l|=24),A=or(3,null,null,l),o.current=A,A.stateNode=o,l=oE(),l.refCount++,o.pooledCache=l,l.refCount++,A.memoizedState={element:m,isDehydrated:h,cache:l},fE(A),o}function fO(o){return o?(o=sf,o):sf}function dO(o,l,h,m,x,A){x=fO(x),m.context===null?m.context=x:m.pendingContext=x,m=qo(l),m.payload={element:h},A=A===void 0?null:A,A!==null&&(m.callback=A),h=Io(o,m,l),h!==null&&(Li(h,o,l),Lh(h,o,l))}function hO(o,l){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<l?h:l}}function TA(o,l){hO(o,l),(o=o.alternate)&&hO(o,l)}function gO(o){if(o.tag===13||o.tag===31){var l=fl(o,67108864);l!==null&&Li(l,o,67108864),TA(o,67108864)}}function pO(o){if(o.tag===13||o.tag===31){var l=dr();l=_2(l);var h=fl(o,l);h!==null&&Li(h,o,l),TA(o,l)}}var u1=!0;function UW(o,l,h,m){var x=O.T;O.T=null;var A=j.p;try{j.p=2,MA(o,l,h,m)}finally{j.p=A,O.T=x}}function jW(o,l,h,m){var x=O.T;O.T=null;var A=j.p;try{j.p=8,MA(o,l,h,m)}finally{j.p=A,O.T=x}}function MA(o,l,h,m){if(u1){var x=FA(m);if(x===null)mA(o,l,m,l1,h),yO(o,m);else if(IW(x,o,l,h,m))m.stopPropagation();else if(yO(o,m),l&4&&-1<qW.indexOf(o)){for(;x!==null;){var A=Vc(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var C=sl(A.pendingLanes);if(C!==0){var k=A;for(k.pendingLanes|=2,k.entangledLanes|=2;C;){var L=1<<31-ar(C);k.entanglements[1]|=L,C&=~L}qa(A),(pt&6)===0&&(Gm=ir()+500,e0(0))}}break;case 31:case 13:k=fl(A,2),k!==null&&Li(k,A,2),Xm(),TA(A,2)}if(A=FA(m),A===null&&mA(o,l,m,l1,h),A===x)break;x=A}x!==null&&m.stopPropagation()}else mA(o,l,m,null,h)}}function FA(o){return o=O2(o),kA(o)}var l1=null;function kA(o){if(l1=null,o=Xc(o),o!==null){var l=a(o);if(l===null)o=null;else{var h=l.tag;if(h===13){if(o=s(l),o!==null)return o;o=null}else if(h===31){if(o=u(l),o!==null)return o;o=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;o=null}else l!==o&&(o=null)}}return l1=o,null}function mO(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(CX()){case _5:return 2;case w5:return 8;case Kp:case DX:return 32;case C5:return 268435456;default:return 32}default:return 32}}var OA=!1,Jo=null,eu=null,tu=null,o0=new Map,u0=new Map,nu=[],qW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yO(o,l){switch(o){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":eu=null;break;case"mouseover":case"mouseout":tu=null;break;case"pointerover":case"pointerout":o0.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":u0.delete(l.pointerId)}}function l0(o,l,h,m,x,A){return o===null||o.nativeEvent!==A?(o={blockedOn:l,domEventName:h,eventSystemFlags:m,nativeEvent:A,targetContainers:[x]},l!==null&&(l=Vc(l),l!==null&&gO(l)),o):(o.eventSystemFlags|=m,l=o.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),o)}function IW(o,l,h,m,x){switch(l){case"focusin":return Jo=l0(Jo,o,l,h,m,x),!0;case"dragenter":return eu=l0(eu,o,l,h,m,x),!0;case"mouseover":return tu=l0(tu,o,l,h,m,x),!0;case"pointerover":var A=x.pointerId;return o0.set(A,l0(o0.get(A)||null,o,l,h,m,x)),!0;case"gotpointercapture":return A=x.pointerId,u0.set(A,l0(u0.get(A)||null,o,l,h,m,x)),!0}return!1}function vO(o){var l=Xc(o.target);if(l!==null){var h=a(l);if(h!==null){if(l=h.tag,l===13){if(l=s(h),l!==null){o.blockedOn=l,k5(o.priority,function(){pO(h)});return}}else if(l===31){if(l=u(h),l!==null){o.blockedOn=l,k5(o.priority,function(){pO(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function c1(o){if(o.blockedOn!==null)return!1;for(var l=o.targetContainers;0<l.length;){var h=FA(o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);k2=m,h.target.dispatchEvent(m),k2=null}else return l=Vc(h),l!==null&&gO(l),o.blockedOn=h,!1;l.shift()}return!0}function bO(o,l,h){c1(o)&&h.delete(l)}function PW(){OA=!1,Jo!==null&&c1(Jo)&&(Jo=null),eu!==null&&c1(eu)&&(eu=null),tu!==null&&c1(tu)&&(tu=null),o0.forEach(bO),u0.forEach(bO)}function f1(o,l){o.blockedOn===l&&(o.blockedOn=null,OA||(OA=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,PW)))}var d1=null;function xO(o){d1!==o&&(d1=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){d1===o&&(d1=null);for(var l=0;l<o.length;l+=3){var h=o[l],m=o[l+1],x=o[l+2];if(typeof m!="function"){if(kA(m||h)===null)continue;break}var A=Vc(h);A!==null&&(o.splice(l,3),l-=3,FE(A,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function Mf(o){function l(L){return f1(L,o)}Jo!==null&&f1(Jo,o),eu!==null&&f1(eu,o),tu!==null&&f1(tu,o),o0.forEach(l),u0.forEach(l);for(var h=0;h<nu.length;h++){var m=nu[h];m.blockedOn===o&&(m.blockedOn=null)}for(;0<nu.length&&(h=nu[0],h.blockedOn===null);)vO(h),h.blockedOn===null&&nu.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],A=h[m+1],C=x[ki]||null;if(typeof A=="function")C||xO(h);else if(C){var k=null;if(A&&A.hasAttribute("formAction")){if(x=A,C=A[ki]||null)k=C.formAction;else if(kA(x)!==null)continue}else k=C.action;typeof k=="function"?h[m+1]=k:(h.splice(m,3),m-=3),xO(h)}}}function EO(){function o(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(C){return x=C})},focusReset:"manual",scroll:"manual"})}function l(){x!==null&&(x(),x=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,x=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),x!==null&&(x(),x=null)}}}function NA(o){this._internalRoot=o}h1.prototype.render=NA.prototype.render=function(o){var l=this._internalRoot;if(l===null)throw Error(i(409));var h=l.current,m=dr();dO(h,m,o,l,null,null)},h1.prototype.unmount=NA.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var l=o.containerInfo;dO(o.current,2,null,o,null,null),Xm(),l[Yc]=null}};function h1(o){this._internalRoot=o}h1.prototype.unstable_scheduleHydration=function(o){if(o){var l=F5();o={blockedOn:null,target:o,priority:l};for(var h=0;h<nu.length&&l!==0&&l<nu[h].priority;h++);nu.splice(h,0,o),h===0&&vO(o)}};var AO=t.version;if(AO!=="19.2.1")throw Error(i(527,AO,"19.2.1"));j.findDOMNode=function(o){var l=o._reactInternals;if(l===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=f(l),o=o!==null?d(o):null,o=o===null?null:o.stateNode,o};var HW={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var g1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!g1.isDisabled&&g1.supportsFiber)try{vh=g1.inject(HW),rr=g1}catch{}}return f0.createRoot=function(o,l){if(!r(o))throw Error(i(299));var h=!1,m="",x=Tk,A=Mk,C=Fk;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=cO(o,1,!1,null,null,h,m,null,x,A,C,EO),o[Yc]=l.current,pA(o),new NA(l)},f0.hydrateRoot=function(o,l,h){if(!r(o))throw Error(i(299));var m=!1,x="",A=Tk,C=Mk,k=Fk,L=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(C=h.onCaughtError),h.onRecoverableError!==void 0&&(k=h.onRecoverableError),h.formState!==void 0&&(L=h.formState)),l=cO(o,1,!0,l,h??null,m,x,L,A,C,k,EO),l.context=fO(null),h=l.current,m=dr(),m=_2(m),x=qo(m),x.callback=null,Io(h,x,m),h=m,l.current.lanes=h,xh(l,h),qa(l),o[Yc]=l.current,pA(o),new h1(l)},f0.version="19.2.1",f0}var kO;function eQ(){if(kO)return BA.exports;kO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),BA.exports=JW(),BA.exports}var tQ=eQ();const nQ=/("(?:[^\\"]|\\.)*")|[:,]/g;function qA(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(s,u,c){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-u.length-c;if(f.length<=d){const g=f.replace(nQ,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const g=u+n,p=[];let y=0,v,b;if(Array.isArray(s)){v="[",b="]";const{length:E}=s;for(;y<E;y++)p.push(a(s[y],g,y===E-1?0:1)||"null")}else{v="{",b="}";const E=Object.keys(s),{length:S}=E;for(;y<S;y++){const _=E[y],w=`${JSON.stringify(_)}: `,D=a(s[_],g,w.length+(y===S-1?0:1));D!==void 0&&p.push(w+D)}}if(p.length>0)return[v,n+p.join(`,
${g}`),b].join(`
${u}`)}return f})(e,"",0)}function tr(e,t,n){return e.fields=t||[],e.fname=n,e}function tn(e){return e==null?null:e.fname}function si(e){return e==null?null:e.fields}function _z(e){return e.length===1?iQ(e[0]):rQ(e)}const iQ=e=>function(t){return t[e]},rQ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ne(e){throw Error(e)}function ps(e){const t=[],n=e.length;let i=null,r=0,a="",s,u,c;e=e+"";function f(){t.push(a+e.substring(s,u)),a="",s=u+1}for(s=u=0;u<n;++u)if(c=e[u],c==="\\")a+=e.substring(s,u++),s=u;else if(c===i)f(),i=null,r=-1;else{if(i)continue;s===r&&c==='"'||s===r&&c==="'"?(s=u+1,i=c):c==="."&&!r?u>s?f():s=u+1:c==="["?(u>s&&f(),r=s=u+1):c==="]"&&(r||ne("Access path missing open bracket: "+e),r>0&&f(),r=0,s=u+1)}return r&&ne("Access path missing closing bracket: "+e),i&&ne("Access path missing closing quote: "+e),u>s&&(u++,f()),t}function Xr(e,t,n){const i=ps(e);return e=i.length===1?i[0]:e,tr((n&&n.get||_z)(i),[e],t||e)}const np=Xr("id"),di=tr(e=>e,[],"identity"),hu=tr(()=>0,[],"zero"),Hd=tr(()=>1,[],"one"),Vr=tr(()=>!0,[],"true"),au=tr(()=>!1,[],"false"),wz=new Set(Object.getOwnPropertyNames(Object.prototype));function aQ(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const Cz=0,e3=1,t3=2,Dz=3,$z=4;function lb(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:aQ,i=e||Cz;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=e3&&n(t||"error","ERROR",arguments),this},warn(){return i>=t3&&n(t||"warn","WARN",arguments),this},info(){return i>=Dz&&n(t||"log","INFO",arguments),this},debug(){return i>=$z&&n(t||"log","DEBUG",arguments),this}}}var se=Array.isArray;function Ae(e){return e===Object(e)}const OO=e=>e!=="__proto__";function Gd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=sQ(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;Yd(i,a,r[a],s)}return i},{})}function Yd(e,t,n,i){if(!OO(t))return;let r,a;if(Ae(n)&&!se(n)){a=Ae(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Yd(a,r,n[r]):OO(r)&&(a[r]=n[r])}else e[t]=n}function sQ(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function st(e){return e[e.length-1]}function ri(e){return e==null||e===""?null:+e}const Tz=e=>t=>e*Math.exp(t),Mz=e=>t=>Math.log(e*t),Fz=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),kz=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,Ty=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function cb(e,t,n,i){const r=n(e[0]),a=n(st(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function Oz(e,t){return cb(e,t,ri,di)}function Nz(e,t){var n=Math.sign(e[0]);return cb(e,t,Mz(n),Tz(n))}function Rz(e,t,n){return cb(e,t,Ty(n),Ty(1/n))}function zz(e,t,n){return cb(e,t,Fz(n),kz(n))}function fb(e,t,n,i,r){const a=i(e[0]),s=i(st(e)),u=t!=null?i(t):(a+s)/2;return[r(u+(a-u)*n),r(u+(s-u)*n)]}function n3(e,t,n){return fb(e,t,n,ri,di)}function i3(e,t,n){const i=Math.sign(e[0]);return fb(e,t,n,Mz(i),Tz(i))}function My(e,t,n,i){return fb(e,t,n,Ty(i),Ty(1/i))}function r3(e,t,n,i){return fb(e,t,n,Fz(i),kz(i))}function Bz(e){return 1+~~(new Date(e).getMonth()/3)}function Lz(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ee(e){return e!=null?se(e)?e:[e]:[]}function Uz(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Ye(e){return typeof e=="function"}const oQ="descending";function a3(e,t,n){n=n||{},t=Ee(t)||[];const i=[],r=[],a={},s=n.comparator||uQ;return Ee(e).forEach((u,c)=>{u!=null&&(i.push(t[c]===oQ?-1:1),r.push(u=Ye(u)?u:Xr(u,null,n)),(si(u)||[]).forEach(f=>a[f]=1))}),r.length===0?null:tr(s(r,i),Object.keys(a))}const ip=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),uQ=(e,t)=>e.length===1?lQ(e[0],t[0]):cQ(e,t,e.length),lQ=(e,t)=>function(n,i){return ip(e(n),e(i))*t},cQ=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,u=-1;for(;s===0&&++u<n;)a=e[u],s=ip(a(i),a(r));return s*t[u]});function hi(e){return Ye(e)?e:()=>e}function s3(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Ge(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function ss(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function jz(e,t){const n=e.length;let i=-1,r,a,s,u,c;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(u=c=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,u=i),s<a&&(s=a,c=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(u=c=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,u=i),s<a&&(s=a,c=i))}return[u,c]}function _e(e,t){return Object.hasOwn(e,t)}const p1={};function Xd(e){let t={},n;function i(a){return _e(t,a)&&t[a]!==p1}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===p1&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=p1),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const u in t){const c=t[u];c!==p1&&(!n||!n(c))&&(a[u]=c,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function qz(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let u=e[0],c=st(e),f;c<u&&(f=u,u=c,c=f),f=Math.abs(t-u);const d=Math.abs(c-t);return f<d&&f<=s?i:d<=s?r:a}function be(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ge(i,n)}function Yf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function Hu(e){return typeof e=="boolean"}function Su(e){return Object.prototype.toString.call(e)==="[object Date]"}function Iz(e){return e&&Ye(e[Symbol.iterator])}function dt(e){return typeof e=="number"}function o3(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Se(e){return typeof e=="string"}function u3(e,t,n){e&&(e=t?Ee(e).map(u=>u.replace(/\\(.)/g,"$1")):Ee(e));const i=e&&e.length,r=n&&n.get||_z,a=u=>r(t?[u]:ps(u));let s;if(!i)s=function(){return""};else if(i===1){const u=a(e[0]);s=function(c){return""+u(c)}}else{const u=e.map(a);s=function(c){let f=""+u[0](c),d=0;for(;++d<i;)f+="|"+u[d](c);return f}}return tr(s,e,"key")}function Pz(e,t){const n=e[0],i=st(e),r=+t;return r?r===1?i:n+r*(i-n):n}const fQ=1e4;function Hz(e){e=+e||fQ;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,u)=>(++i>e&&(n=t,t={},i=1),t[s]=u);return r(),{clear:r,has:s=>_e(t,s)||_e(n,s),get:s=>_e(t,s)?t[s]:_e(n,s)?a(s,n[s]):void 0,set:(s,u)=>_e(t,s)?t[s]=u:a(s,u)}}function Gz(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let u=0,c=0,f=0;for(;u<r&&c<a;++f)s[f]=e(t[u],n[c])>0?n[c++]:t[u++];for(;u<r;++u,++f)s[f]=t[u];for(;c<a;++c,++f)s[f]=n[c];return s}function B0(e,t){let n="";for(;--t>=0;)n+=e;return n}function Yz(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?B0(r,s)+a:i==="center"?B0(r,~~(s/2))+a+B0(r,Math.ceil(s/2)):a+B0(r,s)}function rp(e){return e&&st(e)-e[0]||0}function ve(e){return se(e)?"["+e.map(ve)+"]":Ae(e)||Se(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function l3(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const dQ=e=>dt(e)||Su(e)?e:Date.parse(e);function c3(e,t){return t=t||dQ,e==null||e===""?null:t(e)}function f3(e){return e==null||e===""?null:e+""}function Ea(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function Xz(e,t,n,i){const r=i??"",a=e+"",s=a.length,u=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-u):n==="center"?a.slice(0,Math.ceil(u/2))+r+a.slice(s-~~(u/2)):a.slice(0,u)+r}function uu(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var NO={},IA={},PA=34,d0=10,HA=13;function Vz(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function hQ(e,t){var n=Vz(e);return function(i,r){return t(n(i),r,e)}}function RO(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function ji(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function gQ(e){return e<0?"-"+ji(-e,6):e>9999?"+"+ji(e,6):ji(e,4)}function pQ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":gQ(e.getUTCFullYear())+"-"+ji(e.getUTCMonth()+1,2)+"-"+ji(e.getUTCDate(),2)+(r?"T"+ji(t,2)+":"+ji(n,2)+":"+ji(i,2)+"."+ji(r,3)+"Z":i?"T"+ji(t,2)+":"+ji(n,2)+":"+ji(i,2)+"Z":n||t?"T"+ji(t,2)+":"+ji(n,2)+"Z":"")}function mQ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,b=r(g,function(E,S){if(y)return y(E,S-1);v=E,y=p?hQ(E,p):Vz(E)});return b.columns=v||[],b}function r(g,p){var y=[],v=g.length,b=0,E=0,S,_=v<=0,w=!1;g.charCodeAt(v-1)===d0&&--v,g.charCodeAt(v-1)===HA&&--v;function D(){if(_)return IA;if(w)return w=!1,NO;var M,$=b,F;if(g.charCodeAt($)===PA){for(;b++<v&&g.charCodeAt(b)!==PA||g.charCodeAt(++b)===PA;);return(M=b)>=v?_=!0:(F=g.charCodeAt(b++))===d0?w=!0:F===HA&&(w=!0,g.charCodeAt(b)===d0&&++b),g.slice($+1,M-1).replace(/""/g,'"')}for(;b<v;){if((F=g.charCodeAt(M=b++))===d0)w=!0;else if(F===HA)w=!0,g.charCodeAt(b)===d0&&++b;else if(F!==n)continue;return g.slice($,M)}return _=!0,g.slice($,v)}for(;(S=D())!==IA;){for(var T=[];S!==NO&&S!==IA;)T.push(S),S=D();p&&(T=p(T,E++))==null||y.push(T)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(g,p){return p==null&&(p=RO(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function u(g,p){return p==null&&(p=RO(g)),a(g,p).join(`
`)}function c(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?pQ(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:s,formatBody:u,formatRows:c,formatRow:f,formatValue:d}}function yQ(e){return e}function vQ(e){if(e==null)return yQ;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(u,c){c||(t=n=0);var f=2,d=u.length,g=new Array(d);for(g[0]=(t+=u[0])*i+a,g[1]=(n+=u[1])*r+s;f<d;)g[f]=u[f],++f;return g}}function bQ(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function xQ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return zO(e,n)})}:zO(e,t)}function zO(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=Wz(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function Wz(e,t){var n=vQ(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&bQ(g,v)}function a(d){return n(d)}function s(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function u(d){for(var g=s(d);g.length<4;)g.push(g[0]);return g}function c(d){return d.map(u)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:g,coordinates:p}}return f(t)}function EQ(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=u(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var E=v===y?y:v.concat(y);i[E.start=v.start]=r[E.end=y.end]=E}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function u(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function c(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return c(r,i),c(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function AQ(e){return Wz(e,SQ.apply(this,arguments))}function SQ(e,t,n){var i,r,a;if(arguments.length>1)i=_Q(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:EQ(e,i)}}function _Q(e,t,n){var i=[],r=[],a;function s(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function u(g){g.forEach(s)}function c(g){g.forEach(u)}function f(g){g.forEach(c)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":u(g.arcs);break;case"MultiLineString":case"Polygon":c(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function lo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function wQ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vd(e){let t,n,i;e.length!==2?(t=lo,n=(u,c)=>lo(e(u),c),i=(u,c)=>e(u)-c):(t=e===lo||e===wQ?e:CQ,n=e,i=e);function r(u,c,f=0,d=u.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(u[g],c)<0?f=g+1:d=g}while(f<d)}return f}function a(u,c,f=0,d=u.length){if(f<d){if(t(c,c)!==0)return d;do{const g=f+d>>>1;n(u[g],c)<=0?f=g+1:d=g}while(f<d)}return f}function s(u,c,f=0,d=u.length){const g=r(u,c,f,d-1);return g>f&&i(u[g-1],c)>-i(u[g],c)?g-1:g}return{left:r,center:s,right:a}}function CQ(){return 0}function Qz(e){return e===null?NaN:+e}function*DQ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const Zz=Vd(lo),Tu=Zz.right,$Q=Zz.left;Vd(Qz).center;function TQ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let u of e)(u=t(u,++s,e))!=null&&(u=+u)>=u&&(i=u-r,r+=i/++n,a+=i*(u-r))}if(n>1)return a/(n-1)}function MQ(e,t){const n=TQ(e,t);return n&&Math.sqrt(n)}class wi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,u=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);u&&(n[i++]=u),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class BO extends Map{constructor(t,n=e7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(z_(this,t))}has(t){return super.has(z_(this,t))}set(t,n){return super.set(Kz(this,t),n)}delete(t){return super.delete(Jz(this,t))}}class Fy extends Set{constructor(t,n=e7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(z_(this,t))}add(t){return super.add(Kz(this,t))}delete(t){return super.delete(Jz(this,t))}}function z_({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function Kz({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function Jz({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function e7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function FQ(e,t){return Array.from(t,n=>e[n])}function kQ(e=lo){if(e===lo)return t7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function t7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const OQ=Math.sqrt(50),NQ=Math.sqrt(10),RQ=Math.sqrt(2);function ky(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=OQ?10:a>=NQ?5:a>=RQ?2:1;let u,c,f;return r<0?(f=Math.pow(10,-r)/s,u=Math.round(e*f),c=Math.round(t*f),u/f<e&&++u,c/f>t&&--c,f=-f):(f=Math.pow(10,r)*s,u=Math.round(e/f),c=Math.round(t/f),u*f<e&&++u,c*f>t&&--c),c<u&&.5<=n&&n<2?ky(e,t,n*2):[u,c,f]}function B_(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?ky(t,e,n):ky(e,t,n);if(!(a>=r))return[];const u=a-r+1,c=new Array(u);if(i)if(s<0)for(let f=0;f<u;++f)c[f]=(a-f)/-s;else for(let f=0;f<u;++f)c[f]=(a-f)*s;else if(s<0)for(let f=0;f<u;++f)c[f]=(r+f)/-s;else for(let f=0;f<u;++f)c[f]=(r+f)*s;return c}function L_(e,t,n){return t=+t,e=+e,n=+n,ky(e,t,n)[2]}function Mu(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?L_(t,e,n):L_(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Xl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function U_(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function n7(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?t7:kQ(r);i>n;){if(i-n>600){const c=i-n+1,f=t-n+1,d=Math.log(c),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(c-g)/c)*(f-c/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/c+p)),v=Math.min(i,Math.floor(t+(c-f)*g/c+p));n7(e,t,y,v,r)}const a=e[t];let s=n,u=i;for(h0(e,n,t),r(e[i],a)>0&&h0(e,n,i);s<u;){for(h0(e,s,u),++s,--u;r(e[s],a)<0;)++s;for(;r(e[u],a)>0;)--u}r(e[n],a)===0?h0(e,n,u):(++u,h0(e,u,i)),u<=t&&(n=u+1),t<=u&&(i=u-1)}return e}function h0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function j_(e,t,n){if(e=Float64Array.from(DQ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return U_(e);if(t>=1)return Xl(e);var i,r=(i-1)*t,a=Math.floor(r),s=Xl(n7(e,a).subarray(0,a+1)),u=U_(e.subarray(a+1));return s+(u-s)*(r-a)}}function i7(e,t,n=Qz){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return s+(u-s)*(r-a)}}function zQ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function r7(e,t){return j_(e,.5,t)}function*BQ(e){for(const t of e)yield*t}function a7(e){return Array.from(BQ(e))}function yr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function s7(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function LQ(e,...t){e=new Fy(e),t=t.map(UQ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function UQ(e){return e instanceof Fy?e:new Fy(e)}function jQ(...e){const t=new Fy;for(const n of e)for(const i of n)t.add(i);return t}function qQ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Oy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ld(e){return e=Oy(Math.abs(e)),e?e[1]:NaN}function IQ(e,t){return function(n,i){for(var r=n.length,a=[],s=0,u=e[0],c=0;r>0&&u>0&&(c+u+1>i&&(u=Math.max(1,i-c)),a.push(n.substring(r-=u,r+u)),!((c+=u+1)>i));)u=e[s=(s+1)%e.length];return a.reverse().join(t)}}function PQ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var HQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ic(e){if(!(t=HQ.exec(e)))throw new Error("invalid format: "+e);var t;return new d3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ic.prototype=d3.prototype;function d3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}d3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function GQ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var o7;function YQ(e,t){var n=Oy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(o7=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Oy(e,Math.max(0,t+a-1))[0]}function LO(e,t){var n=Oy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const UO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qQ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>LO(e*100,t),r:LO,s:YQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jO(e){return e}var qO=Array.prototype.map,IO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function u7(e){var t=e.grouping===void 0||e.thousands===void 0?jO:IQ(qO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?jO:PQ(qO.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function f(g){g=ic(g);var p=g.fill,y=g.align,v=g.sign,b=g.symbol,E=g.zero,S=g.width,_=g.comma,w=g.precision,D=g.trim,T=g.type;T==="n"?(_=!0,T="g"):UO[T]||(w===void 0&&(w=12),D=!0,T="g"),(E||p==="0"&&y==="=")&&(E=!0,p="0",y="=");var M=b==="$"?n:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",$=b==="$"?i:/[%p]/.test(T)?s:"",F=UO[T],N=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function U(B){var X=M,G=$,P,z,O;if(T==="c")G=F(B)+G,B="";else{B=+B;var j=B<0||1/B<0;if(B=isNaN(B)?c:F(Math.abs(B),w),D&&(B=GQ(B)),j&&+B==0&&v!=="+"&&(j=!1),X=(j?v==="("?v:u:v==="-"||v==="("?"":v)+X,G=(T==="s"?IO[8+o7/3]:"")+G+(j&&v==="("?")":""),N){for(P=-1,z=B.length;++P<z;)if(O=B.charCodeAt(P),48>O||O>57){G=(O===46?r+B.slice(P+1):B.slice(P))+G,B=B.slice(0,P);break}}}_&&!E&&(B=t(B,1/0));var Y=X.length+B.length+G.length,V=Y<S?new Array(S-Y+1).join(p):"";switch(_&&E&&(B=t(V+B,V.length?S-G.length:1/0),V=""),y){case"<":B=X+B+G+V;break;case"=":B=X+V+B+G;break;case"^":B=V.slice(0,Y=V.length>>1)+X+B+G+V.slice(Y);break;default:B=V+X+B+G;break}return a(B)}return U.toString=function(){return g+""},U}function d(g,p){var y=f((g=ic(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(ld(p)/3)))*3,b=Math.pow(10,-v),E=IO[8+v/3];return function(S){return y(b*S)+E}}return{format:f,formatPrefix:d}}var m1,db,h3;XQ({thousands:",",grouping:[3],currency:["$",""]});function XQ(e){return m1=u7(e),db=m1.format,h3=m1.formatPrefix,m1}function l7(e){return Math.max(0,-ld(Math.abs(e)))}function c7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ld(t)/3)))*3-ld(Math.abs(e)))}function f7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ld(t)-ld(e))+1}const GA=new Date,YA=new Date;function xn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),u=r.ceil(a);return a-s<u-a?s:u},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,u)=>{const c=[];if(a=r.ceil(a),u=u==null?1:Math.floor(u),!(a<s)||!(u>0))return c;let f;do c.push(f=new Date(+a)),t(a,u),e(a);while(f<a&&a<s);return c},r.filter=a=>xn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,u)=>{if(s>=s)if(u<0)for(;++u<=0;)for(;t(s,-1),!a(s););else for(;--u>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(GA.setTime(+a),YA.setTime(+s),e(GA),e(YA),Math.floor(n(GA,YA))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const cd=xn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?xn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):cd);cd.range;const io=1e3,qr=io*60,ro=qr*60,vo=ro*24,g3=vo*7,PO=vo*30,XA=vo*365,ao=xn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*io)},(e,t)=>(t-e)/io,e=>e.getUTCSeconds());ao.range;const hb=xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*io)},(e,t)=>{e.setTime(+e+t*qr)},(e,t)=>(t-e)/qr,e=>e.getMinutes());hb.range;const gb=xn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qr)},(e,t)=>(t-e)/qr,e=>e.getUTCMinutes());gb.range;const pb=xn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*io-e.getMinutes()*qr)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getHours());pb.range;const mb=xn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ro)},(e,t)=>(t-e)/ro,e=>e.getUTCHours());mb.range;const co=xn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qr)/vo,e=>e.getDate()-1);co.range;const _u=xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vo,e=>e.getUTCDate()-1);_u.range;const d7=xn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vo,e=>Math.floor(e/vo));d7.range;function Dc(e){return xn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*qr)/g3)}const Wd=Dc(0),Ny=Dc(1),VQ=Dc(2),WQ=Dc(3),fd=Dc(4),QQ=Dc(5),ZQ=Dc(6);Wd.range;Ny.range;VQ.range;WQ.range;fd.range;QQ.range;ZQ.range;function $c(e){return xn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/g3)}const Qd=$c(0),Ry=$c(1),KQ=$c(2),JQ=$c(3),dd=$c(4),eZ=$c(5),tZ=$c(6);Qd.range;Ry.range;KQ.range;JQ.range;dd.range;eZ.range;tZ.range;const Sg=xn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Sg.range;const _g=xn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_g.range;const os=xn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());os.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});os.range;const us=xn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());us.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:xn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});us.range;function h7(e,t,n,i,r,a){const s=[[ao,1,io],[ao,5,5*io],[ao,15,15*io],[ao,30,30*io],[a,1,qr],[a,5,5*qr],[a,15,15*qr],[a,30,30*qr],[r,1,ro],[r,3,3*ro],[r,6,6*ro],[r,12,12*ro],[i,1,vo],[i,2,2*vo],[n,1,g3],[t,1,PO],[t,3,3*PO],[e,1,XA]];function u(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:c(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function c(f,d,g){const p=Math.abs(d-f)/g,y=Vd(([,,E])=>E).right(s,p);if(y===s.length)return e.every(Mu(f/XA,d/XA,g));if(y===0)return cd.every(Math.max(Mu(f,d,g),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[u,c]}const[nZ,iZ]=h7(us,_g,Qd,d7,mb,gb),[rZ,aZ]=h7(os,Sg,Wd,co,pb,hb),Xn="year",Wi="quarter",oi="month",yn="week",Qi="date",ii="day",ls="dayofyear",Sr="hours",_r="minutes",Wr="seconds",Aa="milliseconds",p3=[Xn,Wi,oi,yn,Qi,ii,ls,Sr,_r,Wr,Aa],VA=p3.reduce((e,t,n)=>(e[t]=1+n,e),{});function m3(e){const t=Ee(e).slice(),n={};return t.length||ne("Missing time unit."),t.forEach(r=>{_e(VA,r)?n[r]=1:ne(`Invalid time unit: ${r}.`)}),(n[yn]||n[ii]?1:0)+(n[Wi]||n[oi]||n[Qi]?1:0)+(n[ls]?1:0)>1&&ne(`Incompatible time units: ${e}`),t.sort((r,a)=>VA[r]-VA[a]),t}const sZ={[Xn]:"%Y ",[Wi]:"Q%q ",[oi]:"%b ",[Qi]:"%d ",[yn]:"W%U ",[ii]:"%a ",[ls]:"%j ",[Sr]:"%H:00",[_r]:"00:%M",[Wr]:":%S",[Aa]:".%L",[`${Xn}-${oi}`]:"%Y-%m ",[`${Xn}-${oi}-${Qi}`]:"%Y-%m-%d ",[`${Sr}-${_r}`]:"%H:%M"};function g7(e,t){const n=Ge({},sZ,t),i=m3(e),r=i.length;let a="",s=0,u,c;for(s=0;s<r;)for(u=i.length;u>s;--u)if(c=i.slice(s,u).join("-"),n[c]!=null){a+=n[c],s=u;break}return a.trim()}const Ll=new Date;function y3(e){return Ll.setFullYear(e),Ll.setMonth(0),Ll.setDate(1),Ll.setHours(0,0,0,0),Ll}function p7(e){return y7(new Date(e))}function m7(e){return q_(new Date(e))}function y7(e){return co.count(y3(e.getFullYear())-1,e)}function q_(e){return Wd.count(y3(e.getFullYear())-1,e)}function I_(e){return y3(e).getDay()}function oZ(e,t,n,i,r,a,s){if(0<=e&&e<100){const u=new Date(-1,t,n,i,r,a,s);return u.setFullYear(e),u}return new Date(e,t,n,i,r,a,s)}function v7(e){return x7(new Date(e))}function b7(e){return P_(new Date(e))}function x7(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return _u.count(t-1,e)}function P_(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Qd.count(t-1,e)}function H_(e){return Ll.setTime(Date.UTC(e,0,1)),Ll.getUTCDay()}function uZ(e,t,n,i,r,a,s){if(0<=e&&e<100){const u=new Date(Date.UTC(-1,t,n,i,r,a,s));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,i,r,a,s))}function E7(e,t,n,i,r){const a=t||1,s=st(e),u=(S,_,w)=>(w=w||S,lZ(n[w],i[w],S===s&&a,_)),c=new Date,f=Ea(e),d=f[Xn]?u(Xn):hi(2012),g=f[oi]?u(oi):f[Wi]?u(Wi):hu,p=f[yn]&&f[ii]?u(ii,1,yn+ii):f[yn]?u(yn,1):f[ii]?u(ii,1):f[Qi]?u(Qi,1):f[ls]?u(ls,1):Hd,y=f[Sr]?u(Sr):hu,v=f[_r]?u(_r):hu,b=f[Wr]?u(Wr):hu,E=f[Aa]?u(Aa):hu;return function(S){c.setTime(+S);const _=d(c);return r(_,g(c),p(c,_),y(c),v(c),b(c),E(c))}}function lZ(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function hd(e,t,n){return t+e*7-(n+6)%7}const cZ={[Xn]:e=>e.getFullYear(),[Wi]:e=>Math.floor(e.getMonth()/3),[oi]:e=>e.getMonth(),[Qi]:e=>e.getDate(),[Sr]:e=>e.getHours(),[_r]:e=>e.getMinutes(),[Wr]:e=>e.getSeconds(),[Aa]:e=>e.getMilliseconds(),[ls]:e=>y7(e),[yn]:e=>q_(e),[yn+ii]:(e,t)=>hd(q_(e),e.getDay(),I_(t)),[ii]:(e,t)=>hd(1,e.getDay(),I_(t))},fZ={[Wi]:e=>3*e,[yn]:(e,t)=>hd(e,0,I_(t))};function A7(e,t){return E7(e,t||1,cZ,fZ,oZ)}const dZ={[Xn]:e=>e.getUTCFullYear(),[Wi]:e=>Math.floor(e.getUTCMonth()/3),[oi]:e=>e.getUTCMonth(),[Qi]:e=>e.getUTCDate(),[Sr]:e=>e.getUTCHours(),[_r]:e=>e.getUTCMinutes(),[Wr]:e=>e.getUTCSeconds(),[Aa]:e=>e.getUTCMilliseconds(),[ls]:e=>x7(e),[yn]:e=>P_(e),[ii]:(e,t)=>hd(1,e.getUTCDay(),H_(t)),[yn+ii]:(e,t)=>hd(P_(e),e.getUTCDay(),H_(t))},hZ={[Wi]:e=>3*e,[yn]:(e,t)=>hd(e,0,H_(t))};function S7(e,t){return E7(e,t||1,dZ,hZ,uZ)}const gZ={[Xn]:os,[Wi]:Sg.every(3),[oi]:Sg,[yn]:Wd,[Qi]:co,[ii]:co,[ls]:co,[Sr]:pb,[_r]:hb,[Wr]:ao,[Aa]:cd},pZ={[Xn]:us,[Wi]:_g.every(3),[oi]:_g,[yn]:Qd,[Qi]:_u,[ii]:_u,[ls]:_u,[Sr]:mb,[_r]:gb,[Wr]:ao,[Aa]:cd};function Zd(e){return gZ[e]}function Kd(e){return pZ[e]}function _7(e,t,n){return e?e.offset(t,n):void 0}function w7(e,t,n){return _7(Zd(e),t,n)}function C7(e,t,n){return _7(Kd(e),t,n)}function D7(e,t,n,i){return e?e.range(t,n,i):void 0}function $7(e,t,n,i){return D7(Zd(e),t,n,i)}function T7(e,t,n,i){return D7(Kd(e),t,n,i)}const L0=1e3,U0=L0*60,j0=U0*60,yb=j0*24,mZ=yb*7,HO=yb*30,G_=yb*365,M7=[Xn,oi,Qi,Sr,_r,Wr,Aa],q0=M7.slice(0,-1),I0=q0.slice(0,-1),P0=I0.slice(0,-1),yZ=P0.slice(0,-1),vZ=[Xn,yn],GO=[Xn,oi],F7=[Xn],g0=[[q0,1,L0],[q0,5,5*L0],[q0,15,15*L0],[q0,30,30*L0],[I0,1,U0],[I0,5,5*U0],[I0,15,15*U0],[I0,30,30*U0],[P0,1,j0],[P0,3,3*j0],[P0,6,6*j0],[P0,12,12*j0],[yZ,1,yb],[vZ,1,mZ],[GO,1,HO],[GO,3,3*HO],[F7,1,G_]];function k7(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(rp(t))/n;let r=Vd(u=>u[2]).right(g0,i),a,s;return r===g0.length?(a=F7,s=Mu(t[0]/G_,t[1]/G_,n)):r?(r=g0[i/g0[r-1][2]<g0[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=M7,s=Math.max(Mu(t[0],t[1],n),1)),{units:a,step:s}}function WA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function QA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function p0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function O7(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,u=e.months,c=e.shortMonths,f=m0(r),d=y0(r),g=m0(a),p=y0(a),y=m0(s),v=y0(s),b=m0(u),E=y0(u),S=m0(c),_=y0(c),w={a:j,A:Y,b:V,B:ee,c:null,d:ZO,e:ZO,f:qZ,g:ZZ,G:JZ,H:LZ,I:UZ,j:jZ,L:N7,m:IZ,M:PZ,p:R,q,Q:eN,s:tN,S:HZ,u:GZ,U:YZ,V:XZ,w:VZ,W:WZ,x:null,X:null,y:QZ,Y:KZ,Z:eK,"%":JO},D={a:J,A:ce,b:me,B:Me,c:null,d:KO,e:KO,f:rK,g:gK,G:mK,H:tK,I:nK,j:iK,L:z7,m:aK,M:sK,p:Pe,q:_t,Q:eN,s:tN,S:oK,u:uK,U:lK,V:cK,w:fK,W:dK,x:null,X:null,y:hK,Y:pK,Z:yK,"%":JO},T={a:U,A:B,b:X,B:G,c:P,d:WO,e:WO,f:NZ,g:VO,G:XO,H:QO,I:QO,j:MZ,L:OZ,m:TZ,M:FZ,p:N,q:$Z,Q:zZ,s:BZ,S:kZ,u:SZ,U:_Z,V:wZ,w:AZ,W:CZ,x:z,X:O,y:VO,Y:XO,Z:DZ,"%":RZ};w.x=M(n,w),w.X=M(i,w),w.c=M(t,w),D.x=M(n,D),D.X=M(i,D),D.c=M(t,D);function M(pe,Le){return function(ze){var de=[],qt=-1,Xe=0,It=pe.length,it,Rt,Ba;for(ze instanceof Date||(ze=new Date(+ze));++qt<It;)pe.charCodeAt(qt)===37&&(de.push(pe.slice(Xe,qt)),(Rt=YO[it=pe.charAt(++qt)])!=null?it=pe.charAt(++qt):Rt=it==="e"?" ":"0",(Ba=Le[it])&&(it=Ba(ze,Rt)),de.push(it),Xe=qt+1);return de.push(pe.slice(Xe,qt)),de.join("")}}function $(pe,Le){return function(ze){var de=p0(1900,void 0,1),qt=F(de,pe,ze+="",0),Xe,It;if(qt!=ze.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(Le&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(Xe=QA(p0(de.y,0,1)),It=Xe.getUTCDay(),Xe=It>4||It===0?Ry.ceil(Xe):Ry(Xe),Xe=_u.offset(Xe,(de.V-1)*7),de.y=Xe.getUTCFullYear(),de.m=Xe.getUTCMonth(),de.d=Xe.getUTCDate()+(de.w+6)%7):(Xe=WA(p0(de.y,0,1)),It=Xe.getDay(),Xe=It>4||It===0?Ny.ceil(Xe):Ny(Xe),Xe=co.offset(Xe,(de.V-1)*7),de.y=Xe.getFullYear(),de.m=Xe.getMonth(),de.d=Xe.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),It="Z"in de?QA(p0(de.y,0,1)).getUTCDay():WA(p0(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(It+5)%7:de.w+de.U*7-(It+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,QA(de)):WA(de)}}function F(pe,Le,ze,de){for(var qt=0,Xe=Le.length,It=ze.length,it,Rt;qt<Xe;){if(de>=It)return-1;if(it=Le.charCodeAt(qt++),it===37){if(it=Le.charAt(qt++),Rt=T[it in YO?Le.charAt(qt++):it],!Rt||(de=Rt(pe,ze,de))<0)return-1}else if(it!=ze.charCodeAt(de++))return-1}return de}function N(pe,Le,ze){var de=f.exec(Le.slice(ze));return de?(pe.p=d.get(de[0].toLowerCase()),ze+de[0].length):-1}function U(pe,Le,ze){var de=y.exec(Le.slice(ze));return de?(pe.w=v.get(de[0].toLowerCase()),ze+de[0].length):-1}function B(pe,Le,ze){var de=g.exec(Le.slice(ze));return de?(pe.w=p.get(de[0].toLowerCase()),ze+de[0].length):-1}function X(pe,Le,ze){var de=S.exec(Le.slice(ze));return de?(pe.m=_.get(de[0].toLowerCase()),ze+de[0].length):-1}function G(pe,Le,ze){var de=b.exec(Le.slice(ze));return de?(pe.m=E.get(de[0].toLowerCase()),ze+de[0].length):-1}function P(pe,Le,ze){return F(pe,t,Le,ze)}function z(pe,Le,ze){return F(pe,n,Le,ze)}function O(pe,Le,ze){return F(pe,i,Le,ze)}function j(pe){return s[pe.getDay()]}function Y(pe){return a[pe.getDay()]}function V(pe){return c[pe.getMonth()]}function ee(pe){return u[pe.getMonth()]}function R(pe){return r[+(pe.getHours()>=12)]}function q(pe){return 1+~~(pe.getMonth()/3)}function J(pe){return s[pe.getUTCDay()]}function ce(pe){return a[pe.getUTCDay()]}function me(pe){return c[pe.getUTCMonth()]}function Me(pe){return u[pe.getUTCMonth()]}function Pe(pe){return r[+(pe.getUTCHours()>=12)]}function _t(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Le=M(pe+="",w);return Le.toString=function(){return pe},Le},parse:function(pe){var Le=$(pe+="",!1);return Le.toString=function(){return pe},Le},utcFormat:function(pe){var Le=M(pe+="",D);return Le.toString=function(){return pe},Le},utcParse:function(pe){var Le=$(pe+="",!0);return Le.toString=function(){return pe},Le}}}var YO={"-":"",_:" ",0:"0"},On=/^\s*\d+/,bZ=/^%/,xZ=/[\\^$*+?|[\]().{}]/g;function ht(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function EZ(e){return e.replace(xZ,"\\$&")}function m0(e){return new RegExp("^(?:"+e.map(EZ).join("|")+")","i")}function y0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function AZ(e,t,n){var i=On.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function SZ(e,t,n){var i=On.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function _Z(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function wZ(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function CZ(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function XO(e,t,n){var i=On.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function VO(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function DZ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function $Z(e,t,n){var i=On.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function TZ(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function WO(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function MZ(e,t,n){var i=On.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function QO(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function FZ(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function kZ(e,t,n){var i=On.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function OZ(e,t,n){var i=On.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function NZ(e,t,n){var i=On.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function RZ(e,t,n){var i=bZ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function zZ(e,t,n){var i=On.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function BZ(e,t,n){var i=On.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function ZO(e,t){return ht(e.getDate(),t,2)}function LZ(e,t){return ht(e.getHours(),t,2)}function UZ(e,t){return ht(e.getHours()%12||12,t,2)}function jZ(e,t){return ht(1+co.count(os(e),e),t,3)}function N7(e,t){return ht(e.getMilliseconds(),t,3)}function qZ(e,t){return N7(e,t)+"000"}function IZ(e,t){return ht(e.getMonth()+1,t,2)}function PZ(e,t){return ht(e.getMinutes(),t,2)}function HZ(e,t){return ht(e.getSeconds(),t,2)}function GZ(e){var t=e.getDay();return t===0?7:t}function YZ(e,t){return ht(Wd.count(os(e)-1,e),t,2)}function R7(e){var t=e.getDay();return t>=4||t===0?fd(e):fd.ceil(e)}function XZ(e,t){return e=R7(e),ht(fd.count(os(e),e)+(os(e).getDay()===4),t,2)}function VZ(e){return e.getDay()}function WZ(e,t){return ht(Ny.count(os(e)-1,e),t,2)}function QZ(e,t){return ht(e.getFullYear()%100,t,2)}function ZZ(e,t){return e=R7(e),ht(e.getFullYear()%100,t,2)}function KZ(e,t){return ht(e.getFullYear()%1e4,t,4)}function JZ(e,t){var n=e.getDay();return e=n>=4||n===0?fd(e):fd.ceil(e),ht(e.getFullYear()%1e4,t,4)}function eK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ht(t/60|0,"0",2)+ht(t%60,"0",2)}function KO(e,t){return ht(e.getUTCDate(),t,2)}function tK(e,t){return ht(e.getUTCHours(),t,2)}function nK(e,t){return ht(e.getUTCHours()%12||12,t,2)}function iK(e,t){return ht(1+_u.count(us(e),e),t,3)}function z7(e,t){return ht(e.getUTCMilliseconds(),t,3)}function rK(e,t){return z7(e,t)+"000"}function aK(e,t){return ht(e.getUTCMonth()+1,t,2)}function sK(e,t){return ht(e.getUTCMinutes(),t,2)}function oK(e,t){return ht(e.getUTCSeconds(),t,2)}function uK(e){var t=e.getUTCDay();return t===0?7:t}function lK(e,t){return ht(Qd.count(us(e)-1,e),t,2)}function B7(e){var t=e.getUTCDay();return t>=4||t===0?dd(e):dd.ceil(e)}function cK(e,t){return e=B7(e),ht(dd.count(us(e),e)+(us(e).getUTCDay()===4),t,2)}function fK(e){return e.getUTCDay()}function dK(e,t){return ht(Ry.count(us(e)-1,e),t,2)}function hK(e,t){return ht(e.getUTCFullYear()%100,t,2)}function gK(e,t){return e=B7(e),ht(e.getUTCFullYear()%100,t,2)}function pK(e,t){return ht(e.getUTCFullYear()%1e4,t,4)}function mK(e,t){var n=e.getUTCDay();return e=n>=4||n===0?dd(e):dd.ceil(e),ht(e.getUTCFullYear()%1e4,t,4)}function yK(){return"+0000"}function JO(){return"%"}function eN(e){return+e}function tN(e){return Math.floor(+e/1e3)}var Ff,v3,L7,b3,U7;vK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vK(e){return Ff=O7(e),v3=Ff.format,L7=Ff.parse,b3=Ff.utcFormat,U7=Ff.utcParse,Ff}function H0(e){const t={};return n=>t[n]||(t[n]=e(n))}function bK(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=xK(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function xK(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function j7(e){const t=H0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=ic(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return bK(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=ic(s??",f");const u=Mu(i,r,a),c=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=c7(u,c))||(s.precision=f),n(s,c);case"":case"e":case"g":case"p":case"r":{isNaN(f=f7(u,c))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=l7(u))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let Y_;q7();function q7(){return Y_=j7({format:db,formatPrefix:h3})}function I7(e){return j7(u7(e))}function zy(e){return arguments.length?Y_=I7(e):Y_}function nN(e,t,n){n=n||{},Ae(n)||ne(`Invalid time multi-format specifier: ${n}`);const i=t(Wr),r=t(_r),a=t(Sr),s=t(Qi),u=t(yn),c=t(oi),f=t(Wi),d=t(Xn),g=e(n[Aa]||".%L"),p=e(n[Wr]||":%S"),y=e(n[_r]||"%I:%M"),v=e(n[Sr]||"%I %p"),b=e(n[Qi]||n[ii]||"%a %d"),E=e(n[yn]||"%b %d"),S=e(n[oi]||"%B"),_=e(n[Wi]||"%B"),w=e(n[Xn]||"%Y");return D=>(i(D)<D?g:r(D)<D?p:a(D)<D?y:s(D)<D?v:c(D)<D?u(D)<D?b:E:d(D)<D?f(D)<D?S:_:w)(D)}function P7(e){const t=H0(e.format),n=H0(e.utcFormat);return{timeFormat:i=>Se(i)?t(i):nN(t,Zd,i),utcFormat:i=>Se(i)?n(i):nN(n,Kd,i),timeParse:H0(e.parse),utcParse:H0(e.utcParse)}}let X_;H7();function H7(){return X_=P7({format:v3,parse:L7,utcFormat:b3,utcParse:U7})}function G7(e){return P7(O7(e))}function wg(e){return arguments.length?X_=G7(e):X_}const V_=(e,t)=>Ge({},e,t);function Y7(e,t){const n=e?I7(e):zy(),i=t?G7(t):wg();return V_(n,i)}function x3(e,t){const n=arguments.length;return n&&n!==2&&ne("defaultLocale expects either zero or two arguments."),n?V_(zy(e),wg(t)):V_(zy(),wg())}function EK(){return q7(),H7(),x3()}const AK=/^(data:|([A-Za-z]+:)?\/\/)/,SK=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,_K=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,iN="file://";function wK(e,t){return n=>({options:n||{},sanitize:DK,load:CK,fileAccess:!1,file:$K(),http:MK(e)})}async function CK(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function DK(e,t){t=Ge({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const u=SK.test(e.replace(_K,""));(e==null||typeof e!="string"||!u)&&ne("Sanitize failure, invalid URI: "+ve(e));const c=AK.test(e);return(s=t.baseURL)&&!c&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(iN))||t.mode==="file"||t.mode!=="http"&&!c&&n,r?e=e.slice(iN.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function $K(e){return TK}async function TK(){ne("No file system access.")}function MK(e){return e?async function(t,n){const i=Ge({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?Ye(a[r])?a[r]():a.text():ne(a.status+""+a.statusText)}:FK}async function FK(){ne("No HTTP fetch method available.")}const kK=e=>e!=null&&e===e,OK=e=>e==="true"||e==="false"||e===!0||e===!1,NK=e=>!Number.isNaN(Date.parse(e)),X7=e=>!Number.isNaN(+e)&&!(e instanceof Date),RK=e=>X7(e)&&Number.isInteger(+e),W_={boolean:l3,integer:ri,number:ri,date:c3,string:f3,unknown:di},y1=[OK,RK,X7,NK],zK=["boolean","integer","number","date"];function V7(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=y1.length,r=y1.map((a,s)=>s+1);for(let a=0,s=0,u,c;a<n;++a)for(c=t?e[a][t]:e[a],u=0;u<i;++u)if(r[u]&&kK(c)&&!y1[u](c)&&(r[u]=0,++s,s===y1.length))return"string";return zK[r.reduce((a,s)=>a===0?s:a,0)-1]}function W7(e,t){return t.reduce((n,i)=>(n[i]=V7(e,i),n),{})}function rN(e){const t=function(n,i){const r={delimiter:e};return E3(n,i?Ge(i,r):r)};return t.responseType="text",t}function E3(e,t){return t.header&&(e=t.header.map(ve).join(t.delimiter)+`
`+e),mQ(t.delimiter).parse(e+"")}E3.responseType="text";function BK(e){return typeof Buffer=="function"&&Ye(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function A3(e,t){const n=t&&t.property?Xr(t.property):di;return Ae(e)&&!BK(e)?LK(n(e),t):n(JSON.parse(e))}A3.responseType="json";function LK(e,t){return!se(e)&&Iz(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const UK={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Q7(e,t){let n,i,r,a;return e=A3(e,t),t&&t.feature?(n=xQ,r=t.feature):t&&t.mesh?(n=AQ,r=t.mesh,a=UK[t.filter]):ne("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ne("Invalid TopoJSON object: "+r),i&&i.features||[i]}Q7.responseType="json";const ny={dsv:E3,csv:rN(","),tsv:rN("	"),json:A3,topojson:Q7};function S3(e,t){return arguments.length>1?(ny[e]=t,this):_e(ny,e)?ny[e]:null}function Z7(e){const t=S3(e);return t&&t.responseType||"text"}function K7(e,t,n,i){t=t||{};const r=S3(t.type||"json");return r||ne("Unknown data format type: "+t.type),e=r(e,t),t.parse&&jK(e,t.parse,n,i),_e(e,"columns")&&delete e.columns,e}function jK(e,t,n,i){if(!e.length)return;const r=wg();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,u,c,f,d,g;t==="auto"&&(t=W7(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,E;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),E=b[1],(E[0]==="'"&&E[E.length-1]==="'"||E[0]==='"'&&E[E.length-1]==='"')&&(E=E.slice(1,-1)),(b[0]==="utc"?i:n)(E);if(!W_[v])throw Error("Illegal format pattern: "+y+":"+v);return W_[v]});for(c=0,d=e.length,g=a.length;c<d;++c)for(s=e[c],f=0;f<g;++f)u=a[f],s[u]=p[f](s[u])}const vb=wK(typeof fetch<"u"&&fetch);function bb(e){const t=e||di,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function iy(e,t){try{await t(e)}catch(n){e.error(n)}}const J7=Symbol("vega_id");let qK=1;function xb(e){return!!(e&&ke(e))}function ke(e){return e[J7]}function eB(e,t){return e[J7]=t,e}function mt(e){const t=e===Object(e)?e:{data:e};return ke(t)?t:eB(t,qK++)}function _3(e){return Eb(e,mt({}))}function Eb(e,t){for(const n in e)t[n]=e[n];return t}function tB(e,t){return eB(t,ke(e))}function Tc(e,t){return e?t?(n,i)=>e(n,i)||ke(t(n))-ke(t(i)):(n,i)=>e(n,i)||ke(n)-ke(i):null}function nB(e){return e&&e.constructor===Mc}function Mc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:Mc,insert(u){const c=Ee(u),f=c.length;for(let d=0;d<f;++d)e.push(c[d]);return this},remove(u){const c=Ye(u)?i:t,f=Ee(u),d=f.length;for(let g=0;g<d;++g)c.push(f[g]);return this},modify(u,c,f){const d={field:c,value:hi(f)};return Ye(u)?(d.filter=u,r.push(d)):(d.tuple=u,n.push(d)),this},encode(u,c){return Ye(u)?r.push({filter:u,field:c}):n.push({tuple:u,field:c}),this},clean(u){return a=u,this},reflow(){return s=!0,this},pulse(u,c){const f={},d={};let g,p,y,v,b,E;for(g=0,p=c.length;g<p;++g)f[ke(c[g])]=1;for(g=0,p=t.length;g<p;++g)b=t[g],f[ke(b)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],c.forEach(_=>{v(_)&&(f[ke(_)]=-1)});for(g=0,p=e.length;g<p;++g)b=e[g],E=ke(b),f[E]?f[E]=1:u.add.push(mt(e[g]));for(g=0,p=c.length;g<p;++g)b=c[g],f[ke(b)]<0&&u.rem.push(b);function S(_,w,D){D?_[w]=D(_):u.encode=w,s||(d[ke(_)]=_)}for(g=0,p=n.length;g<p;++g)y=n[g],b=y.tuple,v=y.field,E=f[ke(b)],E>0&&(S(b,v,y.value),u.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,c.forEach(_=>{v(_)&&f[ke(_)]>0&&S(_,y.field,y.value)}),u.modifies(y.field);if(s)u.mod=t.length||i.length?c.filter(_=>f[ke(_)]>0):c.slice();else for(E in d)u.mod.push(d[E]);return(a||a==null&&(t.length||i.length))&&u.clean(!0),u}}}const ry="_:mod:_";function Ab(){Object.defineProperty(this,ry,{writable:!0,value:{}})}Ab.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[ry];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=se(n)?1+n.length:-1),r},modified(e,t){const n=this[ry];if(arguments.length){if(se(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[ry]={},this}};let IK=0;const PK="pulse",HK=new Ab,GK=1,YK=2;function Ot(e,t,n,i){this.id=++IK,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function aN(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ot.prototype={targets(){return this._targets||(this._targets=bb(np))},set(e){return this.value!==e?(this.value=e,1):0},skip:aN(GK),modified:aN(YK),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Ab,r=this._argops=this._argops||[],a=[];let s,u,c,f;const d=(g,p,y)=>{y instanceof Ot?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(s in e)if(u=e[s],s===PK)Ee(u).forEach(g=>{g instanceof Ot?g!==this&&(g.targets().add(this),a.push(g)):ne("Pulse parameters must be operator instances.")}),this.source=u;else if(se(u))for(i.set(s,-1,Array(c=u.length)),f=0;f<c;++f)d(s,f,u[f]);else d(s,-1,u);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||HK,n=this._argops;let i,r,a,s;if(n){const u=n.length;for(r=0;r<u;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<u;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function XK(e,t,n,i){let r=1,a;return e instanceof Ot?a=e:e&&e.prototype instanceof Ot?a=new e:Ye(e)?a=new Ot(null,e):(r=0,a=new Ot(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function VK(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let WK=0;function Sb(e,t,n){this.id=++WK,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function su(e,t,n){return new Sb(e,t,n)}Sb.prototype={_filter:Vr,_apply:di,targets(){return this._targets||(this._targets=bb(np))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=su(e);return this.targets().add(t),t},apply(e){const t=su(null,e);return this.targets().add(t),t},merge(){const e=su();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=su();return this.targets().add(su(null,null,s3(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(su(null,null,()=>n=!0)),t.targets().add(su(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Vr,this._targets=null}};function QK(e,t,n,i){const r=this,a=su(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let u;typeof e=="string"&&typeof document<"u"?u=document.querySelectorAll(e):u=Ee(e);const c=u.length;for(let f=0;f<c;++f)u[f].addEventListener(t,s);return a}function ZK(e,t){const n=this.locale();return K7(e,t,n.timeParse,n.utcParse)}function KK(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function JK(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:Z7(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function eJ(e,t,n){const i=this,r=i._pending||tJ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Vr).insert(a.data||[])),r.done(),a}function tJ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const nJ={skip:!0};function iJ(e,t,n,i,r){return(e instanceof Ot?aJ:rJ)(this,e,t,n,i,r),this}function rJ(e,t,n,i,r,a){const s=Ge({},a,nJ);let u,c;Ye(n)||(n=hi(n)),i===void 0?u=f=>e.touch(n(f)):Ye(i)?(c=new Ot(null,i,r,!1),u=f=>{c.evaluate(f);const d=n(f),g=c.value;nB(g)?e.pulse(d,g,a):e.update(d,g,s)}):u=f=>e.update(n(f),i,s),t.apply(u)}function aJ(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},u=new Ot(null,sJ(n,i),r,!1);u.modified(s.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}function sJ(e,t){return t=Ye(t)?t:hi(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function oJ(e){e.rank=++this._rank}function uJ(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ne("Cycle detected in dataflow graph.")}const By={},Ya=1,lu=2,Zs=4,lJ=Ya|lu,sN=Ya|Zs,kf=Ya|lu|Zs,oN=8,v0=16,uN=32,lN=64;function wu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ZA(e,t){const n=[];return uu(e,t,i=>n.push(i)),n}function cN(e,t){const n={};return e.visit(t,i=>{n[ke(i)]=1}),i=>n[ke(i)]?null:i}function v1(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}wu.prototype={StopPropagation:By,ADD:Ya,REM:lu,MOD:Zs,ADD_REM:lJ,ADD_MOD:sN,ALL:kf,REFLOW:oN,SOURCE:v0,NO_SOURCE:uN,NO_FIELDS:lN,fork(e){return new wu(this.dataflow).init(this,e)},clone(){const e=this.fork(kf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(kf|v0)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new wu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&lN)&&(n.fields=e.fields),t&Ya?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&lu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Zs?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&uN?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||kf;return t&Ya&&this.add.length||t&lu&&this.rem.length||t&Zs&&this.mod.length},reflow(e){if(e)return this.fork(kf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Zs,cN(this,Ya))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return se(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?se(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ya&&(n.addF=v1(n.addF,t)),e&lu&&(n.remF=v1(n.remF,t)),e&Zs&&(n.modF=v1(n.modF,t)),e&v0&&(n.srcF=v1(n.srcF,t)),n},materialize(e){e=e||kf;const t=this;return e&Ya&&t.addF&&(t.add=ZA(t.add,t.addF),t.addF=null),e&lu&&t.remF&&(t.rem=ZA(t.rem,t.remF),t.remF=null),e&Zs&&t.modF&&(t.mod=ZA(t.mod,t.modF),t.modF=null),e&v0&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&v0)return uu(n.source,n.srcF,i),n;e&Ya&&uu(n.add,n.addF,i),e&lu&&uu(n.rem,n.remF,i),e&Zs&&uu(n.mod,n.modF,i);const r=n.source;if(e&oN&&r){const a=n.add.length+n.mod.length;a===r.length||(a?uu(r,cN(n,sN),i):uu(r,n.srcF,i))}return n}};function w3(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const u=r.fields||(r.fields={});for(const c in s.fields)u[c]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}be(w3,wu,{fork(e){const t=new wu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?se(e)?e.some(i=>n[i]):n[e]:0},filter(){ne("MultiPulse does not support filtering.")},materialize(){ne("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function cJ(e,t,n){const i=this,r=[];if(i._pulse)return iB(i);if(i._pending&&await i._pending,t&&await iy(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new wu(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=bb(np);let s=0,u,c,f;try{for(;i._heap.size()>0;){if(u=i._heap.pop(),u.rank!==u.qrank){i._enqueue(u,!0);continue}c=u.run(i._getPulse(u,e)),c.then?c=await c:c.async&&(r.push(c.async),c=By),c!==By&&u._targets&&u._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await iy(i,d[g].callback)}return n&&await iy(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function fJ(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function dJ(e,t,n){return this._pulse?iB(this):(this.evaluate(e,t,n),this)}function hJ(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function iB(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function gJ(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function pJ(e,t){const n=e.source,i=this._clock;return n&&se(n)?new w3(this,i,n.map(r=>r.pulse),t):this._input[e.id]||mJ(this._pulse,n&&n.pulse)}function mJ(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==By&&(e.source=t.source),e)}const C3={skip:!1,force:!1};function yJ(e,t){const n=t||C3;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function vJ(e,t,n){const i=n||C3;return(e.set(t)||i.force)&&this.touch(e,i),this}function bJ(e,t,n){this.touch(e,n||C3);const i=new wu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function xJ(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),rB(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,EJ(t,0,e)):i=n,i}}}function rB(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function EJ(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,u;for(;s<r;)u=s+1,u<r&&n(e[s],e[u])>=0&&(s=u),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,rB(e,i,t,n)}function Jf(){this.logger(lb()),this.logLevel(e3),this._clock=0,this._rank=0,this._locale=x3();try{this._loader=vb()}catch{}this._touched=bb(np),this._input={},this._pulse=null,this._heap=xJ((e,t)=>e.qrank-t.qrank),this._postrun=[]}function b0(e){return function(){return this._log[e].apply(this,arguments)}}Jf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:b0("error"),warn:b0("warn"),info:b0("info"),debug:b0("debug"),logLevel:b0("level"),cleanThreshold:1e4,add:XK,connect:VK,rank:oJ,rerank:uJ,pulse:bJ,touch:yJ,update:vJ,changeset:Mc,ingest:KK,parse:ZK,preload:eJ,request:JK,events:QK,on:iJ,evaluate:cJ,run:dJ,runAsync:fJ,runAfter:hJ,_enqueue:gJ,_getPulse:pJ};function te(e,t){Ot.call(this,e,null,t)}be(te,Ot,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const gd={};function aB(e){const t=sB(e);return t&&t.Definition||null}function sB(e){return e=e&&e.toLowerCase(),_e(gd,e)?gd[e]:null}function*oB(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function D3(e,t,n){const i=Float64Array.from(oB(e,n));return i.sort(lo),t.map(r=>i7(i,r))}function $3(e,t){return D3(e,[.25,.5,.75],t)}function T3(e,t){const n=e.length,i=MQ(e,t),r=$3(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function uB(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],u,c,f,d,g,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)u=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);u=e.steps[Math.max(0,g-1)]}else{for(c=Math.ceil(Math.log(t)/i),f=e.minstep||0,u=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-c));Math.ceil(y/u)>t;)u*=n;for(g=0,p=r.length;g<p;++g)d=u/r[g],d>=f&&y/d<=t&&(u=d)}d=Math.log(u);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/u+b)*u,a=a<d?d-u:d,s=Math.ceil(s/u)*u),{start:a,stop:s===a?a+u:s,step:u}}var Qr=Math.random;function AJ(e){Qr=e}function lB(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(oB(e,i)),a=r.length,s=t;let u,c,f,d;for(f=0,d=Array(s);f<s;++f){for(u=0,c=0;c<a;++c)u+=r[~~(Qr()*a)];d[f]=u/a}return d.sort(lo),[j_(d,n/2),j_(d,1-n/2)]}function cB(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,u=1,c=i(e[0]),f=c,d=c+t,g;for(;u<r;++u){if(g=i(e[u]),g>=d){for(f=(c+f)/2;s<u;++s)a[s]=f;d=g+t,c=g}f=g}for(f=(c+f)/2;s<u;++s)a[s]=f;return n?SJ(a,t+t/4):a}function SJ(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function _J(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function wJ(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Qr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const u=Math.floor(s);return u<n?0:u>=i?1:(u-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const fB=Math.sqrt(2*Math.PI),CJ=Math.SQRT2;let x0=NaN;function _b(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(x0===x0)n=x0,x0=NaN;else{do n=Qr()*2-1,i=Qr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,x0=i*a}return e+n*t}function M3(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*fB)}function wb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let u;r<7.07106781186547?(u=.0352624965998911*r+.700383064443688,u=u*r+6.37396220353165,u=u*r+33.912866078383,u=u*r+112.079291497871,u=u*r+221.213596169931,u=u*r+220.206867912376,a=s*u,u=.0883883476483184*r+1.75566716318264,u=u*r+16.064177579207,u=u*r+86.7807322029461,u=u*r+296.564248779674,u=u*r+637.333633378831,u=u*r+793.826512519948,u=u*r+440.413735824752,a=a/u):(u=r+.65,u=r+4/u,u=r+3/u,u=r+2/u,u=r+1/u,a=s/u/2.506628274631)}return i>0?1-a:a}function Cb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*CJ*DJ(2*e-1)}function DJ(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function F3(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>_b(n,i),pdf:a=>M3(a,n,i),cdf:a=>wb(a,n,i),icdf:a=>Cb(a,n,i)};return r.mean(e).stdev(t)}function k3(e,t){const n=F3();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=T3(e)),r):t},sample(){return e[~~(Qr()*i)]+t*n.sample()},pdf(a){let s=0,u=0;for(;u<i;++u)s+=n.pdf((a-e[u])/t);return s/t/i},cdf(a){let s=0,u=0;for(;u<i;++u)s+=n.cdf((a-e[u])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function O3(e,t){return e=e||0,t=t??1,Math.exp(e+_b()*t)}function N3(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*fB*e)}function R3(e,t,n){return wb(Math.log(e),t,n)}function z3(e,t,n){return Math.exp(Cb(e,t,n))}function dB(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>O3(n,i),pdf:a=>N3(a,n,i),cdf:a=>R3(a,n,i),icdf:a=>z3(a,n,i)};return r.mean(e).stdev(t)}function hB(e,t){let n=0,i;function r(s){const u=[];let c=0,f;for(f=0;f<n;++f)c+=u[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)u[f]/=c;return u}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Qr();let u=e[n-1],c=i[0],f=0;for(;f<n-1;c+=i[++f])if(s<c){u=e[f];break}return u.sample()},pdf(s){let u=0,c=0;for(;c<n;++c)u+=i[c]*e[c].pdf(s);return u},cdf(s){let u=0,c=0;for(;c<n;++c)u+=i[c]*e[c].cdf(s);return u},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function B3(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Qr()}function L3(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function U3(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function j3(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function gB(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>B3(n,i),pdf:a=>L3(a,n,i),cdf:a=>U3(a,n,i),icdf:a=>j3(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function q3(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function ap(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function Db(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let u=0,c=0,f=0,d,g,p;for(p of e)a[u]=d=+t(p),s[u]=g=+n(p),++u,c+=(d-c)/u,f+=(g-f)/u;for(u=0;u<r;++u)a[u]-=c,s[u]-=f;return[a,s,c,f]}function sp(e,t,n,i){let r=-1,a,s;for(const u of e)a=t(u),s=n(u),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function Jd(e,t,n,i,r){let a=0,s=0;return sp(e,t,n,(u,c)=>{const f=c-r(u),d=c-i;a+=f*f,s+=d*d}),1-a/s}function I3(e,t,n){let i=0,r=0,a=0,s=0,u=0;sp(e,t,n,(d,g)=>{++u,i+=(d-i)/u,r+=(g-r)/u,a+=(d*g-a)/u,s+=(d*d-s)/u});const c=ap(i,r,a,s),f=d=>c[0]+c[1]*d;return{coef:c,predict:f,rSquared:Jd(e,t,n,r,f)}}function pB(e,t,n){let i=0,r=0,a=0,s=0,u=0;sp(e,t,n,(d,g)=>{++u,d=Math.log(d),i+=(d-i)/u,r+=(g-r)/u,a+=(d*g-a)/u,s+=(d*d-s)/u});const c=ap(i,r,a,s),f=d=>c[0]+c[1]*Math.log(d);return{coef:c,predict:f,rSquared:Jd(e,t,n,r,f)}}function mB(e,t,n){const[i,r,a,s]=Db(e,t,n);let u=0,c=0,f=0,d=0,g=0,p,y,v;sp(e,t,n,(_,w)=>{p=i[g++],y=Math.log(w),v=p*w,u+=(w*y-u)/g,c+=(v-c)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[b,E]=ap(c/s,u/s,f/s,d/s),S=_=>Math.exp(b+E*(_-a));return{coef:[Math.exp(b-E*a),E],predict:S,rSquared:Jd(e,t,n,s,S)}}function yB(e,t,n){let i=0,r=0,a=0,s=0,u=0,c=0;sp(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++c,i+=(y-i)/c,r+=(v-r)/c,a+=(y*v-a)/c,s+=(y*y-s)/c,u+=(p-u)/c});const f=ap(i,r,a,s),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Jd(e,t,n,u,d)}}function P3(e,t,n){const[i,r,a,s]=Db(e,t,n),u=i.length;let c=0,f=0,d=0,g=0,p=0,y,v,b,E;for(y=0;y<u;)v=i[y],b=r[y++],E=v*v,c+=(E-c)/y,f+=(E*v-f)/y,d+=(E*E-d)/y,g+=(v*b-g)/y,p+=(E*b-p)/y;const S=d-c*c,_=c*S-f*f,w=(p*c-g*f)/_,D=(g*S-p*f)/_,T=-w*c,M=$=>($=$-a,w*$*$+D*$+T+s);return{coef:[T-D*a+w*a*a+s,D-2*w*a,w],predict:M,rSquared:Jd(e,t,n,s,M)}}function vB(e,t,n,i){if(i===0)return q3(e,t,n);if(i===1)return I3(e,t,n);if(i===2)return P3(e,t,n);const[r,a,s,u]=Db(e,t,n),c=r.length,f=[],d=[],g=i+1;let p,y,v,b,E;for(p=0;p<g;++p){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),E=new Float64Array(g),y=0;y<g;++y){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p+y);E[y]=b}d.push(E)}d.push(f);const S=TJ(d),_=w=>{w-=s;let D=u+S[0]+S[1]*w+S[2]*w*w;for(p=3;p<g;++p)D+=S[p]*Math.pow(w,p);return D};return{coef:$J(g,S,-s,u),predict:_,rSquared:Jd(e,t,n,u,_)}}function $J(e,t,n,i){const r=Array(e);let a,s,u,c;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(u=t[a],c=1,r[a]+=u,s=1;s<=a;++s)c*=(a+1-s)/s,r[a-s]+=u*Math.pow(n,s)*c;return r[0]+=i,r}function TJ(e){const t=e.length-1,n=[];let i,r,a,s,u;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)u=e[a][i],e[a][i]=e[a][s],e[a][s]=u;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(u=0,a=r+1;a<t;++a)u+=e[a][r]*n[a];n[r]=(e[t][r]-u)/e[r][r]}return n}const fN=2,dN=1e-12;function bB(e,t,n,i){const[r,a,s,u]=Db(e,t,n,!0),c=r.length,f=Math.max(2,~~(i*c)),d=new Float64Array(c),g=new Float64Array(c),p=new Float64Array(c).fill(1);for(let y=-1;++y<=fN;){const v=[0,f-1];for(let E=0;E<c;++E){const S=r[E],_=v[0],w=v[1],D=S-r[_]>r[w]-S?_:w;let T=0,M=0,$=0,F=0,N=0;const U=1/Math.abs(r[D]-S||1);for(let G=_;G<=w;++G){const P=r[G],z=a[G],O=MJ(Math.abs(S-P)*U)*p[G],j=P*O;T+=O,M+=j,$+=z*O,F+=z*j,N+=P*j}const[B,X]=ap(M/T,$/T,F/T,N/T);d[E]=B+X*S,g[E]=Math.abs(a[E]-d[E]),FJ(r,E+1,v)}if(y===fN)break;const b=r7(g);if(Math.abs(b)<dN)break;for(let E=0,S,_;E<c;++E)S=g[E]/(6*b),p[E]=S>=1?dN:(_=1-S*S)*_}return kJ(r,d,s,u)}function MJ(e){return(e=1-e*e*e)*e*e}function FJ(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function kJ(e,t,n,i){const r=e.length,a=[];let s=0,u=0,c=[],f;for(;s<r;++s)f=e[s]+n,c[0]===f?c[1]+=(t[s]-c[1])/++u:(u=0,c[1]+=i,c=[f,t[s]],a.push(c));return c[1]+=i,a}const OJ=.5*Math.PI/180;function $b(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],u=s-a,c=u/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*u));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*u))}let g=f[0],p=d[d.length-1];const y=1/u,v=NJ(g[1],d);for(;p;){const b=r((g[0]+p[0])/2);b[0]-g[0]>=c&&RJ(g,b,p,y,v)>OJ?d.push(b):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function NJ(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function RJ(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function zJ(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function Q_(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:zJ(e)}function xB(e,t,n){return n||e+(t?"_"+t:"")}const KA=()=>{},BJ={init:KA,add:KA,rem:KA,idx:0},Cg={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},op=Object.keys(Cg).filter(e=>e!=="__count__");function LJ(e,t){return(n,i)=>Ge({name:e,aggregate_param:i,out:n||e},BJ,t)}[...op,"__count__"].forEach(e=>{Cg[e]=LJ(e,Cg[e])});function EB(e,t,n){return Cg[e](n,t)}function AB(e,t){return e.idx-t.idx}function UJ(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=Cg[r]())})};return e.forEach(n),Object.values(t).sort(AB)}function jJ(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function qJ(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function IJ(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function PJ(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function SB(e,t){const n=t||di,i=UJ(e),r=e.slice().sort(AB);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=jJ,a.prototype.add=qJ,a.prototype.rem=IJ,a.prototype.set=PJ,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function H3(e){this._key=e?Xr(e):ke,this.reset()}const Qn=H3.prototype;Qn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Qn.add=function(e){this._add.push(e)};Qn.rem=function(e){this._rem.push(e)};Qn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let u,c,f;for(u=0;u<r;++u)s[n(t[u])]=1;for(u=0,c=0;u<i;++u)s[n(f=e[u])]?s[n(f)]=0:a[c++]=f;return this._rem=[],this._add=a};Qn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",_e(n,a)||(n[a]=1,++r);return r};Qn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=jz(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Qn.argmin=function(e){return this.extent(e)[0]||{}};Qn.argmax=function(e){return this.extent(e)[1]||{}};Qn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Qn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Qn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=$3(this.values(),e),this._get=e),this._q};Qn.q1=function(e){return this.quartile(e)[0]};Qn.q2=function(e){return this.quartile(e)[1]};Qn.q3=function(e){return this.quartile(e)[2]};Qn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=lB(this.values(),1e3,.05,e),this._get=e),this._ci};Qn.ci0=function(e){return this.ci(e)[0]};Qn.ci1=function(e){return this.ci(e)[1]};function Fu(e){te.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Fu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:op},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};be(Fu,te,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(u){let c,f,d,g;for(c in u)for(d=u[c].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function s(u,c,f){const d=n[f],g=i[f++];for(const p in g){const y=u?u+"|"+p:p;c[d]=g[p],f<r?s(y,c,f):t[y]||e.cell(y,c)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(_){const w=Ee(si(_)),D=w.length;let T=0,M;for(;T<D;++T)i[M=w[T]]||(i[M]=1,t.push(M))}this._dims=Ee(e.groupby),this._dnames=this._dims.map(_=>{const w=tn(_);return r(_),n.push(w),w}),this.cellkey=e.key?e.key:Q_(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],u=e.aggregate_params||[null],c=e.as||[],f=a.length,d={};let g,p,y,v,b,E,S;for(f!==s.length&&ne("Unmatched number of fields and aggregate ops."),S=0;S<f;++S){if(g=a[S],p=s[S],y=u[S]||null,g==null&&p!=="count"&&ne("Null aggregate field specified."),b=tn(g),E=xB(p,b,c[S]),n.push(E),p==="count"){this._counts.push(E);continue}v=d[b],v||(r(g),v=d[b]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(EB(p,y,E))}return this._measures=this._measures.map(_=>SB(_,_.field)),Object.create(null)},cellkey:Q_(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new H3),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?tB(t.tuple,a):mt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,u=e.mod;let c,f,d,g;if(i)for(f in i)c=i[f],(!r||c.num)&&s.push(c.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)c=n[d],(c.num===0&&r?s:u).push(this.celltuple(c)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const HJ=1e-14;function G3(e){te.call(this,null,e)}G3.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};be(G3,te,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],u=s[0],c=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(si(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[u]=g,d[c]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[u]=i(d)),t.modifies(n?s:u)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=uB(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,u;(s=e.anchor)!=null&&(u=s-(r+i*Math.floor((s-r)/i)),r+=u,a+=u);const c=function(f){let d=ri(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(HJ+(d-r)/i))};return c.start=r,c.stop=n.stop,c.step=i,this.value=tr(c,si(t),e.name||"bin_"+tn(t))}});function _B(e,t,n){const i=e;let r=t||[],a=n||[],s={},u=0;return{add:c=>a.push(c),remove:c=>s[i(c)]=++u,size:()=>r.length,data:(c,f)=>(u&&(r=r.filter(d=>!s[i(d)]),s={},u=0),f&&c&&r.sort(c),a.length&&(r=c?Gz(c,r,a.sort(c)):r.concat(a),a=[]),r)}}function Y3(e){te.call(this,[],e)}Y3.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};be(Y3,te,{transform(e,t){const n=t.fork(t.ALL),i=_B(ke,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(Tc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function wB(e){Ot.call(this,null,GJ,e)}be(wB,Ot);function GJ(e){return this.value&&!e.modified()?this.value:a3(e.fields,e.orders)}function X3(e){te.call(this,null,e)}X3.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function YJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}be(X3,te,{transform(e,t){const n=g=>p=>{for(var y=YJ(u(p),e.case,a)||[],v,b=0,E=y.length;b<E;++b)s.test(v=y[b])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,u=e.field,c=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let u,c,f;for(u in n)c=i[u],f=n[u]||0,!c&&f?(i[u]=c=mt({}),c[r]=u,c[a]=f,s.add.push(c)):f===0?(c&&s.rem.push(c),n[u]=null,i[u]=null):c[a]!==f&&(c[a]=f,s.mod.push(c));return s.modifies(t)}});function V3(e){te.call(this,null,e)}V3.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};be(V3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let u=this.value;return s?(u&&(n.rem=u),u=t.materialize(t.SOURCE).source,n.add=this.value=XJ(u,r,a,e.filter||Vr)):n.mod=u,n.source=this.value,n.modifies(i)}});function XJ(e,t,n,i){for(var r=[],a={},s=e.length,u=0,c,f;u<s;++u)for(a[t]=f=e[u],c=0;c<s;++c)a[n]=e[c],i(a)&&(r.push(mt(a)),a={},a[t]=f);return r}const hN={kde:k3,mixture:hB,normal:F3,lognormal:dB,uniform:gB},VJ="distributions",gN="function",WJ="field";function CB(e,t){const n=e[gN];_e(hN,n)||ne("Unknown distribution function: "+n);const i=hN[n]();for(const r in e)r===WJ?i.data((e.from||t()).map(e[r])):r===VJ?i[r](e[r].map(a=>CB(a,t))):typeof i[r]===gN&&i[r](e[r]);return i}function W3(e){te.call(this,null,e)}const DB=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],QJ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:DB},{name:"weights",type:"number",array:!0}]};W3.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:DB.concat(QJ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(W3,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=CB(e.distribution,ZJ(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ne("Invalid density method: "+s),!e.extent&&!i.data&&ne("Missing density extent parameter."),s=i[s];const u=e.as||["value","density"],c=e.extent||ss(i.data()),f=$b(s,c,r,a).map(d=>{const g={};return g[u[0]]=d[0],g[u[1]]=d[1],mt(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function ZJ(e){return()=>e.materialize(e.SOURCE).source}function $B(e,t){return e?e.map((n,i)=>t[i]||tn(n)):null}function Q3(e,t,n){const i=[],r=g=>g(c);let a,s,u,c,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,u=e.length;s<u;++s)c=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(c));return i}const TB="bin";function Z3(e){te.call(this,null,e)}Z3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:TB}]};const KJ=(e,t)=>rp(ss(e,t))/30;be(Z3,te,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=Q3(t.source,e.groupby,di),r=e.smooth||!1,a=e.field,s=e.step||KJ(n,a),u=Tc((v,b)=>a(v)-a(b)),c=e.as||TB,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(u);y=-1;for(const b of cB(v,s,r,a))b<d&&(d=b),b>g&&(g=b),v[++y][c]=b}return this.value={start:d,stop:g,step:s},t.reflow(!0).modifies(c)}});function MB(e){Ot.call(this,null,JJ,e),this.modified(!0)}be(MB,Ot);function JJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:tr(n=>t(n,e),si(t),tn(t))}function K3(e){te.call(this,[void 0,void 0],e)}K3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};be(K3,te,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,u=>{const c=ri(i(u));c!=null&&(c<a&&(a=c),c>s&&(s=c))}),!Number.isFinite(a)||!Number.isFinite(s)){let u=tn(i);u&&(u=` for field "${u}"`),t.dataflow.warn(`Infinite extent${u}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function J3(e,t){Ot.call(this,e),this.parent=t,this.count=0}be(J3,Ot,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Tb(e){te.call(this,{},e),this._keys=Xd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}be(Tb,te,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=_e(r,e)&&r[e],s,u;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(u=i||(u=this._group[e])&&u.tuple,s=n.dataflow,a=new J3(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,u)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),u=c=>this.subflow(c,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{const f=ke(c),d=a.get(f);d!==void 0&&(a.delete(f),u(d).rem(c))}),t.visit(t.ADD,c=>{const f=i(c);a.set(ke(c),f),u(f).add(c)}),s||t.modified(i.fields)?t.visit(t.MOD,c=>{const f=ke(c),d=a.get(f),g=i(c);d===g?u(g).mod(c):(a.set(f,g),u(d).rem(c),u(g).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{u(a.get(ke(c))).mod(c)}),s&&t.visit(t.REFLOW,c=>{const f=ke(c),d=a.get(f),g=i(c);d!==g&&(a.set(f,g),u(d).rem(c),u(g).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function FB(e){Ot.call(this,null,eee,e)}be(FB,Ot);function eee(e){return this.value&&!e.modified()?this.value:se(e.name)?Ee(e.name).map(t=>Xr(t)):Xr(e.name,e.as)}function eD(e){te.call(this,Xd(),e)}eD.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};be(eD,te,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,u=r.mod,c=e.expr;let f=!0;t.visit(t.REM,g=>{const p=ke(g);i.has(p)?i.delete(p):s.push(g)}),t.visit(t.ADD,g=>{c(g,e)?a.push(g):i.set(ke(g),1)});function d(g){const p=ke(g),y=c(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),s.push(g)):f&&y&&!v&&u.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function tD(e){te.call(this,[],e)}tD.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};be(tD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=$B(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{const c=i.map(v=>v(u)),f=c.reduce((v,b)=>Math.max(v,b.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=_3(u),g=0;g<s;++g)p[r[g]]=(y=c[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function nD(e){te.call(this,[],e)}nD.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};be(nD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(tn),a=e.as||["key","value"],s=a[0],u=a[1],c=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<c;++d)g=_3(f),g[s]=r[d],g[u]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function iD(e){te.call(this,null,e)}iD.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};be(iD,te,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function kB(e){te.call(this,[],e)}be(kB,te,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,u,c;if(a>0){for(s=[];--a>=0;)s.push(c=mt(i(e))),r.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else u=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(u):u,r=r.slice(-a);return n.source=this.value=r,n}});const b1={value:"value",median:r7,mean:zQ,min:U_,max:Xl},tee=[];function rD(e){te.call(this,[],e)}rD.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function nee(e){var t=e.method||b1.value,n;if(b1[t]==null)ne("Unrecognized imputation method: "+t);else return t===b1.value?(n=e.value!==void 0?e.value:0,()=>n):b1[t]}function iee(e){const t=e.field;return n=>n?t(n):NaN}be(rD,te,{transform(e,t){var n=t.fork(t.ALL),i=nee(e),r=iee(e),a=tn(e.field),s=tn(e.key),u=(e.groupby||[]).map(tn),c=ree(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=c.domain.length,p,y,v,b,E,S,_,w,D,T;for(E=0,w=c.length;E<w;++E)for(p=c[E],v=p.values,y=NaN,_=0;_<g;++_)if(p[_]==null){for(b=c.domain[_],T={_impute:!0},S=0,D=v.length;S<D;++S)T[u[S]]=v[S];T[s]=b,T[a]=Number.isNaN(y)?y=i(p,r):y,f.push(mt(T))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function ree(e,t,n,i){var r=S=>S(E),a=[],s=i?i.slice():[],u={},c={},f,d,g,p,y,v,b,E;for(s.forEach((S,_)=>u[S]=_+1),p=0,b=e.length;p<b;++p)E=e[p],v=n(E),y=u[v]||(u[v]=s.push(v)),d=(f=t?t.map(r):tee)+"",(g=c[d])||(g=c[d]=[],a.push(g),g.values=f),g[y-1]=E;return a.domain=s,a}function aD(e){Fu.call(this,e)}aD.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:op},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};be(aD,Fu,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Ge(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function sD(e){te.call(this,null,e)}sD.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};be(sD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=Q3(i,e.groupby,e.field),a=(e.groupby||[]).map(tn),s=e.bandwidth,u=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;u!=="pdf"&&u!=="cdf"&&ne("Invalid density method: "+u),e.resolve==="shared"&&(d||(d=ss(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=k3(y,s)[u],b=e.counts?y.length:1,E=d||ss(y);$b(v,E,g,p).forEach(S=>{const _={};for(let w=0;w<a.length;++w)_[a[w]]=y.dims[w];_[c[0]]=S[0],_[c[1]]=S[1]*b,f.push(mt(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function OB(e){Ot.call(this,null,aee,e)}be(OB,Ot);function aee(e){return this.value&&!e.modified()?this.value:u3(e.fields,e.flat)}function NB(e){te.call(this,[],e),this._pending=null}be(NB,te,{transform(e,t){const n=t.dataflow;return this._pending?JA(this,t,this._pending):see(e)?t.StopPropagation:e.values?JA(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ee(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>JA(this,t,Ee(i.data)))}});function see(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function JA(e,t,n){n.forEach(mt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function oD(e){te.call(this,{},e)}oD.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};be(oD,te,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),u=n.length;let c=s?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,u>1&&!d&&ne('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==u*p&&ne('The "as" parameter has too few output field names.'),d=d||r.map(tn),g=function(v){for(var b=0,E=0,S,_;b<u;++b)if(_=i.get(n[b](v)),_==null)for(S=0;S<p;++S,++E)v[d[E]]=a;else for(S=0;S<p;++S,++E)v[d[E]]=r[S](_)}):(d||ne("Missing output field names."),g=function(v){for(var b=0,E;b<u;++b)E=i.get(n[b](v)),v[d[b]]=E??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),c|=y?t.MOD:0),t.visit(c,g),f.modifies(d)}});function RB(e){Ot.call(this,null,oee,e)}be(RB,Ot);function oee(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function zB(e){Ot.call(this,null,uee,e)}be(zB,Ot);function uee(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function BB(e){te.call(this,null,e)}be(BB,te,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function uD(e){Fu.call(this,e)}uD.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:op,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};be(uD,Fu,{_transform:Fu.prototype.transform,transform(e,t){return this._transform(lee(e,t),t)}});function lee(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=si(n).concat(si(i)),s=fee(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(u=>cee(u,n,i,a)),as:s.map(u=>u+""),modified:e.modified.bind(e)}}function cee(e,t,n,i){return tr(r=>t(r)===e?n(r):NaN,i,e+"")}function fee(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(ip),t?r.slice(0,t):r}function LB(e){Tb.call(this,e)}be(LB,Tb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(ke(a),n,t,a);return(e.modified("field")||i&&t.modified(si(i)))&&ne("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(u=>s.mod(u))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(u=>s.add(mt(u)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(u=>s.rem(u))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function lD(e){te.call(this,null,e)}lD.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};be(lD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=$B(e.fields,e.as||[]),a=i?(u,c)=>dee(u,c,i,r):Eb;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,u=>{const c=ke(u);n.rem.push(s[c]),s[c]=null}),t.visit(t.ADD,u=>{const c=a(u,mt({}));s[ke(u)]=c,n.add.push(c)}),t.visit(t.MOD,u=>{n.mod.push(a(u,s[ke(u)]))}),n}});function dee(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function UB(e){te.call(this,null,e)}be(UB,te,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function cD(e){te.call(this,null,e)}cD.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const hee=1e-14;be(cD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=Q3(r,e.groupby,e.field),s=(e.groupby||[]).map(tn),u=[],c=e.step||.01,f=e.probs||yr(c/2,1-hee,c),d=f.length;return a.forEach(g=>{const p=D3(g,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=g.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],u.push(mt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u,n}});function jB(e){te.call(this,null,e)}be(jB,te,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=ke(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=_3(r);i[ke(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[ke(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function fD(e){te.call(this,[],e),this.count=0}fD.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};be(fD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[ke(g)]=1,d),{});let s=this.value,u=this.count,c=0;function f(d){let g,p;s.length<r?s.push(d):(p=~~((u+1)*Qr()),p<s.length&&p>=c&&(g=s[p],a[ke(g)]&&n.rem.push(g),s[p]=d)),++u}if(t.rem.length&&(t.visit(t.REM,d=>{const g=ke(d);a[g]&&(a[g]=-1,n.rem.push(d)),--u}),s=s.filter(d=>a[ke(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(c=u=s.length,t.visit(t.SOURCE,d=>{a[ke(d)]||f(d)}),c=-1),i&&s.length>r){const d=s.length-r;for(let g=0;g<d;++g)a[ke(s[g])]=-1,n.rem.push(s[g]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[ke(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||c<0)&&(n.add=s.filter(d=>!a[ke(d)])),this.count=u,this.value=n.source=s,n}});function dD(e){te.call(this,null,e)}dD.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};be(dD,te,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=yr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,mt(a)}),n.add=t.add.concat(this.value),n}});function qB(e){te.call(this,null,e),this.modified(!0)}be(qB,te,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function hD(e){te.call(this,null,e)}const IB=["unit0","unit1"];hD.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:p3,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:IB}]};be(hD,te,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Kd:Zd)(a.unit).offset,u=e.as||IB,c=u[0],f=u[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(si(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let E,S;b==null?(v[c]=null,i&&(v[f]=null)):(v[c]=E=S=a(b),i&&(v[f]=S=s(E,d)),E<g&&(g=E),S>p&&(p=S))}),a.start=g,a.stop=p,t.modifies(i?u:c)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:k7({extent:e.extent||ss(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=m3(i),s=this.value||{},u=(n?S7:A7)(a,r);return u.unit=st(a),u.units=a,u.step=r,u.start=s.start,u.stop=s.stop,this.value=u}});function PB(e){te.call(this,Xd(),e)}be(PB,te,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=u=>r.set(i(u),u);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,u=>r.delete(i(u))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function HB(e){te.call(this,null,e)}be(HB,te,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Tc(e.sort)):t.source).map(e.field))}});function gee(e,t,n,i){const r=Dg[e](t,n);return{init:r.init||hu,update:function(a,s){s[i]=r.next(a)}}}const Dg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=Dg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ne("ntile num must be greater than zero.");const n=Dg.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ne("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=pee(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function pee(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const mee=Object.keys(Dg);function GB(e){const t=Ee(e.ops),n=Ee(e.fields),i=Ee(e.params),r=Ee(e.aggregate_params),a=Ee(e.as),s=this.outputs=[],u=this.windows=[],c={},f={},d=[],g=[];let p=!0;function y(v){Ee(si(v)).forEach(b=>c[b]=1)}y(e.sort),t.forEach((v,b)=>{const E=n[b],S=i[b],_=r[b]||null,w=tn(E),D=xB(v,w,a[b]);if(y(E),s.push(D),_e(Dg,v))u.push(gee(v,E,S,D));else{if(E==null&&v!=="count"&&ne("Null aggregate field specified."),v==="count"){d.push(D);return}p=!1;let T=f[w];T||(T=f[w]=[],T.field=E,g.push(T)),T.push(EB(v,_,D))}}),(d.length||g.length)&&(this.cell=yee(g,d,p)),this.inputs=Object.keys(c)}const YB=GB.prototype;YB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};YB.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function yee(e,t,n){e=e.map(c=>SB(c,c.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var u=i.data=new H3;return i.add=function(c){if(i.num+=1,!n){u&&u.add(c);for(let f=0;f<r;++f)a[f].add(a[f].get(c),c)}},i.rem=function(c){if(i.num-=1,!n){u&&u.rem(c);for(let f=0;f<r;++f)a[f].rem(a[f].get(c),c)}},i.set=function(c){let f,d;for(u&&u.values(),f=0,d=t.length;f<d;++f)c[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(c)},i.init=function(){i.num=0,u&&u.reset();for(let c=0;c<r;++c)a[c].init()},i}function gD(e){te.call(this,{},e),this._mlen=0,this._mods=[]}gD.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:mee.concat(op)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};be(gD,te,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=Tc(e.sort),r=Q_(e.groupby),a=u=>this.group(r(u));let s=this.state;(!s||n)&&(s=this.state=new GB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,u=>a(u).add(u))):(t.visit(t.REM,u=>a(u).remove(u)),t.visit(t.ADD,u=>a(u).add(u)));for(let u=0,c=this._mlen;u<c;++u)vee(this._mods[u],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=_B(ke),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function vee(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],u=e.data(n),c=u.length,f=a?Vd(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:r||hi(-1)};t.init();for(let g=0;g<c;++g)bee(d,s,g,c),a&&xee(d,f),t.update(d,u[g])}function bee(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function xee(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const Eee=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Fu,bin:G3,collect:Y3,compare:wB,countpattern:X3,cross:V3,density:W3,dotbin:Z3,expression:MB,extent:K3,facet:Tb,field:FB,filter:eD,flatten:tD,fold:nD,formula:iD,generate:kB,impute:rD,joinaggregate:aD,kde:sD,key:OB,load:NB,lookup:oD,multiextent:RB,multivalues:zB,params:BB,pivot:uD,prefacet:LB,project:lD,proxy:UB,quantile:cD,relay:jB,sample:fD,sequence:dD,sieve:qB,subflow:J3,timeunit:hD,tupleindex:PB,values:HB,window:gD},Symbol.toStringTag,{value:"Module"}));function yt(e){return function(){return e}}const pN=Math.abs,Kn=Math.atan2,_l=Math.cos,Aee=Math.max,eS=Math.min,Ia=Math.sin,Pl=Math.sqrt,ei=1e-12,pd=Math.PI,Ly=pd/2,XB=2*pd;function See(e){return e>1?0:e<-1?pd:Math.acos(e)}function mN(e){return e>=1?Ly:e<=-1?-Ly:Math.asin(e)}const Z_=Math.PI,K_=2*Z_,Rl=1e-6,_ee=K_-Rl;function VB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return VB;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let pD=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?VB:wee(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,u=this._y1,c=i-t,f=r-n,d=s-t,g=u-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Rl)if(!(Math.abs(g*c-f*d)>Rl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-u,b=c*c+f*f,E=y*y+v*v,S=Math.sqrt(b),_=Math.sqrt(p),w=a*Math.tan((Z_-Math.acos((b+p-E)/(2*S*_)))/2),D=w/_,T=w/S;Math.abs(D-1)>Rl&&this._append`L${t+D*d},${n+D*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+T*c},${this._y1=n+T*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),c=i*Math.sin(r),f=t+u,d=n+c,g=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>Rl||Math.abs(this._y1-d)>Rl)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%K_+K_),p>_ee?this._append`A${i},${i},0,1,${g},${t-u},${n-c}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>Rl&&this._append`A${i},${i},0,${+(p>=Z_)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function Mb(){return new pD}Mb.prototype=pD.prototype;function Fb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new pD(t)}function Cee(e){return e.innerRadius}function Dee(e){return e.outerRadius}function $ee(e){return e.startAngle}function Tee(e){return e.endAngle}function Mee(e){return e&&e.padAngle}function Fee(e,t,n,i,r,a,s,u){var c=n-e,f=i-t,d=s-r,g=u-a,p=g*c-d*f;if(!(p*p<ei))return p=(d*(t-a)-g*(e-r))/p,[e+p*c,t+p*f]}function x1(e,t,n,i,r,a,s){var u=e-n,c=t-i,f=(s?a:-a)/Pl(u*u+c*c),d=f*c,g=-f*u,p=e+d,y=t+g,v=n+d,b=i+g,E=(p+v)/2,S=(y+b)/2,_=v-p,w=b-y,D=_*_+w*w,T=r-a,M=p*b-v*y,$=(w<0?-1:1)*Pl(Aee(0,T*T*D-M*M)),F=(M*w-_*$)/D,N=(-M*_-w*$)/D,U=(M*w+_*$)/D,B=(-M*_+w*$)/D,X=F-E,G=N-S,P=U-E,z=B-S;return X*X+G*G>P*P+z*z&&(F=U,N=B),{cx:F,cy:N,x01:-d,y01:-g,x11:F*(r/T-1),y11:N*(r/T-1)}}function kee(){var e=Cee,t=Dee,n=yt(0),i=null,r=$ee,a=Tee,s=Mee,u=null,c=Fb(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-Ly,b=a.apply(this,arguments)-Ly,E=pN(b-v),S=b>v;if(u||(u=d=c()),y<p&&(g=y,y=p,p=g),!(y>ei))u.moveTo(0,0);else if(E>XB-ei)u.moveTo(y*_l(v),y*Ia(v)),u.arc(0,0,y,v,b,!S),p>ei&&(u.moveTo(p*_l(b),p*Ia(b)),u.arc(0,0,p,b,v,S));else{var _=v,w=b,D=v,T=b,M=E,$=E,F=s.apply(this,arguments)/2,N=F>ei&&(i?+i.apply(this,arguments):Pl(p*p+y*y)),U=eS(pN(y-p)/2,+n.apply(this,arguments)),B=U,X=U,G,P;if(N>ei){var z=mN(N/p*Ia(F)),O=mN(N/y*Ia(F));(M-=z*2)>ei?(z*=S?1:-1,D+=z,T-=z):(M=0,D=T=(v+b)/2),($-=O*2)>ei?(O*=S?1:-1,_+=O,w-=O):($=0,_=w=(v+b)/2)}var j=y*_l(_),Y=y*Ia(_),V=p*_l(T),ee=p*Ia(T);if(U>ei){var R=y*_l(w),q=y*Ia(w),J=p*_l(D),ce=p*Ia(D),me;if(E<pd)if(me=Fee(j,Y,J,ce,R,q,V,ee)){var Me=j-me[0],Pe=Y-me[1],_t=R-me[0],pe=q-me[1],Le=1/Ia(See((Me*_t+Pe*pe)/(Pl(Me*Me+Pe*Pe)*Pl(_t*_t+pe*pe)))/2),ze=Pl(me[0]*me[0]+me[1]*me[1]);B=eS(U,(p-ze)/(Le-1)),X=eS(U,(y-ze)/(Le+1))}else B=X=0}$>ei?X>ei?(G=x1(J,ce,j,Y,y,X,S),P=x1(R,q,V,ee,y,X,S),u.moveTo(G.cx+G.x01,G.cy+G.y01),X<U?u.arc(G.cx,G.cy,X,Kn(G.y01,G.x01),Kn(P.y01,P.x01),!S):(u.arc(G.cx,G.cy,X,Kn(G.y01,G.x01),Kn(G.y11,G.x11),!S),u.arc(0,0,y,Kn(G.cy+G.y11,G.cx+G.x11),Kn(P.cy+P.y11,P.cx+P.x11),!S),u.arc(P.cx,P.cy,X,Kn(P.y11,P.x11),Kn(P.y01,P.x01),!S))):(u.moveTo(j,Y),u.arc(0,0,y,_,w,!S)):u.moveTo(j,Y),!(p>ei)||!(M>ei)?u.lineTo(V,ee):B>ei?(G=x1(V,ee,R,q,p,-B,S),P=x1(j,Y,J,ce,p,-B,S),u.lineTo(G.cx+G.x01,G.cy+G.y01),B<U?u.arc(G.cx,G.cy,B,Kn(G.y01,G.x01),Kn(P.y01,P.x01),!S):(u.arc(G.cx,G.cy,B,Kn(G.y01,G.x01),Kn(G.y11,G.x11),!S),u.arc(0,0,p,Kn(G.cy+G.y11,G.cx+G.x11),Kn(P.cy+P.y11,P.cx+P.x11),S),u.arc(P.cx,P.cy,B,Kn(P.y11,P.x11),Kn(P.y01,P.x01),!S))):u.arc(0,0,p,T,D,S)}if(u.closePath(),d)return u=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-pd/2;return[_l(g)*d,Ia(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:yt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:yt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:yt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:yt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:yt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:yt(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:yt(+d),f):s},f.context=function(d){return arguments.length?(u=d??null,f):u},f}function WB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QB(e){this._context=e}QB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function mD(e){return new QB(e)}function ZB(e){return e[0]}function KB(e){return e[1]}function JB(e,t){var n=yt(!0),i=null,r=mD,a=null,s=Fb(u);e=typeof e=="function"?e:e===void 0?ZB:yt(e),t=typeof t=="function"?t:t===void 0?KB:yt(t);function u(c){var f,d=(c=WB(c)).length,g,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(g=c[f],f,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,c),+t(g,f,c));if(y)return a=null,y+""||null}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:yt(+c),u):e},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:yt(+c),u):t},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:yt(!!c),u):n},u.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),u):r},u.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),u):i},u}function eL(e,t,n){var i=null,r=yt(!0),a=null,s=mD,u=null,c=Fb(f);e=typeof e=="function"?e:e===void 0?ZB:yt(+e),t=typeof t=="function"?t:yt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?KB:yt(+n);function f(g){var p,y,v,b=(g=WB(g)).length,E,S=!1,_,w=new Array(b),D=new Array(b);for(a==null&&(u=s(_=c())),p=0;p<=b;++p){if(!(p<b&&r(E=g[p],p,g))===S)if(S=!S)y=p,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),v=p-1;v>=y;--v)u.point(w[v],D[v]);u.lineEnd(),u.areaEnd()}S&&(w[p]=+e(E,p,g),D[p]=+t(E,p,g),u.point(i?+i(E,p,g):w[p],n?+n(E,p,g):D[p]))}if(_)return u=null,_+""||null}function d(){return JB().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:yt(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:yt(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:yt(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:yt(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:yt(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:yt(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:yt(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(u=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=u=null:u=s(a=g),f):a},f}const Oee={draw(e,t){const n=Pl(t/pd);e.moveTo(n,0),e.arc(0,0,n,0,XB)}};function Nee(e,t){let n=null,i=Fb(r);e=typeof e=="function"?e:yt(e||Oee),t=typeof t=="function"?t:yt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:yt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:yt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function ku(){}function Uy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function kb(e){this._context=e}kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ree(e){return new kb(e)}function tL(e){this._context=e}tL.prototype={areaStart:ku,areaEnd:ku,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zee(e){return new tL(e)}function nL(e){this._context=e}nL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bee(e){return new nL(e)}function iL(e,t){this._basis=new kb(e),this._beta=t}iL.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,u=-1,c;++u<=n;)c=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+c*a),this._beta*t[u]+(1-this._beta)*(r+c*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Lee=(function e(t){function n(i){return t===1?new kb(i):new iL(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function jy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function yD(e,t){this._context=e,this._k=(1-t)/6}yD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:jy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:jy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Uee=(function e(t){function n(i){return new yD(i,t)}return n.tension=function(i){return e(+i)},n})(0);function vD(e,t){this._context=e,this._k=(1-t)/6}vD.prototype={areaStart:ku,areaEnd:ku,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jee=(function e(t){function n(i){return new vD(i,t)}return n.tension=function(i){return e(+i)},n})(0);function bD(e,t){this._context=e,this._k=(1-t)/6}bD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qee=(function e(t){function n(i){return new bD(i,t)}return n.tension=function(i){return e(+i)},n})(0);function xD(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>ei){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>ei){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function rL(e,t){this._context=e,this._alpha=t}rL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:xD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Iee=(function e(t){function n(i){return t?new rL(i,t):new yD(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function aL(e,t){this._context=e,this._alpha=t}aL.prototype={areaStart:ku,areaEnd:ku,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:xD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pee=(function e(t){function n(i){return t?new aL(i,t):new vD(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function sL(e,t){this._context=e,this._alpha=t}sL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:xD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hee=(function e(t){function n(i){return t?new sL(i,t):new bD(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function oL(e){this._context=e}oL.prototype={areaStart:ku,areaEnd:ku,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Gee(e){return new oL(e)}function yN(e){return e<0?-1:1}function vN(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),u=(a*r+s*i)/(i+r);return(yN(a)+yN(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(u))||0}function bN(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function tS(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,u=(a-i)/3;e._context.bezierCurveTo(i+u,r+u*t,a-u,s-u*n,a,s)}function qy(e){this._context=e}qy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:tS(this,this._t0,bN(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,tS(this,bN(this,n=vN(this,e,t)),n);break;default:tS(this,this._t0,n=vN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function uL(e){this._context=new lL(e)}(uL.prototype=Object.create(qy.prototype)).point=function(e,t){qy.prototype.point.call(this,t,e)};function lL(e){this._context=e}lL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function Yee(e){return new qy(e)}function Xee(e){return new uL(e)}function cL(e){this._context=e}cL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=xN(e),r=xN(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function xN(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function Vee(e){return new cL(e)}function Ob(e,t){this._context=e,this._t=t}Ob.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Wee(e){return new Ob(e,.5)}function Qee(e){return new Ob(e,0)}function Zee(e){return new Ob(e,1)}function Cu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Kee=()=>typeof Image<"u"?Image:null;function ms(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Gu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const J_=Symbol("implicit");function ED(){var e=new BO,t=[],n=[],i=J_;function r(a){let s=e.get(a);if(s===void 0){if(i!==J_)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new BO;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return ED(t,n).unknown(i)},ms.apply(r,arguments),r}function eh(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function up(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Yu(){}var rc=.7,md=1/rc,ed="\\s*([+-]?\\d+)\\s*",$g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",es="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jee=/^#([0-9a-f]{3,8})$/,ete=new RegExp(`^rgb\\(${ed},${ed},${ed}\\)$`),tte=new RegExp(`^rgb\\(${es},${es},${es}\\)$`),nte=new RegExp(`^rgba\\(${ed},${ed},${ed},${$g}\\)$`),ite=new RegExp(`^rgba\\(${es},${es},${es},${$g}\\)$`),rte=new RegExp(`^hsl\\(${$g},${es},${es}\\)$`),ate=new RegExp(`^hsla\\(${$g},${es},${es},${$g}\\)$`),EN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eh(Yu,Tg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:AN,formatHex:AN,formatHex8:ste,formatHsl:ote,formatRgb:SN,toString:SN});function AN(){return this.rgb().formatHex()}function ste(){return this.rgb().formatHex8()}function ote(){return fL(this).formatHsl()}function SN(){return this.rgb().formatRgb()}function Tg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jee.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?_N(t):n===3?new wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?E1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?E1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ete.exec(e))?new wn(t[1],t[2],t[3],1):(t=tte.exec(e))?new wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nte.exec(e))?E1(t[1],t[2],t[3],t[4]):(t=ite.exec(e))?E1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=rte.exec(e))?DN(t[1],t[2]/100,t[3]/100,1):(t=ate.exec(e))?DN(t[1],t[2]/100,t[3]/100,t[4]):EN.hasOwnProperty(e)?_N(EN[e]):e==="transparent"?new wn(NaN,NaN,NaN,0):null}function _N(e){return new wn(e>>16&255,e>>8&255,e&255,1)}function E1(e,t,n,i){return i<=0&&(e=t=n=NaN),new wn(e,t,n,i)}function AD(e){return e instanceof Yu||(e=Tg(e)),e?(e=e.rgb(),new wn(e.r,e.g,e.b,e.opacity)):new wn}function Ou(e,t,n,i){return arguments.length===1?AD(e):new wn(e,t,n,i??1)}function wn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}eh(wn,Ou,up(Yu,{brighter(e){return e=e==null?md:Math.pow(md,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rc:Math.pow(rc,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wn(Vl(this.r),Vl(this.g),Vl(this.b),Iy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wN,formatHex:wN,formatHex8:ute,formatRgb:CN,toString:CN}));function wN(){return`#${Hl(this.r)}${Hl(this.g)}${Hl(this.b)}`}function ute(){return`#${Hl(this.r)}${Hl(this.g)}${Hl(this.b)}${Hl((isNaN(this.opacity)?1:this.opacity)*255)}`}function CN(){const e=Iy(this.opacity);return`${e===1?"rgb(":"rgba("}${Vl(this.r)}, ${Vl(this.g)}, ${Vl(this.b)}${e===1?")":`, ${e})`}`}function Iy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hl(e){return e=Vl(e),(e<16?"0":"")+e.toString(16)}function DN(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ha(e,t,n,i)}function fL(e){if(e instanceof ha)return new ha(e.h,e.s,e.l,e.opacity);if(e instanceof Yu||(e=Tg(e)),!e)return new ha;if(e instanceof ha)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,u=a-r,c=(a+r)/2;return u?(t===a?s=(n-i)/u+(n<i)*6:n===a?s=(i-t)/u+2:s=(t-n)/u+4,u/=c<.5?a+r:2-a-r,s*=60):u=c>0&&c<1?0:s,new ha(s,u,c,e.opacity)}function Py(e,t,n,i){return arguments.length===1?fL(e):new ha(e,t,n,i??1)}function ha(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}eh(ha,Py,up(Yu,{brighter(e){return e=e==null?md:Math.pow(md,e),new ha(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rc:Math.pow(rc,e),new ha(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new wn(nS(e>=240?e-240:e+120,r,i),nS(e,r,i),nS(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new ha($N(this.h),A1(this.s),A1(this.l),Iy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Iy(this.opacity);return`${e===1?"hsl(":"hsla("}${$N(this.h)}, ${A1(this.s)*100}%, ${A1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $N(e){return e=(e||0)%360,e<0?e+360:e}function A1(e){return Math.max(0,Math.min(1,e||0))}function nS(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const dL=Math.PI/180,hL=180/Math.PI,Hy=18,gL=.96422,pL=1,mL=.82521,yL=4/29,td=6/29,vL=3*td*td,lte=td*td*td;function bL(e){if(e instanceof ts)return new ts(e.l,e.a,e.b,e.opacity);if(e instanceof so)return xL(e);e instanceof wn||(e=AD(e));var t=sS(e.r),n=sS(e.g),i=sS(e.b),r=iS((.2225045*t+.7168786*n+.0606169*i)/pL),a,s;return t===n&&n===i?a=s=r:(a=iS((.4360747*t+.3850649*n+.1430804*i)/gL),s=iS((.0139322*t+.0971045*n+.7141733*i)/mL)),new ts(116*r-16,500*(a-r),200*(r-s),e.opacity)}function Gy(e,t,n,i){return arguments.length===1?bL(e):new ts(e,t,n,i??1)}function ts(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}eh(ts,Gy,up(Yu,{brighter(e){return new ts(this.l+Hy*(e??1),this.a,this.b,this.opacity)},darker(e){return new ts(this.l-Hy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=gL*rS(t),e=pL*rS(e),n=mL*rS(n),new wn(aS(3.1338561*t-1.6168667*e-.4906146*n),aS(-.9787684*t+1.9161415*e+.033454*n),aS(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function iS(e){return e>lte?Math.pow(e,1/3):e/vL+yL}function rS(e){return e>td?e*e*e:vL*(e-yL)}function aS(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function sS(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function cte(e){if(e instanceof so)return new so(e.h,e.c,e.l,e.opacity);if(e instanceof ts||(e=bL(e)),e.a===0&&e.b===0)return new so(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*hL;return new so(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Yy(e,t,n,i){return arguments.length===1?cte(e):new so(e,t,n,i??1)}function so(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function xL(e){if(isNaN(e.h))return new ts(e.l,0,0,e.opacity);var t=e.h*dL;return new ts(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}eh(so,Yy,up(Yu,{brighter(e){return new so(this.h,this.c,this.l+Hy*(e??1),this.opacity)},darker(e){return new so(this.h,this.c,this.l-Hy*(e??1),this.opacity)},rgb(){return xL(this).rgb()}}));var EL=-.14861,SD=1.78277,_D=-.29227,Nb=-.90649,Mg=1.97294,TN=Mg*Nb,MN=Mg*SD,FN=SD*_D-Nb*EL;function fte(e){if(e instanceof Wl)return new Wl(e.h,e.s,e.l,e.opacity);e instanceof wn||(e=AD(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(FN*i+TN*t-MN*n)/(FN+TN-MN),a=i-r,s=(Mg*(n-r)-_D*a)/Nb,u=Math.sqrt(s*s+a*a)/(Mg*r*(1-r)),c=u?Math.atan2(s,a)*hL-120:NaN;return new Wl(c<0?c+360:c,u,r,e.opacity)}function ew(e,t,n,i){return arguments.length===1?fte(e):new Wl(e,t,n,i??1)}function Wl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}eh(Wl,ew,up(Yu,{brighter(e){return e=e==null?md:Math.pow(md,e),new Wl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rc:Math.pow(rc,e),new Wl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*dL,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new wn(255*(t+n*(EL*i+SD*r)),255*(t+n*(_D*i+Nb*r)),255*(t+n*(Mg*i)),this.opacity)}}));function AL(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function SL(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,u=i<t-1?e[i+2]:2*a-r;return AL((n-i/t)*t,s,r,a,u)}}function _L(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],u=e[(i+2)%t];return AL((n-i/t)*t,r,a,s,u)}}const Rb=e=>()=>e;function wL(e,t){return function(n){return e+n*t}}function dte(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function zb(e,t){var n=t-e;return n?wL(e,n>180||n<-180?n-360*Math.round(n/360):n):Rb(isNaN(e)?t:e)}function hte(e){return(e=+e)==1?Cn:function(t,n){return n-t?dte(t,n,e):Rb(isNaN(t)?n:t)}}function Cn(e,t){var n=t-e;return n?wL(e,n):Rb(isNaN(e)?t:e)}const tw=(function e(t){var n=hte(t);function i(r,a){var s=n((r=Ou(r)).r,(a=Ou(a)).r),u=n(r.g,a.g),c=n(r.b,a.b),f=Cn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=u(d),r.b=c(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function CL(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,u;for(s=0;s<n;++s)u=Ou(t[s]),i[s]=u.r||0,r[s]=u.g||0,a[s]=u.b||0;return i=e(i),r=e(r),a=e(a),u.opacity=1,function(c){return u.r=i(c),u.g=r(c),u.b=a(c),u+""}}}var gte=CL(SL),pte=CL(_L);function wD(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function DL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mte(e,t){return(DL(t)?wD:$L)(e,t)}function $L(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Xu(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(u){for(s=0;s<i;++s)a[s]=r[s](u);return a}}function TL(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function fa(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ML(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Xu(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var nw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oS=new RegExp(nw.source,"g");function yte(e){return function(){return e}}function vte(e){return function(t){return e(t)+""}}function FL(e,t){var n=nw.lastIndex=oS.lastIndex=0,i,r,a,s=-1,u=[],c=[];for(e=e+"",t=t+"";(i=nw.exec(e))&&(r=oS.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),u[s]?u[s]+=a:u[++s]=a),(i=i[0])===(r=r[0])?u[s]?u[s]+=r:u[++s]=r:(u[++s]=null,c.push({i:s,x:fa(i,r)})),n=oS.lastIndex;return n<t.length&&(a=t.slice(n),u[s]?u[s]+=a:u[++s]=a),u.length<2?c[0]?vte(c[0].x):yte(t):(t=c.length,function(f){for(var d=0,g;d<t;++d)u[(g=c[d]).i]=g.x(f);return u.join("")})}function Xu(e,t){var n=typeof t,i;return t==null||n==="boolean"?Rb(t):(n==="number"?fa:n==="string"?(i=Tg(t))?(t=i,tw):FL:t instanceof Tg?tw:t instanceof Date?TL:DL(t)?wD:Array.isArray(t)?$L:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ML:fa)(e,t)}function bte(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function xte(e,t){var n=zb(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function lp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var kN=180/Math.PI,iw={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kL(e,t,n,i,r,a){var s,u,c;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,c/=u),e*i<t*n&&(e=-e,t=-t,c=-c,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*kN,skewX:Math.atan(c)*kN,scaleX:s,scaleY:u}}var S1;function Ete(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?iw:kL(t.a,t.b,t.c,t.d,t.e,t.f)}function Ate(e){return e==null||(S1||(S1=document.createElementNS("http://www.w3.org/2000/svg","g")),S1.setAttribute("transform",e),!(e=S1.transform.baseVal.consolidate()))?iw:(e=e.matrix,kL(e.a,e.b,e.c,e.d,e.e,e.f))}function OL(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:fa(f,g)},{i:b-2,x:fa(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function s(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:fa(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function u(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:fa(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function c(f,d,g,p,y,v){if(f!==g||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:fa(f,g)},{i:b-2,x:fa(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),s(f.rotate,d.rotate,g,p),u(f.skewX,d.skewX,g,p),c(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,b=p.length,E;++v<b;)g[(E=p[v]).i]=E.x(y);return g.join("")}}}var Ste=OL(Ete,"px, ","px)","deg)"),_te=OL(Ate,", ",")",")"),wte=1e-12;function ON(e){return((e=Math.exp(e))+1/e)/2}function Cte(e){return((e=Math.exp(e))-1/e)/2}function Dte(e){return((e=Math.exp(2*e))-1)/(e+1)}const $te=(function e(t,n,i){function r(a,s){var u=a[0],c=a[1],f=a[2],d=s[0],g=s[1],p=s[2],y=d-u,v=g-c,b=y*y+v*v,E,S;if(b<wte)S=Math.log(p/f)/t,E=function($){return[u+$*y,c+$*v,f*Math.exp(t*$*S)]};else{var _=Math.sqrt(b),w=(p*p-f*f+i*b)/(2*f*n*_),D=(p*p-f*f-i*b)/(2*p*n*_),T=Math.log(Math.sqrt(w*w+1)-w),M=Math.log(Math.sqrt(D*D+1)-D);S=(M-T)/t,E=function($){var F=$*S,N=ON(T),U=f/(n*_)*(N*Dte(t*F+T)-Cte(T));return[u+U*y,c+U*v,f*N/ON(t*F+T)]}}return E.duration=S*1e3*t/Math.SQRT2,E}return r.rho=function(a){var s=Math.max(.001,+a),u=s*s,c=u*u;return e(s,u,c)},r})(Math.SQRT2,2,4);function NL(e){return function(t,n){var i=e((t=Py(t)).h,(n=Py(n)).h),r=Cn(t.s,n.s),a=Cn(t.l,n.l),s=Cn(t.opacity,n.opacity);return function(u){return t.h=i(u),t.s=r(u),t.l=a(u),t.opacity=s(u),t+""}}}const Tte=NL(zb);var Mte=NL(Cn);function Fte(e,t){var n=Cn((e=Gy(e)).l,(t=Gy(t)).l),i=Cn(e.a,t.a),r=Cn(e.b,t.b),a=Cn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function RL(e){return function(t,n){var i=e((t=Yy(t)).h,(n=Yy(n)).h),r=Cn(t.c,n.c),a=Cn(t.l,n.l),s=Cn(t.opacity,n.opacity);return function(u){return t.h=i(u),t.c=r(u),t.l=a(u),t.opacity=s(u),t+""}}}const kte=RL(zb);var Ote=RL(Cn);function zL(e){return(function t(n){n=+n;function i(r,a){var s=e((r=ew(r)).h,(a=ew(a)).h),u=Cn(r.s,a.s),c=Cn(r.l,a.l),f=Cn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=u(d),r.l=c(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const Nte=zL(zb);var Rte=zL(Cn);function CD(e,t){t===void 0&&(t=e,e=Xu);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var u=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[u](s-u)}}function zte(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Bte=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Xu,interpolateArray:mte,interpolateBasis:SL,interpolateBasisClosed:_L,interpolateCubehelix:Nte,interpolateCubehelixLong:Rte,interpolateDate:TL,interpolateDiscrete:bte,interpolateHcl:kte,interpolateHclLong:Ote,interpolateHsl:Tte,interpolateHslLong:Mte,interpolateHue:xte,interpolateLab:Fte,interpolateNumber:fa,interpolateNumberArray:wD,interpolateObject:ML,interpolateRgb:tw,interpolateRgbBasis:gte,interpolateRgbBasisClosed:pte,interpolateRound:lp,interpolateString:FL,interpolateTransformCss:Ste,interpolateTransformSvg:_te,interpolateZoom:$te,piecewise:CD,quantize:zte},Symbol.toStringTag,{value:"Module"}));function Lte(e){return function(){return e}}function rw(e){return+e}var NN=[0,1];function Yi(e){return e}function aw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Lte(isNaN(t)?NaN:.5)}function Ute(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function jte(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=aw(r,i),a=n(s,a)):(i=aw(i,r),a=n(a,s)),function(u){return a(i(u))}}function qte(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=aw(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(u){var c=Tu(e,u,1,i)-1;return a[c](r[c](u))}}function cp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bb(){var e=NN,t=NN,n=Xu,i,r,a,s=Yi,u,c,f;function d(){var p=Math.min(e.length,t.length);return s!==Yi&&(s=Ute(e[0],e[p-1])),u=p>2?qte:jte,c=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(c||(c=u(e.map(i),t,n)))(i(s(p)))}return g.invert=function(p){return s(r((f||(f=u(t,e.map(i),fa)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,rw),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=lp,d()},g.clamp=function(p){return arguments.length?(s=p?!0:Yi,d()):s!==Yi},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function BL(){return Bb()(Yi,Yi)}function LL(e,t,n,i){var r=Mu(e,t,n),a;switch(i=ic(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=c7(r,s))&&(i.precision=a),h3(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=f7(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=l7(r))&&(i.precision=a-(i.type==="%")*2);break}}return db(i)}function Fc(e){var t=e.domain;return e.ticks=function(n){var i=t();return B_(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return LL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],u=i[a],c,f,d=10;for(u<s&&(f=s,s=u,u=f,f=r,r=a,a=f);d-- >0;){if(f=L_(s,u,n),f===c)return i[r]=s,i[a]=u,t(i);if(f>0)s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f;else if(f<0)s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f;else break;c=f}return e},e}function UL(){var e=BL();return e.copy=function(){return cp(e,UL())},ms.apply(e,arguments),Fc(e)}function jL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,rw),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return jL(e).unknown(t)},e=arguments.length?Array.from(e,rw):[0,1],Fc(n)}function qL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function RN(e){return Math.log(e)}function zN(e){return Math.exp(e)}function Ite(e){return-Math.log(-e)}function Pte(e){return-Math.exp(-e)}function Hte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gte(e){return e===10?Hte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Yte(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function BN(e){return(t,n)=>-e(-t,n)}function DD(e){const t=e(RN,zN),n=t.domain;let i=10,r,a;function s(){return r=Yte(i),a=Gte(i),n()[0]<0?(r=BN(r),a=BN(a),e(Ite,Pte)):e(RN,zN),t}return t.base=function(u){return arguments.length?(i=+u,s()):i},t.domain=function(u){return arguments.length?(n(u),s()):n()},t.ticks=u=>{const c=n();let f=c[0],d=c[c.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const E=u==null?10:+u;let S=[];if(!(i%1)&&y-p<E){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;S.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;S.push(b)}S.length*2<E&&(S=B_(f,d,E))}else S=B_(p,y,Math.min(y-p,E)).map(a);return g?S.reverse():S},t.tickFormat=(u,c)=>{if(u==null&&(u=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=ic(c)).precision==null&&(c.trim=!0),c=db(c)),u===1/0)return c;const f=Math.max(1,i*u/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?c(d):""}},t.nice=()=>n(qL(n(),{floor:u=>a(Math.floor(r(u))),ceil:u=>a(Math.ceil(r(u)))})),t}function IL(){const e=DD(Bb()).domain([1,10]);return e.copy=()=>cp(e,IL()).base(e.base()),ms.apply(e,arguments),e}function LN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function UN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function $D(e){var t=1,n=e(LN(t),UN(t));return n.constant=function(i){return arguments.length?e(LN(t=+i),UN(t)):t},Fc(n)}function PL(){var e=$D(Bb());return e.copy=function(){return cp(e,PL()).constant(e.constant())},ms.apply(e,arguments)}function jN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Xte(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Vte(e){return e<0?-e*e:e*e}function TD(e){var t=e(Yi,Yi),n=1;function i(){return n===1?e(Yi,Yi):n===.5?e(Xte,Vte):e(jN(n),jN(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},Fc(t)}function MD(){var e=TD(Bb());return e.copy=function(){return cp(e,MD()).exponent(e.exponent())},ms.apply(e,arguments),e}function Wte(){return MD.apply(null,arguments).exponent(.5)}function HL(){var e=[],t=[],n=[],i;function r(){var s=0,u=Math.max(1,t.length);for(n=new Array(u-1);++s<u;)n[s-1]=i7(e,s/u);return a}function a(s){return s==null||isNaN(s=+s)?i:t[Tu(n,s)]}return a.invertExtent=function(s){var u=t.indexOf(s);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let u of s)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(lo),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return HL().domain(e).range(t).unknown(i)},ms.apply(a,arguments)}function GL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(c){return c!=null&&c<=c?r[Tu(i,c,0,n)]:a}function u(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*t-(c-n)*e)/(n+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,u()):[e,t]},s.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,u()):r.slice()},s.invertExtent=function(c){var f=r.indexOf(c);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return i.slice()},s.copy=function(){return GL().domain([e,t]).range(r).unknown(a)},ms.apply(Fc(s),arguments)}function YL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[Tu(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return YL().domain(e).range(t).unknown(n)},ms.apply(r,arguments)}function Qte(e){return new Date(e)}function Zte(e){return e instanceof Date?+e:+new Date(+e)}function FD(e,t,n,i,r,a,s,u,c,f){var d=BL(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),E=f("%I %p"),S=f("%a %d"),_=f("%b %d"),w=f("%B"),D=f("%Y");function T(M){return(c(M)<M?y:u(M)<M?v:s(M)<M?b:a(M)<M?E:i(M)<M?r(M)<M?S:_:n(M)<M?w:D)(M)}return d.invert=function(M){return new Date(g(M))},d.domain=function(M){return arguments.length?p(Array.from(M,Zte)):p().map(Qte)},d.ticks=function(M){var $=p();return e($[0],$[$.length-1],M??10)},d.tickFormat=function(M,$){return $==null?T:f($)},d.nice=function(M){var $=p();return(!M||typeof M.range!="function")&&(M=t($[0],$[$.length-1],M??10)),M?p(qL($,M)):d},d.copy=function(){return cp(d,FD(e,t,n,i,r,a,s,u,c,f))},d}function Kte(){return ms.apply(FD(rZ,aZ,os,Sg,Wd,co,pb,hb,ao,v3).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Jte(){return ms.apply(FD(nZ,iZ,us,_g,Qd,_u,mb,gb,ao,b3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Lb(){var e=0,t=1,n,i,r,a,s=Yi,u=!1,c;function f(g){return g==null||isNaN(g=+g)?c:s(r===0?.5:(g=(a(g)-n)*r,u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,s=g(y,v),f):[s(0),s(1)]}}return f.range=d(Xu),f.rangeRound=d(lp),f.unknown=function(g){return arguments.length?(c=g,f):c},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function Vu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function kD(){var e=Fc(Lb()(Yi));return e.copy=function(){return Vu(e,kD())},Gu.apply(e,arguments)}function XL(){var e=DD(Lb()).domain([1,10]);return e.copy=function(){return Vu(e,XL()).base(e.base())},Gu.apply(e,arguments)}function VL(){var e=$D(Lb());return e.copy=function(){return Vu(e,VL()).constant(e.constant())},Gu.apply(e,arguments)}function OD(){var e=TD(Lb());return e.copy=function(){return Vu(e,OD()).exponent(e.exponent())},Gu.apply(e,arguments)}function ene(){return OD.apply(null,arguments).exponent(.5)}function Ub(){var e=0,t=.5,n=1,i=1,r,a,s,u,c,f=Yi,d,g=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?u:c),f(g?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),u=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(g=!!b,y):g},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(E){var S,_,w;return arguments.length?([S,_,w]=E,f=CD(b,[S,_,w]),y):[f(0),f(.5),f(1)]}}return y.range=v(Xu),y.rangeRound=v(lp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),u=r===a?0:.5/(a-r),c=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function WL(){var e=Fc(Ub()(Yi));return e.copy=function(){return Vu(e,WL())},Gu.apply(e,arguments)}function QL(){var e=DD(Ub()).domain([.1,1,10]);return e.copy=function(){return Vu(e,QL()).base(e.base())},Gu.apply(e,arguments)}function ZL(){var e=$D(Ub());return e.copy=function(){return Vu(e,ZL()).constant(e.constant())},Gu.apply(e,arguments)}function ND(){var e=TD(Ub());return e.copy=function(){return Vu(e,ND()).exponent(e.exponent())},Gu.apply(e,arguments)}function tne(){return ND.apply(null,arguments).exponent(.5)}function ys(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const nne=ys("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ine=ys("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),rne=ys("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ane=ys("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),sne=ys("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),one=ys("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),une=ys("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),lne=ys("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),cne=ys("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),fne=ys("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function RD(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const dne="identity",yd="linear",bo="log",fp="pow",dp="sqrt",jb="symlog",ac="time",sc="utc",ns="sequential",th="diverging",vd="quantile",qb="quantize",Ib="threshold",zD="ordinal",sw="point",KL="band",BD="bin-ordinal",En="continuous",hp="discrete",gp="discretizing",ea="interpolating",LD="temporal";function hne(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function gne(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,u,c,f;for(r<i&&(u=i,i=r,r=u),c=0,f=n.length;c<f;++c)n[c]>=i&&n[c]<=r&&(a<0&&(a=c),s=c);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function UD(){const e=ED().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,u=0,c=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=RD(g,u,c);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(g-u))*f,a=r*(1-u),s&&(b=Math.round(b),a=Math.round(a));const E=yr(g).map(S=>b+r*S);return n(p?E.reverse():E)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(s=!!g,d()):s},e.padding=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),u=c,d()):u},e.paddingInner=function(g){return arguments.length?(u=Math.max(0,Math.min(1,g)),d()):u},e.paddingOuter=function(g){return arguments.length?(c=Math.max(0,Math.min(1,g)),d()):c},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+g[0],E=+g[1],S,_,w;if(!(b!==b||E!==E)&&(E<b&&(w=b,b=E,E=w),!(E<y[0]||b>i[1-p])))return S=Math.max(0,Tu(y,b)-1),_=b===E?S:Tu(y,E)-1,b-y[S]>a+1e-10&&++S,p&&(w=S,S=v-_,_=v-w),S>_?void 0:t().slice(S,_+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return UD().domain(t()).range(i).round(s).paddingInner(u).paddingOuter(c).align(f)},d()}function JL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return JL(t())},e}function pne(){return JL(UD().paddingInner(1))}var mne=Array.prototype.map;function yne(e){return mne.call(e,ri)}const vne=Array.prototype.slice;function eU(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(Tu(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=yne(i),n):e.slice()},n.range=function(i){return arguments.length?(t=vne.call(i),n):t.slice()},n.tickFormat=function(i,r){return LL(e[0],st(e),i??10,r)},n.copy=function(){return eU().domain(n.domain()).range(n.range())},n}const Xy=new Map,tU=Symbol("vega_scale");function nU(e){return e[tU]=!0,e}function qN(e){return e&&e[tU]===!0}function bne(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?hne(a):a.invertExtent?gne(a):void 0),a.type=e,nU(a)};return i.metadata=Ea(Ee(n)),i}function gt(e,t,n){return arguments.length>1?(Xy.set(e,bne(e,t,n)),this):iU(e)?Xy.get(e):void 0}gt(dne,jL);gt(yd,UL,En);gt(bo,IL,[En,bo]);gt(fp,MD,En);gt(dp,Wte,En);gt(jb,PL,En);gt(ac,Kte,[En,LD]);gt(sc,Jte,[En,LD]);gt(ns,kD,[En,ea]);gt(`${ns}-${yd}`,kD,[En,ea]);gt(`${ns}-${bo}`,XL,[En,ea,bo]);gt(`${ns}-${fp}`,OD,[En,ea]);gt(`${ns}-${dp}`,ene,[En,ea]);gt(`${ns}-${jb}`,VL,[En,ea]);gt(`${th}-${yd}`,WL,[En,ea]);gt(`${th}-${bo}`,QL,[En,ea,bo]);gt(`${th}-${fp}`,ND,[En,ea]);gt(`${th}-${dp}`,tne,[En,ea]);gt(`${th}-${jb}`,ZL,[En,ea]);gt(vd,HL,[gp,vd]);gt(qb,GL,gp);gt(Ib,YL,gp);gt(BD,eU,[hp,gp]);gt(zD,ED,hp);gt(KL,UD,hp);gt(sw,pne,hp);function iU(e){return Xy.has(e)}function kc(e,t){const n=Xy.get(e);return n&&n.metadata[t]}function jD(e){return kc(e,En)}function bd(e){return kc(e,hp)}function ow(e){return kc(e,gp)}function rU(e){return kc(e,bo)}function xne(e){return kc(e,LD)}function aU(e){return kc(e,ea)}function sU(e){return kc(e,vd)}const Ene=["clamp","base","constant","exponent"];function oU(e,t){const n=t[0],i=st(t)-n;return function(r){return e(n+r*i)}}function Pb(e,t,n){return CD(qD(t||"rgb",n),e)}function uU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function lU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?hi(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=gt(a)().domain([t,n]).range([0,1]),Ene.forEach(u=>e[u]?s[u](e[u]()):0),s)}function qD(e,t){const n=Bte[Ane(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Ane(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Sne={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},_ne={accent:ine,category10:nne,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:rne,observable10:ane,paired:sne,pastel1:one,pastel2:une,set1:lne,set2:cne,set3:fne,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function cU(e){if(se(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function fU(e,t){for(const n in e)ID(n,t(e[n]))}const IN={};fU(_ne,cU);fU(Sne,e=>Pb(cU(e)));function ID(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(IN[e]=t,this):IN[e]}const ay="symbol",wne="discrete",Cne="gradient",Dne=e=>se(e)?e.map(t=>String(t)):String(e),$ne=(e,t)=>e[1]-t[1],Tne=(e,t)=>t[1]-e[1];function PD(e,t,n){let i;return dt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(rp(e.domain())/n||1)+1))),Ae(t)&&(i=t.step,t=t.interval),Se(t)&&(t=e.type===ac?Zd(t):e.type==sc?Kd(t):ne("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function dU(e,t,n){let i=e.range(),r=i[0],a=st(i),s=$ne;if(r>a&&(i=a,a=r,r=i,s=Tne),r=Math.floor(r),a=Math.ceil(a),t=t.map(u=>[u,e(u)]).filter(u=>r<=u[1]&&u[1]<=a).sort(s).map(u=>u[0]),n>0&&t.length>1){const u=[t[0],st(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,f)=>!(f%2));t.length<3&&(t=u)}return t}function HD(e,t){return e.bins?dU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function hU(e,t,n,i,r,a){const s=t.type;let u=Dne;if(s===ac||r===ac)u=e.timeFormat(i);else if(s===sc||r===sc)u=e.utcFormat(i);else if(rU(s)){const c=e.formatFloat(i);if(a||t.bins)u=c;else{const f=gU(t,n,!1);u=d=>f(d)?c(d):""}}else if(t.tickFormat){const c=t.domain();u=e.formatSpan(c[0],c[c.length-1],n,i)}else i&&(u=e.format(i));return u}function gU(e,t,n){const i=HD(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),u=c=>{let f=c/Math.pow(r,Math.round(Math.log(c)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(u):u}const uw={[vd]:"quantiles",[qb]:"thresholds",[Ib]:"domain"},pU={[vd]:"quantiles",[qb]:"domain"};function mU(e,t){return e.bins?kne(e.bins):e.type===bo?gU(e,t,!0):uw[e.type]?Fne(e[uw[e.type]]()):HD(e,t)}function Mne(e,t,n){const i=t[pU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}function Fne(e){const t=[-1/0].concat(e);return t.max=1/0,t}function kne(e){const t=e.slice(0,-1);return t.max=st(e),t}const One=e=>uw[e.type]||e.bins;function yU(e,t,n,i,r,a,s){const u=pU[t.type]&&a!==ac&&a!==sc?Mne(e,t,r):hU(e,t,n,r,a,s);return i===ay&&One(t)?Nne(u):i===wne?Rne(u):zne(u)}const Nne=e=>(t,n,i)=>{const r=PN(i[n+1],PN(i.max,1/0)),a=HN(t,e),s=HN(r,e);return a&&s?a+"  "+s:s?"< "+s:" "+a},PN=(e,t)=>e??t,Rne=e=>(t,n)=>n?e(t):null,zne=e=>t=>e(t),HN=(e,t)=>Number.isFinite(e)?t(e):null;function Bne(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+st(t),a=r-i;if(e.type===Ib){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function Lne(e,t,n,i){const r=i||t.type;return Se(n)&&xne(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===ac?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===sc?e.utcFormat("%A, %d %B %Y, %X UTC"):yU(e,t,5,null,n,i,!0)}function vU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Lne(e,t,n.format,n.formatType);if(ow(t.type)){const a=mU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(bd(t.type)){const a=t.domain(),s=a.length,u=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${u}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(st(a))}`}}let bU=0;function Une(){bU=0}const Vy="p_";function GD(e){return e&&e.gradient}function xU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?Vy:"";return r||(r=e.id="gradient_"+bU++,i==="radial"?(e.x1=Pa(e.x1,.5),e.y1=Pa(e.y1,.5),e.r1=Pa(e.r1,0),e.x2=Pa(e.x2,.5),e.y2=Pa(e.y2,.5),e.r2=Pa(e.r2,.5),a=Vy):(e.x1=Pa(e.x1,0),e.y1=Pa(e.y1,0),e.x2=Pa(e.x2,1),e.y2=Pa(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Pa(e,t){return e??t}function EU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const GN={basis:{curve:Ree},"basis-closed":{curve:zee},"basis-open":{curve:Bee},bundle:{curve:Lee,tension:"beta",value:.85},cardinal:{curve:Uee,tension:"tension",value:0},"cardinal-open":{curve:qee,tension:"tension",value:0},"cardinal-closed":{curve:jee,tension:"tension",value:0},"catmull-rom":{curve:Iee,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Pee,tension:"alpha",value:.5},"catmull-rom-open":{curve:Hee,tension:"alpha",value:.5},linear:{curve:mD},"linear-closed":{curve:Gee},monotone:{horizontal:Xee,vertical:Yee},natural:{curve:Vee},step:{curve:Wee},"step-after":{curve:Zee},"step-before":{curve:Qee}};function YD(e,t,n){var i=_e(GN,e)&&GN[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const jne={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},qne=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ine=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Pne=/^((\s+,?\s*)|(,\s*))/,Hne=/^[01]/;function xd(e){const t=[];return(e.match(qne)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=jne[a],u=Gne(a,s,i.slice(1).trim()),c=u.length;if(c<s||c&&c%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...u.slice(0,s)]),c!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<c;f+=s)t.push([r,...u.slice(f,f+s)])}}),t}function Gne(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Hne:Ine,u=n.slice(r).match(s);if(u===null)throw Error("Invalid SVG path, incorrect parameter type");r+=u[0].length,i.push(+u[0]);const c=n.slice(r).match(Pne);c!==null&&(r+=c[0].length)}return i}const Nu=Math.PI/180,Yne=1e-14,Ul=Math.PI/2,Wa=Math.PI*2,Of=Math.sqrt(3)/2;var uS={},lS={},AU=[].join;function Xne(e,t,n,i,r,a,s,u,c){const f=AU.call(arguments);if(uS[f])return uS[f];const d=s*Nu,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(u-e)*.5+g*(c-t)*.5,v=p*(c-t)*.5-g*(u-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const E=p/n,S=g/n,_=-g/i,w=p/i,D=E*u+S*c,T=_*u+w*c,M=E*e+S*t,$=_*e+w*t;let N=1/((M-D)*(M-D)+($-T)*($-T))-.25;N<0&&(N=0);let U=Math.sqrt(N);a==r&&(U=-U);const B=.5*(D+M)-U*($-T),X=.5*(T+$)+U*(M-D),G=Math.atan2(T-X,D-B);let z=Math.atan2($-X,M-B)-G;z<0&&a===1?z+=Wa:z>0&&a===0&&(z-=Wa);const O=Math.ceil(Math.abs(z/(Ul+.001))),j=[];for(let Y=0;Y<O;++Y){const V=G+Y*z/O,ee=G+(Y+1)*z/O;j[Y]=[B,X,V,ee,n,i,g,p]}return uS[f]=j}function Vne(e){const t=AU.call(e);if(lS[t])return lS[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],u=e[5],c=e[6],f=e[7];const d=f*s,g=-c*u,p=c*s,y=f*u,v=Math.cos(r),b=Math.sin(r),E=Math.cos(a),S=Math.sin(a),_=.5*(a-r),w=Math.sin(_*.5),D=8/3*w*w/Math.sin(_),T=n+v-D*b,M=i+b+D*v,$=n+E,F=i+S,N=$+D*S,U=F-D*E;return lS[t]=[d*T+g*M,p*T+y*M,d*N+g*U,p*N+y*U,d*$+g*F,p*$+y*F]}const Br=["l",0,0,0,0,0,0,0];function Wne(e,t,n){const i=Br[0]=e[0];if(i==="a"||i==="A")Br[1]=t*e[1],Br[2]=n*e[2],Br[3]=e[3],Br[4]=e[4],Br[5]=e[5],Br[6]=t*e[6],Br[7]=n*e[7];else if(i==="h"||i==="H")Br[1]=t*e[1];else if(i==="v"||i==="V")Br[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Br[r]=(r%2==1?t:n)*e[r];return Br}function Fg(e,t,n,i,r,a){var s,u=null,c=0,f=0,d=0,g=0,p,y,v,b,E=0,S=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var _=0,w=t.length;_<w;++_){switch(s=t[_],(r!==1||a!==1)&&(s=Wne(s,r,a)),s[0]){case"l":c+=s[1],f+=s[2],e.lineTo(c+n,f+i);break;case"L":c=s[1],f=s[2],e.lineTo(c+n,f+i);break;case"h":c+=s[1],e.lineTo(c+n,f+i);break;case"H":c=s[1],e.lineTo(c+n,f+i);break;case"v":f+=s[1],e.lineTo(c+n,f+i);break;case"V":f=s[1],e.lineTo(c+n,f+i);break;case"m":c+=s[1],f+=s[2],E=c,S=f,e.moveTo(c+n,f+i);break;case"M":c=s[1],f=s[2],E=c,S=f,e.moveTo(c+n,f+i);break;case"c":p=c+s[5],y=f+s[6],d=c+s[3],g=f+s[4],e.bezierCurveTo(c+s[1]+n,f+s[2]+i,d+n,g+i,p+n,y+i),c=p,f=y;break;case"C":c=s[5],f=s[6],d=s[3],g=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,g+i,c+n,f+i);break;case"s":p=c+s[3],y=f+s[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,c+s[1]+n,f+s[2]+i,p+n,y+i),d=c+s[1],g=f+s[2],c=p,f=y;break;case"S":p=s[3],y=s[4],d=2*c-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,s[1]+n,s[2]+i,p+n,y+i),c=p,f=y,d=s[1],g=s[2];break;case"q":p=c+s[3],y=f+s[4],d=c+s[1],g=f+s[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),c=p,f=y,d=s[1],g=s[2];break;case"t":p=c+s[1],y=f+s[2],u[0].match(/[QqTt]/)===null?(d=c,g=f):u[0]==="t"?(d=2*c-v,g=2*f-b):u[0]==="q"&&(d=2*c-d,g=2*f-g),v=d,b=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y,d=c+s[1],g=f+s[2];break;case"T":p=s[1],y=s[2],d=2*c-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),c=p,f=y;break;case"a":YN(e,c+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+c+n,s[7]+f+i]),c+=s[6],f+=s[7];break;case"A":YN(e,c+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),c=s[6],f=s[7];break;case"z":case"Z":c=E,f=S,e.closePath();break}u=s}}function YN(e,t,n,i){const r=Xne(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Vne(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const XN=.5773502691896257,VN={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Wa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Of*n,r=i-n*XN,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=Of*n,r=i-n*XN;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Of*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Of*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Of*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=Of*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function SU(e){return _e(VN,e)?VN[e]:Qne(e)}var cS={};function Qne(e){if(!_e(cS,e)){const t=xd(e);cS[e]={draw:function(n,i){Fg(n,t,0,0,Math.sqrt(i)/2)}}}return cS[e]}const ru=.448084975506;function Zne(e){return e.x}function Kne(e){return e.y}function Jne(e){return e.width}function eie(e){return e.height}function Xs(e){return typeof e=="function"?e:()=>+e}function _1(e,t,n){return Math.max(t,Math.min(e,n))}function _U(){var e=Zne,t=Kne,n=Jne,i=eie,r=Xs(0),a=r,s=r,u=r,c=null;function f(d,g,p){var y,v=g??+e.call(this,d),b=p??+t.call(this,d),E=+n.call(this,d),S=+i.call(this,d),_=Math.min(E,S)/2,w=_1(+r.call(this,d),0,_),D=_1(+a.call(this,d),0,_),T=_1(+s.call(this,d),0,_),M=_1(+u.call(this,d),0,_);if(c||(c=y=Mb()),w<=0&&D<=0&&T<=0&&M<=0)c.rect(v,b,E,S);else{var $=v+E,F=b+S;c.moveTo(v+w,b),c.lineTo($-D,b),c.bezierCurveTo($-ru*D,b,$,b+ru*D,$,b+D),c.lineTo($,F-M),c.bezierCurveTo($,F-ru*M,$-ru*M,F,$-M,F),c.lineTo(v+T,F),c.bezierCurveTo(v+ru*T,F,v,F-ru*T,v,F-T),c.lineTo(v,b+w),c.bezierCurveTo(v,b+ru*w,v+ru*w,b,v+w,b),c.closePath()}if(y)return c=null,y+""||null}return f.x=function(d){return arguments.length?(e=Xs(d),f):e},f.y=function(d){return arguments.length?(t=Xs(d),f):t},f.width=function(d){return arguments.length?(n=Xs(d),f):n},f.height=function(d){return arguments.length?(i=Xs(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=Xs(d),a=g!=null?Xs(g):r,u=p!=null?Xs(p):r,s=y!=null?Xs(y):a,f):r},f.context=function(d){return arguments.length?(c=d??null,f):c},f}function wU(){var e,t,n,i,r=null,a,s,u,c;function f(g,p,y){const v=y/2;if(a){var b=u-p,E=g-s;if(b||E){var S=Math.hypot(b,E),_=(b/=S)*c,w=(E/=S)*c,D=Math.atan2(E,b);r.moveTo(s-_,u-w),r.lineTo(g-b*v,p-E*v),r.arc(g,p,v,D-Math.PI,D),r.lineTo(s+_,u+w),r.arc(s,u,c,D,D+Math.PI)}else r.arc(g,p,v,0,Wa);r.closePath()}else a=1;s=g,u=p,c=v}function d(g){var p,y=g.length,v,b=!1,E;for(r==null&&(r=E=Mb()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(E)return r=null,E+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function pp(e,t){return e??t}const mp=e=>e.x||0,yp=e=>e.y||0,tie=e=>e.width||0,nie=e=>e.height||0,iie=e=>(e.x||0)+(e.width||0),rie=e=>(e.y||0)+(e.height||0),aie=e=>e.startAngle||0,sie=e=>e.endAngle||0,oie=e=>e.padAngle||0,uie=e=>e.innerRadius||0,lie=e=>e.outerRadius||0,cie=e=>e.cornerRadius||0,fie=e=>pp(e.cornerRadiusTopLeft,e.cornerRadius)||0,die=e=>pp(e.cornerRadiusTopRight,e.cornerRadius)||0,hie=e=>pp(e.cornerRadiusBottomRight,e.cornerRadius)||0,gie=e=>pp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,pie=e=>pp(e.size,64),mie=e=>e.size||1,Hb=e=>e.defined!==!1,yie=e=>SU(e.shape||"circle"),vie=kee().startAngle(aie).endAngle(sie).padAngle(oie).innerRadius(uie).outerRadius(lie).cornerRadius(cie),bie=eL().x(mp).y1(yp).y0(rie).defined(Hb),xie=eL().y(yp).x1(mp).x0(iie).defined(Hb),Eie=JB().x(mp).y(yp).defined(Hb),Aie=_U().x(mp).y(yp).width(tie).height(nie).cornerRadius(fie,die,hie,gie),Sie=Nee().type(yie).size(pie),_ie=wU().x(mp).y(yp).defined(Hb).size(mie);function XD(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function wie(e,t){return vie.context(e)(t)}function Cie(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?xie:bie).curve(YD(i,n.orient,n.tension)).context(e)(t)}function Die(e,t){const n=t[0],i=n.interpolate||"linear";return Eie.curve(YD(i,n.orient,n.tension)).context(e)(t)}function nh(e,t,n,i){return Aie.context(e)(t,n,i)}function $ie(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Tie(e,t){return Sie.context(e)(t)}function Mie(e,t){return _ie.context(e)(t)}var CU=1;function DU(){CU=1}function VD(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+CU++),s=r.clipping[a]||(r.clipping[a]={id:a});return Ye(i)?s.path=i(null):XD(n)?s.path=nh(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function hn(e){this.clear(),e&&this.union(e)}hn.prototype={clone(){return new hn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,u=Math.cos(e),c=Math.sin(e),f=t-t*u+n*c,d=n-t*c-n*u;return[u*i-c*r+f,c*i+u*r+d,u*i-c*s+f,c*i+u*s+d,u*a-c*r+f,c*a+u*r+d,u*a-c*s+f,c*a+u*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Gb(e){this.mark=e,this.bounds=this.bounds||new hn}function Yb(e){Gb.call(this,e),this.items=this.items||[]}be(Yb,Gb);class $U{constructor(t){this._pending=0,this._loader=t||vb()}pending(){return this._pending}sanitizeURL(t){const n=this;return WN(n),n._loader.sanitize(t,{context:"href"}).then(i=>(E0(n),i)).catch(()=>(E0(n),null))}loadImage(t){const n=this,i=Kee();return WN(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,u=_e(r,"crossOrigin")?r.crossOrigin:"anonymous";return u!=null&&(s.crossOrigin=u),s.onload=()=>E0(n),s.onerror=()=>E0(n),s.src=a,s}).catch(r=>(E0(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function WN(e){e._pending+=1}function E0(e){e._pending-=1}function _o(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Fie(t,i):0))}return e}function Fie(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const kie=Wa-1e-8;let Xb,sy,oy,Gl,lw,uy,cw,fw;const gu=(e,t)=>Xb.add(e,t),ly=(e,t)=>gu(sy=e,oy=t),QN=e=>gu(e,Xb.y1),ZN=e=>gu(Xb.x1,e),jl=(e,t)=>lw*e+cw*t,ql=(e,t)=>uy*e+fw*t,fS=(e,t)=>gu(jl(e,t),ql(e,t)),dS=(e,t)=>ly(jl(e,t),ql(e,t));function vp(e,t){return Xb=e,t?(Gl=t*Nu,lw=fw=Math.cos(Gl),uy=Math.sin(Gl),cw=-uy):(lw=fw=1,Gl=uy=cw=0),Oie}const Oie={beginPath(){},closePath(){},moveTo:dS,lineTo:dS,rect(e,t,n,i){Gl?(fS(e+n,t),fS(e+n,t+i),fS(e,t+i),dS(e,t)):(gu(e+n,t+i),ly(e,t))},quadraticCurveTo(e,t,n,i){const r=jl(e,t),a=ql(e,t),s=jl(n,i),u=ql(n,i);KN(sy,r,s,QN),KN(oy,a,u,ZN),ly(s,u)},bezierCurveTo(e,t,n,i,r,a){const s=jl(e,t),u=ql(e,t),c=jl(n,i),f=ql(n,i),d=jl(r,a),g=ql(r,a);JN(sy,s,c,d,QN),JN(oy,u,f,g,ZN),ly(d,g)},arc(e,t,n,i,r,a){if(i+=Gl,r+=Gl,sy=n*Math.cos(r)+e,oy=n*Math.sin(r)+t,Math.abs(r-i)>kie)gu(e-n,t-n),gu(e+n,t+n);else{const s=f=>gu(n*Math.cos(f)+e,n*Math.sin(f)+t);let u,c;if(s(i),s(r),r!==i)if(i=i%Wa,i<0&&(i+=Wa),r=r%Wa,r<0&&(r+=Wa),r<i&&(a=!a,u=i,i=r,r=u),a)for(r-=Wa,u=i-i%Ul,c=0;c<4&&u>r;++c,u-=Ul)s(u);else for(u=i-i%Ul+Ul,c=0;c<4&&u<r;++c,u=u+Ul)s(u)}}};function KN(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function JN(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,u=e-t;let c=0,f=0,d;Math.abs(a)>Yne?(d=s*s+u*a,d>=0&&(d=Math.sqrt(d),c=(-s+d)/a,f=(-s-d)/a)):c=.5*u/s,0<c&&c<1&&r(e4(c,e,t,n,i)),0<f&&f<1&&r(e4(f,e,t,n,i))}function e4(e,t,n,i,r){const a=1-e,s=a*a,u=e*e;return s*a*t+3*s*e*n+3*a*u*i+u*e*r}var Du=(Du=Cu(1,1))?Du.getContext("2d"):null;const dw=new hn;function WD(e){return function(t,n){if(!Du)return!0;e(Du,t),dw.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=dw;for(let u=r;u<=s;++u)for(let c=i;c<=a;++c)if(Du.isPointInPath(c,u))return!0;return!1}}function QD(e,t){return t.contains(e.x||0,e.y||0)}function TU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(dw.set(n,i,n+r,i+a))}function MU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Xf(t,n,i,r,a)}function Xf(e,t,n,i,r){const{x1:a,y1:s,x2:u,y2:c}=e,f=i-t,d=r-n;let g=0,p=1,y,v,b,E;for(E=0;E<4;++E){if(E===0&&(y=-f,v=-(a-t)),E===1&&(y=f,v=u-t),E===2&&(y=-d,v=-(s-n)),E===3&&(y=d,v=c-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>g&&(g=b)}else if(y>0){if(b<g)return!1;b<p&&(p=b)}}return!0}function Ed(e,t){e.globalCompositeOperation=t.blend||"source-over"}function oa(e,t){return e??t}function t4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Nie(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+oa(t.x1,.5)*i,n.y1+oa(t.y1,.5)*r,Math.max(i,r)*oa(t.r1,0),n.x1+oa(t.x2,.5)*i,n.y1+oa(t.y2,.5)*r,Math.max(i,r)*oa(t.r2,.5));else{const s=oa(t.x1,0),u=oa(t.y1,0),c=oa(t.x2,1),f=oa(t.y2,0);if(s===c||u===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+u*r,n.x1+c*i,n.y1+f*r);else{const d=Cu(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=t4(g.createLinearGradient(s,u,c,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return t4(a,t.stops)}function FU(e,t,n){return GD(n)?Nie(e,n,t.bounds):n}function Wy(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=FU(e,t,t.fill),!0):!1}var Rie=[];function Ad(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=FU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Rie),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function zie(e,t){return e.zindex-t.zindex||e.index-t.index}function ZD(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(zie)}function Sa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=ZD(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Qy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=ZD(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function KD(e){return function(t,n,i){Sa(n,r=>{(!i||i.intersects(r.bounds))&&kU(e,t,r,r)})}}function Bie(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&kU(e,t,n.items[0],n.items)}}function kU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Ed(t,n),n.fill&&Wy(t,n,r)&&t.fill(),n.stroke&&Ad(t,n,r)&&t.stroke()))}function Vb(e){return e=e||Vr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,Qy(n,u=>{const c=u.bounds;if(!(c&&!c.contains(a,s)||!c)&&e(t,u,i,r,a,s))return u})}}function bp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,u=t??s.fill,c=s.stroke&&n.isPointInStroke,f,d;return c&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:u&&n.isPointInPath(r,a)||c&&n.isPointInStroke(r,a)}}function JD(e){return Vb(bp(e))}function Ql(e,t){return"translate("+e+","+t+")"}function e$(e){return"rotate("+e+")"}function Lie(e,t){return"scale("+e+","+t+")"}function OU(e){return Ql(e.x||0,e.y||0)}function Uie(e){return Ql(e.x||0,e.y||0)+(e.angle?" "+e$(e.angle):"")}function jie(e){return Ql(e.x||0,e.y||0)+(e.angle?" "+e$(e.angle):"")+(e.scaleX||e.scaleY?" "+Lie(e.scaleX||1,e.scaleY||1):"")}function t$(e,t,n){function i(s,u){s("transform",Uie(u)),s("d",t(null,u))}function r(s,u){return t(vp(s,u.angle),u),_o(s,u).translate(u.x||0,u.y||0)}function a(s,u){var c=u.x||0,f=u.y||0,d=u.angle||0;s.translate(c,f),d&&s.rotate(d*=Nu),s.beginPath(),t(s,u),d&&s.rotate(-d),s.translate(-c,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:KD(a),pick:JD(a),isect:n||WD(a)}}var qie=t$("arc",wie);function Iie(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,u;--r>=0;)e[r].defined!==!1&&(u=Math.abs(e[r][i]-n),u<a&&(a=u,s=e[r]));return s}function Pie(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function Hie(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function n$(e,t,n){function i(c,f){var d=f.mark.items;d.length&&c("d",t(null,d))}function r(c,f){var d=f.items;return d.length===0?c:(t(vp(c),d),_o(c,d[0]))}function a(c,f){c.beginPath(),t(c,f)}const s=bp(a);function u(c,f,d,g,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=c.pixelRatio,g*=c.pixelRatio,s(c,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Bie(a),pick:u,isect:QD,tip:n}}var Gie=n$("area",Cie,Iie);function Yie(e,t){var n=t.clip;e.save(),Ye(n)?(e.beginPath(),n(e),e.clip()):NU(e,t.group)}function NU(e,t){e.beginPath(),XD(t)?nh(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function RU(e){const t=oa(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Xie(e,t){e("transform",OU(t))}function zU(e,t){const n=RU(t);e("d",nh(null,t,n,n))}function Vie(e,t){e("class","background"),e("aria-hidden",!0),zU(e,t)}function Wie(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?zU(e,t):e("d","")}function Qie(e,t,n){const i=t.clip?VD(n,t,t):null;e("clip-path",i)}function Zie(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),_o(e,t),e.translate(t.x||0,t.y||0)}function kg(e,t,n,i){const r=RU(t);e.beginPath(),nh(e,t,(n||0)+r,(i||0)+r)}const Kie=bp(kg),Jie=bp(kg,!1),ere=bp(kg,!0);function tre(e,t,n,i){Sa(t,r=>{const a=r.x||0,s=r.y||0,u=r.strokeForeground,c=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&c&&(kg(e,r,a,s),Ed(e,r),r.fill&&Wy(e,r,c)&&e.fill(),r.stroke&&!u&&Ad(e,r,c)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&NU(e,r),n&&n.translate(-a,-s),Sa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),u&&r.stroke&&c&&(kg(e,r,a,s),Ed(e,r),Ad(e,r,c)&&e.stroke())})}function nre(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,u=i*e.pixelRatio;return Qy(t,c=>{let f,d,g;const p=c.bounds;if(p&&!p.contains(r,a))return;d=c.x||0,g=c.y||0;const y=d+(c.width||0),v=g+(c.height||0),b=c.clip;if(b&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,b&&XD(c)&&!ere(e,c,s,u))return e.restore(),null;const E=c.strokeForeground,S=t.interactive!==!1;return S&&E&&c.stroke&&Jie(e,c,s,u)?(e.restore(),c):(f=Qy(c,_=>ire(_,d,g)?this.pick(_,n,i,d,g):null),!f&&S&&(c.fill||!E&&c.stroke)&&Kie(e,c,s,u)&&(f=c),e.restore(),f||null)})}function ire(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var rre={type:"group",tag:"g",nested:!1,attr:Xie,bound:Zie,draw:tre,pick:nre,isect:TU,content:Qie,background:Vie,foreground:Wie},Og={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function i$(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function r$(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function a$(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Wb(e,t){return e==="center"?t/2:e==="right"?t:0}function Qb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function are(e,t,n){const i=i$(t,n),r=r$(t,i),a=a$(t,i),s=(t.x||0)-Wb(t.align,r),u=(t.y||0)-Qb(t.baseline,a),c=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",c,Og["xmlns:xlink"],"xlink:href"),e("transform",Ql(s,u)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function sre(e,t){const n=t.image,i=r$(t,n),r=a$(t,n),a=(t.x||0)-Wb(t.align,i),s=(t.y||0)-Qb(t.baseline,r);return e.set(a,s,a+i,s+r)}function ore(e,t,n){Sa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=i$(i,this);let a=r$(i,r),s=a$(i,r);if(a===0||s===0)return;let u=(i.x||0)-Wb(i.align,a),c=(i.y||0)-Qb(i.baseline,s),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,c+=(s-p)/2,s=p):(p=s*d,u+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Ed(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,u,c,a,s))})}var ure={type:"image",tag:"image",nested:!1,attr:are,bound:sre,draw:ore,pick:Vb(),isect:Vr,get:i$,xOffset:Wb,yOffset:Qb},lre=n$("line",Die,Pie);function cre(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",jie(t)),e("d",t.path)}function cy(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,u=(t.angle||0)*Nu,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=xd(n)).path=n),u&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(u),Fg(e,c,0,0,a,s),e.rotate(-u),e.translate(-i,-r)):Fg(e,c,i,r,a,s)}function fre(e,t){return cy(vp(e,t.angle),t)?e.set(0,0,0,0):_o(e,t,!0)}var dre={type:"path",tag:"path",nested:!1,attr:cre,bound:fre,draw:KD(cy),pick:JD(cy),isect:WD(cy)};function hre(e,t){e("d",nh(null,t))}function gre(e,t){var n,i;return _o(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function n4(e,t){e.beginPath(),nh(e,t)}var pre={type:"rect",tag:"path",nested:!1,attr:hre,bound:gre,draw:KD(n4),pick:JD(n4),isect:TU};function mre(e,t){e("transform",OU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function yre(e,t){var n,i;return _o(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function BU(e,t,n){var i,r,a,s;return t.stroke&&Ad(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function vre(e,t,n){Sa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&BU(e,i,r)&&(Ed(e,i),e.stroke())}})}function bre(e,t,n,i){return e.isPointInStroke?BU(e,t,1)&&e.isPointInStroke(n,i):!1}var xre={type:"rule",tag:"line",nested:!1,attr:mre,bound:yre,draw:vre,pick:Vb(bre),isect:MU},Ere=t$("shape",$ie),Are=t$("symbol",Tie,QD);const i4=Hz();var xr={height:vs,measureWidth:s$,estimateWidth:Zy,width:Zy,canvas:LU};LU(!0);function LU(e){xr.width=e&&Du?s$:Zy}function Zy(e,t){return UU(zu(e,t),vs(e))}function UU(e,t){return~~(.8*e.length*t)}function s$(e,t){return vs(e)<=0||!(t=zu(e,t))?0:jU(t,Zb(e))}function jU(e,t){const n=`(${t}) ${e}`;let i=i4.get(n);return i===void 0&&(Du.font=t,i=Du.measureText(e).width,i4.set(n,i)),i}function vs(e){return e.fontSize!=null?+e.fontSize||0:11}function Ru(e){return e.lineHeight!=null?e.lineHeight:vs(e)+2}function Sre(e){return se(e)?e.length>1?e:e[0]:e}function xp(e){return Sre(e.lineBreak&&e.text&&!se(e.text)?e.text.split(e.lineBreak):e.text)}function o$(e){const t=xp(e);return(se(t)?t.length-1:0)*Ru(e)}function zu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?wre(e,n):n}function _re(e){if(xr.width===s$){const t=Zb(e);return n=>jU(n,t)}else if(xr.width===Zy){const t=vs(e);return n=>UU(n,t)}else return t=>xr.width(e,t)}function wre(e,t){var n=+e.limit,i=_re(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",s=0,u=t.length,c;if(n-=i(r),a){for(;s<u;)c=s+u>>>1,i(t.slice(c))>n?s=c+1:u=c;return r+t.slice(s)}else{for(;s<u;)c=1+(s+u>>>1),i(t.slice(0,c))<n?s=c:u=c-1;return t.slice(0,s)+r}}function Ep(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Zb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+vs(e)+"px "+Ep(e,t)}function u$(e){var t=e.baseline,n=vs(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ru(e):t==="line-bottom"?.29*n-.5*Ru(e):0)}const Cre={left:"start",center:"middle",right:"end"},ug=new hn;function Kb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Ul,t+=i*Math.cos(r),n+=i*Math.sin(r)),ug.x1=t,ug.y1=n,ug}function Dre(e,t){var n=t.dx||0,i=(t.dy||0)+u$(t),r=Kb(t),a=r.x1,s=r.y1,u=t.angle||0,c;e("text-anchor",Cre[t.align]||"start"),u?(c=Ql(a,s)+" "+e$(u),(n||i)&&(c+=" "+Ql(n,i))):c=Ql(a+n,s+i),e("transform",c)}function l$(e,t,n){var i=xr.height(t),r=t.align,a=Kb(t),s=a.x1,u=a.y1,c=t.dx||0,f=(t.dy||0)+u$(t)-Math.round(.8*i),d=xp(t),g;if(se(d)?(i+=Ru(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,xr.width(t,y)),0)):g=xr.width(t,d),r==="center"?c-=g/2:r==="right"&&(c-=g),e.set(c+=s,f+=u,c+g,f+i),t.angle&&!n)e.rotate(t.angle*Nu,s,u);else if(n===2)return e.rotatedPoints(t.angle*Nu,s,u);return e}function $re(e,t,n){Sa(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,u,c,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Zb(i),e.textAlign=i.align||"left",a=Kb(i),s=a.x1,u=a.y1,i.angle&&(e.save(),e.translate(s,u),e.rotate(i.angle*Nu),s=u=0),s+=i.dx||0,u+=(i.dy||0)+u$(i),d=xp(i),Ed(e,i),se(d))for(f=Ru(i),c=0;c<d.length;++c)g=zu(i,d[c]),i.fill&&Wy(e,i,r)&&e.fillText(g,s,u),i.stroke&&Ad(e,i,r)&&e.strokeText(g,s,u),u+=f;else g=zu(i,d),i.fill&&Wy(e,i,r)&&e.fillText(g,s,u),i.stroke&&Ad(e,i,r)&&e.strokeText(g,s,u);i.angle&&e.restore()}})}function Tre(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Kb(t),u=s.x1,c=s.y1,f=l$(ug,t,1),d=-t.angle*Nu,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(u-g*u+p*c),v=p*r+g*a+(c-p*u-g*c);return f.contains(y,v)}function Mre(e,t){const n=l$(ug,e,2);return Xf(t,n[0],n[1],n[2],n[3])||Xf(t,n[0],n[1],n[4],n[5])||Xf(t,n[4],n[5],n[6],n[7])||Xf(t,n[2],n[3],n[6],n[7])}var Fre={type:"text",tag:"text",nested:!1,attr:Dre,bound:l$,draw:$re,pick:Vb(Tre),isect:Mre},kre=n$("trail",Mie,Hie),wr={arc:qie,area:Gie,group:rre,image:ure,line:lre,path:dre,rect:pre,rule:xre,shape:Ere,symbol:Are,text:Fre,trail:kre};function hw(e,t,n){var i=wr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new hn),e,n)}var r4={mark:null};function qU(e,t,n){var i=wr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,u,c,f,d;if(i.nested)return s?f=a[0]:(r4.mark=e,f=r4),d=hw(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new hn,s)for(u=0,c=a.length;u<c;++u)t.union(hw(a[u],r,n));return e.bounds=t}const Ore=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function IU(e,t){return JSON.stringify(e,Ore,t)}function PU(e){const t=typeof e=="string"?JSON.parse(e):e;return HU(t)}function HU(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&HU(n[r]);return t&&qU(e),e}class GU{constructor(t){arguments.length?this.root=PU(t):(this.root=a4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Yb(this.root)])}toJSON(t){return IU(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=a4(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function a4(e,t){const n={bounds:new hn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function pu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function c$(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function mn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=pu(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Ur(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function YU(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Jb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Nre(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=wr[r.marktype]).tip){for(s=Jb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let f$=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||vb(),this._tooltip=n||Rre}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=pu(null,"a");for(const u in r)s.setAttribute(u,r[u]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Nre(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),u=a.height();let c=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)c+=t.x||0,f+=t.y||0;return{x:c,y:f,width:s,height:u,left:c,top:f,right:c+s,bottom:f+u}}};function Rre(e,t,n,i){e.element().setAttribute("title",i||"")}class Ap{constructor(t){this._el=null,this._bgcolor=null,this._loader=new $U(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const zre="keydown",Bre="keypress",Lre="keyup",XU="dragenter",fy="dragleave",VU="dragover",gw="pointerdown",Ure="pointerup",Ky="pointermove",dy="pointerout",WU="pointerover",pw="mousedown",jre="mouseup",QU="mousemove",Jy="mouseout",ZU="mouseover",ev="click",qre="dblclick",Ire="wheel",KU="mousewheel",tv="touchstart",nv="touchmove",iv="touchend",Pre=[zre,Bre,Lre,XU,fy,VU,gw,Ure,Ky,dy,WU,pw,jre,QU,Jy,ZU,ev,qre,Ire,KU,tv,nv,iv],mw=Ky,lg=Jy,yw=ev;class Sp extends f${constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Pre,this.pointermove=o4([Ky,QU],[WU,ZU],[dy,Jy]),this.dragover=o4([VU],[XU],[fy]),this.pointerout=u4([dy,Jy]),this.dragleave=u4([fy])}initialize(t,n,i){return this._canvas=t&&c$(t,"canvas"),[ev,pw,gw,Ky,dy,fy].forEach(r=>s4(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(KU,t)}pointerdown(t){this._down=this._active,this.fire(gw,t)}mousedown(t){this._down=this._active,this.fire(pw,t)}click(t){this._down===this._active&&(this.fire(ev,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(tv,t,!0)}touchmove(t){this.fire(nv,t,!0)}touchend(t){this.fire(iv,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===yw&&r&&r.href?this.handleHref(n,r,r.href):(t===mw||t===lg)&&this.handleTooltip(n,r,t!==lg),a)for(let s=0,u=a.length;s<u;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(s4(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Jb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return wr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const Hre=e=>e===tv||e===nv||e===iv?[tv,nv,iv]:[e];function s4(e,t){Hre(t).forEach(n=>Gre(e,n))}function Gre(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function G0(e,t,n){t.forEach(i=>e.fire(i,n))}function o4(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?G0(this,e,i):((!r||!r.exit)&&G0(this,n,i),this._active=a,G0(this,t,i),G0(this,e,i))}}function u4(e){return function(t){G0(this,e,t),this._active=null}}function Yre(){return typeof window<"u"&&window.devicePixelRatio||1}function Xre(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,u=e.getContext("2d"),c=s?Yre():r;e.width=t*c,e.height=n*c;for(const f in a)u[f]=a[f];return s&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*i[0],c*i[1]),e}class rv extends Ap{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new hn,this._tempb=new hn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Cu(1,1,this._options.type),t&&this._canvas&&(Ur(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Xre(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ne("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,u=this._dirty,c=Vre(r,a,s);i.save();const f=this._redraw||u.empty()?(this._redraw=!1,c.expand(1)):Wre(i,c.intersect(u),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),u.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=wr[n.marktype];n.clip&&Yie(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const Vre=(e,t,n)=>new hn().set(0,0,t,n).translate(-e[0],-e[1]);function Wre(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class JU extends f${constructor(t,n){super(t,n);const i=this;i._hrefHandler=hS(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=hS(i,(r,a)=>{i.handleTooltip(r,a,r.type!==lg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(yw,this._hrefHandler),r.removeEventListener(mw,this._tooltipHandler),r.removeEventListener(lg,this._tooltipHandler)),this._svg=r=t&&c$(t,"svg"),r&&(r.addEventListener(yw,this._hrefHandler),r.addEventListener(mw,this._tooltipHandler),r.addEventListener(lg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:hS(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const hS=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},ej="aria-hidden",d$="aria-label",h$="role",g$="aria-roledescription",tj="graphics-object",p$="graphics-symbol",nj=(e,t,n)=>({[h$]:e,[g$]:t,[d$]:n||void 0}),Qre=Ea(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),l4={axis:{desc:"axis",caption:Jre},legend:{desc:"legend",caption:eae},"title-text":{desc:"title",caption:e=>`Title text '${f4(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${f4(e)}'`}},c4={ariaRole:h$,ariaRoleDescription:g$,description:d$};function ij(e,t){const n=t.aria===!1;if(e(ej,n||void 0),n||t.description==null)for(const i in c4)e(c4[i],void 0);else{const i=t.mark.marktype;e(d$,t.description),e(h$,t.ariaRole||(i==="group"?tj:p$)),e(g$,t.ariaRoleDescription||`${i} mark`)}}function rj(e){return e.aria===!1?{[ej]:!0}:Qre[e.role]?null:l4[e.role]?Kre(e,l4[e.role]):Zre(e)}function Zre(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return nj(n?tj:p$,`${t} mark container`,e.description)}function Kre(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return nj(t.role||p$,t.desc,n.description||i(n))}catch{return null}}function f4(e){return Ee(e.text).join(" ")}function Jre(e){const t=e.datum,n=e.orient,i=t.title?aj(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),u=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${bd(u)?"discrete":u} scale with ${vU(s,a,e)}`}function eae(e){const t=e.datum,n=t.title?aj(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,u=s.scales[r[a[0]]].value,c=s.dataflow.locale();return nae(i)+(n?` titled '${n}'`:"")+` for ${tae(a)} with ${vU(c,u,e)}`}function aj(e){try{return Ee(st(e.items).items[0].text).join(" ")}catch{return null}}function tae(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+st(e)}function nae(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const sj=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),iae=e=>sj(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function m$(){let e="",t="",n="";const i=[],r=()=>t=n="",a=c=>{t&&(e+=`${t}>${n}`,r()),i.push(c)},s=(c,f)=>(f!=null&&(t+=` ${c}="${iae(f)}"`),u),u={open(c){a(c),t="<"+c;for(var f=arguments.length,d=new Array(f>1?f-1:0),g=1;g<f;g++)d[g-1]=arguments[g];for(const p of d)for(const y in p)s(y,p[y]);return u},close(){const c=i.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,r(),u},attr:s,text:c=>(n+=sj(c),u),toString:()=>e};return u}const oj=e=>uj(m$(),e)+"";function uj(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):uj(e,i)}return e.close()}const av={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},sv={blend:"mix-blend-mode"},lj={fill:"none","stroke-miterlimit":10},A0=0,d4="http://www.w3.org/2000/xmlns/",pn=Og.xmlns;class y$ extends Ap{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=mn(t,0,"svg",pn),this._svg.setAttributeNS(d4,"xmlns",pn),this._svg.setAttributeNS(d4,"xmlns:xlink",Og["xmlns:xlink"]),this._svg.setAttribute("version",Og.version),this._svg.setAttribute("class","marks"),Ur(t,1),this._root=mn(this._svg,A0,"g",pn),mu(this._root,lj),Ur(this._svg,A0+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(mu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=mn(t,A0,"rect",pn),mu(i,{width:this._width,height:this._height,fill:n}));const r=oj(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Ur(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,u,c,f;for(u=0,c=t.length;u<c;++u)if(i=t[u],r=i.mark,r.marktype!==a&&(a=r.marktype,s=wr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,h4(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,h4(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,u=wr[s],c=n.interactive===!1?"none":null,f=u.tag==="g",d=g4(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Ur(d,0),n._svg;d.setAttribute("class",YU(n));const g=rj(n);for(const b in g)yi(d,b,g[b]);f||yi(d,"pointer-events",c),yi(d,"clip-path",n.clip?VD(this,n,n.group):null);let p=null,y=0;const v=b=>{const E=this.isDirty(b),S=g4(b,d,p,u.tag,a);E&&(this._update(u,S,b),f&&sae(this,S,b,r)),p=S,++y};return u.nested?n.items.length&&v(n.items[0]):Sa(n,v),Ur(d,y),d}_update(t,n,i){oo=n,ni=n.__values__,ij(cg,i),t.attr(cg,i,this);const r=uae[t.type];r&&r.call(this,t,n,i),oo&&this.style(oo,i)}style(t,n){if(n!=null){for(const i in av){let r=i==="font"?Ep(n):n[i];if(r===ni[i])continue;const a=av[i];r==null?t.removeAttribute(a):(GD(r)&&(r=xU(r,this._defs.gradient,cj())),t.setAttribute(a,r+"")),ni[i]=r}for(const i in sv)hy(t,sv[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=mn(t,A0+1,"defs",pn)),r=rae(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=mn(t,A0+1,"defs",pn)),r=aae(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Ur(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function h4(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function rae(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=mn(e,n++,"pattern",pn);mu(s,{id:Vy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=mn(s,0,"rect",pn),mu(s,{width:1,height:1,fill:`url(${cj()}#${t.id})`}),e=mn(e,n++,"radialGradient",pn),mu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=mn(e,n++,"linearGradient",pn),mu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=mn(e,i,"stop",pn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Ur(e,i),n}function aae(e,t,n){let i;return e=mn(e,n,"clipPath",pn),e.setAttribute("id",t.id),t.path?(i=mn(e,0,"path",pn),i.setAttribute("d",t.path)):(i=mn(e,0,"rect",pn),mu(i,{x:0,y:0,width:t.width,height:t.height})),Ur(e,1),n+1}function sae(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;Sa(n,s=>{r=e.mark(t,s,r,i),++a}),Ur(t,1+a)}function g4(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=pu(s,i,pn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const u=pu(s,"path",pn);a.appendChild(u),u.__data__=e;const c=pu(s,"g",pn);a.appendChild(c),c.__data__=e;const f=pu(s,"path",pn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||oae(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function oae(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let oo=null,ni=null;const uae={group(e,t,n){const i=oo=t.childNodes[2];ni=i.__values__,e.foreground(cg,n,this),ni=t.__values__,oo=t.childNodes[1],e.content(cg,n,this);const r=oo=t.childNodes[0];e.background(cg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==ni.events&&(yi(i,"pointer-events",a),yi(r,"pointer-events",a),ni.events=a),n.strokeForeground&&n.stroke){const s=n.fill;yi(i,"display",null),this.style(r,n),yi(r,"stroke",null),s&&(n.fill=null),ni=i.__values__,this.style(i,n),s&&(n.fill=s),oo=null}else yi(i,"display","none")},image(e,t,n){n.smooth===!1?(hy(t,"image-rendering","optimizeSpeed"),hy(t,"image-rendering","pixelated")):hy(t,"image-rendering",null)},text(e,t,n){const i=xp(n);let r,a,s,u;se(i)?(a=i.map(c=>zu(n,c)),r=a.join(`
`),r!==ni.text&&(Ur(t,0),s=t.ownerDocument,u=Ru(n),a.forEach((c,f)=>{const d=pu(s,"tspan",pn);d.__data__=n,d.textContent=c,f&&(d.setAttribute("x",0),d.setAttribute("dy",u)),t.appendChild(d)}),ni.text=r)):(a=zu(n,i),a!==ni.text&&(t.textContent=a,ni.text=a)),yi(t,"font-family",Ep(n)),yi(t,"font-size",vs(n)+"px"),yi(t,"font-style",n.fontStyle),yi(t,"font-variant",n.fontVariant),yi(t,"font-weight",n.fontWeight)}};function cg(e,t,n){t!==ni[e]&&(n?lae(oo,e,t,n):yi(oo,e,t),ni[e]=t)}function hy(e,t,n){n!==ni[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ni[t]=n)}function mu(e,t){for(const n in t)yi(e,n,t[n])}function yi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function lae(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function cj(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class fj extends Ap{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=m$();n.open("svg",Ge({},Og,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",lj,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=wr[n.marktype],r=i.tag,a=[ij,i.attr];t.open("g",{class:YU(n),"clip-path":n.clip?VD(this,n,n.group):null},rj(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=u=>{const c=this.href(u);if(c&&t.open("a",c),t.open(r,this.attr(n,u,a,r!=="g"?r:null)),r==="text"){const f=xp(u);if(se(f)){const d={x:0,dy:Ru(u)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(zu(u,f[g])).close()}else t.text(zu(u,f))}else if(r==="g"){const f=u.strokeForeground,d=u.fill,g=u.stroke;f&&g&&(u.stroke=null),t.open("path",this.attr(n,u,i.background,"bgrect")).close(),t.open("g",this.attr(n,u,i.content)),Sa(u,p=>this.mark(t,p)),t.close(),f&&g?(d&&(u.fill=null),u.stroke=g,t.open("path",this.attr(n,u,i.foreground,"bgrect")).close(),d&&(u.fill=d)):t.open("path",this.attr(n,u,i.foreground,"bgfore")).close()}t.close(),c&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):Sa(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(u,c,f,d)=>{a[d||u]=c};return Array.isArray(i)?i.forEach(u=>u(s,n,this)):i(s,n,this),r&&cae(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],u=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Vy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let c=0;c<u.length;++c)t.open("stop",{offset:u[c].offset,"stop-color":u[c].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function cae(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Ep(t),e["font-size"]=vs(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in av){let u=t[s];const c=av[s];u==="transparent"&&(c==="fill"||c==="stroke")||u!=null&&(GD(u)&&(u=xU(u,r.gradient,"")),e[c]=u)}for(const s in sv){const u=t[s];u!=null&&(a=a||[],a.push(`${sv[s]}: ${u};`))}return a&&(e.style=a.join(" ")),e}const la={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function fae(e){la.svgMarkTypes=e.svgMarkTypes??["text"],la.svgOnTop=e.svgOnTop??!0,la.debug=e.debug??!1}class vw extends Ap{constructor(t){super(t),this._svgRenderer=new y$(t),this._canvasRenderer=new rv(t)}initialize(t,n,i,r,a){this._root_el=mn(t,0,"div");const s=mn(this._root_el,0,"div"),u=mn(this._root_el,1,"div");return this._root_el.style.position="relative",la.debug||(s.style.height="100%",u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.height="100%",u.style.width="100%"),this._svgEl=la.svgOnTop?u:s,this._canvasEl=la.svgOnTop?s:u,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return la.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!la.svgMarkTypes.includes(a));this._svgRenderer.render(t,la.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return la.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class dj extends Sp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=mn(mn(t,0,"div"),la.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const hj="canvas",gj="hybrid",pj="png",mj="svg",yj="none",yu={Canvas:hj,PNG:pj,SVG:mj,Hybrid:gj,None:yj},oc={};oc[hj]=oc[pj]={renderer:rv,headless:rv,handler:Sp};oc[mj]={renderer:y$,headless:fj,handler:JU};oc[gj]={renderer:vw,headless:vw,handler:dj};oc[yj]={};function ex(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(oc[e]=t,this):oc[e]}function vj(e,t,n){const i=[],r=new hn().union(t),a=e.marktype;return a?bj(e,r,n,i):a==="group"?xj(e,r,n,i):ne("Intersect scene must be mark node or group item.")}function bj(e,t,n,i){if(dae(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let u=0;if(a==="group")for(;u<s;++u)xj(r[u],t,n,i);else for(const c=wr[a].isect;u<s;++u){const f=r[u];Ej(f,t,c)&&i.push(f)}}return i}function dae(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function xj(e,t,n,i){n&&n(e.mark)&&Ej(e,t,wr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,u=e.y||0;t.translate(-s,-u);for(let c=0;c<a;++c)bj(r[c],t,n,i);t.translate(s,u)}return i}function Ej(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const gS=new hn;function Aj(e){const t=e.clip;if(Ye(t))t(vp(gS.clear()));else if(t)gS.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(gS)}const hae=1e-9;function v$(e,t,n){return e===t?!0:n==="path"?Sj(e,t):e instanceof Date&&t instanceof Date?+e==+t:dt(e)&&dt(t)?Math.abs(e-t)<=hae:!e||!t||!Ae(e)&&!Ae(t)?e==t:gae(e,t)}function Sj(e,t){return v$(xd(e),xd(t))}function gae(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!v$(e[r],t[r],r))return!1;return typeof e==typeof t}function pae(){DU(),Une()}const Sd="top",ga="left",pa="right",Bu="bottom",mae="top-left",yae="top-right",vae="bottom-left",bae="bottom-right",b$="start",bw="middle",vi="end",xae="x",Eae="y",tx="group",x$="axis",E$="title",Aae="frame",Sae="scope",A$="legend",_j="row-header",wj="row-footer",Cj="row-title",Dj="column-header",$j="column-footer",Tj="column-title",_ae="padding",wae="symbol",Mj="fit",Fj="fit-x",kj="fit-y",Cae="pad",S$="none",w1="all",xw="each",_$="flush",vu="column",bu="row";function Oj(e){te.call(this,null,e)}be(Oj,te,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=wr[r],s=a.bound;let u=i.bounds,c;if(a.nested)i.items.length&&n.dirty(i.items[0]),u=C1(i,s),i.items.forEach(f=>{f.bounds.clear().union(u)});else if(r===tx||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),u.clear(),i.items.forEach(f=>u.union(C1(f,s))),i.role){case x$:case A$:case E$:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,f=>{u.union(C1(f,s))}),t.visit(t.MOD,f=>{c=c||u.alignsWith(f.bounds),n.dirty(f),u.union(C1(f,s))}),c&&(u.clear(),i.items.forEach(f=>u.union(f.bounds)));return Aj(i),t.modifies("bounds")}});function C1(e,t,n){return t(e.bounds.clear(),e,n)}const p4=":vega_identifier:";function w$(e){te.call(this,0,e)}w$.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};be(w$,te,{transform(e,t){const n=Dae(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Dae(e){return e._signals[p4]||(e._signals[p4]=e.add(0))}function Nj(e){te.call(this,null,e)}be(Nj,te,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,$ae(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===tx?Yb:Gb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function $ae(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Rj(e){te.call(this,null,e)}const m4={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!zj(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},zj=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),y4=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(zj(r,a=e[n].bounds,t))return!0},Tae=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Mae=(e,t,n)=>{var i=e.range(),r=new hn;return t===Sd||t===Bu?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},v4=e=>(e.forEach(t=>t.opacity=1),e),b4=(e,t)=>e.reflow(t.modified()).modifies("opacity");be(Rj,te,{transform(e,t){const n=m4[e.method]||m4.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(v4(r),t=b4(t,e)),t;if(r=r.filter(Tae),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=v4(r),t=b4(t,e),a.length>=3&&y4(a,i)){do a=n(a,i);while(a.length>=3&&y4(a,i));a.length<3&&!st(r).opacity&&(a.length>1&&(st(a).opacity=0),st(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Mae(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(c=>{s(c)||(c.opacity=0)}));const u=a[0].mark.bounds.clear();return r.forEach(c=>{c.opacity&&u.union(c.bounds)}),t}});function Bj(e){te.call(this,null,e)}be(Bj,te,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const ti=new hn;function Vf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Fae(e){var t=e.items[0].orient;return t===ga||t===pa}function kae(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Oae(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,u=r.orient,c=kae(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[c[2]].items[0],b=r.titlePadding,E=r.bounds,S=v&&o$(v),_=0,w=0,D,T;switch(ti.clear().union(E),E.clear(),(D=c[0])>-1&&E.union(r.items[D].bounds),(D=c[1])>-1&&E.union(r.items[D].bounds),u){case Sd:_=g||0,w=-d,T=Math.max(p,Math.min(y,-E.y1)),E.add(0,-T).add(f,0),v&&D1(e,v,T,b,S,0,-1,E);break;case ga:_=-d,w=g||0,T=Math.max(p,Math.min(y,-E.x1)),E.add(-T,0).add(0,f),v&&D1(e,v,T,b,S,1,-1,E);break;case pa:_=n+d,w=g||0,T=Math.max(p,Math.min(y,E.x2)),E.add(0,0).add(T,f),v&&D1(e,v,T,b,S,1,1,E);break;case Bu:_=g||0,w=i+d,T=Math.max(p,Math.min(y,E.y2)),E.add(0,0).add(f,T),v&&D1(e,v,T,b,0,0,1,E);break;default:_=r.x,w=r.y}return _o(E.translate(_,w),r),Vf(r,"x",_+s)|Vf(r,"y",w+s)&&(r.bounds=ti,e.dirty(r),r.bounds=E,e.dirty(r)),r.mark.bounds.clear().union(E)}function D1(e,t,n,i,r,a,s,u){const c=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(c.translate(-d,-g)),e.dirty(t)}u.union(c)}const x4=(e,t)=>Math.floor(Math.min(e,t)),E4=(e,t)=>Math.ceil(Math.max(e,t));function Nae(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===tx)switch(r.role){case x$:case A$:case E$:break;case _j:s.rowheaders.push(...a);break;case wj:s.rowfooters.push(...a);break;case Dj:s.colheaders.push(...a);break;case $j:s.colfooters.push(...a);break;case Cj:s.rowtitle=a[0];break;case Tj:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function Rae(e){return new hn().set(0,0,e.width||0,e.height||0)}function zae(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ht(e,t,n){const i=Ae(e)?e[t]:e;return i??(n!==void 0?n:0)}function A4(e){return e<0?Math.ceil(-e):0}function Lj(e,t,n){var i=!n.nodirty,r=n.bounds===_$?Rae:zae,a=ti.set(0,0,0,0),s=Ht(n.align,vu),u=Ht(n.align,bu),c=Ht(n.padding,vu),f=Ht(n.padding,bu),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,E=Array(p),S=Array(g),_=0,w=Array(p),D=Array(p),T=Array(p),M,$,F,N,U,B,X,G,P,z,O;for($=0;$<d;++$)v[$]=0;for($=0;$<g;++$)S[$]=0;for($=0;$<p;++$)B=t[$],U=T[$]=r(B),B.x=B.x||0,w[$]=0,B.y=B.y||0,D[$]=0,F=$%d,N=~~($/d),b=Math.max(b,X=Math.ceil(U.x2)),_=Math.max(_,G=Math.ceil(U.y2)),v[F]=Math.max(v[F],X),S[N]=Math.max(S[N],G),y[$]=c+A4(U.x1),E[$]=f+A4(U.y1),i&&e.dirty(t[$]);for($=0;$<p;++$)$%d===0&&(y[$]=0),$<d&&(E[$]=0);if(s===xw)for(F=1;F<d;++F){for(O=0,$=F;$<p;$+=d)O<y[$]&&(O=y[$]);for($=F;$<p;$+=d)y[$]=O+v[F-1]}else if(s===w1){for(O=0,$=0;$<p;++$)$%d&&O<y[$]&&(O=y[$]);for($=0;$<p;++$)$%d&&(y[$]=O+b)}else for(s=!1,F=1;F<d;++F)for($=F;$<p;$+=d)y[$]+=v[F-1];if(u===xw)for(N=1;N<g;++N){for(O=0,$=N*d,M=$+d;$<M;++$)O<E[$]&&(O=E[$]);for($=N*d;$<M;++$)E[$]=O+S[N-1]}else if(u===w1){for(O=0,$=d;$<p;++$)O<E[$]&&(O=E[$]);for($=d;$<p;++$)E[$]=O+_}else for(u=!1,N=1;N<g;++N)for($=N*d,M=$+d;$<M;++$)E[$]+=S[N-1];for(P=0,$=0;$<p;++$)P=y[$]+($%d?P:0),w[$]+=P-t[$].x;for(F=0;F<d;++F)for(z=0,$=F;$<p;$+=d)z+=E[$],D[$]+=z-t[$].y;if(s&&Ht(n.center,vu)&&g>1)for($=0;$<p;++$)U=s===w1?b:v[$%d],P=U-T[$].x2-t[$].x-w[$],P>0&&(w[$]+=P/2);if(u&&Ht(n.center,bu)&&d!==1)for($=0;$<p;++$)U=u===w1?_:S[~~($/d)],z=U-T[$].y2-t[$].y-D[$],z>0&&(D[$]+=z/2);for($=0;$<p;++$)a.union(T[$].translate(w[$],D[$]));switch(P=Ht(n.anchor,xae),z=Ht(n.anchor,Eae),Ht(n.anchor,vu)){case vi:P-=a.width();break;case bw:P-=a.width()/2}switch(Ht(n.anchor,bu)){case vi:z-=a.height();break;case bw:z-=a.height()/2}for(P=Math.round(P),z=Math.round(z),a.clear(),$=0;$<p;++$)t[$].mark.bounds.clear();for($=0;$<p;++$)B=t[$],B.x+=w[$]+=P,B.y+=D[$]+=z,a.union(B.mark.bounds.union(B.bounds.translate(w[$],D[$]))),i&&e.dirty(B);return a}function Bae(e,t,n){var i=Nae(t),r=i.marks,a=n.bounds===_$?Lae:Uae,s=n.offset,u=n.columns||r.length,c=u<=0?1:Math.ceil(r.length/u),f=c*u,d,g,p,y,v,b,E;const S=Lj(e,r,n);S.empty()&&S.set(0,0,0,0),i.rowheaders&&(b=Ht(n.headerBand,bu,null),d=$1(e,i.rowheaders,r,u,c,-Ht(s,"rowHeader"),x4,0,a,"x1",0,u,1,b)),i.colheaders&&(b=Ht(n.headerBand,vu,null),g=$1(e,i.colheaders,r,u,u,-Ht(s,"columnHeader"),x4,1,a,"y1",0,1,u,b)),i.rowfooters&&(b=Ht(n.footerBand,bu,null),p=$1(e,i.rowfooters,r,u,c,Ht(s,"rowFooter"),E4,0,a,"x2",u-1,u,1,b)),i.colfooters&&(b=Ht(n.footerBand,vu,null),y=$1(e,i.colfooters,r,u,u,Ht(s,"columnFooter"),E4,1,a,"y2",f-u,1,u,b)),i.rowtitle&&(v=Ht(n.titleAnchor,bu),E=Ht(s,"rowTitle"),E=v===vi?p+E:d-E,b=Ht(n.titleBand,bu,.5),S4(e,i.rowtitle,E,0,S,b)),i.coltitle&&(v=Ht(n.titleAnchor,vu),E=Ht(s,"columnTitle"),E=v===vi?y+E:g-E,b=Ht(n.titleBand,vu,.5),S4(e,i.coltitle,E,1,S,b))}function Lae(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Uae(e,t){return e.bounds[t]}function $1(e,t,n,i,r,a,s,u,c,f,d,g,p,y){var v=n.length,b=0,E=0,S,_,w,D,T,M,$,F,N;if(!v)return b;for(S=d;S<v;S+=g)n[S]&&(b=s(b,c(n[S],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,_=0,D=t.length;_<D;++_)e.dirty(t[_]),t[_].mark.bounds.clear();for(S=d,_=0,D=t.length;_<D;++_,S+=g){for(M=t[_],T=M.mark.bounds,w=S;w>=0&&($=n[w])==null;w-=p);u?(F=y==null?$.x:Math.round($.bounds.x1+y*$.bounds.width()),N=b):(F=b,N=y==null?$.y:Math.round($.bounds.y1+y*$.bounds.height())),T.union(M.bounds.translate(F-(M.x||0),N-(M.y||0))),M.x=F,M.y=N,e.dirty(M),E=s(E,T[f])}return E}function S4(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,u=n;i?s=Math.round(r.x1+a*r.width()):u=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=u,e.dirty(t)}}function jae(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function qae(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Iae(e,t,n,i,r,a,s){const u=jae(n,t),c=qae(e,u("offset",0)),f=u("anchor",b$),d=f===vi?1:f===bw?.5:0,g={align:xw,bounds:u("bounds",_$),columns:u("direction")==="vertical"?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case ga:g.anchor={x:Math.floor(i.x1)-c,column:vi,y:d*(s||i.height()+2*i.y1),row:f};break;case pa:g.anchor={x:Math.ceil(i.x2)+c,y:d*(s||i.height()+2*i.y1),row:f};break;case Sd:g.anchor={y:Math.floor(r.y1)-c,row:vi,x:d*(a||r.width()+2*r.x1),column:f};break;case Bu:g.anchor={y:Math.ceil(r.y2)+c,x:d*(a||r.width()+2*r.x1),column:f};break;case mae:g.anchor={x:c,y:c};break;case yae:g.anchor={x:a-c,y:c,column:vi};break;case vae:g.anchor={x:c,y:s-c,row:vi};break;case bae:g.anchor={x:a-c,y:s-c,column:vi,row:vi};break}return g}function Pae(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,u=n.y,c,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Gae(e,n,n.items[0].items[0]),a=Hae(n,a),c=2*n.padding,f=2*n.padding,a.empty()||(c=Math.ceil(a.width()+c),f=Math.ceil(a.height()+f)),i.type===wae&&Yae(n.items[0].items[0].items[0].items),r!==S$&&(n.x=s=0,n.y=u=0),n.width=c,n.height=f,_o(a.set(s,u,s+c,u+f),n),n.mark.bounds.clear().union(a),n}function Hae(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Gae(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&S0(e,n,r,a);else{var s=t.items[1].items[0],u=s.anchor,c=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case ga:r+=Math.ceil(s.bounds.width())+c;break;case pa:case Bu:break;default:a+=s.bounds.height()+c}switch((r||a)&&S0(e,n,r,a),s.orient){case ga:d+=Nf(t,n,s,u,1,1);break;case pa:f+=Nf(t,n,s,vi,0,0)+c,d+=Nf(t,n,s,u,1,1);break;case Bu:f+=Nf(t,n,s,u,0,0),d+=Nf(t,n,s,vi,-1,0,1)+c;break;default:f+=Nf(t,n,s,u,0,0)}(f||d)&&S0(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(S0(e,n,-f,0),S0(e,s,-f,0))}}function Nf(e,t,n,i,r,a,s){const u=e.datum.type!=="symbol",c=n.datum.vgrad,f=u&&(a||!c)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=c&&a?d:0,p=c&&a?0:d,y=r<=0?0:o$(n);return Math.round(i===b$?g:i===vi?p-y:.5*(d-y))}function S0(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Yae(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Xae(e,t,n,i,r){var a=t.items[0],s=a.frame,u=a.orient,c=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=u===ga||u===pa?i:n,v=0,b=0,E=0,S=0,_=0,w;if(s!==tx?u===ga?(v=r.y2,y=r.y1):u===pa?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):u===ga&&(v=i,y=0),w=c===b$?v:c===vi?y:(v+y)/2,p&&p.text){switch(u){case Sd:case Bu:_=g.bounds.height()+d;break;case ga:S=g.bounds.width()+d;break;case pa:S=-g.bounds.width()-d;break}ti.clear().union(p.bounds),ti.translate(S-(p.x||0),_-(p.y||0)),Vf(p,"x",S)|Vf(p,"y",_)&&(e.dirty(p),p.bounds.clear().union(ti),p.mark.bounds.clear().union(ti),e.dirty(p)),ti.clear().union(p.bounds)}else ti.clear();switch(ti.union(g.bounds),u){case Sd:b=w,E=r.y1-ti.height()-f;break;case ga:b=r.x1-ti.width()-f,E=w;break;case pa:b=r.x2+ti.width()+f,E=w;break;case Bu:b=w,E=r.y2+f;break;default:b=a.x,E=a.y}return Vf(a,"x",b)|Vf(a,"y",E)&&(ti.translate(b,E),e.dirty(a),a.bounds.clear().union(ti),t.bounds.clear().union(ti),e.dirty(a)),a.bounds}function Uj(e){te.call(this,null,e)}be(Uj,te,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Bae(n,i,e.layout),Wae(n,i,e)}),Vae(e.mark.group)?t.reflow():t}});function Vae(e){return e&&e.mark.role!=="legend-entry"}function Wae(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new hn().set(0,0,r,a),u=s.clone(),c=s.clone(),f=[],d,g,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(g=i[v],g.role){case x$:y=Fae(g)?u:c,y.union(Oae(e,g,r,a));break;case E$:d=g;break;case A$:f.push(Pae(e,g));break;case Aae:case Sae:case _j:case wj:case Cj:case Dj:case $j:case Tj:u.union(g.bounds),c.union(g.bounds);break;default:s.union(g.bounds)}if(f.length){const E={};f.forEach(S=>{p=S.orient||pa,p!==S$&&(E[p]||(E[p]=[])).push(S)});for(const S in E){const _=E[S];Lj(e,_,Iae(_,S,n.legends,u,c,r,a))}f.forEach(S=>{const _=S.bounds;if(_.equals(S._bounds)||(S.bounds=S._bounds,e.dirty(S),S.bounds=_,e.dirty(S)),n.autosize&&(n.autosize.type===Mj||n.autosize.type===Fj||n.autosize.type===kj))switch(S.orient){case ga:case pa:s.add(_.x1,0).add(_.x2,0);break;case Sd:case Bu:s.add(0,_.y1).add(0,_.y2)}else s.union(_)})}s.union(u).union(c),d&&s.union(Xae(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Qae(e,t,s,n)}function Qae(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,u=e._height,c=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-c)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===_ae){const v=e.padding();s-=v.left+v.right,u-=v.top+v.bottom}a===S$?(f=0,g=0,c=s,d=u):a===Mj?(c=Math.max(0,s-f-p),d=Math.max(0,u-g-y)):a===Fj?(c=Math.max(0,s-f-p),u=d+g+y):a===kj?(s=c+f+p,d=Math.max(0,u-g-y)):a===Cae&&(s=c+f+p,u=d+g+y),e._resizeView(s,u,c,d,[f,g],r.resize)}const Zae=Object.freeze(Object.defineProperty({__proto__:null,bound:Oj,identifier:w$,mark:Nj,overlap:Rj,render:Bj,viewlayout:Uj},Symbol.toStringTag,{value:"Module"}));function jj(e){te.call(this,null,e)}be(jj,te,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,u=PD(a,s,e.minstep),c=e.format||hU(n,a,u,e.formatSpecifier,e.formatType,!!e.values),f=e.values?dU(a,e.values,u):HD(a,u);return r&&(i.rem=r),r=f.map((d,g)=>mt({index:g/(f.length-1||1),value:d,label:c(d)})),e.extra&&r.length&&r.push(mt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function qj(e){te.call(this,null,e)}function Kae(){return mt({})}function Jae(e){const t=Xd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}be(qj,te,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Kae,a=e.key||ke,s=this.value;return se(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&ne("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Jae(a)),t.visit(t.ADD,u=>{const c=a(u);let f=s.get(c);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(u),s.set(c,f),i.add.push(f)),f.datum=u,f.exit=!1}),t.visit(t.MOD,u=>{const c=a(u),f=s.get(c);f&&(f.datum=u,i.mod.push(f))}),t.visit(t.REM,u=>{const c=a(u),f=s.get(c);u===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function Ij(e){te.call(this,null,e)}be(Ij,te,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(se(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",u=r.update||au,c=r.enter||au,f=r.exit||au,d=(a&&!s?r[a]:u)||au;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{c(g,e),u(g,e)}),n.modifies(c.output),n.modifies(u.output),d!==au&&d!==u&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==au&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),s||d!==au){const g=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(g,p=>{const y=c(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(c.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function Pj(e){te.call(this,[],e)}be(Pj,te,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||ay,s=e.scale,u=+e.limit,c=PD(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===ay,d=e.format||yU(n,s,c,a,e.formatSpecifier,e.formatType,f),g=e.values||mU(s,c),p,y,v,b,E;return r&&(i.rem=r),a===ay?(u&&g.length>u?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,u-1),E=!0):r=g,Ye(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((S,_)=>Math.max(S,v(_,e)),0)):v=hi(b=v||8),r=r.map((S,_)=>mt({index:_,label:d(S,_,r),value:S,offset:b,size:v(S,e)})),E&&(E=g[r.length],r.push(mt({index:r.length,label:`${g.length-r.length} entries`,value:E,offset:b,size:v(E,e)})))):a===Cne?(p=s.domain(),y=lU(s,p[0],st(p)),g.length<3&&!e.values&&p[0]!==st(p)&&(g=[p[0],st(p)]),r=g.map((S,_)=>mt({index:_,label:d(S,_,g),value:S,perc:y(S)}))):(v=g.length-1,y=Bne(s),r=g.map((S,_)=>mt({index:_,label:d(S,_,g),value:S,perc:_?y(S):0,perc2:_===v?1:y(g[_+1])}))),i.source=r,i.add=r,this.value=r,i}});const ese=e=>e.source.x,tse=e=>e.source.y,nse=e=>e.target.x,ise=e=>e.target.y;function C$(e){te.call(this,{},e)}C$.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};be(C$,te,{transform(e,t){var n=e.sourceX||ese,i=e.sourceY||tse,r=e.targetX||nse,a=e.targetY||ise,s=e.as||"path",u=e.orient||"vertical",c=e.shape||"line",f=_4.get(c+"-"+u)||_4.get(c);return f||ne("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const Hj=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,rse=(e,t,n,i)=>Hj(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Gj=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,u=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+u+" 0 1 "+n+","+i},ase=(e,t,n,i)=>Gj(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),Yj=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),u=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+u)+" "+(n+u)+","+(i-s)+" "+n+","+i},sse=(e,t,n,i)=>Yj(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),ose=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,use=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,lse=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),u=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*s+","+t*u+"L"+i*s+","+i*u},cse=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},fse=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},dse=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),u=Math.sin(n),c=(t+i)/2;return"M"+t*r+","+t*a+"C"+c*r+","+c*a+" "+c*s+","+c*u+" "+i*s+","+i*u},_4=Xd({line:Hj,"line-radial":rse,arc:Gj,"arc-radial":ase,curve:Yj,"curve-radial":sse,"orthogonal-horizontal":ose,"orthogonal-vertical":use,"orthogonal-radial":lse,"diagonal-horizontal":cse,"diagonal-vertical":fse,"diagonal-radial":dse});function D$(e){te.call(this,null,e)}D$.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};be(D$,te,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Hd,s=e.startAngle||0,u=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,f=c.map(a),d=f.length,g=s,p=(u-s)/s7(f),y=yr(d),v,b,E;for(e.sort&&y.sort((S,_)=>f[S]-f[_]),v=0;v<d;++v)E=f[y[v]],b=c[y[v]],b[i]=g,b[r]=g+=E*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const hse=5;function gse(e){const t=e.type;return!e.bins&&(t===yd||t===fp||t===dp)}function Xj(e){return jD(e)&&e!==ns}const pse=Ea(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function Vj(e){te.call(this,null,e),this.modified(!0)}be(Vj,te,{transform(e,t){var n=t.dataflow,i=this.value,r=mse(e);(!i||r!==i.type)&&(this.value=i=gt(r)());for(r in e)if(!pse[r]){if(r==="padding"&&Xj(i.type))continue;Ye(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Ase(i,e,Ese(i,e,vse(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mse(e){var t=e.type,n="",i;return t===ns?ns+"-"+yd:(yse(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?ns+"-":i===3?th+"-":""),(n+t||yd).toLowerCase())}function yse(e){const t=e.type;return jD(t)&&t!==ac&&t!==sc&&(e.scheme||e.range&&e.range.length&&e.range.every(Se))}function vse(e,t,n){const i=bse(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&gse(e),u,c;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(u=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[u]<0&&(r[u]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[u]=t.domainMax),t.domainMid!=null)){c=t.domainMid;const f=c>r[u]?u+1:c<r[0]?0:u;f!==u&&n.warn("Scale domainMid exceeds domain min or max.",c),r.splice(f,0,c)}return Xj(a)&&t.padding&&r[0]!==st(r)&&(r=xse(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(Wj(a,r,n)),a===zD&&e.unknown(t.domainImplicit?J_:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&PD(e,t.nice)||null),r.length}function bse(e,t,n){return t?(e.domain(Wj(e.type,t,n)),t.length):-1}function xse(e,t,n,i,r,a){var s=Math.abs(st(n)-n[0]),u=s/(s-2*i),c=e===bo?i3(t,null,u):e===dp?My(t,null,u,.5):e===fp?My(t,null,u,r||1):e===jb?r3(t,null,u,a||1):n3(t,null,u);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function Wj(e,t,n){if(rU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ve(t))}return t}function Ese(e,t,n){let i=t.bins;if(i&&!se(i)){const r=e.domain(),a=r[0],s=st(r),u=i.step;let c=i.start==null?a:i.start,f=i.stop==null?s:i.stop;u||ne("Scale bins parameter missing step property."),c<a&&(c=u*Math.ceil(a/u)),f>s&&(f=u*Math.floor(s/u)),i=yr(c,f+u/2,u)}return i?e.bins=i:e.bins&&delete e.bins,e.type===BD&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Ase(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Sse(i,t,n);else if(t.scheme&&(a=_se(i,t,n),Ye(a))){if(e.interpolator)return e.interpolator(a);ne(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&aU(i))return e.interpolator(Pb(Ew(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(qD(t.interpolate,t.interpolateGamma)):Ye(e.round)?e.round(r):Ye(e.rangeRound)&&e.interpolate(r?lp:Xu),a&&e.range(Ew(a,t.reverse))}function Sse(e,t,n){e!==KL&&e!==sw&&ne("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===sw?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*RD(n,r,i)]}function _se(e,t,n){var i=t.schemeExtent,r,a;return se(t.scheme)?a=Pb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=ID(r),a||ne(`Unrecognized scheme name: ${t.scheme}`)),n=e===Ib?n+1:e===BD?n-1:e===vd||e===qb?+t.schemeCount||hse:n,aU(e)?w4(a,i,t.reverse):Ye(a)?uU(w4(a,i),n):e===zD?a:a.slice(0,n)}function w4(e,t,n){return Ye(e)&&(t||n)?oU(e,Ew(t||[0,1],n)):e}function Ew(e,t){return t?e.slice().reverse():e}function Qj(e){te.call(this,null,e)}be(Qj,te,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Tc(e.sort)),this.modified(n),t}});const C4="zero",Zj="center",Kj="normalize",Jj=["y0","y1"];function $$(e){te.call(this,null,e)}$$.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:C4,values:[C4,Zj,Kj]},{name:"as",type:"string",array:!0,length:2,default:Jj}]};be($$,te,{transform(e,t){var n=e.as||Jj,i=n[0],r=n[1],a=Tc(e.sort),s=e.field||Hd,u=e.offset===Zj?wse:e.offset===Kj?Cse:Dse,c,f,d,g;for(c=$se(t.source,e.groupby,a,s),f=0,d=c.length,g=c.max;f<d;++f)u(c[f],g,s,i,r);return t.reflow(e.modified()).modifies(n)}});function wse(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,u=0,c;u<s;++u)c=e[u],c[i]=a,c[r]=a+=Math.abs(n(c))}function Cse(e,t,n,i,r){for(var a=1/e.sum,s=0,u=e.length,c=0,f=0,d;c<u;++c)d=e[c],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function Dse(e,t,n,i,r){for(var a=0,s=0,u=e.length,c=0,f,d;c<u;++c)d=e[c],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function $se(e,t,n,i){var r=[],a=b=>b(d),s,u,c,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(s={},u=0,c=e.length;u<c;++u)d=e[u],g=t.map(a),p=s[g],p||(s[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],u=0,y=0,c=p.length;u<c;++u)y+=Math.abs(i(p[u]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const Tse=Object.freeze(Object.defineProperty({__proto__:null,axisticks:jj,datajoin:qj,encode:Ij,legendentries:Pj,linkpath:C$,pie:D$,scale:Vj,sortitems:Qj,stack:$$},Symbol.toStringTag,{value:"Module"}));var Re=1e-6,ov=1e-12,Qe=Math.PI,en=Qe/2,uv=Qe/4,Di=Qe*2,an=180/Qe,We=Qe/180,at=Math.abs,ih=Math.atan,Zr=Math.atan2,Be=Math.cos,T1=Math.ceil,eq=Math.exp,Aw=Math.hypot,lv=Math.log,pS=Math.pow,Oe=Math.sin,Ir=Math.sign||function(e){return e>0?1:e<0?-1:0},$i=Math.sqrt,T$=Math.tan;function tq(e){return e>1?0:e<-1?Qe:Math.acos(e)}function Zi(e){return e>1?en:e<-1?-en:Math.asin(e)}function Hn(){}function cv(e,t){e&&$4.hasOwnProperty(e.type)&&$4[e.type](e,t)}var D4={Feature:function(e,t){cv(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)cv(n[i].geometry,t)}},$4={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Sw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Sw(n[i],t,0)},Polygon:function(e,t){T4(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)T4(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)cv(n[i],t)}};function Sw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function T4(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)Sw(e[n],t,1);t.polygonEnd()}function to(e,t){e&&D4.hasOwnProperty(e.type)?D4[e.type](e,t):cv(e,t)}var fv=new wi,dv=new wi,nq,iq,_w,ww,Cw,cs={point:Hn,lineStart:Hn,lineEnd:Hn,polygonStart:function(){fv=new wi,cs.lineStart=Mse,cs.lineEnd=Fse},polygonEnd:function(){var e=+fv;dv.add(e<0?Di+e:e),this.lineStart=this.lineEnd=this.point=Hn},sphere:function(){dv.add(Di)}};function Mse(){cs.point=kse}function Fse(){rq(nq,iq)}function kse(e,t){cs.point=rq,nq=e,iq=t,e*=We,t*=We,_w=e,ww=Be(t=t/2+uv),Cw=Oe(t)}function rq(e,t){e*=We,t*=We,t=t/2+uv;var n=e-_w,i=n>=0?1:-1,r=i*n,a=Be(t),s=Oe(t),u=Cw*s,c=ww*a+u*Be(r),f=u*i*Oe(r);fv.add(Zr(f,c)),_w=e,ww=a,Cw=s}function Ose(e){return dv=new wi,to(e,cs),dv*2}function hv(e){return[Zr(e[1],e[0]),Zi(e[2])]}function uc(e){var t=e[0],n=e[1],i=Be(n);return[i*Be(t),i*Oe(t),Oe(n)]}function M1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function _d(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mS(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function F1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function gv(e){var t=$i(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Xt,Pi,Kt,pr,zl,aq,sq,nd,fg,cu,xo,Ks={point:Dw,lineStart:M4,lineEnd:F4,polygonStart:function(){Ks.point=uq,Ks.lineStart=Nse,Ks.lineEnd=Rse,fg=new wi,cs.polygonStart()},polygonEnd:function(){cs.polygonEnd(),Ks.point=Dw,Ks.lineStart=M4,Ks.lineEnd=F4,fv<0?(Xt=-(Kt=180),Pi=-(pr=90)):fg>Re?pr=90:fg<-Re&&(Pi=-90),xo[0]=Xt,xo[1]=Kt},sphere:function(){Xt=-(Kt=180),Pi=-(pr=90)}};function Dw(e,t){cu.push(xo=[Xt=e,Kt=e]),t<Pi&&(Pi=t),t>pr&&(pr=t)}function oq(e,t){var n=uc([e*We,t*We]);if(nd){var i=_d(nd,n),r=[i[1],-i[0],0],a=_d(r,i);gv(a),a=hv(a);var s=e-zl,u=s>0?1:-1,c=a[0]*an*u,f,d=at(s)>180;d^(u*zl<c&&c<u*e)?(f=a[1]*an,f>pr&&(pr=f)):(c=(c+360)%360-180,d^(u*zl<c&&c<u*e)?(f=-a[1]*an,f<Pi&&(Pi=f)):(t<Pi&&(Pi=t),t>pr&&(pr=t))),d?e<zl?gr(Xt,e)>gr(Xt,Kt)&&(Kt=e):gr(e,Kt)>gr(Xt,Kt)&&(Xt=e):Kt>=Xt?(e<Xt&&(Xt=e),e>Kt&&(Kt=e)):e>zl?gr(Xt,e)>gr(Xt,Kt)&&(Kt=e):gr(e,Kt)>gr(Xt,Kt)&&(Xt=e)}else cu.push(xo=[Xt=e,Kt=e]);t<Pi&&(Pi=t),t>pr&&(pr=t),nd=n,zl=e}function M4(){Ks.point=oq}function F4(){xo[0]=Xt,xo[1]=Kt,Ks.point=Dw,nd=null}function uq(e,t){if(nd){var n=e-zl;fg.add(at(n)>180?n+(n>0?360:-360):n)}else aq=e,sq=t;cs.point(e,t),oq(e,t)}function Nse(){cs.lineStart()}function Rse(){uq(aq,sq),cs.lineEnd(),at(fg)>Re&&(Xt=-(Kt=180)),xo[0]=Xt,xo[1]=Kt,nd=null}function gr(e,t){return(t-=e)<0?t+360:t}function zse(e,t){return e[0]-t[0]}function k4(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Bse(e){var t,n,i,r,a,s,u;if(pr=Kt=-(Xt=Pi=1/0),cu=[],to(e,Ks),n=cu.length){for(cu.sort(zse),t=1,i=cu[0],a=[i];t<n;++t)r=cu[t],k4(i,r[0])||k4(i,r[1])?(gr(i[0],r[1])>gr(i[0],i[1])&&(i[1]=r[1]),gr(r[0],i[1])>gr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(u=gr(i[1],r[0]))>s&&(s=u,Xt=r[0],Kt=i[1])}return cu=xo=null,Xt===1/0||Pi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Xt,Pi],[Kt,pr]]}var Y0,pv,mv,yv,vv,bv,xv,Ev,$w,Tw,Mw,lq,cq,bi,xi,Ei,ma={sphere:Hn,point:M$,lineStart:O4,lineEnd:N4,polygonStart:function(){ma.lineStart=jse,ma.lineEnd=qse},polygonEnd:function(){ma.lineStart=O4,ma.lineEnd=N4}};function M$(e,t){e*=We,t*=We;var n=Be(t);_p(n*Be(e),n*Oe(e),Oe(t))}function _p(e,t,n){++Y0,mv+=(e-mv)/Y0,yv+=(t-yv)/Y0,vv+=(n-vv)/Y0}function O4(){ma.point=Lse}function Lse(e,t){e*=We,t*=We;var n=Be(t);bi=n*Be(e),xi=n*Oe(e),Ei=Oe(t),ma.point=Use,_p(bi,xi,Ei)}function Use(e,t){e*=We,t*=We;var n=Be(t),i=n*Be(e),r=n*Oe(e),a=Oe(t),s=Zr($i((s=xi*a-Ei*r)*s+(s=Ei*i-bi*a)*s+(s=bi*r-xi*i)*s),bi*i+xi*r+Ei*a);pv+=s,bv+=s*(bi+(bi=i)),xv+=s*(xi+(xi=r)),Ev+=s*(Ei+(Ei=a)),_p(bi,xi,Ei)}function N4(){ma.point=M$}function jse(){ma.point=Ise}function qse(){fq(lq,cq),ma.point=M$}function Ise(e,t){lq=e,cq=t,e*=We,t*=We,ma.point=fq;var n=Be(t);bi=n*Be(e),xi=n*Oe(e),Ei=Oe(t),_p(bi,xi,Ei)}function fq(e,t){e*=We,t*=We;var n=Be(t),i=n*Be(e),r=n*Oe(e),a=Oe(t),s=xi*a-Ei*r,u=Ei*i-bi*a,c=bi*r-xi*i,f=Aw(s,u,c),d=Zi(f),g=f&&-d/f;$w.add(g*s),Tw.add(g*u),Mw.add(g*c),pv+=d,bv+=d*(bi+(bi=i)),xv+=d*(xi+(xi=r)),Ev+=d*(Ei+(Ei=a)),_p(bi,xi,Ei)}function Pse(e){Y0=pv=mv=yv=vv=bv=xv=Ev=0,$w=new wi,Tw=new wi,Mw=new wi,to(e,ma);var t=+$w,n=+Tw,i=+Mw,r=Aw(t,n,i);return r<ov&&(t=bv,n=xv,i=Ev,pv<Re&&(t=mv,n=yv,i=vv),r=Aw(t,n,i),r<ov)?[NaN,NaN]:[Zr(n,t)*an,Zi(i/r)*an]}function Fw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function kw(e,t){return at(e)>Qe&&(e-=Math.round(e/Di)*Di),[e,t]}kw.invert=kw;function dq(e,t,n){return(e%=Di)?t||n?Fw(z4(e),B4(t,n)):z4(e):t||n?B4(t,n):kw}function R4(e){return function(t,n){return t+=e,at(t)>Qe&&(t-=Math.round(t/Di)*Di),[t,n]}}function z4(e){var t=R4(e);return t.invert=R4(-e),t}function B4(e,t){var n=Be(e),i=Oe(e),r=Be(t),a=Oe(t);function s(u,c){var f=Be(c),d=Be(u)*f,g=Oe(u)*f,p=Oe(c),y=p*n+d*i;return[Zr(g*r-y*a,d*n-p*i),Zi(y*r+g*a)]}return s.invert=function(u,c){var f=Be(c),d=Be(u)*f,g=Oe(u)*f,p=Oe(c),y=p*r-g*a;return[Zr(g*r+p*a,d*n+y*i),Zi(y*n-d*i)]},s}function Hse(e){e=dq(e[0]*We,e[1]*We,e.length>2?e[2]*We:0);function t(n){return n=e(n[0]*We,n[1]*We),n[0]*=an,n[1]*=an,n}return t.invert=function(n){return n=e.invert(n[0]*We,n[1]*We),n[0]*=an,n[1]*=an,n},t}function Gse(e,t,n,i,r,a){if(n){var s=Be(t),u=Oe(t),c=i*n;r==null?(r=t+i*Di,a=t-c/2):(r=L4(s,r),a=L4(s,a),(i>0?r<a:r>a)&&(r+=i*Di));for(var f,d=r;i>0?d>a:d<a;d-=c)f=hv([s,-u*Be(d),-u*Oe(d)]),e.point(f[0],f[1])}}function L4(e,t){t=uc(t),t[0]-=e,gv(t);var n=tq(-t[1]);return((-t[2]<0?-n:n)+Di-Re)%Di}function hq(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Hn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function gy(e,t){return at(e[0]-t[0])<Re&&at(e[1]-t[1])<Re}function k1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function gq(e,t,n,i,r){var a=[],s=[],u,c;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,E=v[0],S=v[b],_;if(gy(E,S)){if(!E[2]&&!S[2]){for(r.lineStart(),u=0;u<b;++u)r.point((E=v[u])[0],E[1]);r.lineEnd();return}S[0]+=2*Re}a.push(_=new k1(E,v,null,!0)),s.push(_.o=new k1(E,null,_,!1)),a.push(_=new k1(S,v,null,!1)),s.push(_.o=new k1(S,null,_,!0))}}),!!a.length){for(s.sort(t),U4(a),U4(s),u=0,c=s.length;u<c;++u)s[u].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(u=0,c=d.length;u<c;++u)r.point((g=d[u])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,u=d.length-1;u>=0;--u)r.point((g=d[u])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function U4(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function yS(e){return at(e[0])<=Qe?e[0]:Ir(e[0])*((at(e[0])+Qe)%Di-Qe)}function Yse(e,t){var n=yS(t),i=t[1],r=Oe(i),a=[Oe(n),-Be(n),0],s=0,u=0,c=new wi;r===1?i=en+Re:r===-1&&(i=-en-Re);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=yS(y),b=y[1]/2+uv,E=Oe(b),S=Be(b),_=0;_<p;++_,v=D,E=M,S=$,y=w){var w=g[_],D=yS(w),T=w[1]/2+uv,M=Oe(T),$=Be(T),F=D-v,N=F>=0?1:-1,U=N*F,B=U>Qe,X=E*M;if(c.add(Zr(X*N*Oe(U),S*$+X*Be(U))),s+=B?F+N*Di:F,B^v>=n^D>=n){var G=_d(uc(y),uc(w));gv(G);var P=_d(a,G);gv(P);var z=(B^F>=0?-1:1)*Zi(P[2]);(i>z||i===z&&(G[0]||G[1]))&&(u+=B^F>=0?1:-1)}}return(s<-Re||s<Re&&c<-ov)^u&1}function pq(e,t,n,i){return function(r){var a=t(r),s=hq(),u=t(s),c=!1,f,d,g,p={point:y,lineStart:b,lineEnd:E,polygonStart:function(){p.point=S,p.lineStart=_,p.lineEnd=w,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=E,d=a7(d);var D=Yse(f,i);d.length?(c||(r.polygonStart(),c=!0),gq(d,Vse,D,n,r)):D&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(D,T){e(D,T)&&r.point(D,T)}function v(D,T){a.point(D,T)}function b(){p.point=v,a.lineStart()}function E(){p.point=y,a.lineEnd()}function S(D,T){g.push([D,T]),u.point(D,T)}function _(){u.lineStart(),g=[]}function w(){S(g[0][0],g[0][1]),u.lineEnd();var D=u.clean(),T=s.result(),M,$=T.length,F,N,U;if(g.pop(),f.push(g),g=null,!!$){if(D&1){if(N=T[0],(F=N.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),M=0;M<F;++M)r.point((U=N[M])[0],U[1]);r.lineEnd()}return}$>1&&D&2&&T.push(T.pop().concat(T.shift())),d.push(T.filter(Xse))}}return p}}function Xse(e){return e.length>1}function Vse(e,t){return((e=e.x)[0]<0?e[1]-en-Re:en-e[1])-((t=t.x)[0]<0?t[1]-en-Re:en-t[1])}const j4=pq(function(){return!0},Wse,Zse,[-Qe,-en]);function Wse(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var u=a>0?Qe:-Qe,c=at(a-t);at(c-Qe)<Re?(e.point(t,n=(n+s)/2>0?en:-en),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),r=0):i!==u&&c>=Qe&&(at(t-i)<Re&&(t-=i*Re),at(a-u)<Re&&(a-=u*Re),n=Qse(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(u,n),r=0),e.point(t=a,n=s),i=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Qse(e,t,n,i){var r,a,s=Oe(e-n);return at(s)>Re?ih((Oe(t)*(a=Be(i))*Oe(n)-Oe(i)*(r=Be(t))*Oe(e))/(r*a*s)):(t+i)/2}function Zse(e,t,n,i){var r;if(e==null)r=n*en,i.point(-Qe,r),i.point(0,r),i.point(Qe,r),i.point(Qe,0),i.point(Qe,-r),i.point(0,-r),i.point(-Qe,-r),i.point(-Qe,0),i.point(-Qe,r);else if(at(e[0]-t[0])>Re){var a=e[0]<t[0]?Qe:-Qe;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Kse(e){var t=Be(e),n=2*We,i=t>0,r=at(t)>Re;function a(d,g,p,y){Gse(y,e,n,p,d,g)}function s(d,g){return Be(d)*Be(g)>t}function u(d){var g,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(E,S){var _=[E,S],w,D=s(E,S),T=i?D?0:f(E,S):D?f(E+(E<0?Qe:-Qe),S):0;if(!g&&(v=y=D)&&d.lineStart(),D!==y&&(w=c(g,_),(!w||gy(g,w)||gy(_,w))&&(_[2]=1)),D!==y)b=0,D?(d.lineStart(),w=c(_,g),d.point(w[0],w[1])):(w=c(g,_),d.point(w[0],w[1],2),d.lineEnd()),g=w;else if(r&&g&&i^D){var M;!(T&p)&&(M=c(_,g,!0))&&(b=0,i?(d.lineStart(),d.point(M[0][0],M[0][1]),d.point(M[1][0],M[1][1]),d.lineEnd()):(d.point(M[1][0],M[1][1]),d.lineEnd(),d.lineStart(),d.point(M[0][0],M[0][1],3)))}D&&(!g||!gy(g,_))&&d.point(_[0],_[1]),g=_,y=D,p=T},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return b|(v&&y)<<1}}}function c(d,g,p){var y=uc(d),v=uc(g),b=[1,0,0],E=_d(y,v),S=M1(E,E),_=E[0],w=S-_*_;if(!w)return!p&&d;var D=t*S/w,T=-t*_/w,M=_d(b,E),$=F1(b,D),F=F1(E,T);mS($,F);var N=M,U=M1($,N),B=M1(N,N),X=U*U-B*(M1($,$)-1);if(!(X<0)){var G=$i(X),P=F1(N,(-U-G)/B);if(mS(P,$),P=hv(P),!p)return P;var z=d[0],O=g[0],j=d[1],Y=g[1],V;O<z&&(V=z,z=O,O=V);var ee=O-z,R=at(ee-Qe)<Re,q=R||ee<Re;if(!R&&Y<j&&(V=j,j=Y,Y=V),q?R?j+Y>0^P[1]<(at(P[0]-z)<Re?j:Y):j<=P[1]&&P[1]<=Y:ee>Qe^(z<=P[0]&&P[0]<=O)){var J=F1(N,(-U+G)/B);return mS(J,$),[P,hv(J)]}}}function f(d,g){var p=i?e:Qe-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return pq(s,u,a,i?[0,-e]:[-Qe,e-Qe])}function Jse(e,t,n,i,r,a){var s=e[0],u=e[1],c=t[0],f=t[1],d=0,g=1,p=c-s,y=f-u,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-u,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-u,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=s+d*p,e[1]=u+d*y),g<1&&(t[0]=s+g*p,t[1]=u+g*y),!0}}}}}var X0=1e9,O1=-X0;function mq(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=s(f,g))!==(v=s(d,g))||c(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return at(f[0]-e)<Re?d>0?0:3:at(f[0]-n)<Re?d>0?2:1:at(f[1]-t)<Re?d>0?1:0:d>0?3:2}function u(f,d){return c(f.x,d.x)}function c(f,d){var g=s(f,1),p=s(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=hq(),p,y,v,b,E,S,_,w,D,T,M,$={point:F,lineStart:X,lineEnd:G,polygonStart:U,polygonEnd:B};function F(z,O){r(z,O)&&d.point(z,O)}function N(){for(var z=0,O=0,j=y.length;O<j;++O)for(var Y=y[O],V=1,ee=Y.length,R=Y[0],q,J,ce=R[0],me=R[1];V<ee;++V)q=ce,J=me,R=Y[V],ce=R[0],me=R[1],J<=i?me>i&&(ce-q)*(i-J)>(me-J)*(e-q)&&++z:me<=i&&(ce-q)*(i-J)<(me-J)*(e-q)&&--z;return z}function U(){d=g,p=[],y=[],M=!0}function B(){var z=N(),O=M&&z,j=(p=a7(p)).length;(O||j)&&(f.polygonStart(),O&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),j&&gq(p,u,z,a,f),f.polygonEnd()),d=f,p=y=v=null}function X(){$.point=P,y&&y.push(v=[]),T=!0,D=!1,_=w=NaN}function G(){p&&(P(b,E),S&&D&&g.rejoin(),p.push(g.result())),$.point=F,D&&d.lineEnd()}function P(z,O){var j=r(z,O);if(y&&v.push([z,O]),T)b=z,E=O,S=j,T=!1,j&&(d.lineStart(),d.point(z,O));else if(j&&D)d.point(z,O);else{var Y=[_=Math.max(O1,Math.min(X0,_)),w=Math.max(O1,Math.min(X0,w))],V=[z=Math.max(O1,Math.min(X0,z)),O=Math.max(O1,Math.min(X0,O))];Jse(Y,V,e,t,n,i)?(D||(d.lineStart(),d.point(Y[0],Y[1])),d.point(V[0],V[1]),j||d.lineEnd(),M=!1):j&&(d.lineStart(),d.point(z,O),M=!1)}_=z,w=O,D=j}return $}}function q4(e,t,n){var i=yr(e,t-Re,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function I4(e,t,n){var i=yr(e,t-Re,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function eoe(){var e,t,n,i,r,a,s,u,c=10,f=c,d=90,g=360,p,y,v,b,E=2.5;function S(){return{type:"MultiLineString",coordinates:_()}}function _(){return yr(T1(i/d)*d,n,d).map(v).concat(yr(T1(u/g)*g,s,g).map(b)).concat(yr(T1(t/c)*c,e,c).filter(function(w){return at(w%d)>Re}).map(p)).concat(yr(T1(a/f)*f,r,f).filter(function(w){return at(w%g)>Re}).map(y))}return S.lines=function(){return _().map(function(w){return{type:"LineString",coordinates:w}})},S.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(u).reverse().slice(1))]}},S.extent=function(w){return arguments.length?S.extentMajor(w).extentMinor(w):S.extentMinor()},S.extentMajor=function(w){return arguments.length?(i=+w[0][0],n=+w[1][0],u=+w[0][1],s=+w[1][1],i>n&&(w=i,i=n,n=w),u>s&&(w=u,u=s,s=w),S.precision(E)):[[i,u],[n,s]]},S.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],a=+w[0][1],r=+w[1][1],t>e&&(w=t,t=e,e=w),a>r&&(w=a,a=r,r=w),S.precision(E)):[[t,a],[e,r]]},S.step=function(w){return arguments.length?S.stepMajor(w).stepMinor(w):S.stepMinor()},S.stepMajor=function(w){return arguments.length?(d=+w[0],g=+w[1],S):[d,g]},S.stepMinor=function(w){return arguments.length?(c=+w[0],f=+w[1],S):[c,f]},S.precision=function(w){return arguments.length?(E=+w,p=q4(a,r,90),y=I4(t,e,E),v=q4(u,s,90),b=I4(i,n,E),S):E},S.extentMajor([[-180,-90+Re],[180,90-Re]]).extentMinor([[-180,-80-Re],[180,80+Re]])}const Ng=e=>e;var vS=new wi,Ow=new wi,yq,vq,Nw,Rw,no={point:Hn,lineStart:Hn,lineEnd:Hn,polygonStart:function(){no.lineStart=toe,no.lineEnd=ioe},polygonEnd:function(){no.lineStart=no.lineEnd=no.point=Hn,vS.add(at(Ow)),Ow=new wi},result:function(){var e=vS/2;return vS=new wi,e}};function toe(){no.point=noe}function noe(e,t){no.point=bq,yq=Nw=e,vq=Rw=t}function bq(e,t){Ow.add(Rw*e-Nw*t),Nw=e,Rw=t}function ioe(){bq(yq,vq)}var wd=1/0,Av=wd,Rg=-wd,Sv=Rg,_v={point:roe,lineStart:Hn,lineEnd:Hn,polygonStart:Hn,polygonEnd:Hn,result:function(){var e=[[wd,Av],[Rg,Sv]];return Rg=Sv=-(Av=wd=1/0),e}};function roe(e,t){e<wd&&(wd=e),e>Rg&&(Rg=e),t<Av&&(Av=t),t>Sv&&(Sv=t)}var zw=0,Bw=0,V0=0,wv=0,Cv=0,Wf=0,Lw=0,Uw=0,W0=0,xq,Eq,Qa,Za,jr={point:lc,lineStart:P4,lineEnd:H4,polygonStart:function(){jr.lineStart=ooe,jr.lineEnd=uoe},polygonEnd:function(){jr.point=lc,jr.lineStart=P4,jr.lineEnd=H4},result:function(){var e=W0?[Lw/W0,Uw/W0]:Wf?[wv/Wf,Cv/Wf]:V0?[zw/V0,Bw/V0]:[NaN,NaN];return zw=Bw=V0=wv=Cv=Wf=Lw=Uw=W0=0,e}};function lc(e,t){zw+=e,Bw+=t,++V0}function P4(){jr.point=aoe}function aoe(e,t){jr.point=soe,lc(Qa=e,Za=t)}function soe(e,t){var n=e-Qa,i=t-Za,r=$i(n*n+i*i);wv+=r*(Qa+e)/2,Cv+=r*(Za+t)/2,Wf+=r,lc(Qa=e,Za=t)}function H4(){jr.point=lc}function ooe(){jr.point=loe}function uoe(){Aq(xq,Eq)}function loe(e,t){jr.point=Aq,lc(xq=Qa=e,Eq=Za=t)}function Aq(e,t){var n=e-Qa,i=t-Za,r=$i(n*n+i*i);wv+=r*(Qa+e)/2,Cv+=r*(Za+t)/2,Wf+=r,r=Za*e-Qa*t,Lw+=r*(Qa+e),Uw+=r*(Za+t),W0+=r*3,lc(Qa=e,Za=t)}function Sq(e){this._context=e}Sq.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Di);break}}},result:Hn};var jw=new wi,bS,_q,wq,Q0,Z0,zg={point:Hn,lineStart:function(){zg.point=coe},lineEnd:function(){bS&&Cq(_q,wq),zg.point=Hn},polygonStart:function(){bS=!0},polygonEnd:function(){bS=null},result:function(){var e=+jw;return jw=new wi,e}};function coe(e,t){zg.point=Cq,_q=Q0=e,wq=Z0=t}function Cq(e,t){Q0-=e,Z0-=t,jw.add($i(Q0*Q0+Z0*Z0)),Q0=e,Z0=t}let G4,Dv,Y4,X4;class V4{constructor(t){this._append=t==null?Dq:foe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Y4||this._append!==Dv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Y4=i,Dv=this._append,X4=this._,this._=r}this._+=X4;break}}}result(){const t=this._;return this._="",t.length?t:null}}function Dq(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function foe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return Dq;if(t!==G4){const n=10**t;G4=t,Dv=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Dv}function $q(e,t){let n=3,i=4.5,r,a;function s(u){return u&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),to(u,r(a))),a.result()}return s.area=function(u){return to(u,r(no)),no.result()},s.measure=function(u){return to(u,r(zg)),zg.result()},s.bounds=function(u){return to(u,r(_v)),_v.result()},s.centroid=function(u){return to(u,r(jr)),jr.result()},s.projection=function(u){return arguments.length?(r=u==null?(e=null,Ng):(e=u).stream,s):e},s.context=function(u){return arguments.length?(a=u==null?(t=null,new V4(n)):new Sq(t=u),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(a.pointRadius(+u),+u),s):i},s.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const c=Math.floor(u);if(!(c>=0))throw new RangeError(`invalid digits: ${u}`);n=c}return t===null&&(a=new V4(n)),s},s.projection(e).digits(n).context(t)}function nx(e){return function(t){var n=new qw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function qw(){}qw.prototype={constructor:qw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function F$(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),to(n,e.stream(_v)),t(_v.result()),i!=null&&e.clipExtent(i),e}function ix(e,t,n){return F$(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),u=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([u,c])},n)}function k$(e,t,n){return ix(e,[[0,0],t],n)}function O$(e,t,n){return F$(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,u=-a*i[0][1];e.scale(150*a).translate([s,u])},n)}function N$(e,t,n){return F$(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],u=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,u])},n)}var W4=16,doe=Be(30*We);function Q4(e,t){return+t?goe(e,t):hoe(e)}function hoe(e){return nx({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function goe(e,t){function n(i,r,a,s,u,c,f,d,g,p,y,v,b,E){var S=f-i,_=d-r,w=S*S+_*_;if(w>4*t&&b--){var D=s+p,T=u+y,M=c+v,$=$i(D*D+T*T+M*M),F=Zi(M/=$),N=at(at(M)-1)<Re||at(a-g)<Re?(a+g)/2:Zr(T,D),U=e(N,F),B=U[0],X=U[1],G=B-i,P=X-r,z=_*G-S*P;(z*z/w>t||at((S*G+_*P)/w-.5)>.3||s*p+u*y+c*v<doe)&&(n(i,r,a,s,u,c,B,X,N,D/=$,T/=$,M,b,E),E.point(B,X),n(B,X,N,D,T,M,f,d,g,p,y,v,b,E))}}return function(i){var r,a,s,u,c,f,d,g,p,y,v,b,E={point:S,lineStart:_,lineEnd:D,polygonStart:function(){i.polygonStart(),E.lineStart=T},polygonEnd:function(){i.polygonEnd(),E.lineStart=_}};function S(F,N){F=e(F,N),i.point(F[0],F[1])}function _(){g=NaN,E.point=w,i.lineStart()}function w(F,N){var U=uc([F,N]),B=e(F,N);n(g,p,d,y,v,b,g=B[0],p=B[1],d=F,y=U[0],v=U[1],b=U[2],W4,i),i.point(g,p)}function D(){E.point=S,i.lineEnd()}function T(){_(),E.point=M,E.lineEnd=$}function M(F,N){w(r=F,N),a=g,s=p,u=y,c=v,f=b,E.point=w}function $(){n(g,p,d,y,v,b,a,s,r,u,c,f,W4,i),E.lineEnd=D,D()}return E}}var poe=nx({point:function(e,t){this.stream.point(e*We,t*We)}});function moe(e){return nx({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function yoe(e,t,n,i,r){function a(s,u){return s*=i,u*=r,[t+e*s,n-e*u]}return a.invert=function(s,u){return[(s-t)/e*i,(n-u)/e*r]},a}function Z4(e,t,n,i,r,a){if(!a)return yoe(e,t,n,i,r);var s=Be(a),u=Oe(a),c=s*e,f=u*e,d=s/e,g=u/e,p=(u*n-s*t)/e,y=(u*t+s*n)/e;function v(b,E){return b*=i,E*=r,[c*b-f*E+t,n-f*b-c*E]}return v.invert=function(b,E){return[i*(d*b-g*E+p),r*(y-g*b-d*E)]},v}function bs(e){return Tq(function(){return e})()}function Tq(e){var t,n=150,i=480,r=250,a=0,s=0,u=0,c=0,f=0,d,g=0,p=1,y=1,v=null,b=j4,E=null,S,_,w,D=Ng,T=.5,M,$,F,N,U;function B(z){return F(z[0]*We,z[1]*We)}function X(z){return z=F.invert(z[0],z[1]),z&&[z[0]*an,z[1]*an]}B.stream=function(z){return N&&U===z?N:N=poe(moe(d)(b(M(D(U=z)))))},B.preclip=function(z){return arguments.length?(b=z,v=void 0,P()):b},B.postclip=function(z){return arguments.length?(D=z,E=S=_=w=null,P()):D},B.clipAngle=function(z){return arguments.length?(b=+z?Kse(v=z*We):(v=null,j4),P()):v*an},B.clipExtent=function(z){return arguments.length?(D=z==null?(E=S=_=w=null,Ng):mq(E=+z[0][0],S=+z[0][1],_=+z[1][0],w=+z[1][1]),P()):E==null?null:[[E,S],[_,w]]},B.scale=function(z){return arguments.length?(n=+z,G()):n},B.translate=function(z){return arguments.length?(i=+z[0],r=+z[1],G()):[i,r]},B.center=function(z){return arguments.length?(a=z[0]%360*We,s=z[1]%360*We,G()):[a*an,s*an]},B.rotate=function(z){return arguments.length?(u=z[0]%360*We,c=z[1]%360*We,f=z.length>2?z[2]%360*We:0,G()):[u*an,c*an,f*an]},B.angle=function(z){return arguments.length?(g=z%360*We,G()):g*an},B.reflectX=function(z){return arguments.length?(p=z?-1:1,G()):p<0},B.reflectY=function(z){return arguments.length?(y=z?-1:1,G()):y<0},B.precision=function(z){return arguments.length?(M=Q4($,T=z*z),P()):$i(T)},B.fitExtent=function(z,O){return ix(B,z,O)},B.fitSize=function(z,O){return k$(B,z,O)},B.fitWidth=function(z,O){return O$(B,z,O)},B.fitHeight=function(z,O){return N$(B,z,O)};function G(){var z=Z4(n,0,0,p,y,g).apply(null,t(a,s)),O=Z4(n,i-z[0],r-z[1],p,y,g);return d=dq(u,c,f),$=Fw(t,O),F=Fw(d,$),M=Q4($,T),P()}function P(){return N=U=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&X,G()}}function R$(e){var t=0,n=Qe/3,i=Tq(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*We,n=a[1]*We):[t*an,n*an]},r}function voe(e){var t=Be(e);function n(i,r){return[i*t,Oe(r)/t]}return n.invert=function(i,r){return[i/t,Zi(r*t)]},n}function boe(e,t){var n=Oe(e),i=(n+Oe(t))/2;if(at(i)<Re)return voe(e);var r=1+n*(2*i-n),a=$i(r)/i;function s(u,c){var f=$i(r-2*i*Oe(c))/i;return[f*Oe(u*=i),a-f*Be(u)]}return s.invert=function(u,c){var f=a-c,d=Zr(u,at(f))*Ir(f);return f*i<0&&(d-=Qe*Ir(u)*Ir(f)),[d/i,Zi((r-(u*u+f*f)*i*i)/(2*i))]},s}function $v(){return R$(boe).scale(155.424).center([0,33.6442])}function Mq(){return $v().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xoe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Eoe(){var e,t,n=Mq(),i,r=$v().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=$v().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,c,f={point:function(p,y){c=[p,y]}};function d(p){var y=p[0],v=p[1];return c=null,i.point(y,v),c||(a.point(y,v),c)||(u.point(y,v),c)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,E=(p[1]-v[1])/y;return(E>=.12&&E<.234&&b>=-.425&&b<-.214?r:E>=.166&&E<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=xoe([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Re,b+.12*y+Re],[v-.214*y-Re,b+.234*y-Re]]).stream(f),u=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Re,b+.166*y+Re],[v-.115*y-Re,b+.234*y-Re]]).stream(f),g()},d.fitExtent=function(p,y){return ix(d,p,y)},d.fitSize=function(p,y){return k$(d,p,y)},d.fitWidth=function(p,y){return O$(d,p,y)},d.fitHeight=function(p,y){return N$(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function Fq(e){return function(t,n){var i=Be(t),r=Be(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Oe(t),a*Oe(n)]}}function wp(e){return function(t,n){var i=$i(t*t+n*n),r=e(i),a=Oe(r),s=Be(r);return[Zr(t*a,i*s),Zi(i&&n*a/i)]}}var kq=Fq(function(e){return $i(2/(1+e))});kq.invert=wp(function(e){return 2*Zi(e/2)});function Aoe(){return bs(kq).scale(124.75).clipAngle(180-.001)}var Oq=Fq(function(e){return(e=tq(e))&&e/Oe(e)});Oq.invert=wp(function(e){return e});function Soe(){return bs(Oq).scale(79.4188).clipAngle(180-.001)}function rx(e,t){return[e,lv(T$((en+t)/2))]}rx.invert=function(e,t){return[e,2*ih(eq(t))-en]};function _oe(){return Nq(rx).scale(961/Di)}function Nq(e){var t=bs(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,u,c,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?s=u=c=f=null:(s=+g[0][0],u=+g[0][1],c=+g[1][0],f=+g[1][1]),d()):s==null?null:[[s,u],[c,f]]};function d(){var g=Qe*i(),p=t(Hse(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===rx?[[Math.max(p[0]-g,s),u],[Math.min(p[0]+g,c),f]]:[[s,Math.max(p[1]-g,u)],[c,Math.min(p[1]+g,f)]])}return d()}function N1(e){return T$((en+e)/2)}function woe(e,t){var n=Be(e),i=e===t?Oe(e):lv(n/Be(t))/lv(N1(t)/N1(e)),r=n*pS(N1(e),i)/i;if(!i)return rx;function a(s,u){r>0?u<-en+Re&&(u=-en+Re):u>en-Re&&(u=en-Re);var c=r/pS(N1(u),i);return[c*Oe(i*s),r-c*Be(i*s)]}return a.invert=function(s,u){var c=r-u,f=Ir(i)*$i(s*s+c*c),d=Zr(s,at(c))*Ir(c);return c*i<0&&(d-=Qe*Ir(s)*Ir(c)),[d/i,2*ih(pS(r/f,1/i))-en]},a}function Coe(){return R$(woe).scale(109.5).parallels([30,30])}function Tv(e,t){return[e,t]}Tv.invert=Tv;function Doe(){return bs(Tv).scale(152.63)}function $oe(e,t){var n=Be(e),i=e===t?Oe(e):(n-Be(t))/(t-e),r=n/i+e;if(at(i)<Re)return Tv;function a(s,u){var c=r-u,f=i*s;return[c*Oe(f),r-c*Be(f)]}return a.invert=function(s,u){var c=r-u,f=Zr(s,at(c))*Ir(c);return c*i<0&&(f-=Qe*Ir(s)*Ir(c)),[f/i,r-Ir(i)*$i(s*s+c*c)]},a}function Toe(){return R$($oe).scale(131.154).center([0,13.9389])}var dg=1.340264,hg=-.081106,gg=893e-6,pg=.003796,Mv=$i(3)/2,Moe=12;function Rq(e,t){var n=Zi(Mv*Oe(t)),i=n*n,r=i*i*i;return[e*Be(n)/(Mv*(dg+3*hg*i+r*(7*gg+9*pg*i))),n*(dg+hg*i+r*(gg+pg*i))]}Rq.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,u,c;a<Moe&&(u=n*(dg+hg*i+r*(gg+pg*i))-t,c=dg+3*hg*i+r*(7*gg+9*pg*i),n-=s=u/c,i=n*n,r=i*i*i,!(at(s)<ov));++a);return[Mv*e*(dg+3*hg*i+r*(7*gg+9*pg*i))/Be(n),Zi(Oe(n)/Mv)]};function Foe(){return bs(Rq).scale(177.158)}function zq(e,t){var n=Be(t),i=Be(e)*n;return[n*Oe(e)/i,Oe(t)/i]}zq.invert=wp(ih);function koe(){return bs(zq).scale(144.049).clipAngle(60)}function Ooe(){var e=1,t=0,n=0,i=1,r=1,a=0,s,u,c=null,f,d,g,p=1,y=1,v=nx({point:function(D,T){var M=w([D,T]);this.stream.point(M[0],M[1])}}),b=Ng,E,S;function _(){return p=e*i,y=e*r,E=S=null,w}function w(D){var T=D[0]*p,M=D[1]*y;if(a){var $=M*s-T*u;T=T*s+M*u,M=$}return[T+t,M+n]}return w.invert=function(D){var T=D[0]-t,M=D[1]-n;if(a){var $=M*s+T*u;T=T*s-M*u,M=$}return[T/p,M/y]},w.stream=function(D){return E&&S===D?E:E=v(b(S=D))},w.postclip=function(D){return arguments.length?(b=D,c=f=d=g=null,_()):b},w.clipExtent=function(D){return arguments.length?(b=D==null?(c=f=d=g=null,Ng):mq(c=+D[0][0],f=+D[0][1],d=+D[1][0],g=+D[1][1]),_()):c==null?null:[[c,f],[d,g]]},w.scale=function(D){return arguments.length?(e=+D,_()):e},w.translate=function(D){return arguments.length?(t=+D[0],n=+D[1],_()):[t,n]},w.angle=function(D){return arguments.length?(a=D%360*We,u=Oe(a),s=Be(a),_()):a*an},w.reflectX=function(D){return arguments.length?(i=D?-1:1,_()):i<0},w.reflectY=function(D){return arguments.length?(r=D?-1:1,_()):r<0},w.fitExtent=function(D,T){return ix(w,D,T)},w.fitSize=function(D,T){return k$(w,D,T)},w.fitWidth=function(D,T){return O$(w,D,T)},w.fitHeight=function(D,T){return N$(w,D,T)},w}function Bq(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}Bq.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(at(r)>Re&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Noe(){return bs(Bq).scale(175.295)}function Lq(e,t){return[Be(t)*Oe(e),Oe(t)]}Lq.invert=wp(Zi);function Roe(){return bs(Lq).scale(249.5).clipAngle(90+Re)}function Uq(e,t){var n=Be(t),i=1+Be(e)*n;return[n*Oe(e)/i,Oe(t)/i]}Uq.invert=wp(function(e){return 2*ih(e)});function zoe(){return bs(Uq).scale(250).clipAngle(142)}function jq(e,t){return[lv(T$((en+t)/2)),-e]}jq.invert=function(e,t){return[-t,2*ih(eq(e))-en]};function Boe(){var e=Nq(jq),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Loe=Math.abs,Iw=Math.cos,Fv=Math.sin,Uoe=1e-6,qq=Math.PI,Pw=qq/2,K4=joe(2);function J4(e){return e>1?Pw:e<-1?-Pw:Math.asin(e)}function joe(e){return e>0?Math.sqrt(e):0}function qoe(e,t){var n=e*Fv(t),i=30,r;do t-=r=(t+Fv(t)-n)/(1+Iw(t));while(Loe(r)>Uoe&&--i>0);return t/2}function Ioe(e,t,n){function i(r,a){return[e*r*Iw(a=qoe(n,a)),t*Fv(a)]}return i.invert=function(r,a){return a=J4(a/t),[r/(e*Iw(a)),J4((2*a+Fv(2*a))/n)]},i}var Poe=Ioe(K4/Pw,K4,qq);function Hoe(){return bs(Poe).scale(169.529)}const Goe=$q(),Hw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Yoe(e,t){return function n(){const i=t();return i.type=e,i.path=$q().projection(i),i.copy=i.copy||function(){const r=n();return Hw.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},nU(i)}}function z$(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(kv[e]=Yoe(e,t),this):kv[e]||null}function Iq(e){return e&&e.path||Goe}const kv={albers:Mq,albersusa:Eoe,azimuthalequalarea:Aoe,azimuthalequidistant:Soe,conicconformal:Coe,conicequalarea:$v,conicequidistant:Toe,equalEarth:Foe,equirectangular:Doe,gnomonic:koe,identity:Ooe,mercator:_oe,mollweide:Hoe,naturalEarth1:Noe,orthographic:Roe,stereographic:zoe,transversemercator:Boe};for(const e in kv)z$(e,kv[e]);function Xoe(){}const Vs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Pq(){var e=1,t=1,n=u;function i(c,f){return f.map(d=>r(c,d))}function r(c,f){var d=[],g=[];return a(c,f,p=>{n(p,c,f),Voe(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Woe((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(c,f,d){var g=[],p=[],y,v,b,E,S,_;for(y=v=-1,E=c[0]>=f,Vs[E<<1].forEach(w);++y<e-1;)b=E,E=c[y+1]>=f,Vs[b|E<<1].forEach(w);for(Vs[E<<0].forEach(w);++v<t-1;){for(y=-1,E=c[v*e+e]>=f,S=c[v*e]>=f,Vs[E<<1|S<<2].forEach(w);++y<e-1;)b=E,E=c[v*e+e+y+1]>=f,_=S,S=c[v*e+y+1]>=f,Vs[b|E<<1|S<<2|_<<3].forEach(w);Vs[E|S<<3].forEach(w)}for(y=-1,S=c[v*e]>=f,Vs[S<<2].forEach(w);++y<e-1;)_=S,S=c[v*e+y+1]>=f,Vs[S<<2|_<<3].forEach(w);Vs[S<<3].forEach(w);function w(D){var T=[D[0][0]+y,D[0][1]+v],M=[D[1][0]+y,D[1][1]+v],$=s(T),F=s(M),N,U;(N=p[$])?(U=g[F])?(delete p[N.end],delete g[U.start],N===U?(N.ring.push(M),d(N.ring)):g[N.start]=p[U.end]={start:N.start,end:U.end,ring:N.ring.concat(U.ring)}):(delete p[N.end],N.ring.push(M),p[N.end=F]=N):(N=g[F])?(U=p[$])?(delete g[N.start],delete p[U.end],N===U?(N.ring.push(M),d(N.ring)):g[U.start]=p[N.end]={start:U.start,end:N.end,ring:U.ring.concat(N.ring)}):(delete g[N.start],N.ring.unshift(T),g[N.start=$]=N):g[$]=p[F]={start:$,end:F,ring:[T,M]}}}function s(c){return c[0]*2+c[1]*(e+1)*4}function u(c,f,d){c.forEach(g=>{var p=g[0],y=g[1],v=p|0,b=y|0,E,S=f[b*e+v];p>0&&p<e&&v===p&&(E=f[b*e+v-1],g[0]=p+(d-E)/(S-E)-.5),y>0&&y<t&&b===y&&(E=f[(b-1)*e+v],g[1]=y+(d-E)/(S-E)-.5)})}return i.contour=r,i.size=function(c){if(!arguments.length)return[e,t];var f=Math.floor(c[0]),d=Math.floor(c[1]);return f>=0&&d>=0||ne("invalid size"),e=f,t=d,i},i.smooth=function(c){return arguments.length?(n=c?u:Xoe,i):n===u},i}function Voe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Woe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Qoe(e,t[n]))return r;return 0}function Qoe(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,u=s-1;a<s;u=a++){var c=e[a],f=c[0],d=c[1],g=e[u],p=g[0],y=g[1];if(Zoe(c,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function Zoe(e,t,n){var i;return Koe(e,t,n)&&Joe(e[i=+(e[0]===t[0])],n[i],t[i])}function Koe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Joe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Hq(e,t,n){return function(i){var r=ss(i),a=n?Math.min(r[0],0):r[0],s=r[1],u=s-a,c=t?Mu(a,s,e):u/(e+1);return yr(a+c,s,c)}}function B$(e){te.call(this,null,e)}B$.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};be(B$,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||di,a=Pq().smooth(e.smooth!==!1),s=e.thresholds||eue(i,r,e),u=e.as===null?null:e.as||"contour",c=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,se(s)?s:s(d.values));tue(g,d,f,e),g.forEach(p=>{c.push(Eb(f,mt(u!=null?{[u]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function eue(e,t,n){const i=Hq(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Xl(t(r).values)))}function tue(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Ye(r)&&(r=r(n,i)),Ye(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(dt(r)?r:r[0])||1,u=(dt(r)?r:r[1])||1,c=a&&a[0]||0,f=a&&a[1]||0;e.forEach(Gq(t,s,u,c,f))}function Gq(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,u=t*n<0;function c(g){g.forEach(f)}function f(g){u&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-s)*n+r}return function(g){return g.coordinates.forEach(c),g}}function e8(e,t,n){const i=e>=0?e:T3(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function xS(e){return Ye(e)?e:hi(+e)}function Yq(){var e=c=>c[0],t=c=>c[1],n=Hd,i=[-1,-1],r=960,a=500,s=2;function u(c,f){const d=e8(i[0],c,e)>>s,g=e8(i[1],c,t)>>s,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>s),b=2*y+(a>>s),E=new Float32Array(v*b),S=new Float32Array(v*b);let _=E;c.forEach(D=>{const T=p+(+e(D)>>s),M=y+(+t(D)>>s);T>=0&&T<v&&M>=0&&M<b&&(E[T+M*v]+=+n(D))}),d>0&&g>0?(Rf(v,b,E,S,d),zf(v,b,S,E,g),Rf(v,b,E,S,d),zf(v,b,S,E,g),Rf(v,b,E,S,d),zf(v,b,S,E,g)):d>0?(Rf(v,b,E,S,d),Rf(v,b,S,E,d),Rf(v,b,E,S,d),_=S):g>0&&(zf(v,b,E,S,g),zf(v,b,S,E,g),zf(v,b,E,S,g),_=S);const w=f?Math.pow(2,-2*s):1/s7(_);for(let D=0,T=v*b;D<T;++D)_[D]*=w;return{values:_,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return u.x=function(c){return arguments.length?(e=xS(c),u):e},u.y=function(c){return arguments.length?(t=xS(c),u):t},u.weight=function(c){return arguments.length?(n=xS(c),u):n},u.size=function(c){if(!arguments.length)return[r,a];var f=+c[0],d=+c[1];return f>=0&&d>=0||ne("invalid size"),r=f,a=d,u},u.cellSize=function(c){return arguments.length?((c=+c)>=1||ne("invalid cell size"),s=Math.floor(Math.log(c)/Math.LN2),u):1<<s},u.bandwidth=function(c){return arguments.length?(c=Ee(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&ne("invalid bandwidth"),i=c,u):i},u}function Rf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let u=0,c=0;u<e+r;++u)u<e&&(c+=n[u+s*e]),u>=r&&(u>=a&&(c-=n[u-a+s*e]),i[u-r+s*e]=c/Math.min(u+1,e-1+a-u,a))}function zf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let u=0,c=0;u<t+r;++u)u<t&&(c+=n[s+u*e]),u>=r&&(u>=a&&(c-=n[s+(u-a)*e]),i[s+(u-r)*e]=c/Math.min(u+1,t-1+a-u,a))}function L$(e){te.call(this,null,e)}L$.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const nue=["x","y","weight","size","cellSize","bandwidth"];function Xq(e,t){return nue.forEach(n=>t[n]!=null?e[n](t[n]):0),e}be(L$,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=iue(i,e.groupby),a=(e.groupby||[]).map(tn),s=Xq(Yq(),e),u=e.as||"grid",c=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return c=r.map(d=>mt(f({[u]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function iue(e,t){var n=[],i=d=>d(u),r,a,s,u,c,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)u=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(u);return n}function U$(e){te.call(this,null,e)}U$.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};be(U$,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=Pq().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||Hq(e.count||10,e.nice,!!r),s=e.size,u,c;return r||(r=t.materialize(t.SOURCE).source,u=Xq(Yq(),e)(r,!0),c=Gq(u,u.scale||1,u.scale||1,0,0),s=[u.width,u.height],r=u.values),a=se(a)?a:a(r),r=i.size(s)(r,a),c&&r.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(mt),n}});const Gw="Feature",j$="FeatureCollection",rue="MultiPoint";function q$(e){te.call(this,null,e)}q$.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};be(q$,te,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],u=e.geojson||!r&&di,c=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(si(u))||a&&t.modified(si(a))||s&&t.modified(si(s)),(!this.value||f)&&(c=t.SOURCE,this._features=n=[],this._points=i=[]),u&&t.visit(c,d=>n.push(u(d))),a&&s&&(t.visit(c,d=>{var g=a(d),p=s(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:Gw,geometry:{type:rue,coordinates:i}})),this.value={type:j$,features:n}}});function I$(e){te.call(this,null,e)}I$.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};be(I$,te,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||di,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=Iq(e.projection),n.materialize().reflow()):s=r===di||t.modified(r.fields)?n.ADD_MOD:n.ADD;const u=aue(i,e.pointRadius);return n.visit(s,c=>c[a]=i(r(c))),i.pointRadius(u),n.modifies(a)}});function aue(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function P$(e){te.call(this,null,e)}P$.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};be(P$,te,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1],c;function f(d){const g=n([i(d),r(d)]);g?(d[s]=g[0],d[u]=g[1]):(d[s]=void 0,d[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(c=t.modified(i.fields)||t.modified(r.fields),t.visit(c?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function H$(e){te.call(this,null,e)}H$.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};be(H$,te,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=sue(Iq(e.projection),e.field||Xr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function sue(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function G$(e){te.call(this,[],e),this.generator=eoe()}G$.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};be(G$,te,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Ye(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(tB(n[0],r)):t.add.push(mt(r)),n[0]=r,t}});function Y$(e){te.call(this,null,e)}Y$.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};be(Y$,te,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||di,a=uue(e.opacity,e),s=oue(e.color,e),u=e.as||"image",c={$x:0,$y:0,$value:0,$max:i?Xl(n.map(f=>Xl(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=Ge({},f,c);i||(g.$max=Xl(d.values||[])),f[u]=lue(d,g,s.dep?s:hi(s(g)),a.dep?a:hi(a(g)))}),t.reflow(!0).modifies(u)}});function oue(e,t){let n;return Ye(e)?(n=i=>Ou(e(i,t)),n.dep=Vq(e)):n=hi(Ou(e||"#888")),n}function uue(e,t){let n;return Ye(e)?(n=i=>e(i,t),n.dep=Vq(e)):e?n=hi(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function Vq(e){if(!Ye(e))return!1;const t=Ea(si(e));return t.$x||t.$y||t.$value||t.$max}function lue(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,u=e.y1||0,c=e.x2||r,f=e.y2||a,d=e.values,g=d?E=>d[E]:hu,p=Cu(c-s,f-u),y=p.getContext("2d"),v=y.getImageData(0,0,c-s,f-u),b=v.data;for(let E=u,S=0;E<f;++E){t.$y=E-u;for(let _=s,w=E*r;_<c;++_,S+=4){t.$x=_-s,t.$value=g(_+w);const D=n(t);b[S+0]=D.r,b[S+1]=D.g,b[S+2]=D.b,b[S+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function Wq(e){te.call(this,null,e),this.modified(!0)}be(Wq,te,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=fue(e.type),Hw.forEach(i=>{e[i]!=null&&t8(n,i,e[i])})):Hw.forEach(i=>{e.modified(i)&&t8(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&cue(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function cue(e,t){const n=due(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function fue(e){const t=z$((e||"mercator").toLowerCase());return t||ne("Unrecognized projection type: "+e),t()}function t8(e,t,n){Ye(e[t])&&e[t](n)}function due(e){return e=Ee(e),e.length===1?e[0]:{type:j$,features:e.reduce((t,n)=>t.concat(hue(n)),[])}}function hue(e){return e.type===j$?e.features:Ee(e).filter(t=>t!=null).map(t=>t.type===Gw?t:{type:Gw,geometry:t})}const gue=Object.freeze(Object.defineProperty({__proto__:null,contour:U$,geojson:q$,geopath:I$,geopoint:P$,geoshape:H$,graticule:G$,heatmap:Y$,isocontour:B$,kde2d:L$,projection:Wq},Symbol.toStringTag,{value:"Module"}));function pue(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,u,c=0,f=0;for(a=0;a<s;++a)u=n[a],c+=u.x,f+=u.y;for(c=(c/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)u=n[a],u.x-=c,u.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function mue(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return Qq(this.cover(t,n),t,n,e)}function Qq(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},u=e._x0,c=e._y0,f=e._x1,d=e._y1,g,p,y,v,b,E,S,_;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(g=(u+f)/2))?u=g:f=g,(E=n>=(p=(c+d)/2))?c=p:d=p,r=a,!(a=a[S=E<<1|b]))return r[S]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[S]=s:e._root=s,e;do r=r?r[S]=new Array(4):e._root=new Array(4),(b=t>=(g=(u+f)/2))?u=g:f=g,(E=n>=(p=(c+d)/2))?c=p:d=p;while((S=E<<1|b)===(_=(v>=p)<<1|y>=g));return r[_]=a,r[S]=s,e}function yue(e){var t,n,i=e.length,r,a,s=new Array(i),u=new Array(i),c=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,u[n]=a,r<c&&(c=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(c>d||f>g)return this;for(this.cover(c,f).cover(d,g),n=0;n<i;++n)Qq(this,s[n],u[n],e[n]);return this}function vue(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,u=this._root,c,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,c=new Array(4),c[f]=u,u=c,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function bue(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function xue(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ai(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Eue(e,t,n){var i,r=this._x0,a=this._y0,s,u,c,f,d=this._x1,g=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new Ai(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(u=v.y0)>g||(c=v.x1)<r||(f=v.y1)<a))if(y.length){var E=(s+c)/2,S=(u+f)/2;p.push(new Ai(y[3],E,S,c,f),new Ai(y[2],s,S,E,f),new Ai(y[1],E,u,c,S),new Ai(y[0],s,u,E,S)),(b=(t>=S)<<1|e>=E)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var _=e-+this._x.call(null,y.data),w=t-+this._y.call(null,y.data),D=_*_+w*w;if(D<n){var T=Math.sqrt(n=D);r=e-T,a=t-T,d=e+T,g=t+T,i=y.data}}return i}function Aue(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,u=this._y0,c=this._x1,f=this._y1,d,g,p,y,v,b,E,S;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+c)/2))?s=p:c=p,(b=g>=(y=(u+f)/2))?u=y:f=y,t=n,!(n=n[E=b<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(i=t,S=E)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[E]=a:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[S]=n:this._root=n),this):(this._root=a,this)}function Sue(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function _ue(){return this._root}function wue(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Cue(e){var t=[],n,i=this._root,r,a,s,u,c;for(i&&t.push(new Ai(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,u=n.x1,c=n.y1)&&i.length){var f=(a+u)/2,d=(s+c)/2;(r=i[3])&&t.push(new Ai(r,f,d,u,c)),(r=i[2])&&t.push(new Ai(r,a,d,f,c)),(r=i[1])&&t.push(new Ai(r,f,s,u,d)),(r=i[0])&&t.push(new Ai(r,a,s,f,d))}return this}function Due(e){var t=[],n=[],i;for(this._root&&t.push(new Ai(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,u=i.y0,c=i.x1,f=i.y1,d=(s+c)/2,g=(u+f)/2;(a=r[0])&&t.push(new Ai(a,s,u,d,g)),(a=r[1])&&t.push(new Ai(a,d,u,c,g)),(a=r[2])&&t.push(new Ai(a,s,g,d,f)),(a=r[3])&&t.push(new Ai(a,d,g,c,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function $ue(e){return e[0]}function Tue(e){return arguments.length?(this._x=e,this):this._x}function Mue(e){return e[1]}function Fue(e){return arguments.length?(this._y=e,this):this._y}function X$(e,t,n){var i=new V$(t??$ue,n??Mue,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function V$(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function n8(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Mi=X$.prototype=V$.prototype;Mi.copy=function(){var e=new V$(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=n8(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=n8(i));return e};Mi.add=mue;Mi.addAll=yue;Mi.cover=vue;Mi.data=bue;Mi.extent=xue;Mi.find=Eue;Mi.remove=Aue;Mi.removeAll=Sue;Mi.root=_ue;Mi.size=wue;Mi.visit=Cue;Mi.visitAfter=Due;Mi.x=Tue;Mi.y=Fue;function Si(e){return function(){return e}}function xu(e){return(e()-.5)*1e-6}function kue(e){return e.x+e.vx}function Oue(e){return e.y+e.vy}function Nue(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=Si(e==null?1:+e));function s(){for(var f,d=t.length,g,p,y,v,b,E,S=0;S<a;++S)for(g=X$(t,kue,Oue).visitAfter(u),f=0;f<d;++f)p=t[f],b=n[p.index],E=b*b,y=p.x+p.vx,v=p.y+p.vy,g.visit(_);function _(w,D,T,M,$){var F=w.data,N=w.r,U=b+N;if(F){if(F.index>p.index){var B=y-F.x-F.vx,X=v-F.y-F.vy,G=B*B+X*X;G<U*U&&(B===0&&(B=xu(i),G+=B*B),X===0&&(X=xu(i),G+=X*X),G=(U-(G=Math.sqrt(G)))/G*r,p.vx+=(B*=G)*(U=(N*=N)/(E+N)),p.vy+=(X*=G)*U,F.vx-=B*(U=1-U),F.vy-=X*U)}return}return D>y+U||M<y-U||T>v+U||$<v-U}}function u(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function c(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return s.initialize=function(f,d){t=f,i=d,c()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:Si(+f),c(),s):e},s}function Rue(e){return e.index}function i8(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function zue(e){var t=Rue,n=g,i,r=Si(30),a,s,u,c,f,d=1;e==null&&(e=[]);function g(E){return 1/Math.min(u[E.source.index],u[E.target.index])}function p(E){for(var S=0,_=e.length;S<d;++S)for(var w=0,D,T,M,$,F,N,U;w<_;++w)D=e[w],T=D.source,M=D.target,$=M.x+M.vx-T.x-T.vx||xu(f),F=M.y+M.vy-T.y-T.vy||xu(f),N=Math.sqrt($*$+F*F),N=(N-a[w])/N*E*i[w],$*=N,F*=N,M.vx-=$*(U=c[w]),M.vy-=F*U,T.vx+=$*(U=1-U),T.vy+=F*U}function y(){if(s){var E,S=s.length,_=e.length,w=new Map(s.map((T,M)=>[t(T,M,s),T])),D;for(E=0,u=new Array(S);E<_;++E)D=e[E],D.index=E,typeof D.source!="object"&&(D.source=i8(w,D.source)),typeof D.target!="object"&&(D.target=i8(w,D.target)),u[D.source.index]=(u[D.source.index]||0)+1,u[D.target.index]=(u[D.target.index]||0)+1;for(E=0,c=new Array(_);E<_;++E)D=e[E],c[E]=u[D.source.index]/(u[D.source.index]+u[D.target.index]);i=new Array(_),v(),a=new Array(_),b()}}function v(){if(s)for(var E=0,S=e.length;E<S;++E)i[E]=+n(e[E],E,e)}function b(){if(s)for(var E=0,S=e.length;E<S;++E)a[E]=+r(e[E],E,e)}return p.initialize=function(E,S){s=E,f=S,y()},p.links=function(E){return arguments.length?(e=E,y(),p):e},p.id=function(E){return arguments.length?(t=E,p):t},p.iterations=function(E){return arguments.length?(d=+E,p):d},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:Si(+E),v(),p):n},p.distance=function(E){return arguments.length?(r=typeof E=="function"?E:Si(+E),b(),p):r},p}var Bue={value:()=>{}};function Zq(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new py(n)}function py(e){this._=e}function Lue(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}py.prototype=Zq.prototype={constructor:py,on:function(e,t){var n=this._,i=Lue(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Uue(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=r8(n[r],e.name,t);else if(t==null)for(r in n)n[r]=r8(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new py(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Uue(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function r8(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Bue,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Cd=0,K0=0,_0=0,Kq=1e3,Ov,J0,Nv=0,cc=0,ax=0,Bg=typeof performance=="object"&&performance.now?performance:Date,Jq=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function W$(){return cc||(Jq(jue),cc=Bg.now()+ax)}function jue(){cc=0}function Rv(){this._call=this._time=this._next=null}Rv.prototype=eI.prototype={constructor:Rv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?W$():+n)+(t==null?0:+t),!this._next&&J0!==this&&(J0?J0._next=this:Ov=this,J0=this),this._call=e,this._time=n,Yw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yw())}};function eI(e,t,n){var i=new Rv;return i.restart(e,t,n),i}function que(){W$(),++Cd;for(var e=Ov,t;e;)(t=cc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cd}function a8(){cc=(Nv=Bg.now())+ax,Cd=K0=0;try{que()}finally{Cd=0,Pue(),cc=0}}function Iue(){var e=Bg.now(),t=e-Nv;t>Kq&&(ax-=t,Nv=e)}function Pue(){for(var e,t=Ov,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ov=n);J0=e,Yw(i)}function Yw(e){if(!Cd){K0&&(K0=clearTimeout(K0));var t=e-cc;t>24?(e<1/0&&(K0=setTimeout(a8,e-Bg.now()-ax)),_0&&(_0=clearInterval(_0))):(_0||(Nv=Bg.now(),_0=setInterval(Iue,Kq)),Cd=1,Jq(a8))}}function Hue(e,t,n){var i=new Rv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,u){s=+s,u=u==null?W$():+u,i._restart(function c(f){f+=r,i._restart(c,r+=s,u),a(f)},s,u)},i.restart(e,t,n),i)}const Gue=1664525,Yue=1013904223,s8=4294967296;function Xue(){let e=1;return()=>(e=(Gue*e+Yue)%s8)/s8}function Vue(e){return e.x}function Wue(e){return e.y}var Que=10,Zue=Math.PI*(3-Math.sqrt(5));function Kue(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,u=new Map,c=eI(g),f=Zq("tick","end"),d=Xue();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(c.stop(),f.call("end",t))}function p(b){var E,S=e.length,_;b===void 0&&(b=1);for(var w=0;w<b;++w)for(n+=(a-n)*r,u.forEach(function(D){D(n)}),E=0;E<S;++E)_=e[E],_.fx==null?_.x+=_.vx*=s:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=s:(_.y=_.fy,_.vy=0);return t}function y(){for(var b=0,E=e.length,S;b<E;++b){if(S=e[b],S.index=b,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var _=Que*Math.sqrt(.5+b),w=b*Zue;S.x=_*Math.cos(w),S.y=_*Math.sin(w)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return c.restart(g),t},stop:function(){return c.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),u.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,u.forEach(v),t):d},force:function(b,E){return arguments.length>1?(E==null?u.delete(b):u.set(b,v(E)),t):u.get(b)},find:function(b,E,S){var _=0,w=e.length,D,T,M,$,F;for(S==null?S=1/0:S*=S,_=0;_<w;++_)$=e[_],D=b-$.x,T=E-$.y,M=D*D+T*T,M<S&&(F=$,S=M);return F},on:function(b,E){return arguments.length>1?(f.on(b,E),t):f.on(b)}}}function Jue(){var e,t,n,i,r=Si(-30),a,s=1,u=1/0,c=.81;function f(y){var v,b=e.length,E=X$(e,Vue,Wue).visitAfter(g);for(i=y,v=0;v<b;++v)t=e[v],E.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function g(y){var v=0,b,E,S=0,_,w,D;if(y.length){for(_=w=D=0;D<4;++D)(b=y[D])&&(E=Math.abs(b.value))&&(v+=b.value,S+=E,_+=E*b.x,w+=E*b.y);y.x=_/S,y.y=w/S}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,E){if(!y.value)return!0;var S=y.x-t.x,_=y.y-t.y,w=E-v,D=S*S+_*_;if(w*w/c<D)return D<u&&(S===0&&(S=xu(n),D+=S*S),_===0&&(_=xu(n),D+=_*_),D<s&&(D=Math.sqrt(s*D)),t.vx+=S*y.value*i/D,t.vy+=_*y.value*i/D),!0;if(y.length||D>=u)return;(y.data!==t||y.next)&&(S===0&&(S=xu(n),D+=S*S),_===0&&(_=xu(n),D+=_*_),D<s&&(D=Math.sqrt(s*D)));do y.data!==t&&(w=a[y.data.index]*i/D,t.vx+=S*w,t.vy+=_*w);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:Si(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(u=y*y,f):Math.sqrt(u)},f.theta=function(y){return arguments.length?(c=y*y,f):Math.sqrt(c)},f}function ele(e){var t=Si(.1),n,i,r;typeof e!="function"&&(e=Si(e==null?0:+e));function a(u){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vx+=(r[c]-d.x)*i[c]*u}function s(){if(n){var u,c=n.length;for(i=new Array(c),r=new Array(c),u=0;u<c;++u)i[u]=isNaN(r[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return a.initialize=function(u){n=u,s()},a.strength=function(u){return arguments.length?(t=typeof u=="function"?u:Si(+u),s(),a):t},a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Si(+u),s(),a):e},a}function tle(e){var t=Si(.1),n,i,r;typeof e!="function"&&(e=Si(e==null?0:+e));function a(u){for(var c=0,f=n.length,d;c<f;++c)d=n[c],d.vy+=(r[c]-d.y)*i[c]*u}function s(){if(n){var u,c=n.length;for(i=new Array(c),r=new Array(c),u=0;u<c;++u)i[u]=isNaN(r[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return a.initialize=function(u){n=u,s()},a.strength=function(u){return arguments.length?(t=typeof u=="function"?u:Si(+u),s(),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:Si(+u),s(),a):e},a}const o8={center:pue,collide:Nue,nbody:Jue,link:zue,x:ele,y:tle},eg="forces",Xw=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],nle=["static","iterations"],tI=["x","y","vx","vy"];function Q$(e){te.call(this,null,e)}Q$.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:tI}]};be(Q$,te,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(Xw),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&nI(n,e,0,t)):(this.value=n=rle(t.source,e),n.on("tick",ile(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(nle)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let u=this._argops,c=0,f=u.length,d;c<f;++c)if(d=u[c],!(d.name!==eg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(tI)}});function ile(e,t){return()=>e.touch(t).run()}function rle(e,t){const n=Kue(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),nI(n,t,!0).on("end",()=>a=!0)}function nI(e,t,n,i){var r=Ee(t.forces),a,s,u,c;for(a=0,s=Xw.length;a<s;++a)u=Xw[a],u!==eg&&t.modified(u)&&e[u](t[u]);for(a=0,s=r.length;a<s;++a)c=eg+a,u=n||t.modified(eg,a)?sle(r[a]):i&&ale(r[a],i)?e.force(c):null,u&&e.force(c,u);for(s=e.numForces||0;a<s;++a)e.force(eg+a,null);return e.numForces=r.length,e}function ale(e,t){var n,i;for(n in e)if(Ye(i=e[n])&&t.modified(si(i)))return 1;return 0}function sle(e){var t,n;_e(o8,e.force)||ne("Unrecognized force: "+e.force),t=o8[e.force]();for(n in e)Ye(t[n])&&ole(t[n],e[n],e);return t}function ole(e,t,n){e(Ye(t)?i=>t(i,n):t)}const ule=Object.freeze(Object.defineProperty({__proto__:null,force:Q$},Symbol.toStringTag,{value:"Module"}));function lle(e,t){return e.parent===t.parent?1:2}function cle(e){return e.reduce(fle,0)/e.length}function fle(e,t){return e+t.x}function dle(e){return 1+e.reduce(hle,0)}function hle(e,t){return Math.max(e,t.y)}function gle(e){for(var t;t=e.children;)e=t[0];return e}function ple(e){for(var t;t=e.children;)e=t[t.length-1];return e}function mle(){var e=lle,t=1,n=1,i=!1;function r(a){var s,u=0;a.eachAfter(function(p){var y=p.children;y?(p.x=cle(y),p.y=dle(y)):(p.x=s?u+=e(p,s):0,p.y=0,s=p)});var c=gle(a),f=ple(a),d=c.x-e(c,f)/2,g=f.x+e(f,c)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function yle(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function vle(){return this.eachAfter(yle)}function ble(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function xle(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Ele(e,t){for(var n=this,i=[n],r=[],a,s,u,c=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,u=a.length;s<u;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function Ale(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Sle(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function _le(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function wle(e){for(var t=this,n=Cle(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Cle(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Dle(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function $le(){return Array.from(this)}function Tle(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Mle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Fle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function Z$(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Nle)):t===void 0&&(t=Ole);for(var n=new Dd(e),i,r=[n],a,s,u,c;i=r.pop();)if((s=t(i.data))&&(c=(s=Array.from(s)).length))for(i.children=s,u=c-1;u>=0;--u)r.push(a=s[u]=new Dd(s[u])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(iI)}function kle(){return Z$(this).eachBefore(Rle)}function Ole(e){return e.children}function Nle(e){return Array.isArray(e)?e[1]:null}function Rle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function iI(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Dd(e){this.data=e,this.depth=this.height=0,this.parent=null}Dd.prototype=Z$.prototype={constructor:Dd,count:vle,each:ble,eachAfter:Ele,eachBefore:xle,find:Ale,sum:Sle,sort:_le,path:wle,ancestors:Dle,descendants:$le,leaves:Tle,links:Mle,copy:kle,[Symbol.iterator]:Fle};function my(e){return e==null?null:rI(e)}function rI(e){if(typeof e!="function")throw new Error;return e}function Il(){return 0}function Pf(e){return function(){return e}}const zle=1664525,Ble=1013904223,u8=4294967296;function Lle(){let e=1;return()=>(e=(zle*e+Ble)%u8)/u8}function Ule(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jle(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function qle(e,t){for(var n=0,i=(e=jle(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&aI(s,a)?++n:(s=Ple(r=Ile(r,a)),n=0);return s}function Ile(e,t){var n,i;if(ES(t,e))return[t];for(n=0;n<e.length;++n)if(R1(t,e[n])&&ES(tg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(R1(tg(e[n],e[i]),t)&&R1(tg(e[n],t),e[i])&&R1(tg(e[i],t),e[n])&&ES(sI(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function R1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function aI(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function ES(e,t){for(var n=0;n<t.length;++n)if(!aI(e,t[n]))return!1;return!0}function Ple(e){switch(e.length){case 1:return Hle(e[0]);case 2:return tg(e[0],e[1]);case 3:return sI(e[0],e[1],e[2])}}function Hle(e){return{x:e.x,y:e.y,r:e.r}}function tg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,u=t.r,c=a-n,f=s-i,d=u-r,g=Math.sqrt(c*c+f*f);return{x:(n+a+c/g*d)/2,y:(i+s+f/g*d)/2,r:(g+r+u)/2}}function sI(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,u=t.y,c=t.r,f=n.x,d=n.y,g=n.r,p=i-s,y=i-f,v=r-u,b=r-d,E=c-a,S=g-a,_=i*i+r*r-a*a,w=_-s*s-u*u+c*c,D=_-f*f-d*d+g*g,T=y*v-p*b,M=(v*D-b*w)/(T*2)-i,$=(b*E-v*S)/T,F=(y*w-p*D)/(T*2)-r,N=(p*S-y*E)/T,U=$*$+N*N-1,B=2*(a+M*$+F*N),X=M*M+F*F-a*a,G=-(Math.abs(U)>1e-6?(B+Math.sqrt(B*B-4*U*X))/(2*U):X/B);return{x:i+M+$*G,y:r+F+N*G,r:G}}function l8(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,u,c,f=i*i+s*s;f?(a=t.r+n.r,a*=a,c=e.r+n.r,c*=c,a>c?(r=(f+c-a)/(2*f),u=Math.sqrt(Math.max(0,c/f-r*r)),n.x=e.x-r*i-u*s,n.y=e.y-r*s+u*i):(r=(f+a-c)/(2*f),u=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-u*s,n.y=t.y+r*s+u*i)):(n.x=t.x+n.r,n.y=t.y)}function c8(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function f8(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function z1(e){this._=e,this.next=null,this.previous=null}function Gle(e,t){if(!(a=(e=Ule(e)).length))return 0;var n,i,r,a,s,u,c,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;l8(i,n,r=e[2]),n=new z1(n),i=new z1(i),r=new z1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(c=3;c<a;++c){l8(n._,i._,r=e[c]),r=new z1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(c8(f._,r._)){i=f,n.next=i,i.previous=n,--c;continue e}g+=f._.r,f=f.next}else{if(c8(d._,r._)){n=d,n.next=i,i.previous=n,--c;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=f8(n);(r=r.next)!==i;)(u=f8(r))<s&&(n=r,s=u);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=qle(n,t),c=0;c<a;++c)n=e[c],n.x-=r.x,n.y-=r.y;return r.r}function Yle(e){return Math.sqrt(e.value)}function Xle(){var e=null,t=1,n=1,i=Il;function r(a){const s=Lle();return a.x=t/2,a.y=n/2,e?a.eachBefore(d8(e)).eachAfter(AS(i,.5,s)).eachBefore(h8(1)):a.eachBefore(d8(Yle)).eachAfter(AS(Il,1,s)).eachAfter(AS(i,a.r/Math.min(t,n),s)).eachBefore(h8(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=my(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Pf(+a),r):i},r}function d8(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function AS(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,u=e(i)*t||0,c;if(u)for(a=0;a<s;++a)r[a].r+=u;if(c=Gle(r,n),u)for(a=0;a<s;++a)r[a].r-=u;i.r=c+u}}}function h8(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function oI(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Cp(e,t,n,i,r){for(var a=e.children,s,u=-1,c=a.length,f=e.value&&(i-t)/e.value;++u<c;)s=a[u],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function Vle(){var e=1,t=1,n=0,i=!1;function r(s){var u=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/u,s.eachBefore(a(t,u)),i&&s.eachBefore(oI),s}function a(s,u){return function(c){c.children&&Cp(c,c.x0,s*(c.depth+1)/u,c.x1,s*(c.depth+2)/u);var f=c.x0,d=c.y0,g=c.x1-n,p=c.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),c.x0=f,c.y0=d,c.x1=g,c.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var Wle={depth:-1},g8={},SS={};function Qle(e){return e.id}function Zle(e){return e.parentId}function p8(){var e=Qle,t=Zle,n;function i(r){var a=Array.from(r),s=e,u=t,c,f,d,g,p,y,v,b,E=new Map;if(n!=null){const S=a.map((D,T)=>Kle(n(D,T,r))),_=S.map(m8),w=new Set(S).add("");for(const D of _)w.has(D)||(w.add(D),S.push(D),_.push(m8(D)),a.push(SS));s=(D,T)=>S[T],u=(D,T)=>_[T]}for(d=0,c=a.length;d<c;++d)f=a[d],y=a[d]=new Dd(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,E.set(b,E.has(b)?g8:y)),(v=u(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<c;++d)if(y=a[d],v=y.parent){if(p=E.get(v),!p)throw new Error("missing: "+v);if(p===g8)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===SS&&g.children.length===1;)g=g.children[0],--c;for(let S=a.length-1;S>=0&&(y=a[S],y.data===SS);--S)y.data=null}if(g.parent=Wle,g.eachBefore(function(S){S.depth=S.parent.depth+1,--c}).eachBefore(iI),g.parent=null,c>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=my(r),i):e},i.parentId=function(r){return arguments.length?(t=my(r),i):t},i.path=function(r){return arguments.length?(n=my(r),i):n},i}function Kle(e){e=`${e}`;let t=e.length;return Vw(e,t-1)&&!Vw(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function m8(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Vw(e,t););return e.slice(0,t)}function Vw(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Jle(e,t){return e.parent===t.parent?1:2}function _S(e){var t=e.children;return t?t[0]:e.t}function wS(e){var t=e.children;return t?t[t.length-1]:e.t}function ece(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function tce(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function nce(e,t,n){return e.a.parent===t.parent?e.a:n}function yy(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}yy.prototype=Object.create(Dd.prototype);function ice(e){for(var t=new yy(e,0),n,i=[t],r,a,s,u;n=i.pop();)if(a=n._.children)for(n.children=new Array(u=a.length),s=u-1;s>=0;--s)i.push(r=n.children[s]=new yy(a[s],s)),r.parent=n;return(t.parent=new yy(null,0)).children=[t],t}function rce(){var e=Jle,t=1,n=1,i=null;function r(f){var d=ice(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(c);else{var g=f,p=f,y=f;f.eachBefore(function(_){_.x<g.x&&(g=_),_.x>p.x&&(p=_),_.depth>y.depth&&(y=_)});var v=g===p?1:e(g,p)/2,b=v-g.x,E=t/(p.x+v+b),S=n/(y.depth||1);f.eachBefore(function(_){_.x=(_.x+b)*E,_.y=_.depth*S})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){tce(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=u(f,p,f.parent.A||g[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function u(f,d,g){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],E=p.m,S=y.m,_=v.m,w=b.m,D;v=wS(v),p=_S(p),v&&p;)b=_S(b),y=wS(y),y.a=f,D=v.z+_-p.z-E+e(v._,p._),D>0&&(ece(nce(v,f,g),f,D),E+=D,S+=D),_+=v.m,E+=p.m,w+=b.m,S+=y.m;v&&!wS(y)&&(y.t=v,y.m+=_-S),p&&!_S(b)&&(b.t=p,b.m+=E-w,g=f)}return g}function c(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function sx(e,t,n,i,r){for(var a=e.children,s,u=-1,c=a.length,f=e.value&&(r-n)/e.value;++u<c;)s=a[u],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var uI=(1+Math.sqrt(5))/2;function lI(e,t,n,i,r,a){for(var s=[],u=t.children,c,f,d=0,g=0,p=u.length,y,v,b=t.value,E,S,_,w,D,T,M;d<p;){y=r-n,v=a-i;do E=u[g++].value;while(!E&&g<p);for(S=_=E,T=Math.max(v/y,y/v)/(b*e),M=E*E*T,D=Math.max(_/M,M/S);g<p;++g){if(E+=f=u[g].value,f<S&&(S=f),f>_&&(_=f),M=E*E*T,w=Math.max(_/M,M/S),w>D){E-=f;break}D=w}s.push(c={value:E,dice:y<v,children:u.slice(d,g)}),c.dice?Cp(c,n,i,r,b?i+=v*E/b:a):sx(c,n,i,b?n+=y*E/b:r,a),b-=E,d=g}return s}const cI=(function e(t){function n(i,r,a,s,u){lI(t,i,r,a,s,u)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(uI);function ace(){var e=cI,t=!1,n=1,i=1,r=[0],a=Il,s=Il,u=Il,c=Il,f=Il;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(oI),p}function g(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,E=p.x1-y,S=p.y1-y;E<v&&(v=E=(v+E)/2),S<b&&(b=S=(b+S)/2),p.x0=v,p.y0=b,p.x1=E,p.y1=S,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,E-=u(p)-y,S-=c(p)-y,E<v&&(v=E=(v+E)/2),S<b&&(b=S=(b+S)/2),e(p,v,b,E,S))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=rI(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Pf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Pf(+p),d):s},d.paddingRight=function(p){return arguments.length?(u=typeof p=="function"?p:Pf(+p),d):u},d.paddingBottom=function(p){return arguments.length?(c=typeof p=="function"?p:Pf(+p),d):c},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:Pf(+p),d):f},d}function sce(e,t,n,i,r){var a=e.children,s,u=a.length,c,f=new Array(u+1);for(f[0]=c=s=0;s<u;++s)f[s+1]=c+=a[s].value;d(0,u,e.value,t,n,i,r);function d(g,p,y,v,b,E,S){if(g>=p-1){var _=a[g];_.x0=v,_.y0=b,_.x1=E,_.y1=S;return}for(var w=f[g],D=y/2+w,T=g+1,M=p-1;T<M;){var $=T+M>>>1;f[$]<D?T=$+1:M=$}D-f[T-1]<f[T]-D&&g+1<T&&--T;var F=f[T]-w,N=y-F;if(E-v>S-b){var U=y?(v*N+E*F)/y:E;d(g,T,F,v,b,U,S),d(T,p,N,U,b,E,S)}else{var B=y?(b*N+S*F)/y:S;d(g,T,F,v,b,E,B),d(T,p,N,v,B,E,S)}}}function oce(e,t,n,i,r){(e.depth&1?sx:Cp)(e,t,n,i,r)}const uce=(function e(t){function n(i,r,a,s,u){if((c=i._squarify)&&c.ratio===t)for(var c,f,d,g,p=-1,y,v=c.length,b=i.value;++p<v;){for(f=c[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?Cp(f,r,a,s,b?a+=(u-a)*f.value/b:u):sx(f,r,a,b?r+=(s-r)*f.value/b:s,u),b-=f.value}else i._squarify=c=lI(t,i,r,a,s,u),c.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(uI);function Ww(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function K$(e){te.call(this,null,e)}K$.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const lce=e=>e.values;be(K$,te,{transform(e,t){t.source||ne("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&xb(s.data)&&r.rem.push(s.data)}),this.value=a=Z$({values:Ee(e.keys).reduce((s,u)=>(s.key(u),s),cce()).entries(r.source)},lce),n&&a.each(s=>{s.children&&(s=mt(s.data),r.add.push(s),r.source.push(s))}),Ww(a,ke,ke)),r.source.root=a,r}});function cce(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,u=e[a++],c={},f={};let d=-1,g,p,y;for(;++d<s;)g=u(p=r[d])+"",(y=c[g])?y.push(p):c[g]=[p];for(g in c)f[g]=n(c[g],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const u in r)s.push({key:u,values:i(r[u],a)});return s}return t}function wo(e){te.call(this,null,e)}const fce=(e,t)=>e.parent===t.parent?1:2;be(wo,te,{transform(e,t){(!t.source||!t.source.root)&&ne(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(Tc(e.sort,s=>s.data)),dce(n,this.params,e),n.separation&&n.separation(e.separation!==!1?fce:Hd);try{this.value=n(r)}catch(s){ne(s)}return r.each(s=>hce(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function dce(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function hce(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const Qw=["x","y","r","depth","children"];function J$(e){wo.call(this,e)}J$.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Qw.length,default:Qw}]};be(J$,wo,{layout:Xle,params:["radius","size","padding"],fields:Qw});const Zw=["x0","y0","x1","y1","depth","children"];function eT(e){wo.call(this,e)}eT.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Zw.length,default:Zw}]};be(eT,wo,{layout:Vle,params:["size","round","padding"],fields:Zw});function tT(e){te.call(this,null,e)}tT.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};be(tT,te,{transform(e,t){t.source||ne("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?Ww(p8().id(e.key).parentId(e.parentKey)(r.source),e.key,Vr):Ww(p8()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const y8={tidy:rce,cluster:mle},Kw=["x","y","depth","children"];function nT(e){wo.call(this,e)}nT.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Kw.length,default:Kw}]};be(nT,wo,{layout(e){const t=e||"tidy";if(_e(y8,t))return y8[t]();ne("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Kw});function iT(e){te.call(this,[],e)}iT.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};be(iT,te,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ne("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[ke(s)]=1),i.each(s=>{const u=s.data,c=s.parent&&s.parent.data;c&&a[ke(u)]&&a[ke(c)]&&r.add.push(mt({source:c,target:u}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[ke(s)]=1),n.forEach(s=>{(a[ke(s.source)]||a[ke(s.target)])&&r.mod.push(s)})),r}});const v8={binary:sce,dice:Cp,slice:sx,slicedice:oce,squarify:cI,resquarify:uce},Jw=["x0","y0","x1","y1","depth","children"];function rT(e){wo.call(this,e)}rT.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Jw.length,default:Jw}]};be(rT,wo,{layout(){const e=ace();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(v8,t)?e.tile(v8[t]):ne("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Jw});const gce=Object.freeze(Object.defineProperty({__proto__:null,nest:K$,pack:J$,partition:eT,stratify:tT,tree:nT,treelinks:iT,treemap:rT},Symbol.toStringTag,{value:"Module"})),CS=4278190080;function pce(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function mce(e,t,n,i,r){const a=e.width,s=e.height,u=i||r,c=Cu(a,s).getContext("2d"),f=Cu(a,s).getContext("2d"),d=u&&Cu(a,s).getContext("2d");n.forEach(F=>vy(c,F,!1)),vy(f,t,!1),u&&vy(d,t,!0);const g=DS(c,a,s),p=DS(f,a,s),y=u&&DS(d,a,s),v=e.bitmap(),b=u&&e.bitmap();let E,S,_,w,D,T,M,$;for(S=0;S<s;++S)for(E=0;E<a;++E)D=S*a+E,T=g[D]&CS,$=p[D]&CS,M=u&&y[D]&CS,(T||M||$)&&(_=e(E),w=e(S),!r&&(T||$)&&v.set(_,w),u&&(T||M)&&b.set(_,w));return[v,b]}function DS(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function vy(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>vy(e,a.items,n))}):wr[i].draw(e,{items:n?t.map(yce):t})}function yce(e){const t=Eb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ws=5,pi=31,Lg=32,fu=new Uint32Array(Lg+1),da=new Uint32Array(Lg+1);da[0]=0;fu[0]=~da[0];for(let e=1;e<=Lg;++e)da[e]=da[e-1]<<1|1,fu[e]=~da[e];function vce(e,t){const n=new Uint32Array(~~((e*t+Lg)/Lg));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const u=s*e+a;return n[u>>>Ws]&1<<(u&pi)},set:(a,s)=>{const u=s*e+a;i(u>>>Ws,1<<(u&pi))},clear:(a,s)=>{const u=s*e+a;r(u>>>Ws,~(1<<(u&pi)))},getRange:(a,s,u,c)=>{let f=c,d,g,p,y;for(;f>=s;--f)if(d=f*e+a,g=f*e+u,p=d>>>Ws,y=g>>>Ws,p===y){if(n[p]&fu[d&pi]&da[(g&pi)+1])return!0}else{if(n[p]&fu[d&pi]||n[y]&da[(g&pi)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,u,c)=>{let f,d,g,p,y;for(;s<=c;++s)if(f=s*e+a,d=s*e+u,g=f>>>Ws,p=d>>>Ws,g===p)i(g,fu[f&pi]&da[(d&pi)+1]);else for(i(g,fu[f&pi]),i(p,da[(d&pi)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,u,c)=>{let f,d,g,p,y;for(;s<=c;++s)if(f=s*e+a,d=s*e+u,g=f>>>Ws,p=d>>>Ws,g===p)r(g,da[f&pi]|fu[(d&pi)+1]);else for(r(g,da[f&pi]),r(p,fu[(d&pi)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,s,u,c)=>a<0||s<0||c>=t||u>=e}}function bce(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=u=>~~((u+n)/i);return s.invert=u=>u*i-n,s.bitmap=()=>vce(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function xce(e,t,n,i){const r=e.width,a=e.height;return function(s){const u=s.datum.datum.items[i].items,c=u.length,f=s.datum.fontSize,d=xr.width(s.datum,s.datum.text);let g=0,p,y,v,b,E,S,_;for(let w=0;w<c;++w)p=u[w].x,v=u[w].y,y=u[w].x2===void 0?p:u[w].x2,b=u[w].y2===void 0?v:u[w].y2,E=(p+y)/2,S=(v+b)/2,_=Math.abs(y-p+b-v),_>=g&&(g=_,s.x=E,s.y=S);return E=d/2,S=f/2,p=s.x-E,y=s.x+E,v=s.y-S,b=s.y+S,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function zv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function Eu(e,t,n,i,r,a,s,u){const c=r*a/(i*2),f=e(t-c),d=e(t+c),g=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,g,d,p)||s.getRange(f,g,d,p)||u&&u.getRange(f,g,d,p)}function Ece(e,t,n,i){const r=e.width,a=e.height,s=t[0],u=t[1];function c(f,d,g,p,y){const v=e.invert(f),b=e.invert(d);let E=g,S=a,_;if(!zv(v,b,p,y,r,a)&&!Eu(e,v,b,y,p,E,s,u)&&!Eu(e,v,b,y,p,y,s,null)){for(;S-E>=1;)_=(E+S)/2,Eu(e,v,b,y,p,_,s,u)?S=_:E=_;if(E>g)return[v,b,E,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=xr.width(f.datum,f.datum.text);let v=n?p:0,b=!1,E=!1,S=0,_,w,D,T,M,$,F,N,U,B,X,G,P,z,O,j,Y;for(let V=0;V<g;++V){for(_=d[V].x,D=d[V].y,w=d[V].x2===void 0?_:d[V].x2,T=d[V].y2===void 0?D:d[V].y2,_>w&&(Y=_,_=w,w=Y),D>T&&(Y=D,D=T,T=Y),U=e(_),X=e(w),B=~~((U+X)/2),G=e(D),z=e(T),P=~~((G+z)/2),F=B;F>=U;--F)for(N=P;N>=G;--N)j=c(F,N,v,y,p),j&&([f.x,f.y,v,b]=j);for(F=B;F<=X;++F)for(N=P;N<=z;++N)j=c(F,N,v,y,p),j&&([f.x,f.y,v,b]=j);!b&&!n&&(O=Math.abs(w-_+T-D),M=(_+w)/2,$=(D+T)/2,O>=S&&!zv(M,$,y,p,r,a)&&!Eu(e,M,$,p,y,p,s,null)&&(S=O,f.x=M,f.y=$,E=!0))}return b||E?(M=y/2,$=p/2,s.setRange(e(f.x-M),e(f.y-$),e(f.x+M),e(f.y+$)),f.align="center",f.baseline="middle",!0):!1}}const Ace=[-1,-1,1,1],Sce=[-1,1,-1,1];function _ce(e,t,n,i){const r=e.width,a=e.height,s=t[0],u=t[1],c=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=xr.width(f.datum,f.datum.text),v=[];let b=n?p:0,E=!1,S=!1,_=0,w,D,T,M,$,F,N,U,B,X,G,P;for(let z=0;z<g;++z){for(w=d[z].x,T=d[z].y,D=d[z].x2===void 0?w:d[z].x2,M=d[z].y2===void 0?T:d[z].y2,v.push([e((w+D)/2),e((T+M)/2)]);v.length;)if([N,U]=v.pop(),!(s.get(N,U)||u.get(N,U)||c.get(N,U))){c.set(N,U);for(let O=0;O<4;++O)$=N+Ace[O],F=U+Sce[O],c.outOfBounds($,F,$,F)||v.push([$,F]);if($=e.invert(N),F=e.invert(U),B=b,X=a,!zv($,F,y,p,r,a)&&!Eu(e,$,F,p,y,B,s,u)&&!Eu(e,$,F,p,y,p,s,null)){for(;X-B>=1;)G=(B+X)/2,Eu(e,$,F,p,y,G,s,u)?X=G:B=G;B>b&&(f.x=$,f.y=F,b=B,E=!0)}}!E&&!n&&(P=Math.abs(D-w+M-T),$=(w+D)/2,F=(T+M)/2,P>=_&&!zv($,F,y,p,r,a)&&!Eu(e,$,F,p,y,p,s,null)&&(_=P,f.x=$,f.y=F,S=!0))}return E||S?($=y/2,F=p/2,s.setRange(e(f.x-$),e(f.y-F),e(f.x+$),e(f.y+F)),f.align="center",f.baseline="middle",!0):!1}}const wce=["right","center","left"],Cce=["bottom","middle","top"];function Dce(e,t,n,i){const r=e.width,a=e.height,s=t[0],u=t[1],c=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,E,S,_,w,D,T,M,$,F,N,U,B;for(let X=0;X<c;++X){if(y=(n[X]&3)-1,v=(n[X]>>>2&3)-1,b=y===0&&v===0||i[X]<0,E=y&&v?Math.SQRT1_2:1,S=i[X]<0?-1:1,_=d[1+y]+i[X]*y*E,$=d[4+v]+S*g*v/2+i[X]*v*E,D=$-g/2,T=$+g/2,F=e(_),U=e(D),B=e(T),!p)if(b8(F,F,U,B,s,u,_,_,D,T,d,b))p=xr.width(f.datum,f.datum.text);else continue;if(M=_+S*p*y/2,_=M-p/2,w=M+p/2,F=e(_),N=e(w),b8(F,N,U,B,s,u,_,w,D,T,d,b))return f.x=y?y*S<0?w:_:M,f.y=v?v*S<0?T:D:$,f.align=wce[y*S+1],f.baseline=Cce[v*S+1],s.setRange(F,U,N,B),!0}return!1}}function b8(e,t,n,i,r,a,s,u,c,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const $S=0,TS=4,MS=8,FS=0,kS=1,OS=2,$ce={"top-left":$S+FS,top:$S+kS,"top-right":$S+OS,left:TS+FS,middle:TS+kS,right:TS+OS,"bottom-left":MS+FS,bottom:MS+kS,"bottom-right":MS+OS},Tce={naive:xce,"reduced-search":Ece,floodfill:_ce};function Mce(e,t,n,i,r,a,s,u,c,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=Fce(i,g),y=kce(r,g),v=Oce(e[0].datum),b=v==="group"&&e[0].datum.items[c].marktype,E=b==="area",S=Nce(v,b,u,c),_=f===null||f===1/0,w=E&&d==="naive";let D=-1,T=-1;const M=e.map(U=>{const B=_?xr.width(U,U.text):void 0;return D=Math.max(D,B),T=Math.max(T,U.fontSize),{datum:U,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:S(U),textWidth:B}});f=f===null||f===1/0?Math.max(D,T)+Math.max(...i):f;const $=bce(t[0],t[1],f);let F;if(!w){n&&M.sort((X,G)=>n(X.datum,G.datum));let U=!1;for(let X=0;X<y.length&&!U;++X)U=y[X]===5||p[X]<0;const B=(v&&s||E)&&e.map(X=>X.datum);F=a.length||B?mce($,B||[],a,U,E):pce($,s&&M)}const N=E?Tce[d]($,F,s,c):Dce($,F,y,p);return M.forEach(U=>U.opacity=+N(U)),M}function Fce(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function kce(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=$ce[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Oce(e){return e&&e.mark&&e.mark.marktype}function Nce(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const eC=["x","y","opacity","align","baseline"],fI=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function aT(e){te.call(this,null,e)}aT.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:fI},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:eC.length,default:eC}]};be(aT,te,{transform(e,t){function n(a){const s=e[a];return Ye(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ne("Size parameter should be specified as a [width, height] array.");const r=e.as||eC;return Mce(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ee(e.offset==null?1:e.offset),Ee(e.anchor||fI),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const Rce=Object.freeze(Object.defineProperty({__proto__:null,label:aT},Symbol.toStringTag,{value:"Module"}));function dI(e,t){var n=[],i=function(d){return d(u)},r,a,s,u,c,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)u=e[a],c=t.map(i),f=r[c],f||(r[c]=f=[],f.dims=c,n.push(f)),f.push(u);return n}function sT(e){te.call(this,null,e)}sT.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};be(sT,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=dI(i,e.groupby),a=(e.groupby||[]).map(tn),s=a.length,u=e.as||[tn(e.x),tn(e.y)],c=[];r.forEach(f=>{bB(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<s;++p)g[a[p]]=f.dims[p];g[u[0]]=d[0],g[u[1]]=d[1],c.push(mt(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const tC={constant:q3,linear:I3,log:pB,exp:mB,pow:yB,quad:P3,poly:vB},zce=(e,t)=>e==="poly"?t:e==="quad"?2:1;function oT(e){te.call(this,null,e)}oT.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(tC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};be(oT,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=dI(i,e.groupby),a=(e.groupby||[]).map(tn),s=e.method||"linear",u=e.order==null?3:e.order,c=zce(s,u),f=e.as||[tn(e.x),tn(e.y)],d=tC[s],g=[];let p=e.extent;_e(tC,s)||ne("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,u);if(e.params){g.push(mt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const E=p||ss(y,e.x),S=_=>{const w={};for(let D=0;D<a.length;++D)w[a[D]]=y.dims[D];w[f[0]]=_[0],w[f[1]]=_[1],g.push(mt(w))};s==="linear"||s==="constant"?E.forEach(_=>S([_,b.predict(_)])):$b(b.predict,E,25,200).forEach(S)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const Bce=Object.freeze(Object.defineProperty({__proto__:null,loess:sT,regression:oT},Symbol.toStringTag,{value:"Module"})),fo=11102230246251565e-32,Jn=134217729,Lce=(3+8*fo)*fo;function NS(e,t,n,i,r){let a,s,u,c,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(s=f+a,u=a-(s-f),f=t[++g]):(s=d+a,u=a-(s-d),d=i[++p]),a=s,u!==0&&(r[y++]=u);g<e&&p<n;)d>f==d>-f?(s=a+f,c=s-a,u=a-(s-c)+(f-c),f=t[++g]):(s=a+d,c=s-a,u=a-(s-c)+(d-c),d=i[++p]),a=s,u!==0&&(r[y++]=u);for(;g<e;)s=a+f,c=s-a,u=a-(s-c)+(f-c),f=t[++g],a=s,u!==0&&(r[y++]=u);for(;p<n;)s=a+d,c=s-a,u=a-(s-c)+(d-c),d=i[++p],a=s,u!==0&&(r[y++]=u);return(a!==0||y===0)&&(r[y++]=a),y}function Uce(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Dp(e){return new Float64Array(e)}const jce=(3+16*fo)*fo,qce=(2+12*fo)*fo,Ice=(9+64*fo)*fo*fo,Bf=Dp(4),x8=Dp(8),E8=Dp(12),A8=Dp(16),mi=Dp(4);function Pce(e,t,n,i,r,a,s){let u,c,f,d,g,p,y,v,b,E,S,_,w,D,T,M,$,F;const N=e-r,U=n-r,B=t-a,X=i-a;D=N*X,p=Jn*N,y=p-(p-N),v=N-y,p=Jn*X,b=p-(p-X),E=X-b,T=v*E-(D-y*b-v*b-y*E),M=B*U,p=Jn*B,y=p-(p-B),v=B-y,p=Jn*U,b=p-(p-U),E=U-b,$=v*E-(M-y*b-v*b-y*E),S=T-$,g=T-S,Bf[0]=T-(S+g)+(g-$),_=D+S,g=_-D,w=D-(_-g)+(S-g),S=w-M,g=w-S,Bf[1]=w-(S+g)+(g-M),F=_+S,g=F-_,Bf[2]=_-(F-g)+(S-g),Bf[3]=F;let G=Uce(4,Bf),P=qce*s;if(G>=P||-G>=P||(g=e-N,u=e-(N+g)+(g-r),g=n-U,f=n-(U+g)+(g-r),g=t-B,c=t-(B+g)+(g-a),g=i-X,d=i-(X+g)+(g-a),u===0&&c===0&&f===0&&d===0)||(P=Ice*s+Lce*Math.abs(G),G+=N*d+X*u-(B*f+U*c),G>=P||-G>=P))return G;D=u*X,p=Jn*u,y=p-(p-u),v=u-y,p=Jn*X,b=p-(p-X),E=X-b,T=v*E-(D-y*b-v*b-y*E),M=c*U,p=Jn*c,y=p-(p-c),v=c-y,p=Jn*U,b=p-(p-U),E=U-b,$=v*E-(M-y*b-v*b-y*E),S=T-$,g=T-S,mi[0]=T-(S+g)+(g-$),_=D+S,g=_-D,w=D-(_-g)+(S-g),S=w-M,g=w-S,mi[1]=w-(S+g)+(g-M),F=_+S,g=F-_,mi[2]=_-(F-g)+(S-g),mi[3]=F;const z=NS(4,Bf,4,mi,x8);D=N*d,p=Jn*N,y=p-(p-N),v=N-y,p=Jn*d,b=p-(p-d),E=d-b,T=v*E-(D-y*b-v*b-y*E),M=B*f,p=Jn*B,y=p-(p-B),v=B-y,p=Jn*f,b=p-(p-f),E=f-b,$=v*E-(M-y*b-v*b-y*E),S=T-$,g=T-S,mi[0]=T-(S+g)+(g-$),_=D+S,g=_-D,w=D-(_-g)+(S-g),S=w-M,g=w-S,mi[1]=w-(S+g)+(g-M),F=_+S,g=F-_,mi[2]=_-(F-g)+(S-g),mi[3]=F;const O=NS(z,x8,4,mi,E8);D=u*d,p=Jn*u,y=p-(p-u),v=u-y,p=Jn*d,b=p-(p-d),E=d-b,T=v*E-(D-y*b-v*b-y*E),M=c*f,p=Jn*c,y=p-(p-c),v=c-y,p=Jn*f,b=p-(p-f),E=f-b,$=v*E-(M-y*b-v*b-y*E),S=T-$,g=T-S,mi[0]=T-(S+g)+(g-$),_=D+S,g=_-D,w=D-(_-g)+(S-g),S=w-M,g=w-S,mi[1]=w-(S+g)+(g-M),F=_+S,g=F-_,mi[2]=_-(F-g)+(S-g),mi[3]=F;const j=NS(O,E8,4,mi,A8);return A8[j-1]}function B1(e,t,n,i,r,a){const s=(t-a)*(n-r),u=(e-r)*(i-a),c=s-u,f=Math.abs(s+u);return Math.abs(c)>=jce*f?c:-Pce(e,t,n,i,r,a,f)}const S8=Math.pow(2,-52),L1=new Uint32Array(512);class Bv{static from(t,n=Vce,i=Wce){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const u=t[s];a[2*s]=n(u),a[2*s+1]=i(u)}return new Bv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let u=1/0,c=1/0,f=-1/0,d=-1/0;for(let N=0;N<s;N++){const U=t[2*N],B=t[2*N+1];U<u&&(u=U),B<c&&(c=B),U>f&&(f=U),B>d&&(d=B),this._ids[N]=N}const g=(u+f)/2,p=(c+d)/2;let y,v,b;for(let N=0,U=1/0;N<s;N++){const B=RS(g,p,t[2*N],t[2*N+1]);B<U&&(y=N,U=B)}const E=t[2*y],S=t[2*y+1];for(let N=0,U=1/0;N<s;N++){if(N===y)continue;const B=RS(E,S,t[2*N],t[2*N+1]);B<U&&B>0&&(v=N,U=B)}let _=t[2*v],w=t[2*v+1],D=1/0;for(let N=0;N<s;N++){if(N===y||N===v)continue;const U=Yce(E,S,_,w,t[2*N],t[2*N+1]);U<D&&(b=N,D=U)}let T=t[2*b],M=t[2*b+1];if(D===1/0){for(let B=0;B<s;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];Qf(this._ids,this._dists,0,s-1);const N=new Uint32Array(s);let U=0;for(let B=0,X=-1/0;B<s;B++){const G=this._ids[B],P=this._dists[G];P>X&&(N[U++]=G,X=P)}this.hull=N.subarray(0,U),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(B1(E,S,_,w,T,M)<0){const N=v,U=_,B=w;v=b,_=T,w=M,b=N,T=U,M=B}const $=Xce(E,S,_,w,T,M);this._cx=$.x,this._cy=$.y;for(let N=0;N<s;N++)this._dists[N]=RS(t[2*N],t[2*N+1],$.x,$.y);Qf(this._ids,this._dists,0,s-1),this._hullStart=y;let F=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(E,S)]=y,a[this._hashKey(_,w)]=v,a[this._hashKey(T,M)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let N=0,U,B;N<this._ids.length;N++){const X=this._ids[N],G=t[2*X],P=t[2*X+1];if(N>0&&Math.abs(G-U)<=S8&&Math.abs(P-B)<=S8||(U=G,B=P,X===y||X===v||X===b))continue;let z=0;for(let ee=0,R=this._hashKey(G,P);ee<this._hashSize&&(z=a[(R+ee)%this._hashSize],!(z!==-1&&z!==i[z]));ee++);z=n[z];let O=z,j;for(;j=i[O],B1(G,P,t[2*O],t[2*O+1],t[2*j],t[2*j+1])>=0;)if(O=j,O===z){O=-1;break}if(O===-1)continue;let Y=this._addTriangle(O,X,i[O],-1,-1,r[O]);r[X]=this._legalize(Y+2),r[O]=Y,F++;let V=i[O];for(;j=i[V],B1(G,P,t[2*V],t[2*V+1],t[2*j],t[2*j+1])<0;)Y=this._addTriangle(V,X,j,r[X],-1,r[V]),r[X]=this._legalize(Y+2),i[V]=V,F--,V=j;if(O===z)for(;j=n[O],B1(G,P,t[2*j],t[2*j+1],t[2*O],t[2*O+1])<0;)Y=this._addTriangle(j,X,O,-1,r[O],r[j]),this._legalize(Y+2),r[j]=Y,i[O]=O,F--,O=j;this._hullStart=n[X]=O,i[O]=n[V]=X,i[X]=V,a[this._hashKey(G,P)]=X,a[this._hashKey(t[2*O],t[2*O+1])]=O}this.hull=new Uint32Array(F);for(let N=0,U=this._hullStart;N<F;N++)this.hull[N]=U,U=i[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Hce(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const u=i[t],c=t-t%3;if(s=c+(t+2)%3,u===-1){if(a===0)break;t=L1[--a];continue}const f=u-u%3,d=c+(t+1)%3,g=f+(u+2)%3,p=n[s],y=n[t],v=n[d],b=n[g];if(Gce(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[u]=p;const S=i[g];if(S===-1){let w=this._hullStart;do{if(this._hullTri[w]===g){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,S),this._link(u,i[s]),this._link(s,g);const _=f+(u+1)%3;a<L1.length&&(L1[a++]=_)}else{if(a===0)break;t=L1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const u=this.trianglesLen;return this._triangles[u]=t,this._triangles[u+1]=n,this._triangles[u+2]=i,this._link(u,r),this._link(u+1,a),this._link(u+2,s),this.trianglesLen+=3,u}}function Hce(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function RS(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Gce(e,t,n,i,r,a,s,u){const c=e-s,f=t-u,d=n-s,g=i-u,p=r-s,y=a-u,v=c*c+f*f,b=d*d+g*g,E=p*p+y*y;return c*(g*E-b*y)-f*(d*E-b*p)+v*(d*y-g*p)<0}function Yce(e,t,n,i,r,a){const s=n-e,u=i-t,c=r-e,f=a-t,d=s*s+u*u,g=c*c+f*f,p=.5/(s*f-u*c),y=(f*d-u*g)*p,v=(s*g-c*d)*p;return y*y+v*v}function Xce(e,t,n,i,r,a){const s=n-e,u=i-t,c=r-e,f=a-t,d=s*s+u*u,g=c*c+f*f,p=.5/(s*f-u*c),y=e+(f*d-u*g)*p,v=t+(s*g-c*d)*p;return{x:y,y:v}}function Qf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let u=r-1;for(;u>=n&&t[e[u]]>s;)e[u+1]=e[u--];e[u+1]=a}else{const r=n+i>>1;let a=n+1,s=i;w0(e,r,a),t[e[n]]>t[e[i]]&&w0(e,n,i),t[e[a]]>t[e[i]]&&w0(e,a,i),t[e[n]]>t[e[a]]&&w0(e,n,a);const u=e[a],c=t[u];for(;;){do a++;while(t[e[a]]<c);do s--;while(t[e[s]]>c);if(s<a)break;w0(e,a,s)}e[n+1]=e[s],e[s]=u,i-a+1>=s-n?(Qf(e,t,a,i),Qf(e,t,n,s-1)):(Qf(e,t,n,s-1),Qf(e,t,a,i))}}function w0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Vce(e){return e[0]}function Wce(e){return e[1]}const _8=1e-6;class Yl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>_8||Math.abs(this._y1-a)>_8)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class nC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Qce=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const u=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,E=0,S=i.length,_,w;b<S;b+=3,E+=2){const D=i[b]*2,T=i[b+1]*2,M=i[b+2]*2,$=t[D],F=t[D+1],N=t[T],U=t[T+1],B=t[M],X=t[M+1],G=N-$,P=U-F,z=B-$,O=X-F,j=(G*O-P*z)*2;if(Math.abs(j)<1e-9){if(a===void 0){a=s=0;for(const V of n)a+=t[V*2],s+=t[V*2+1];a/=n.length,s/=n.length}const Y=1e9*Math.sign((a-$)*O-(s-F)*z);_=($+B)/2-Y*O,w=(F+X)/2+Y*z}else{const Y=1/j,V=G*G+P*P,ee=z*z+O*O;_=$+(O*V-P*ee)*Y,w=F+(G*ee-z*V)*Y}u[E]=_,u[E+1]=w}let c=n[n.length-1],f,d=c*4,g,p=t[2*c],y,v=t[2*c+1];r.fill(0);for(let b=0;b<n.length;++b)c=n[b],f=d,g=p,y=v,d=c*4,p=t[2*c],v=t[2*c+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new Yl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:u}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],E=s[y+1],S=s[v],_=s[v+1];this._renderSegment(b,E,S,_,t)}let c,f=a[a.length-1];for(let d=0;d<a.length;++d){c=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=s[g],y=s[g+1],v=c*4,b=this._project(p,y,u[v+2],u[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Yl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Yl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new nC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const u=this._regioncode(t,n),c=this._regioncode(i,r);u===0&&c===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,u,c))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let u=0,c=r.length;u<c;u+=2)if(n[a]===r[u]&&n[a+1]===r[u+1]&&n[(a+2)%s]===r[(u+c-2)%c]&&n[(a+3)%s]===r[(u+c-1)%c]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const u=[];let c=s;do{const f=Math.floor(c/3);if(u.push(n[f*2],n[f*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=r[c]}while(c!==s&&c!==-1);return u}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,u=n[i-2],c=n[i-1],f,d=this._regioncode(u,c),g,p=0;for(let y=0;y<i;y+=2)if(a=u,s=c,u=n[y],c=n[y+1],f=d,d=this._regioncode(u,c),f===0&&d===0)g=p,p=0,r?r.push(u,c):r=[u,c];else{let v,b,E,S,_;if(f===0){if((v=this._clipSegment(a,s,u,c,f,d))===null)continue;[b,E,S,_]=v}else{if((v=this._clipSegment(u,c,a,s,d,f))===null)continue;[S,_,b,E]=v,g=p,p=this._edgecode(b,E),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(b,E):r=[b,E]}g=p,p=this._edgecode(S,_),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(S,_):r=[S,_]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const u=a<s;for(u&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return u?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let c,f,d=a||s;d&8?(c=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(c=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),c=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),c=this.xmin),a?(t=c,n=f,a=this._regioncode(t,n)):(i=c,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let u=Array.from(n),c;if((c=this._project(u[0],u[1],i,r))&&u.unshift(c[0],c[1]),(c=this._project(u[u.length-2],u[u.length-1],a,s))&&u.push(c[0],c[1]),u=this._clipFinite(t,u))for(let f=0,d=u.length,g,p=this._edgecode(u[d-2],u[d-1]);f<d;f+=2)g=p,p=this._edgecode(u[f],u[f+1]),g&&p&&(f=this._edge(t,g,p,u,f),d=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,i,r,a){for(;n!==i;){let s,u;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,u=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,u=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,u=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,u=this.ymin;break}(r[a]!==s||r[a+1]!==u)&&this.contains(t,s,u)&&(r.splice(a,0,s,u),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,u,c;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(c=this.ymin,u=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(c=this.ymax,u=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(u=this.xmax,c=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(u=this.xmin,c=n+(a=s)*r)}return[u,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Zce=2*Math.PI,Lf=Math.pow;function Kce(e){return e[0]}function Jce(e){return e[1]}function efe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function tfe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class uT{static from(t,n=Kce,i=Jce,r){return new uT("length"in t?nfe(t,n,i,r):Float64Array.from(ife(t,n,i,r)))}constructor(t){this._delaunator=new Bv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&efe(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const c=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*c],n[2*c+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=tfe(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new Bv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let c=0,f=i.length;c<f;++c){const d=a[c%3===2?c-2:c+1];(i[c]===-1||s[d]===-1)&&(s[d]=c)}for(let c=0,f=r.length;c<f;++c)u[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Qce(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:u}=this;if(u){const g=u.indexOf(t);g>0&&(yield u[g-1]),g<u.length-1&&(yield u[g+1]);return}const c=n[t];if(c===-1)return;let f=c,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==c)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:u,triangles:c,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=Lf(n-f[t*2],2)+Lf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=c[y];const b=Lf(n-f[v*2],2)+Lf(i-f[v*2+1],2);if(b<g&&(g=b,d=v),y=y%3===2?y-2:y+1,c[y]!==t)break;if(y=u[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&Lf(n-f[y*2],2)+Lf(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Yl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,u=r.length;s<u;++s){const c=r[s];if(c<s)continue;const f=a[s]*2,d=a[c]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Yl:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const u=r[a],c=r[a+1];t.moveTo(u+n,c),t.arc(u,c,n,0,Zce)}return i&&i.value()}renderHull(t){const n=t==null?t=new Yl:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let u=1;u<s;++u){const c=2*i[u];t.lineTo(r[c],r[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new nC;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Yl:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,u=a[t+1]*2,c=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[u],r[u+1]),n.lineTo(r[c],r[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new nC;return this.renderTriangle(t,n),n.value()}}function nfe(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const u=e[s];a[s*2]=t.call(i,u,s,e),a[s*2+1]=n.call(i,u,s,e)}return a}function*ife(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function lT(e){te.call(this,null,e)}lT.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const rfe=[-1e5,-1e5,1e5,1e5];be(lT,te,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:rfe;const a=this.value=uT.from(i,e.x,e.y).voronoi(r);for(let s=0,u=i.length;s<u;++s){const c=a.cellPolygon(s);i[s][n]=c&&!sfe(c)?afe(c):null}return t.reflow(e.modified()).modifies(n)}});function afe(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function sfe(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const ofe=Object.freeze(Object.defineProperty({__proto__:null,voronoi:lT},Symbol.toStringTag,{value:"Module"}));var zS=Math.PI/180,ng=64,by=2048;function ufe(){var e=[256,256],t,n,i,r,a,s,u,c=hI,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(Cu()),b=gfe((e[0]>>5)*e[1]),E=null,S=f.length,_=-1,w=[],D=f.map(M=>({text:t(M),font:n(M),style:r(M),weight:a(M),rotate:s(M),size:~~(i(M)+1e-14),padding:u(M),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:M})).sort((M,$)=>$.size-M.size);++_<S;){var T=D[_];T.x=e[0]*(d()+.5)>>1,T.y=e[1]*(d()+.5)>>1,lfe(v,T,D,_),T.hasText&&y(b,T,E)&&(w.push(T),E?ffe(E,T):E=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return w};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(ng<<5)/b,v.height=by/b;var E=v.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:b}}function y(v,b,E){for(var S=b.x,_=b.y,w=Math.hypot(e[0],e[1]),D=c(e),T=d()<.5?1:-1,M=-T,$,F,N;($=D(M+=T))&&(F=~~$[0],N=~~$[1],!(Math.min(Math.abs(F),Math.abs(N))>=w));)if(b.x=S+F,b.y=_+N,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!E||!cfe(b,v,e[0]))&&(!E||dfe(b,E))){for(var U=b.sprite,B=b.width>>5,X=e[0]>>5,G=b.x-(B<<4),P=G&127,z=32-P,O=b.y1-b.y0,j=(b.y+b.y0)*X+(G>>5),Y,V=0;V<O;V++){Y=0;for(var ee=0;ee<=B;ee++)v[j+ee]|=Y<<z|(ee<B?(Y=U[V*B+ee])>>>P:0);j+=X}return b.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=wl(v),g):n},g.fontStyle=function(v){return arguments.length?(r=wl(v),g):r},g.fontWeight=function(v){return arguments.length?(a=wl(v),g):a},g.rotate=function(v){return arguments.length?(s=wl(v),g):s},g.text=function(v){return arguments.length?(t=wl(v),g):t},g.spiral=function(v){return arguments.length?(c=pfe[v]||v,g):c},g.fontSize=function(v){return arguments.length?(i=wl(v),g):i},g.padding=function(v){return arguments.length?(u=wl(v),g):u},g.random=function(v){return arguments.length?(d=v,g):d},g}function lfe(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(ng<<5)/a,by/a);var s=0,u=0,c=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*zS),E=Math.cos(t.rotate*zS),S=d*E,_=d*b,w=p*E,D=p*b;d=Math.max(Math.abs(S+D),Math.abs(S-D))+31>>5<<5,p=~~Math.max(Math.abs(_+w),Math.abs(_-w))}else d=d+31>>5<<5;if(p>c&&(c=p),s+d>=ng<<5&&(s=0,u+=c,c=0),u+p>=by)break;r.translate((s+(d>>1))/a,(u+(p>>1))/a),t.rotate&&r.rotate(t.rotate*zS),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=u,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var T=r.getImageData(0,0,(ng<<5)/a,by/a).data,M=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)M[y]=0;if(s=t.xoff,s==null)return;u=t.yoff;var $=0,F=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var N=g*v+(y>>5),U=T[(u+v)*(ng<<5)+(s+y)<<2]?1<<31-y%32:0;M[N]|=U,$|=U}$?F=v:(t.y0++,p--,v--,u++)}t.y1=t.y0+F,t.sprite=M.slice(0,(t.y1-t.y0)*g)}}}function cfe(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,u=32-s,c=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<c;g++){d=0;for(var p=0;p<=r;p++)if((d<<u|(p<r?(d=i[g*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function ffe(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function dfe(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function hI(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function hfe(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function gfe(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function wl(e){return typeof e=="function"?e:function(){return e}}var pfe={archimedean:hI,rectangular:hfe};const gI=["x","y","font","fontSize","fontStyle","fontWeight","angle"],mfe=["text","font","rotate","fontSize","fontStyle","fontWeight"];function cT(e){te.call(this,ufe(),e)}cT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:gI}]};be(cT,te,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ne("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Ye(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||mfe.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||gI;let u=e.fontSize||14,c;if(Ye(u)?c=e.fontSizeRange:u=hi(u),c){const v=u,b=gt("sqrt")().domain(ss(r,v)).range(c);u=E=>b(v(E))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(Qr).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,E;v<y;++v)b=f[v],E=b.datum,E[s[0]]=b.x+g,E[s[1]]=b.y+p,E[s[2]]=b.font,E[s[3]]=b.size,E[s[4]]=b.style,E[s[5]]=b.weight,E[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const yfe=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:cT},Symbol.toStringTag,{value:"Module"})),vfe=e=>new Uint8Array(e),bfe=e=>new Uint16Array(e),mg=e=>new Uint32Array(e);function xfe(){let e=8,t=[],n=mg(0),i=U1(0,e),r=U1(0,e);return{data:()=>t,seen:()=>n=Efe(n,t.length),add(a){for(let s=0,u=t.length,c=a.length,f;s<c;++s)f=a[s],f._index=u++,t.push(f)},remove(a,s){const u=t.length,c=Array(u-a),f=t;let d,g,p;for(g=0;!s[g]&&g<u;++g)c[g]=t[g],f[g]=g;for(p=g;g<u;++g)d=t[g],s[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],c[p]=d,d._index=p++),i[g]=0;return t=c,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const u=i.length;(a>u||s>e)&&(e=Math.max(s,e),i=U1(a,e,i),r=U1(a,e))}}}function Efe(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function U1(e,t,n){const i=(t<257?vfe:t<65537?bfe:mg)(e);return n&&i.set(n),i}function w8(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,u=s.bisect(s.range,r.value),c=r.index,f=u[0],d=u[1],g=c.length;let p;for(p=0;p<f;++p)a[c[p]]|=i;for(p=d;p<g;++p)a[c[p]]|=i;return s}}}function C8(){let e=mg(0),t=[],n=0;function i(u,c,f){if(!c.length)return[];const d=n,g=c.length,p=mg(g);let y=Array(g),v,b,E;for(E=0;E<g;++E)y[E]=u(c[E]),p[E]=E;if(y=Afe(y,p),d)v=t,b=e,t=Array(d+g),e=mg(d+g),Sfe(f,v,b,d,y,p,g,t,e);else{if(f>0)for(E=0;E<g;++E)p[E]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(u,c){const f=n;let d,g,p;for(g=0;!c[e[g]]&&g<f;++g);for(p=g;g<f;++g)c[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-u}function a(u){for(let c=0,f=n;c<f;++c)e[c]=u[e[c]]}function s(u,c){let f;return c?f=c.length:(c=t,f=n),[$Q(c,u[0],0,f),Tu(c,u[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Afe(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),FQ(e,t)}function Sfe(e,t,n,i,r,a,s,u,c){let f=0,d=0,g;for(g=0;f<i&&d<s;++g)t[f]<r[d]?(u[g]=t[f],c[g]=n[f++]):(u[g]=r[d],c[g]=a[d++]+e);for(;f<i;++f,++g)u[g]=t[f],c[g]=n[f];for(;d<s;++d,++g)u[g]=r[d],c[g]=a[d]+e}function fT(e){te.call(this,xfe(),e),this._indices=null,this._dims=null}fT.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};be(fT,te,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let u=0,c,f;for(;u<s;++u)c=n[u].fname,f=r[c]||(r[c]=C8()),a.push(w8(f,u,i[u]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,u=this.value,c=u.curr(),f=u.prev(),d=u.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let b,E,S,_,w,D,T,M,$;if(f.set(c),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&u.add(t.add),t.mod.length)for(D={},_=t.mod,T=0,M=_.length;T<M;++T)D[_[T]._index]=1;for(T=0;T<y;++T)$=i[T],(!s[T]||e.modified("fields",T)||t.modified($.fields))&&(S=$.fname,(b=v[S])||(a[S]=E=C8(),v[S]=b=E.insert($,t.source,0)),s[T]=w8(E,T,r[T]).onAdd(b,c));for(T=0,M=u.data().length;T<M;++T)w[T]||(f[T]!==c[T]?g.push(T):D[T]&&c[T]!==d&&p.push(T));return u.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,u=e.fields,c={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,b;r.resize(d,g),r.add(i);const E=r.curr(),S=r.prev(),_=r.all();for(y=0;y<g;++y)v=u[y].fname,b=c[v]||(c[v]=s[v].insert(u[y],i,p)),a[y].onAdd(b,E);for(;p<d;++p)S[p]=_,E[p]!==_&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let u,c,f;for(u=0,c=s.length;u<c;++u)f=s[u]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),u=r.all(),c={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,c[y]=1,s[y]=v=a[y],a[y]=u,v!==u&&f.push(y);for(y in i)i[y].remove(p,c);return this.reindex(t,p,c),c},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let u=0,c,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(c=f,++u);if(u===1)u=i[c].one,this.incrementOne(i[c],r[c],n.add,n.rem);else for(f=0,u=0;f<s;++f)e.modified("query",f)&&(u|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return u},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),u=r.prev(),c=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let E,S,_;if(g<y)for(E=g,S=Math.min(y,p);E<S;++E)_=c[E],a[_]!==n&&(u[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(g>y)for(E=y,S=Math.min(g,v);E<S;++E)_=c[E],a[_]!==n&&(u[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;if(p>v)for(E=Math.max(g,v),S=p;E<S;++E)_=c[E],a[_]!==n&&(u[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;else if(p<v)for(E=Math.max(y,p),S=v;E<S;++E)_=c[E],a[_]!==n&&(u[_]=s[_],a[_]=n,i.push(_)),s[_]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),u=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],g=u[0],p=u[1],y=e.one;let v,b,E;if(f<g)for(v=f,b=Math.min(g,d);v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(f>g)for(v=g,b=Math.min(f,p);v<b;++v)E=s[v],a[E]^=y,i.push(E);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)E=s[v],a[E]^=y,n.push(E);else if(d<p)for(v=Math.max(g,d),b=p;v<b;++v)E=s[v],a[E]^=y,i.push(E);e.range=t.slice()}});function dT(e){te.call(this,null,e)}dT.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};be(dT,te,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),u=i.curr(),c=i.prev(),f=d=>u[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=u[d]&n;return!g&&g^c[d]&n?s[d]:null}),a.filter(a.REM,d=>{const g=u[d]&n;return g&&!(g^(g^c[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(u[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const _fe=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:fT,resolvefilter:dT},Symbol.toStringTag,{value:"Module"})),wfe="RawCode",fc="Literal",Cfe="Property",Dfe="Identifier",$fe="ArrayExpression",Tfe="BinaryExpression",pI="CallExpression",Mfe="ConditionalExpression",Ffe="LogicalExpression",kfe="MemberExpression",Ofe="ObjectExpression",Nfe="UnaryExpression";function $a(e){this.type=e}$a.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Rfe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Rfe(e){switch(e.type){case $fe:return e.elements;case Tfe:case Ffe:return[e.left,e.right];case pI:return[e.callee].concat(e.arguments);case Mfe:return[e.test,e.consequent,e.alternate];case kfe:return[e.object,e.property];case Ofe:return e.properties;case Cfe:return[e.key,e.value];case Nfe:return[e.argument];case Dfe:case fc:case wfe:default:return[]}}var xs,Ce,re,ui,Et,ox=1,$p=2,dc=3,Wu=4,ux=5,Oc=6,qi=7,Tp=8,zfe=9;xs={};xs[ox]="Boolean";xs[$p]="<end>";xs[dc]="Identifier";xs[Wu]="Keyword";xs[ux]="Null";xs[Oc]="Numeric";xs[qi]="Punctuator";xs[Tp]="String";xs[zfe]="RegularExpression";var Bfe="ArrayExpression",Lfe="BinaryExpression",Ufe="CallExpression",jfe="ConditionalExpression",mI="Identifier",qfe="Literal",Ife="LogicalExpression",Pfe="MemberExpression",Hfe="ObjectExpression",Gfe="Property",Yfe="UnaryExpression",Dn="Unexpected token %0",Xfe="Unexpected number",Vfe="Unexpected string",Wfe="Unexpected identifier",Qfe="Unexpected reserved word",Zfe="Unexpected end of input",iC="Invalid regular expression",BS="Invalid regular expression: missing /",yI="Octal literals are not allowed in strict mode.",Kfe="Duplicate data property in object literal not allowed in strict mode",Gn="ILLEGAL",Ug="Disabled.",Jfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ede=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function lx(e,t){if(!e)throw new Error("ASSERT: "+t)}function Js(e){return e>=48&&e<=57}function hT(e){return"0123456789abcdefABCDEF".includes(e)}function yg(e){return"01234567".includes(e)}function tde(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function jg(e){return e===10||e===13||e===8232||e===8233}function Mp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Jfe.test(String.fromCharCode(e))}function Lv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ede.test(String.fromCharCode(e))}const nde={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function vI(){for(;re<ui;){const e=Ce.charCodeAt(re);if(tde(e)||jg(e))++re;else break}}function rC(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)re<ui&&hT(Ce[re])?(i=Ce[re++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ct({},Dn,Gn);return String.fromCharCode(r)}function ide(){var e,t,n,i;for(e=Ce[re],t=0,e==="}"&&ct({},Dn,Gn);re<ui&&(e=Ce[re++],!!hT(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ct({},Dn,Gn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function bI(){var e,t;for(e=Ce.charCodeAt(re++),t=String.fromCharCode(e),e===92&&(Ce.charCodeAt(re)!==117&&ct({},Dn,Gn),++re,e=rC("u"),(!e||e==="\\"||!Mp(e.charCodeAt(0)))&&ct({},Dn,Gn),t=e);re<ui&&(e=Ce.charCodeAt(re),!!Lv(e));)++re,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ce.charCodeAt(re)!==117&&ct({},Dn,Gn),++re,e=rC("u"),(!e||e==="\\"||!Lv(e.charCodeAt(0)))&&ct({},Dn,Gn),t+=e);return t}function rde(){var e,t;for(e=re++;re<ui;){if(t=Ce.charCodeAt(re),t===92)return re=e,bI();if(Lv(t))++re;else break}return Ce.slice(e,re)}function ade(){var e,t,n;return e=re,t=Ce.charCodeAt(re)===92?bI():rde(),t.length===1?n=dc:nde.hasOwnProperty(t)?n=Wu:t==="null"?n=ux:t==="true"||t==="false"?n=ox:n=dc,{type:n,value:t,start:e,end:re}}function LS(){var e=re,t=Ce.charCodeAt(re),n,i=Ce[re],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++re,{type:qi,value:String.fromCharCode(t),start:e,end:re};default:if(n=Ce.charCodeAt(re+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return re+=2,{type:qi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:re};case 33:case 61:return re+=2,Ce.charCodeAt(re)===61&&++re,{type:qi,value:Ce.slice(e,re),start:e,end:re}}}if(s=Ce.substr(re,4),s===">>>=")return re+=4,{type:qi,value:s,start:e,end:re};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return re+=3,{type:qi,value:a,start:e,end:re};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return re+=2,{type:qi,value:r,start:e,end:re};if(r==="//"&&ct({},Dn,Gn),"<>=!+-*%&|^/".includes(i))return++re,{type:qi,value:i,start:e,end:re};ct({},Dn,Gn)}function sde(e){let t="";for(;re<ui&&hT(Ce[re]);)t+=Ce[re++];return t.length===0&&ct({},Dn,Gn),Mp(Ce.charCodeAt(re))&&ct({},Dn,Gn),{type:Oc,value:parseInt("0x"+t,16),start:e,end:re}}function ode(e){let t="0"+Ce[re++];for(;re<ui&&yg(Ce[re]);)t+=Ce[re++];return(Mp(Ce.charCodeAt(re))||Js(Ce.charCodeAt(re)))&&ct({},Dn,Gn),{type:Oc,value:parseInt(t,8),octal:!0,start:e,end:re}}function D8(){var e,t,n;if(n=Ce[re],lx(Js(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=re,e="",n!=="."){if(e=Ce[re++],n=Ce[re],e==="0"){if(n==="x"||n==="X")return++re,sde(t);if(yg(n))return ode(t);n&&Js(n.charCodeAt(0))&&ct({},Dn,Gn)}for(;Js(Ce.charCodeAt(re));)e+=Ce[re++];n=Ce[re]}if(n==="."){for(e+=Ce[re++];Js(Ce.charCodeAt(re));)e+=Ce[re++];n=Ce[re]}if(n==="e"||n==="E")if(e+=Ce[re++],n=Ce[re],(n==="+"||n==="-")&&(e+=Ce[re++]),Js(Ce.charCodeAt(re)))for(;Js(Ce.charCodeAt(re));)e+=Ce[re++];else ct({},Dn,Gn);return Mp(Ce.charCodeAt(re))&&ct({},Dn,Gn),{type:Oc,value:parseFloat(e),start:t,end:re}}function ude(){var e="",t,n,i,r,a=!1;for(t=Ce[re],lx(t==="'"||t==='"',"String literal must starts with a quote"),n=re,++re;re<ui;)if(i=Ce[re++],i===t){t="";break}else if(i==="\\")if(i=Ce[re++],!i||!jg(i.charCodeAt(0)))switch(i){case"u":case"x":Ce[re]==="{"?(++re,e+=ide()):e+=rC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:yg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),re<ui&&yg(Ce[re])&&(a=!0,r=r*8+"01234567".indexOf(Ce[re++]),"0123".includes(i)&&re<ui&&yg(Ce[re])&&(r=r*8+"01234567".indexOf(Ce[re++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ce[re]===`
`&&++re;else{if(jg(i.charCodeAt(0)))break;e+=i}return t!==""&&ct({},Dn,Gn),{type:Tp,value:e,octal:a,start:n,end:re}}function lde(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ct({},iC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ct({},iC)}try{return new RegExp(e,t)}catch{return null}}function cde(){var e,t,n,i,r;for(e=Ce[re],lx(e==="/","Regular expression literal must start with a slash"),t=Ce[re++],n=!1,i=!1;re<ui;)if(e=Ce[re++],t+=e,e==="\\")e=Ce[re++],jg(e.charCodeAt(0))&&ct({},BS),t+=e;else if(jg(e.charCodeAt(0)))ct({},BS);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||ct({},BS),r=t.substr(1,t.length-2),{value:r,literal:t}}function fde(){var e,t,n;for(t="",n="";re<ui&&(e=Ce[re],!!Lv(e.charCodeAt(0)));)++re,e==="\\"&&re<ui?ct({},Dn,Gn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ct({},iC,n),{value:n,literal:t}}function dde(){var e,t,n,i;return Et=null,vI(),e=re,t=cde(),n=fde(),i=lde(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:re}}function hde(e){return e.type===dc||e.type===Wu||e.type===ox||e.type===ux}function xI(){if(vI(),re>=ui)return{type:$p,start:re,end:re};const e=Ce.charCodeAt(re);return Mp(e)?ade():e===40||e===41||e===59?LS():e===39||e===34?ude():e===46?Js(Ce.charCodeAt(re+1))?D8():LS():Js(e)?D8():LS()}function Hi(){const e=Et;return re=e.end,Et=xI(),re=e.end,e}function EI(){const e=re;Et=xI(),re=e}function gde(e){const t=new $a(Bfe);return t.elements=e,t}function $8(e,t,n){const i=new $a(e==="||"||e==="&&"?Ife:Lfe);return i.operator=e,i.left=t,i.right=n,i}function pde(e,t){const n=new $a(Ufe);return n.callee=e,n.arguments=t,n}function mde(e,t,n){const i=new $a(jfe);return i.test=e,i.consequent=t,i.alternate=n,i}function gT(e){const t=new $a(mI);return t.name=e,t}function ig(e){const t=new $a(qfe);return t.value=e.value,t.raw=Ce.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function T8(e,t,n){const i=new $a(Pfe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function yde(e){const t=new $a(Hfe);return t.properties=e,t}function M8(e,t,n){const i=new $a(Gfe);return i.key=t,i.value=n,i.kind=e,i}function vde(e,t){const n=new $a(Yfe);return n.operator=e,n.argument=t,n.prefix=!0,n}function ct(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(lx(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=re,n.description=r,n}function cx(e){e.type===$p&&ct(e,Zfe),e.type===Oc&&ct(e,Xfe),e.type===Tp&&ct(e,Vfe),e.type===dc&&ct(e,Wfe),e.type===Wu&&ct(e,Qfe),ct(e,Dn,e.value)}function li(e){const t=Hi();(t.type!==qi||t.value!==e)&&cx(t)}function Lt(e){return Et.type===qi&&Et.value===e}function US(e){return Et.type===Wu&&Et.value===e}function bde(){const e=[];for(re=Et.start,li("[");!Lt("]");)Lt(",")?(Hi(),e.push(null)):(e.push(hc()),Lt("]")||li(","));return Hi(),gde(e)}function F8(){re=Et.start;const e=Hi();return e.type===Tp||e.type===Oc?(e.octal&&ct(e,yI),ig(e)):gT(e.value)}function xde(){var e,t,n,i;if(re=Et.start,e=Et,e.type===dc)return n=F8(),li(":"),i=hc(),M8("init",n,i);if(e.type===$p||e.type===qi)cx(e);else return t=F8(),li(":"),i=hc(),M8("init",t,i)}function Ede(){var e=[],t,n,i,r={},a=String;for(re=Et.start,li("{");!Lt("}");)t=xde(),t.key.type===mI?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ct({},Kfe):r[i]=!0,e.push(t),Lt("}")||li(",");return li("}"),yde(e)}function Ade(){li("(");const e=pT();return li(")"),e}const Sde={if:1};function _de(){var e,t,n;if(Lt("("))return Ade();if(Lt("["))return bde();if(Lt("{"))return Ede();if(e=Et.type,re=Et.start,e===dc||Sde[Et.value])n=gT(Hi().value);else if(e===Tp||e===Oc)Et.octal&&ct(Et,yI),n=ig(Hi());else{if(e===Wu)throw new Error(Ug);e===ox?(t=Hi(),t.value=t.value==="true",n=ig(t)):e===ux?(t=Hi(),t.value=null,n=ig(t)):Lt("/")||Lt("/=")?(n=ig(dde()),EI()):cx(Hi())}return n}function wde(){const e=[];if(li("("),!Lt(")"))for(;re<ui&&(e.push(hc()),!Lt(")"));)li(",");return li(")"),e}function Cde(){re=Et.start;const e=Hi();return hde(e)||cx(e),gT(e.value)}function Dde(){return li("."),Cde()}function $de(){li("[");const e=pT();return li("]"),e}function Tde(){var e,t,n;for(e=_de();;)if(Lt("."))n=Dde(),e=T8(".",e,n);else if(Lt("("))t=wde(),e=pde(e,t);else if(Lt("["))n=$de(),e=T8("[",e,n);else break;return e}function k8(){const e=Tde();if(Et.type===qi&&(Lt("++")||Lt("--")))throw new Error(Ug);return e}function xy(){var e,t;if(Et.type!==qi&&Et.type!==Wu)t=k8();else{if(Lt("++")||Lt("--"))throw new Error(Ug);if(Lt("+")||Lt("-")||Lt("~")||Lt("!"))e=Hi(),t=xy(),t=vde(e.value,t);else{if(US("delete")||US("void")||US("typeof"))throw new Error(Ug);t=k8()}}return t}function O8(e){let t=0;if(e.type!==qi&&e.type!==Wu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Mde(){var e,t,n,i,r,a,s,u,c,f;if(e=Et,c=xy(),i=Et,r=O8(i),r===0)return c;for(i.prec=r,Hi(),t=[e,Et],s=xy(),a=[c,i,s];(r=O8(Et))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),u=a.pop().value,c=a.pop(),t.pop(),n=$8(u,c,s),a.push(n);i=Hi(),i.prec=r,a.push(i),t.push(Et),n=xy(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=$8(a[f-1].value,a[f-2],n),f-=2;return n}function hc(){var e,t,n;return e=Mde(),Lt("?")&&(Hi(),t=hc(),li(":"),n=hc(),e=mde(e,t,n)),e}function pT(){const e=hc();if(Lt(","))throw new Error(Ug);return e}function AI(e){Ce=e,re=0,ui=Ce.length,Et=null,EI();const t=pT();if(Et.type!==$p)throw new Error("Unexpect token after expression.");return t}var SI={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function _I(e){function t(s,u,c,f){let d=e(u[0]);return c&&(d=c+"("+d+")",c.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+u.slice(1).map(e).join(",")+")")}function n(s,u,c){return f=>t(s,f,u,c)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ne("Missing arguments to clamp function."),s.length>3&&ne("Too many arguments to clamp function.");const u=s.map(e);return"Math.max("+u[1]+", Math.min("+u[2]+","+u[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&ne("Missing arguments to if function."),s.length>3&&ne("Too many arguments to if function.");const u=s.map(e);return"("+u[0]+"?"+u[1]+":"+u[2]+")"}}}function Fde(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function wI(e){e=e||{};const t=e.allowed?Ea(e.allowed):{},n=e.forbidden?Ea(e.forbidden):{},i=e.constants||SI,r=(e.functions||_I)(g),a=e.globalvar,s=e.fieldvar,u=Ye(a)?a:v=>`${a}["${v}"]`;let c={},f={},d=0;function g(v){if(Se(v))return v;const b=p[v.type];return b==null&&ne("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:_e(n,b)?ne("Illegal identifier: "+b):_e(i,b)?i[b]:_e(t,b)?b:(c[b]=1,u(b))},MemberExpression:v=>{const b=!v.computed,E=g(v.object);b&&(d+=1);const S=g(v.property);return E===s&&(f[Fde(S)]=1),b&&(d-=1),E+(b?"."+S:"["+S+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ne("Illegal callee type: "+v.callee.type);const b=v.callee.name,E=v.arguments,S=_e(r,b)&&r[b];return S||ne("Unrecognized function: "+b),Ye(S)?S(E):S+"("+E.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>{for(const b of v.properties){const E=b.key.name;wz.has(E)&&ne("Illegal property: "+E)}return"{"+v.properties.map(g).join(",")+"}"},Property:v=>{d+=1;const b=g(v.key);return d-=1,b+":"+g(v.value)}};function y(v){const b={code:g(v),globals:Object.keys(c),fields:Object.keys(f)};return c={},f={},b}return y.functions=r,y.constants=i,y}const N8=Symbol("vega_selection_getter");function CI(e){return(!e.getter||!e.getter[N8])&&(e.getter=Xr(e.field),e.getter[N8]=!0),e.getter}const mT="intersect",R8="union",kde="vlMulti",Ode="vlPoint",z8="or",Nde="and",Va="_vgsid_",qg=Xr(Va),Rde="E",zde="R",Bde="R-E",Lde="R-LE",Ude="R-RE",jde="E-LT",qde="E-LTE",Ide="E-GT",Pde="E-GTE",Hde="E-VALID",Gde="E-ONE",Uv="index:unit";function B8(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,u;a<r;++a)if(u=n[a],s=CI(u)(e),Su(s)&&(s=ri(s)),Su(i[a])&&(i[a]=ri(i[a])),se(i[a])&&Su(i[a][0])&&(i[a]=i[a].map(ri)),u.type===Rde){if(se(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(u.type===zde){if(!Yf(s,i[a]))return!1}else if(u.type===Ude){if(!Yf(s,i[a],!0,!1))return!1}else if(u.type===Bde){if(!Yf(s,i[a],!1,!1))return!1}else if(u.type===Lde){if(!Yf(s,i[a],!1,!0))return!1}else if(u.type===jde){if(s>=i[a])return!1}else if(u.type===qde){if(s>i[a])return!1}else if(u.type===Ide){if(s<=i[a])return!1}else if(u.type===Pde){if(s<i[a])return!1}else if(u.type===Hde){if(s===null||isNaN(s))return!1}else if(u.type===Gde&&i[a].indexOf(s)===-1)return!1;return!0}function Yde(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[Uv]&&i[Uv].value:void 0,s=n===mT,u=r.length,c=0,f,d,g,p,y;c<u;++c)if(f=r[c],a&&s){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=B8(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=B8(t,f),s^y)return y;return u&&s}const DI=Vd(qg),Xde=DI.left,Vde=DI.right;function Wde(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[Uv]&&i[Uv].value:void 0,s=n===mT,u=qg(t),c=Xde(r,u);if(c===r.length||qg(r[c])!==u)return!1;if(a&&s){if(a.size===1)return!0;if(Vde(r,u)-c<a.size)return!1}return!0}function Qde(e,t){return se(e)||ne("First argument to selectionTuples must be an array."),Ae(t)||ne("Second argument to selectionTuples must be an object."),e.map(n=>Ge(t.fields?{values:t.fields.map(i=>CI(i)(n.datum))}:{[Va]:qg(n.datum)},t))}function Zde(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},u={},c={},f,d,g,p,y,v,b,E,S,_,w=a.length,D=0,T,M;D<w;++D)if(f=a[D],p=f.unit,d=f.fields,g=f.values,d&&g){for(T=0,M=d.length;T<M;++T)y=d[T],b=s[y.field]||(s[y.field]={}),E=b[p]||(b[p]=[]),c[y.field]=S=y.type.charAt(0),_=jS[`${S}_union`],b[p]=_(E,Ee(g[T]));n&&(E=u[p]||(u[p]=[]),E.push(Ee(g).reduce(($,F,N)=>($[d[N].field]=F,$),{})))}else y=Va,v=qg(f),b=s[y]||(s[y]={}),E=b[p]||(b[p]=[]),E.push(v),n&&(E=u[p]||(u[p]=[]),E.push({[Va]:v}));if(t=t||R8,s[Va]?s[Va]=jS[`${Va}_${t}`](...Object.values(s[Va])):Object.keys(s).forEach($=>{s[$]=Object.keys(s[$]).map(F=>s[$][F]).reduce((F,N)=>F===void 0?N:jS[`${c[$]}_${t}`](F,N))}),a=Object.keys(u),n&&a.length){const $=i?Ode:kde;s[$]=t===R8?{[z8]:a.reduce((F,N)=>(F.push(...u[N]),F),[])}:{[Nde]:a.map(F=>({[z8]:u[F]}))}}return s}var jS={[`${Va}_union`]:jQ,[`${Va}_intersect`]:LQ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=ri(t[0]),i=ri(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=ri(t[0]),i=ri(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Kde=":",Jde="@";function yT(e,t,n,i){t[0].type!==fc&&ne("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&st(t).value,s="unit",u=Jde+s,c=Kde+r;a===mT&&!_e(i,u)&&(i[u]=n.getData(r).indataRef(n,s)),_e(i,c)||(i[c]=n.getData(r).tuplesRef())}function $I(e){const t=this.context.data[e];return t?t.values.value:[]}function ehe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function the(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Vr).insert(t)),1}function nhe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Fp=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},ihe=Fp("format"),TI=Fp("timeFormat"),rhe=Fp("utcFormat"),ahe=Fp("timeParse"),she=Fp("utcParse"),j1=new Date(2e3,0,1);function fx(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(j1.setYear(2e3),j1.setMonth(e),j1.setDate(t),TI.call(this,j1,n))}function ohe(e){return fx.call(this,e,1,"%B")}function uhe(e){return fx.call(this,e,1,"%b")}function lhe(e){return fx.call(this,0,2+e,"%A")}function che(e){return fx.call(this,0,2+e,"%a")}const fhe=":",dhe="@",aC="%",MI="$";function vT(e,t,n,i){t[0].type!==fc&&ne("First argument to data functions must be a string literal.");const r=t[0].value,a=fhe+r;if(!_e(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function hhe(e,t,n,i){t[0].type!==fc&&ne("First argument to indata must be a string literal."),t[1].type!==fc&&ne("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=dhe+a;_e(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function Ci(e,t,n,i){if(t[0].type===fc)L8(n,i,t[0].value);else for(e in n.scales)L8(n,i,e)}function L8(e,t,n){const i=aC+n;if(!_e(t,i))try{t[i]=e.scaleRef(n)}catch{}}function Es(e,t){if(Se(e)){const n=t.scales[e];return n&&qN(n.value)?n.value:void 0}else if(Ye(e))return qN(e)?e:void 0}function ghe(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Ci,n._range=Ci,n._scale=Ci;const i=r=>"_["+(r.type===fc?ve(aC+r.value):ve(aC)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function bT(e,t){return function(n,i,r){if(n){const a=Es(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const phe=bT("area",Ose),mhe=bT("bounds",Bse),yhe=bT("centroid",Pse);function vhe(e,t){const n=Es(e,(t||this).context);return n&&n.scale()}function bhe(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function xT(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function xhe(){return xT(this.context.dataflow,"warn",arguments)}function Ehe(){return xT(this.context.dataflow,"info",arguments)}function Ahe(){return xT(this.context.dataflow,"debug",arguments)}function qS(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function sC(e){const t=Ou(e),n=qS(t.r),i=qS(t.g),r=qS(t.b);return .2126*n+.7152*i+.0722*r}function She(e,t){const n=sC(e),i=sC(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function _he(){const e=[].slice.call(arguments);return e.unshift({}),Ge(...e)}function FI(e,t){return e===t||e!==e&&t!==t?!0:se(e)?se(t)&&e.length===t.length?whe(e,t):!1:Ae(e)&&Ae(t)?kI(e,t):!1}function whe(e,t){for(let n=0,i=e.length;n<i;++n)if(!FI(e[n],t[n]))return!1;return!0}function kI(e,t){for(const n in e)if(!FI(e[n],t[n]))return!1;return!0}function U8(e){return t=>kI(e,t)}function Che(e,t,n,i,r,a){const s=this.context.dataflow,u=this.context.data[e],c=u.input,f=s.stamp();let d=u.changes,g,p;if(s._trigger===!1||!(c.value.length||t||i))return 0;if((!d||d.stamp<f)&&(u.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{u.modified=!0,s.pulse(c,d).run()},!0,1)),n&&(g=n===!0?Vr:se(n)||xb(n)?n:U8(n),d.remove(g)),t&&d.insert(t),i&&(g=U8(i),c.value.some(g)?d.remove(g):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Dhe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function $he(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const j8={};function The(e,t){const n=j8[t]||(j8[t]=Xr(t));return se(e)?e.map(n):n(e)}function dx(e){return se(e)||ArrayBuffer.isView(e)?e:null}function ET(e){return dx(e)||(Se(e)?e:null)}function Mhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return dx(e).join(...n)}function Fhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ET(e).indexOf(...n)}function khe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ET(e).lastIndexOf(...n)}function Ohe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return ET(e).slice(...n)}function Nhe(e,t,n){return Ye(n)&&ne("Function argument passed to replace."),!Se(t)&&!o3(t)&&ne("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Rhe(e){return dx(e).slice().reverse()}function zhe(e){return dx(e).slice().sort(ip)}function Bhe(e,t,n){return RD(e||0,t||0,n||0)}function Lhe(e,t){const n=Es(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Uhe(e,t){const n=Es(e,(t||this).context);return n?n.copy():void 0}function jhe(e,t){const n=Es(e,(t||this).context);return n?n.domain():[]}function qhe(e,t,n){const i=Es(e,(n||this).context);return i?se(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Ihe(e,t){const n=Es(e,(t||this).context);return n&&n.range?n.range():[]}function Phe(e,t,n){const i=Es(e,(n||this).context);return i?i(t):void 0}function Hhe(e,t,n,i,r){e=Es(e,(r||this).context);const a=EU(t,n);let s=e.domain(),u=s[0],c=st(s),f=di;return c-u?f=lU(e,u,c):e=(e.interpolator?gt("sequential")().interpolator(e.interpolator()):gt("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,c=1]),e.ticks&&(s=e.ticks(+i||15),u!==s[0]&&s.unshift(u),c!==st(s)&&s.push(c)),s.forEach(d=>a.stop(f(d),e(d))),a}function Ghe(e,t,n){const i=Es(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Yhe(e){let t=null;return function(n){return n?Fg(n,t=t||xd(e)):e}}const OI=e=>e.data;function NI(e,t){const n=$I.call(t,e);return n.root&&n.root.lookup||{}}function Xhe(e,t,n){const i=NI(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(OI):void 0}function Vhe(e,t){const n=NI(e,this)[t];return n?n.ancestors().map(OI):void 0}const RI=()=>typeof window<"u"&&window||null;function Whe(){const e=RI();return e?e.screen:{}}function Qhe(){const e=RI();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Zhe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function zI(e,t,n){if(!e)return[];const[i,r]=e,a=new hn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return vj(s,a,Khe(t))}function Khe(e){let t=null;if(e){const n=Ee(e.marktype),i=Ee(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function Jhe(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ee(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function e0e(e){return Ee(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function t0e(e,t,n){const{x:i,y:r,mark:a}=n,s=new hn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,f]of t)c<s.x1&&(s.x1=c),c>s.x2&&(s.x2=c),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),zI([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(c=>n0e(c.x,c.y,t))}function n0e(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,u]=n[a],[c,f]=n[r];f>t!=u>t&&e<(s-c)*(t-f)/(u-f)+c&&i++}return i&1}const Ig={random(){return Qr()},cumulativeNormal:wb,cumulativeLogNormal:R3,cumulativeUniform:U3,densityNormal:M3,densityLogNormal:N3,densityUniform:L3,quantileNormal:Cb,quantileLogNormal:z3,quantileUniform:j3,sampleNormal:_b,sampleLogNormal:O3,sampleUniform:B3,isArray:se,isBoolean:Hu,isDate:Su,isDefined(e){return e!==void 0},isNumber:dt,isObject:Ae,isRegExp:o3,isString:Se,isTuple:xb,isValid(e){return e!=null&&e===e},toBoolean:l3,toDate(e){return c3(e)},toNumber:ri,toString:f3,indexof:Fhe,join:Mhe,lastindexof:khe,replace:Nhe,reverse:Rhe,sort:zhe,slice:Ohe,flush:qz,lerp:Pz,merge:_he,pad:Yz,peek:st,pluck:The,span:rp,inrange:Yf,truncate:Xz,rgb:Ou,lab:Gy,hcl:Yy,hsl:Py,luminance:sC,contrast:She,sequence:yr,format:ihe,utcFormat:rhe,utcParse:she,utcOffset:C7,utcSequence:T7,timeFormat:TI,timeParse:ahe,timeOffset:w7,timeSequence:$7,timeUnitSpecifier:g7,monthFormat:ohe,monthAbbrevFormat:uhe,dayFormat:lhe,dayAbbrevFormat:che,quarter:Bz,utcquarter:Lz,week:m7,utcweek:b7,dayofyear:p7,utcdayofyear:v7,warn:xhe,info:Ehe,debug:Ahe,extent(e){return ss(e)},inScope:bhe,intersect:zI,clampRange:Uz,pinchDistance:Dhe,pinchAngle:$he,screen:Whe,containerSize:Zhe,windowSize:Qhe,bandspace:Bhe,setdata:the,pathShape:Yhe,panLinear:Oz,panLog:Nz,panPow:Rz,panSymlog:zz,zoomLinear:n3,zoomLog:i3,zoomPow:My,zoomSymlog:r3,encode:nhe,modify:Che,lassoAppend:Jhe,lassoPath:e0e,intersectLasso:t0e},i0e=["view","item","group","xy","x","y"],r0e="event.vega.",BI="this.",AT={},LI={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ve(MI+e)}]`,functions:a0e,constants:SI,visitors:AT},oC=wI(LI);function a0e(e){const t=_I(e);i0e.forEach(n=>t[n]=r0e+n);for(const n in Ig)t[n]=BI+n;return Ge(t,ghe(e,Ig,AT)),t}function un(e,t,n){return arguments.length===1?Ig[e]:(Ig[e]=t,n&&(AT[e]=n),oC&&(oC.functions[e]=BI+e),this)}un("bandwidth",Lhe,Ci);un("copy",Uhe,Ci);un("domain",jhe,Ci);un("range",Ihe,Ci);un("invert",qhe,Ci);un("scale",Phe,Ci);un("gradient",Hhe,Ci);un("geoArea",phe,Ci);un("geoBounds",mhe,Ci);un("geoCentroid",yhe,Ci);un("geoShape",Ghe,Ci);un("geoScale",vhe,Ci);un("indata",ehe,hhe);un("data",$I,vT);un("treePath",Xhe,vT);un("treeAncestors",Vhe,vT);un("vlSelectionTest",Yde,yT);un("vlSelectionIdTest",Wde,yT);un("vlSelectionResolve",Zde,yT);un("vlSelectionTuples",Qde);function fs(e,t){const n={};let i;try{e=Se(e)?e:ve(e)+"",i=AI(e)}catch{ne("Expression parse error: "+e)}i.visit(a=>{if(a.type!==pI)return;const s=a.callee.name,u=LI.visitors[s];u&&u(s,a.arguments,t,n)});const r=oC(i);return r.globals.forEach(a=>{const s=MI+a;!_e(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Ge({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function s0e(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const o0e=Ea(["rule"]),q8=Ea(["group","image","rect"]);function u0e(e,t){let n="";return o0e[t]||(e.x2&&(e.x?(q8[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(q8[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function ST(e){return(e+"").toLowerCase()}function l0e(e){return ST(e)==="operator"}function c0e(e){return ST(e)==="collect"}function C0(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function f0e(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var d0e={operator:(e,t)=>C0(e,["_"],t.code),parameter:(e,t)=>C0(e,["datum","_"],t.code),event:(e,t)=>C0(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return C0(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+ve(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=u0e(i,n),r+="return m;",C0(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ve).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const u=t[s];let c,f;return a.path?(c=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,c=`this.f${s}(a)`,f=`this.f${s}(b)`),f0e(c,f,-u,u)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function h0e(e){const t=this;l0e(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function g0e(e){const t=this;if(e.params){const n=t.get(e.id);n||ne("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function p0e(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=se(r)?r.map(a=>I8(a,n,t)):I8(r,n,t)}return t}function I8(e,t,n){if(!e||!Ae(e))return e;for(let i=0,r=P8.length,a;i<r;++i)if(a=P8[i],_e(e,a.key))return a.parse(e,t,n);return e}var P8=[{key:"$ref",parse:m0e},{key:"$key",parse:v0e},{key:"$expr",parse:y0e},{key:"$field",parse:b0e},{key:"$encode",parse:E0e},{key:"$compare",parse:x0e},{key:"$context",parse:A0e},{key:"$subflow",parse:S0e},{key:"$tupleid",parse:_0e}];function m0e(e,t){return t.get(e.$ref)||ne("Operator not defined: "+e.$ref)}function y0e(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=tr(t.parameterExpression(e.$expr),e.$fields))}function v0e(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=u3(e.$key,e.$flat,t.expr.codegen))}function b0e(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Xr(e.$field,e.$name,t.expr.codegen))}function x0e(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Ee(e.$compare).map(r=>r&&r.$tupleid?ke:r);return t.fn[n]||(t.fn[n]=a3(i,e.$order,t.expr.codegen))}function E0e(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=tr(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function A0e(e,t){return t}function S0e(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),u=s.get(n.operators[0].id),c=s.signals.parent;return c&&c.set(a),u.detachSubflow=()=>t.detach(s),u}}function _0e(){return ke}function w0e(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ne("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function C0e(e){var t=this,n=Ae(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ne("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const D0e={skip:!0};function $0e(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function T0e(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],D0e)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Vr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const u=t.subcontext[s];u&&u.setState(a)})}function UI(e,t,n,i){return new jI(e,t,n,i)}function jI(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||d0e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function H8(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}jI.prototype=H8.prototype={fork(){const e=new H8(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),c0e(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(u=>s[u]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[ST(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:s0e,parseOperator:h0e,parseOperatorParameters:g0e,parseParameters:p0e,parseStream:w0e,parseUpdate:C0e,getState:$0e,setState:T0e};function M0e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),qI(t,e.description()))}function qI(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function F0e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const IS="default";function k0e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:IS,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Se(r)?r:r.user:IS,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Se(i)||(r=i.item,i=i.user),uC(e,i&&i!==IS?i:r||i),r},{cursor:t})}function uC(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function jv(e,t){var n=e._runtime.data;return _e(n,t)||ne("Unrecognized data set: "+t),n[t]}function O0e(e,t){return arguments.length<2?jv(this,e).values.value:hx.call(this,e,Mc().remove(Vr).insert(t))}function hx(e,t){nB(t)||ne("Second argument to changes must be a changeset.");const n=jv(this,e);return n.modified=!0,this.pulse(n.input,t)}function N0e(e,t){return hx.call(this,e,Mc().insert(t))}function R0e(e,t){return hx.call(this,e,Mc().remove(t))}function II(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function PI(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function gx(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function z0e(e){var t=gx(e),n=II(e),i=PI(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function B0e(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,u;return r&&(u=gx(e),s=t.changedTouches?t.changedTouches[0]:t,a=Jb(s,r),a[0]-=u[0],a[1]-=u[1]),t.dataflow=e,t.item=n,t.vega=L0e(e,n,a),t}function L0e(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var u=i,c;if(s){for(c=t;c;c=c.mark.group)if(c.mark.name===s){u=c;break}}return u&&u.mark&&u.mark.interactive?u:{}}function a(s){if(!s)return n;Se(s)&&(s=r(s));const u=n.slice();for(;s;)u[0]-=s.x||0,u[1]-=s.y||0,s=s.mark&&s.mark.group;return u}return{view:hi(e),item:hi(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const G8="view",U0e="timer",j0e="window",q0e={trap:!1};function I0e(e){const t=Ge({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{se(i[a])&&(i[a]=Ea(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function HI(e,t,n,i){e._eventListeners.push({type:n,sources:Ee(t),handler:i})}function P0e(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function q1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Ae(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function H0e(e,t,n){var i=this,r=new Sb(n),a=function(f,d){i.runAsync(null,()=>{e===G8&&P0e(i,t)&&f.preventDefault(),r.receive(B0e(i,f,d))})},s;if(e===U0e)q1(i,"timer",t)&&i.timer(a,t);else if(e===G8)q1(i,"view",t)&&i.addEventListener(t,a,q0e);else if(e===j0e?q1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&q1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var u=0,c=s.length;u<c;++u)s[u].addEventListener(t,a);HI(i,s,t,a)}return r}function Y8(e){return e.item}function X8(e){return e.item.mark.source}function V8(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function G0e(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Y8),X8,V8(e)),this.on(this.events("view","pointerout",Y8),X8,V8(t)),this}function Y0e(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,u,c;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)c=n[r].type,u=n[r].handler,this._handler.off(c,u);return this}function Er(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const X0e="vega-bind",V0e="vega-bind-name",W0e="vega-bind-radio";function Q0e(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=s3(i.debounce,r.update))),(i.input==null&&i.element?Z0e:J0e)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Z0e(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),HI(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(K0e(r))}}function K0e(e){return typeof Event<"u"?new Event(e):{type:e}}function J0e(e,t,n,i){const r=i.signal(n.signal),a=Er("div",{class:X0e}),s=n.input==="radio"?a:a.appendChild(Er("label"));s.appendChild(Er("span",{class:V0e},n.name||n.signal)),t.appendChild(a);let u=ege;switch(n.input){case"checkbox":u=tge;break;case"select":u=nge;break;case"radio":u=ige;break;case"range":u=rge;break}u(e,s,n,r)}function ege(e,t,n,i){const r=Er("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function tge(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=Er("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function nge(e,t,n,i){const r=Er("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,u)=>{const c={value:s};qv(s,i)&&(c.selected=!0),r.appendChild(Er("option",c,(a[u]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let u=0,c=n.options.length;u<c;++u)if(qv(n.options[u],s)){r.selectedIndex=u;return}}}function ige(e,t,n,i){const r=Er("span",{class:W0e}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,u)=>{const c={type:"radio",name:n.signal,value:s};qv(s,i)&&(c.checked=!0);const f=Er("input",c);f.addEventListener("change",()=>e.update(s));const d=Er("label",{},(a[u]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const u=e.elements,c=u.length;for(let f=0;f<c;++f)qv(u[f].value,s)&&(u[f].checked=!0)}}function rge(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||Mu(a,r,100),u=Er("input",{type:"range",name:n.signal,min:a,max:r,step:s});u.value=i;const c=Er("span",{},+i);t.appendChild(u),t.appendChild(c);const f=()=>{c.textContent=u.value,e.update(+u.value)};u.addEventListener("input",f),u.addEventListener("change",f),e.elements=[u],e.set=d=>{u.value=d,c.textContent=d}}function qv(e,t){return e===t||e+""==t+""}function GI(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,II(e),PI(e),gx(e),r,a).background(e.background())}function _T(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function age(e,t,n,i){const r=new i(e.loader(),_T(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,gx(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function sge(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=ex(i);e=n._el=e?PS(n,e,!0):null,M0e(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Sp,u=e?a.renderer:a.headless;return n._renderer=u?GI(n,n._renderer,e,u):null,n._handler=age(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=PS(n,t,!0):e.appendChild(Er("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&r!=="container"&&(c.element=PS(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{Q0e(n,c.element||t,c)})),n}function PS(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const D0=e=>+e||0,oge=e=>({top:e,bottom:e,left:e,right:e});function W8(e){return Ae(e)?{top:D0(e.top),bottom:D0(e.bottom),left:D0(e.left),right:D0(e.right)}:oge(D0(e))}async function wT(e,t,n,i){const r=ex(t),a=r&&r.headless;return a||ne("Unrecognized renderer type: "+t),await e.runAsync(),GI(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function uge(e,t){e!==yu.Canvas&&e!==yu.SVG&&e!==yu.PNG&&ne("Unrecognized image type: "+e);const n=await wT(this,e,t);return e===yu.SVG?lge(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function lge(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function cge(e,t){return(await wT(this,yu.Canvas,e,t)).canvas()}async function fge(e){return(await wT(this,yu.SVG,e)).svg()}function dge(e,t,n){return UI(e,gd,Ig,n).parse(t)}function hge(e){var t=this._runtime.scales;return _e(t,e)||ne("Unrecognized scale or projection: "+e),t[e].value}var YI="width",XI="height",CT="padding",Q8={skip:!0};function VI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===CT?i.left+i.right:0)}function WI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===CT?i.top+i.bottom:0)}function gge(e){var t=e._signals,n=t[YI],i=t[XI],r=t[CT];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,u=>{e._width=u.size,e._viewWidth=VI(e,u.size),a()},{size:n}),e._resizeHeight=e.add(null,u=>{e._height=u.size,e._viewHeight=WI(e,u.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function pge(e,t,n,i,r,a){this.runAfter(s=>{let u=0;s._autosize=0,s.width()!==n&&(u=1,s.signal(YI,n,Q8),s._resizeWidth.skip(!0)),s.height()!==i&&(u=1,s.signal(XI,i,Q8),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),u&&s.run("enter"),a&&s.runAfter(c=>c.resize())},!1,1)}function mge(e){return this._runtime.getState(e||{data:yge,signals:vge,recurse:!0})}function yge(e,t){return t.modified&&se(t.input.value)&&!e.startsWith("_:vega:_")}function vge(e,t){return!(e==="parent"||t instanceof gd.proxy)}function bge(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function xge(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Hue(n,t))}function Ege(e,t,n,i){const r=e.element();r&&r.setAttribute("title",Age(i))}function Age(e){return e==null?"":se(e)?QI(e):Ae(e)&&!Su(e)?Sge(e):e+""}function Sge(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(se(n)?QI(n):ZI(n))}).join(`
`)}function QI(e){return"["+e.map(ZI).join(", ")+"]"}function ZI(e){return se(e)?"[]":Ae(e)&&!Su(e)?"{}":e}function _ge(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function KI(e,t){const n=this;if(t=t||{},Jf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Ge({},e.locale,t.locale);n.locale(Y7(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||yu.Canvas,n._scenegraph=new GU;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Ege,n._redraw=!0,n._handler=new Sp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=I0e(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=dge(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Ge({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=VI(n,n._width),n._viewHeight=WI(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,gge(n),F0e(n),k0e(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function I1(e,t){return _e(e._signals,t)?e._signals[t]:ne("Unrecognized signal name: "+ve(t))}function JI(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function Z8(e,t,n,i){let r=JI(n,i);return r||(r=_T(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function K8(e,t,n){const i=JI(t,n);return i&&t._targets.remove(i),e}be(KI,Jf,{async evaluate(e,t,n){if(await Jf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,z0e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&iy(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&qI(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=I1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",W8(e)):W8(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(ex(e)||ne("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Jf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(I1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:pge,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=_T(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Z8(this,e,I1(this,e),t)},removeSignalListener(e,t){return K8(this,I1(this,e),t)},addDataListener(e,t){return Z8(this,e,jv(this,e).values,t)},removeDataListener(e,t){return K8(this,jv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=uC(this,null);this._globalCursor=!!e,t&&uC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:xge,events:H0e,finalize:Y0e,hover:G0e,data:O0e,change:hx,insert:N0e,remove:R0e,scale:hge,initialize:sge,toImageURL:uge,toCanvas:cge,toSVG:fge,getState:mge,setState:bge,_watchPixelRatio:_ge});const wge="view",Iv="[",Pv="]",eP="{",tP="}",Cge=":",nP=",",Dge="@",$ge=">",Tge=/[[\]{}]/,Mge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let iP,rP;function Qu(e,t,n){return iP=t||wge,rP=n||Mge,aP(e.trim()).map(lC)}function Fge(e){return rP[e]}function vg(e,t,n,i,r){const a=e.length;let s=0,u;for(;t<a;++t){if(u=e[t],!s&&u===n)return t;r&&r.indexOf(u)>=0?--s:i&&i.indexOf(u)>=0&&++s}return t}function aP(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=vg(e,r,nP,Iv+eP,Pv+tP),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function lC(e){return e[0]==="["?kge(e):Oge(e)}function kge(e){const t=e.length;let n=1,i;if(n=vg(e,n,Pv,Iv,Pv),n===t)throw"Empty between selector: "+e;if(i=aP(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==$ge)throw"Expected '>' after between selector: "+e;i=i.map(lC);const r=lC(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function Oge(e){const t={source:iP},n=[];let i=[0,0],r=0,a=0,s=e.length,u=0,c,f;if(e[s-1]===tP){if(u=e.lastIndexOf(eP),u>=0){try{i=Nge(e.substring(u+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,u).trim(),s=e.length}else throw"Unmatched right brace: "+e;u=0}if(!s)throw e;if(e[0]===Dge&&(r=++u),c=vg(e,u,Cge),c<s&&(n.push(e.substring(a,c).trim()),a=u=++c),u=vg(e,u,Iv),u===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,u).trim()),f=[],a=++u,a===s)throw"Unmatched left bracket: "+e;for(;u<s;){if(u=vg(e,u,Pv),u===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,u).trim()),u<s-1&&e[++u]!==Iv)throw"Expected left bracket: "+e;a=++u}if(!(s=n.length)||Tge.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):Fge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function Nge(e){const t=e.split(nP);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function Rge(e){return Ae(e)?e:{type:e||"pad"}}const $0=e=>+e||0,zge=e=>({top:e,bottom:e,left:e,right:e});function Bge(e){return Ae(e)?e.signal?e:{top:$0(e.top),bottom:$0(e.bottom),left:$0(e.left),right:$0(e.right)}:zge($0(e))}const $n=e=>Ae(e)&&!se(e)?Ge({},e):{value:e};function J8(e,t,n,i){return n!=null?(Ae(n)&&!se(n)||se(n)&&n.length&&Ae(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Wn(e,t,n){for(const i in t)J8(e,i,t[i]);for(const i in n)J8(e,i,n[i],"update")}function rh(e,t,n){for(const i in t)n&&_e(n,i)||(e[i]=Ge(e[i]||{},t[i]));return e}function Hf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const DT="mark",$T="frame",TT="scope",Lge="axis",Uge="axis-domain",jge="axis-grid",qge="axis-label",Ige="axis-tick",Pge="axis-title",Hge="legend",Gge="legend-band",Yge="legend-entry",Xge="legend-gradient",sP="legend-label",Vge="legend-symbol",Wge="legend-title",Qge="title",Zge="title-text",Kge="title-subtitle";function Jge(e,t,n,i,r){const a={},s={};let u,c,f,d;c="lineBreak",t==="text"&&r[c]!=null&&!Hf(c,e)&&HS(a,c,r[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===$T?r.group:n===DT?Ge({},r.mark,r[t]):null;for(c in d)f=Hf(c,e)||(c==="fill"||c==="stroke")&&(Hf("fill",e)||Hf("stroke",e)),f||HS(a,c,d[c]);Ee(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)Hf(y,e)||HS(a,y,p[y])}),e=Ge({},e);for(c in a)d=a[c],d.signal?(u=u||{})[c]=d:s[c]=d;return e.enter=Ge(s,e.enter),u&&(e.update=Ge(u,e.update)),e}function HS(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const oP=e=>Se(e)?ve(e):e.signal?`(${e.signal})`:uP(e);function px(e){if(e.gradient!=null)return tpe(e);let t=e.signal?`(${e.signal})`:e.color?epe(e.color):e.field!=null?uP(e.field):e.value!==void 0?ve(e.value):void 0;return e.scale!=null&&(t=npe(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Ey(e.exponent)})`),e.mult!=null&&(t+=`*${Ey(e.mult)}`),e.offset!=null&&(t+=`+${Ey(e.offset)}`),e.round&&(t=`round(${t})`),t}const P1=(e,t,n,i)=>`(${e}(${[t,n,i].map(px).join(",")})+'')`;function epe(e){return e.c?P1("hcl",e.h,e.c,e.l):e.h||e.s?P1("hsl",e.h,e.s,e.l):e.l||e.a?P1("lab",e.l,e.a,e.b):e.r||e.g||e.b?P1("rgb",e.r,e.g,e.b):null}function tpe(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ve(n));for(;t.length&&st(t)==null;)t.pop();return t.unshift(oP(e.gradient)),`gradient(${t.join(",")})`}function Ey(e){return Ae(e)?"("+px(e)+")":e}function uP(e){return lP(Ae(e)?e:{datum:e})}function lP(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ne("Invalid field reference: "+ve(e));return e.signal||(i=Se(i)?ps(i).map(ve).join("]["):lP(i)),t+"["+i+"]"}function npe(e,t){const n=oP(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Ey(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function ipe(e){let t="";return e.forEach(n=>{const i=px(n);t+=n.test?`(${n.test})?${i}:`:i}),st(t)===":"&&(t+="null"),t}function cP(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=Jge(e,t,n,i,r.config);for(const u in e)s[u]=rpe(e[u],t,a,r);return a}function rpe(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=spe(ape(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function ape(e){return se(e)?ipe(e):px(e)}function spe(e,t,n,i){const r=fs(e,t);return r.$fields.forEach(a=>i[a]=1),Ge(n,r.$params),r.$expr}const ope="outer",upe=["value","update","init","react","bind"];function eR(e,t){ne(e+' for "outer" push: '+ve(t))}function fP(e,t){const n=e.name;if(e.push===ope)t.signals[n]||eR("No prior signal definition",n),upe.forEach(i=>{e[i]!==void 0&&eR("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function cC(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function mx(e,t,n,i){return new cC(e,t,n,i)}function Hv(e,t){return mx("operator",e,t)}function Fe(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Pg(e,t){return t?{$field:e,$name:t}:{$field:e}}const fC=Pg("key");function tR(e,t){return{$compare:e,$order:t}}function lpe(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const cpe="ascending",fpe="descending";function dpe(e){return Ae(e)?(e.order===fpe?"-":"+")+yx(e.op,e.field):""}function yx(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const MT="scope",dC="view";function bn(e){return e&&e.signal}function hpe(e){return e&&e.expr}function Ay(e){if(bn(e))return!0;if(Ae(e)){for(const t in e)if(Ay(e[t]))return!0}return!1}function ca(e,t){return e??t}function Zl(e){return e&&e.signal||e}const nR="timer";function Hg(e,t){return(e.merge?ppe:e.stream?mpe:e.type?ype:ne("Invalid stream specification: "+ve(e)))(e,t)}function gpe(e){return e===MT?dC:e||dC}function ppe(e,t){const n=e.merge.map(r=>Hg(r,t)),i=FT({merge:n},e,t);return t.addStream(i).id}function mpe(e,t){const n=Hg(e.stream,t),i=FT({stream:n},e,t);return t.addStream(i).id}function ype(e,t){let n;e.type===nR?(n=t.event(nR,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(gpe(e.source),e.type);const i=FT({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function FT(e,t,n){let i=t.between;return i&&(i.length!==2&&ne('Stream "between" parameter must have 2 entries: '+ve(t)),e.between=[Hg(i[0],n),Hg(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(vpe(t.marktype,t.markname,t.markrole)),t.source===MT&&i.push("inScope(event.item)"),i.length&&(e.filter=fs("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function vpe(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const bpe={code:"_.$value",ast:{type:"Identifier",value:"value"}};function xpe(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,u=[];a||ne("Signal update missing events specification."),Se(a)&&(a=Qu(a,t.isSubscope()?MT:dC)),a=Ee(a).filter(c=>c.signal||c.scale?(u.push(c),0):1),u.length>1&&(u=[Ape(u)]),a.length&&u.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&ne("Signal encode and update are mutually exclusive."),s="encode(item(),"+ve(i)+")"),r.update=Se(s)?fs(s,t):s.expr!=null?fs(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:bpe,$params:{$value:t.signalRef(s.signal)}}:ne("Invalid signal update specification."),e.force&&(r.options={force:!0}),u.forEach(c=>t.addUpdate(Ge(Epe(c,t),r)))}function Epe(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Hg(e,t)}}function Ape(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Spe(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ne("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=fs(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>xpe(r,t,n.id))}const Ft=e=>(t,n,i)=>mx(e,n,t||void 0,i),dP=Ft("aggregate"),_pe=Ft("axisticks"),hP=Ft("bound"),Ta=Ft("collect"),iR=Ft("compare"),wpe=Ft("datajoin"),gP=Ft("encode"),Cpe=Ft("expression"),Dpe=Ft("facet"),$pe=Ft("field"),Tpe=Ft("key"),Mpe=Ft("legendentries"),Fpe=Ft("load"),kpe=Ft("mark"),Ope=Ft("multiextent"),Npe=Ft("multivalues"),Rpe=Ft("overlap"),zpe=Ft("params"),pP=Ft("prefacet"),Bpe=Ft("projection"),Lpe=Ft("proxy"),Upe=Ft("relay"),mP=Ft("render"),jpe=Ft("scale"),Nc=Ft("sieve"),qpe=Ft("sortitems"),yP=Ft("viewlayout"),Ipe=Ft("values");let Ppe=0;const vP={min:"min",max:"max",count:"sum"};function Hpe(e,t){const n=e.type||"linear";iU(n)||ne("Unrecognized scale type: "+ve(n)),t.addScale(e.name,{type:n,domain:void 0})}function Gpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=bP(e.domain,e,t),e.range!=null&&(n.range=EP(e,t,n)),e.interpolate!=null&&tme(e.interpolate,n),e.nice!=null&&(n.nice=eme(e.nice,t)),e.bins!=null&&(n.bins=Jpe(e.bins,t));for(i in e)_e(n,i)||i==="name"||(n[i]=Pr(e[i],t))}function Pr(e,t){return Ae(e)?e.signal?t.signalRef(e.signal):ne("Unsupported object: "+ve(e)):e}function Sy(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Pr(n,t))}function vx(e){ne("Can not find data set: "+ve(e))}function bP(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ne("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(se(e)?Ype:e.fields?Vpe:Xpe)(e,t,n)}function Ype(e,t,n){return e.map(i=>Pr(i,n))}function Xpe(e,t,n){const i=n.getData(e.data);return i||vx(e.data),bd(t.type)?i.valuesRef(n,e.field,xP(e.sort,!1)):sU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Vpe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=Se(s)?{data:i,field:s}:se(s)||s.signal?Wpe(s,n):s,a.push(s),a),[]);return(bd(t.type)?Qpe:sU(t.type)?Zpe:Kpe)(e,n,r)}function Wpe(e,t){const n="_:vega:_"+Ppe++,i=Ta({});if(se(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ve(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Nc({})]),{data:n,field:"data"}}function Qpe(e,t,n){const i=xP(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||vx(f.data),d.countsRef(t,f.field,i)}),u={groupby:fC,pulse:s};i&&(r=i.op||"count",a=i.field?yx(r,i.field):"count",u.ops=[vP[r]],u.fields=[t.fieldRef(a)],u.as=[a]),r=t.add(dP(u));const c=t.add(Ta({pulse:Fe(r)}));return a=t.add(Ipe({field:fC,sort:t.sortRef(i),pulse:Fe(c)})),Fe(a)}function xP(e,t){return e&&(!e.field&&!e.op?Ae(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ne("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!vP[e.op]&&ne("Multiple domain scales can not be sorted using "+e.op)),e}function Zpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||vx(r.data),a.domainRef(t,r.field)});return Fe(t.add(Npe({values:i})))}function Kpe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||vx(r.data),a.extentRef(t,r.field)});return Fe(t.add(Ope({extents:i})))}function Jpe(e,t){return e.signal||se(e)?Sy(e,t):t.objectProperty(e)}function eme(e,t){return e.signal?t.signalRef(e.signal):Ae(e)?{interval:Pr(e.interval),step:Pr(e.step)}:Pr(e)}function tme(e,t){t.interpolate=Pr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Pr(e.gamma))}function EP(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Se(r)){if(i&&_e(i,r))return e=Ge({},e,{range:i[r]}),EP(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=bd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ne("Unrecognized scale range value: "+ve(r))}else if(r.scheme){n.scheme=se(r.scheme)?Sy(r.scheme,t):Pr(r.scheme,t),r.extent&&(n.schemeExtent=Sy(r.extent,t)),r.count&&(n.schemeCount=Pr(r.count,t));return}else if(r.step){n.rangeStep=Pr(r.step,t);return}else{if(bd(e.type)&&!se(r))return bP(r,e,t);se(r)||ne("Unsupported range type: "+ve(r))}return r.map(a=>(se(a)?Sy:Pr)(a,t))}function nme(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=hC(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=hC(n[r],r,t));t.addProjection(e.name,i)}function hC(e,t,n){return se(e)?e.map(i=>hC(i,t,n)):Ae(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ne("Unsupported parameter object: "+ve(e)):e}const Ma="top",ah="left",sh="right",Lu="bottom",AP="center",ime="vertical",rme="start",ame="middle",sme="end",gC="index",kT="label",ome="offset",$d="perc",ume="perc2",Gr="value",kp="guide-label",OT="guide-title",lme="group-title",cme="group-subtitle",rR="symbol",_y="gradient",pC="discrete",mC="size",fme="shape",dme="fill",hme="stroke",gme="strokeWidth",pme="strokeDash",mme="opacity",NT=[mC,fme,dme,hme,gme,pme,mme],Op={name:1,style:1,interactive:1},ot={value:0},Yr={value:1},bx="group",SP="rect",RT="rule",yme="symbol",Rc="text";function Gg(e){return e.type=bx,e.interactive=e.interactive||!1,e}function nr(e,t){const n=(i,r)=>ca(e[i],ca(t[i],r));return n.isVertical=i=>ime===ca(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ca(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ca(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ca(e.columns,ca(t.columns,+n.isVertical(!0))),n}function _P(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function vme(e,t,n){const i=t.config.style[n];return i&&i[e]}function xx(e,t,n){return`item.anchor === '${rme}' ? ${e} : item.anchor === '${sme}' ? ${t} : ${n}`}const zT=xx(ve(ah),ve(sh),ve(AP));function bme(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Ae(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function wP(e,t){return t?e?Ae(e)?Object.assign({},e,{offset:wP(e.offset,t)}):{value:e,offset:t}:t:e}function Cr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=rh(e.encode,t,Op)):e.interactive=!1,e}function xme(e,t,n,i){const r=nr(e,n),a=r.isVertical(),s=r.gradientThickness(),u=r.gradientLength();let c,f,d,g,p;a?(f=[0,1],d=[0,0],g=s,p=u):(f=[0,0],d=[1,0],g=u,p=s);const y={enter:c={opacity:ot,x:ot,y:ot,width:$n(g),height:$n(p)},update:Ge({},c,{opacity:Yr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:ot}};return Wn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Cr({type:SP,role:Xge,encode:y},i)}function Eme(e,t,n,i,r){const a=nr(e,n),s=a.isVertical(),u=a.gradientThickness(),c=a.gradientLength();let f,d,g,p,y="";s?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:ot,fill:{scale:t,field:Gr}};v[f]={signal:y+"datum."+$d,mult:c},v[d]=ot,v[g]={signal:y+"datum."+ume,mult:c},v[p]=$n(u);const b={enter:v,update:Ge({},v,{opacity:Yr}),exit:{opacity:ot}};return Wn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),Cr({type:SP,role:Gge,key:Gr,from:r,encode:b},i)}const Ame=`datum.${$d}<=0?"${ah}":datum.${$d}>=1?"${sh}":"${AP}"`,Sme=`datum.${$d}<=0?"${Lu}":datum.${$d}>=1?"${Ma}":"${ame}"`;function aR(e,t,n,i){const r=nr(e,t),a=r.isVertical(),s=$n(r.gradientThickness()),u=r.gradientLength();let c=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:ot},update:d={opacity:Yr,text:{field:kT}},exit:{opacity:ot}};return Wn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:ca(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:Sme},g="y",p="x",y="1-"):(f.align=d.align={signal:Ame},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+$d,mult:u},f[p]=d[p]=s,s.offset=ca(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:r("labelSeparation"),method:c,order:"datum."+gC}:void 0,Cr({type:Rc,role:sP,style:kp,key:Gr,from:i,encode:v,overlap:c},n)}function _me(e,t,n,i,r){const a=nr(e,t),s=n.entries,u=!!(s&&s.interactive),c=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${ome} : datum.${mC}`,y=f?$n(f):{field:mC},v=`datum.${gC}`,b=`max(1, ${r})`;let E,S,_,w,D;y.mult=.5,E={enter:S={opacity:ot,x:{signal:p,mult:.5,offset:d},y},update:_={opacity:Yr,x:S.x,y:S.y},exit:{opacity:ot}};let T=null,M=null;e.fill||(T=t.symbolBaseFillColor,M=t.symbolBaseStrokeColor),Wn(E,{fill:a("symbolFillColor",T),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",M),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),NT.forEach(U=>{e[U]&&(_[U]=S[U]={scale:e[U],field:Gr})});const $=Cr({type:yme,role:Vge,key:Gr,from:g,clip:f?!0:void 0,encode:E},n.symbols),F=$n(d);F.offset=a("labelOffset"),E={enter:S={opacity:ot,x:{signal:p,offset:F},y},update:_={opacity:Yr,text:{field:kT},x:S.x,y:S.y},exit:{opacity:ot}},Wn(E,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const N=Cr({type:Rc,role:sP,style:kp,key:Gr,from:g,encode:E},n.labels);return E={enter:{noBound:{value:!f},width:ot,height:f?$n(f):ot,opacity:ot},exit:{opacity:ot},update:_={opacity:Yr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(w=`ceil(item.mark.items.length / ${b})`,_.row.signal=`${v}%${w}`,_.column.signal=`floor(${v} / ${w})`,D={field:["row",v]}):(_.row.signal=`floor(${v} / ${b})`,_.column.signal=`${v} % ${b}`,D={field:v}),_.column.signal=`(${r})?${_.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:gC}},Gg({role:TT,from:i,encode:rh(E,s,Op),marks:[$,N],name:c,interactive:u,sort:D})}function wme(e,t){const n=nr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const BT='item.orient === "left"',LT='item.orient === "right"',Ex=`(${BT} || ${LT})`,Cme=`datum.vgrad && ${Ex}`,Dme=xx('"top"','"bottom"','"middle"'),$me=xx('"right"','"left"','"center"'),Tme=`datum.vgrad && ${LT} ? (${$me}) : (${Ex} && !(datum.vgrad && ${BT})) ? "left" : ${zT}`,Mme=`item._anchor || (${Ex} ? "middle" : "start")`,Fme=`${Cme} ? (${BT} ? -90 : 90) : 0`,kme=`${Ex} ? (datum.vgrad ? (${LT} ? "bottom" : "top") : ${Dme}) : "top"`;function Ome(e,t,n,i){const r=nr(e,t),a={enter:{opacity:ot},update:{opacity:Yr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:ot}};return Wn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:Mme},angle:{signal:Fme},align:{signal:Tme},baseline:{signal:kme},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),Cr({type:Rc,role:Wge,style:OT,from:i,encode:a},n)}function Nme(e,t){let n;return Ae(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+sR(e.path)+")":e.sphere&&(n="geoShape("+sR(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function sR(e){return Ae(e)&&e.signal?e.signal:ve(e)}function CP(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===bx?TT:t||DT}function Rme(e){return{marktype:e.type,name:e.name||void 0,role:e.role||CP(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function zme(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function UT(e,t){const n=aB(e.type);n||ne("Unrecognized transform type: "+ve(e.type));const i=mx(n.type.toLowerCase(),null,DP(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function DP(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=Bme(s,t,n)}return i}function Bme(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return Lme(e,t,n);if(r===void 0){e.required&&ne("Missing required "+ve(t.type)+" parameter: "+ve(e.name));return}else{if(i==="param")return Ume(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!bn(r)?r.map(a=>oR(e,a,n)):oR(e,r,n)}function oR(e,t,n){const i=e.type;if(bn(t))return lR(i)?ne("Expression references can not be signals."):GS(i)?n.fieldRef(t):cR(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||GS(i);return r&&jme(t)?n.exprRef(t.expr,t.as):r&&qme(t)?Pg(t.field,t.as):lR(i)?fs(t,n):Ime(i)?Fe(n.getData(t).values):GS(i)?Pg(t):cR(i)?n.compareRef(t):t}}function Lme(e,t,n){return Se(t.from)||ne('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Ume(e,t,n){const i=t[e.name];return e.array?(se(i)||ne("Expected an array of sub-parameters. Instead: "+ve(i)),i.map(r=>uR(e,r,n))):uR(e,i,n)}function uR(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const u in r.key)if(r.key[u]!==t[u]){r=null;break}if(r)break}r||ne("Unsupported parameter: "+ve(t));const a=Ge(DP(r,t,n),r.key);return Fe(n.add(zpe(a)))}const jme=e=>e&&e.expr,qme=e=>e&&e.field,Ime=e=>e==="data",lR=e=>e==="expr",GS=e=>e==="field",cR=e=>e==="compare";function Pme(e,t,n){let i,r,a,s,u;return e?(i=e.facet)&&(t||ne("Only group marks can be faceted."),i.field!=null?s=u=wy(i,n):(e.data?u=Fe(n.getData(e.data).aggregate):(a=UT(Ge({type:"aggregate",groupby:Ee(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=wy(i,n),s=u=Fe(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Fe(n.add(Ta(null,[{}]))),s||(s=wy(e,n)),{key:r,pulse:s,parent:u}}function wy(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Fe(t.getData(e.data).output)}function gc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}gc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,u=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);u<n;++u)t[u].params.pulse=Fe(t[u-1]),e.add(t[u]),t[u].type==="aggregate"&&(s=t[u]);return new gc(e,a,r,i,s)};function $P(e){return Se(e)?e:null}function fR(e,t,n){const i=yx(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function T0(e,t,n,i,r,a,s){const u=t[n]||(t[n]={}),c=dpe(a);let f=$P(r),d,g;if(f!=null&&(e=t.scope,f=f+(c?"|"+c:""),d=u[f]),!d){const p=a?{field:fC,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Fe(t.output)};c&&(p.sort=e.sortRef(a)),g=e.add(mx(i,void 0,p)),s&&(t.index[r]=g),d=Fe(g),f!=null&&(u[f]=d)}return d}gc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=$P(t);let s,u,c;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&fR(e,s.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Fe(i.output)},n&&n.field&&fR(e,c,n),u=e.add(dP(c)),s=e.add(Ta({pulse:Fe(u)})),s={agg:u,ref:Fe(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Fe(this.values)},extentRef(e,t){return T0(e,this,"extent","extent",t,!1)},domainRef(e,t){return T0(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return T0(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return T0(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return T0(e,this,"indata","tupleindex",t,!0,!0)}};function Hme(e,t,n){const i=e.from.facet,r=i.name,a=wy(i,t);let s;i.name||ne("Facet must have a name: "+ve(i)),i.data||ne("Facet must reference a data set: "+ve(i)),i.field?s=t.add(pP({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(Dpe({key:t.keyRef(i.groupby),group:Fe(t.proxy(n.parent)),pulse:a})):ne("Facet must specify groupby or field: "+ve(i));const u=t.fork(),c=u.add(Ta()),f=u.add(Nc({pulse:Fe(c)}));u.addData(r,new gc(u,c,c,f)),u.addSignal("parent",null),s.params.subflow={$subflow:u.parse(e).toRuntime()}}function Gme(e,t,n){const i=t.add(pP({pulse:n.pulse})),r=t.fork();r.add(Nc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function TP(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,u=e.values,c=t.add(Hv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,u].map(g=>g??"null").join(",")+"),0)",d=fs(f,t);c.update=d.$expr,c.params=d.$params}function Ax(e,t){const n=CP(e),i=e.type===bx,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===TT||n===$T,u,c,f,d,g,p,y;const v=n===DT||s||r,b=Pme(e.from,i,t);c=t.add(wpe({key:b.key||(e.key?Pg(e.key):void 0),pulse:b.pulse,clean:!i}));const E=Fe(c);c=f=t.add(Ta({pulse:E})),c=t.add(kpe({markdef:Rme(e),interactive:zme(e.interactive,t),clip:Nme(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Fe(c)}));const S=Fe(c);c=d=t.add(gP(cP(e.encode,e.type,n,e.style,t,{mod:!1,pulse:S}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(M=>{const $=UT(M,t),F=$.metadata;(F.generates||F.changes)&&ne("Mark transforms should not generate new data."),F.nomod||(d.params.mod=!0),$.params.pulse=Fe(c),t.add(c=$)}),e.sort&&(c=t.add(qpe({sort:t.compareRef(e.sort),pulse:Fe(c)})));const _=Fe(c);(r||s)&&(s=t.add(yP({layout:t.objectProperty(e.layout),legends:t.legends,mark:S,pulse:_})),p=Fe(s));const w=t.add(hP({mark:S,pulse:p||_}));y=Fe(w),i&&(v&&(u=t.operators,u.pop(),s&&u.pop()),t.pushState(_,p||y,E),r?Hme(e,t,b):v?Gme(e,t,b):t.parse(e),t.popState(),v&&(s&&u.push(s),u.push(w))),a&&(y=Yme(a,y,t));const D=t.add(mP({pulse:y})),T=t.add(Nc({pulse:Fe(D)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new gc(t,f,D,T)),e.on&&e.on.forEach(M=>{(M.insert||M.remove||M.toggle)&&ne("Marks only support modify triggers."),TP(M,t,g)}))}function Yme(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:bn(a)?n.signalRef(a.signal):a,method:bn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const u=r.tolerance;s.boundTolerance=bn(u)?n.signalRef(u.signal):+u,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Fe(n.add(Rpe(s)))}function Xme(e,t){const n=t.config.legend,i=e.encode||{},r=nr(e,n),a=i.legend||{},s=a.name||void 0,u=a.interactive,c=a.style,f={};let d=0,g,p,y;NT.forEach(w=>e[w]?(f[w]=e[w],d=d||e[w]):0),d||ne("Missing valid scale for legend.");const v=Vme(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},E=Fe(t.add(Ta(null,[b]))),S={enter:{x:{value:0},y:{value:0}}},_=Fe(t.add(Mpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===_y?(y=[xme(e,d,n,i.gradient),aR(e,n,i.labels,_)],p.count=p.count||t.signalRef(`max(2,2*floor((${Zl(r.gradientLength())})/100))`)):v===pC?y=[Eme(e,d,n,i.gradient,_),aR(e,n,i.labels,_)]:(g=wme(e,n),y=[_me(e,n,i,_,Zl(g.columns))],p.size=Zme(e,t,y[0].marks)),y=[Gg({role:Yge,from:E,encode:S,marks:y,layout:g,interactive:u})],b.title&&y.push(Ome(e,n,i.title,E)),Ax(Gg({role:Hge,from:E,encode:rh(Qme(r,e,n),a,Op),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:u,style:c}),t)}function Vme(e,t){let n=e.type||rR;return!e.type&&Wme(e)===1&&(e.fill||e.stroke)&&(n=jD(t)?_y:ow(t)?pC:rR),n!==_y?n:ow(t)?pC:_y}function Wme(e){return NT.reduce((t,n)=>t+(e[n]?1:0),0)}function Qme(e,t,n){const i={enter:{},update:{}};return Wn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function Zme(e,t,n){const i=Zl(dR("size",e,n)),r=Zl(dR("strokeWidth",e,n)),a=Zl(Kme(n[1].encode,t,kp));return fs(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function dR(e,t,n){return t[e]?`scale("${t[e]}",datum)`:_P(e,n[0].encode)}function Kme(e,t,n){return _P("fontSize",e)||vme("fontSize",t,n)}const Jme=`item.orient==="${ah}"?-90:item.orient==="${sh}"?90:0`;function e1e(e,t){e=Se(e)?{text:e}:e;const n=nr(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,u=r.style,c=[],f={},d=Fe(t.add(Ta(null,[f])));return c.push(i1e(e,n,t1e(e),d)),e.subtitle&&c.push(r1e(e,n,i.subtitle,d)),Ax(Gg({role:Qge,from:d,encode:n1e(n,r),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:u}),t)}function t1e(e){const t=e.encode;return t&&t.title||Ge({name:e.name,interactive:e.interactive,style:e.style},t)}function n1e(e,t){const n={enter:{},update:{}};return Wn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:zT},angle:{signal:Jme},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),rh(n,t,Op)}function i1e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Wn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Cr({type:Rc,role:Zge,style:lme,from:i,encode:s},n)}function r1e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Wn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Cr({type:Rc,role:Kge,style:cme,from:i,encode:s},n)}function a1e(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(UT(i,t))}),e.on&&e.on.forEach(i=>{TP(i,t,e.name)}),t.addDataPipeline(e.name,s1e(e,t,n))}function s1e(e,t,n){const i=[];let r=null,a=!1,s=!1,u,c,f,d,g;for(e.values?bn(e.values)||Ay(e.format)?(i.push(hR(t,e)),i.push(r=Cl())):i.push(r=Cl({$ingest:e.values,$format:e.format})):e.url?Ay(e.url)||Ay(e.format)?(i.push(hR(t,e)),i.push(r=Cl())):i.push(r=Cl({$request:e.url,$format:e.format})):e.source&&(r=u=Ee(e.source).map(p=>Fe(t.getData(p).output)),i.push(null)),c=0,f=n.length;c<f;++c)d=n[c],g=d.metadata,!r&&!g.source&&i.push(r=Cl()),i.push(d),g.generates&&(s=!0),g.modifies&&!s&&(a=!0),g.source?r=d:g.changes&&(r=null);return u&&(f=u.length-1,i[0]=Upe({derive:a,pulse:f?u:u[0]}),(a||f)&&i.splice(1,0,Cl())),r||i.push(Cl()),i.push(Nc({})),i}function Cl(e){const t=Ta({},e);return t.metadata={source:!0},t}function hR(e,t){return Fpe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const MP=e=>e===Lu||e===Ma,Sx=(e,t,n)=>bn(e)?c1e(e.signal,t,n):e===ah||e===Ma?t:n,Tn=(e,t,n)=>bn(e)?u1e(e.signal,t,n):MP(e)?t:n,ba=(e,t,n)=>bn(e)?l1e(e.signal,t,n):MP(e)?n:t,FP=(e,t,n)=>bn(e)?f1e(e.signal,t,n):e===Ma?{value:t}:{value:n},o1e=(e,t,n)=>bn(e)?d1e(e.signal,t,n):e===sh?{value:t}:{value:n},u1e=(e,t,n)=>kP(`${e} === '${Ma}' || ${e} === '${Lu}'`,t,n),l1e=(e,t,n)=>kP(`${e} !== '${Ma}' && ${e} !== '${Lu}'`,t,n),c1e=(e,t,n)=>jT(`${e} === '${ah}' || ${e} === '${Ma}'`,t,n),f1e=(e,t,n)=>jT(`${e} === '${Ma}'`,t,n),d1e=(e,t,n)=>jT(`${e} === '${sh}'`,t,n),kP=(e,t,n)=>(t=t!=null?$n(t):t,n=n!=null?$n(n):n,gR(t)&&gR(n)?(t=t?t.signal||ve(t.value):null,n=n?n.signal||ve(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ge({test:e},t)].concat(n||[])),gR=e=>e==null||Object.keys(e).length===1,jT=(e,t,n)=>({signal:`${e} ? (${Zf(t)}) : (${Zf(n)})`}),h1e=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${ah}' ? (${Zf(i)}) : `:"")+(n!=null?`${e} === '${Lu}' ? (${Zf(n)}) : `:"")+(r!=null?`${e} === '${sh}' ? (${Zf(r)}) : `:"")+(t!=null?`${e} === '${Ma}' ? (${Zf(t)}) : `:"")+"(null)"}),Zf=e=>bn(e)?e.signal:e==null?null:ve(e),g1e=(e,t)=>t===0?0:bn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},id=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Uf(e,t,n,i){let r;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[OT][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[kp][r]}return null}function pR(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function p1e(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,u,c,f;if(bn(s)){const g=pR([n.axisX,n.axisY]),p=pR([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);u={};for(f of g)u[f]=Tn(s,Uf(f,n.axisX,r,i),Uf(f,n.axisY,r,i));c={};for(f of p)c[f]=h1e(s.signal,Uf(f,n.axisTop,r,i),Uf(f,n.axisBottom,r,i),Uf(f,n.axisLeft,r,i),Uf(f,n.axisRight,r,i))}else u=s===Ma||s===Lu?n.axisX:n.axisY,c=n["axis"+s[0].toUpperCase()+s.slice(1)];return u||c||a?Ge({},r,u,c,a):r}function m1e(e,t,n,i){const r=nr(e,t),a=e.orient;let s,u;const c={enter:s={opacity:ot},update:u={opacity:Yr},exit:{opacity:ot}};Wn(c,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=mR(e,0),d=mR(e,1);return s.x=u.x=Tn(a,f,ot),s.x2=u.x2=Tn(a,d),s.y=u.y=ba(a,f,ot),s.y2=u.y2=ba(a,d),Cr({type:RT,role:Uge,from:i,encode:c},n)}function mR(e,t){return{scale:e.scale,range:t}}function y1e(e,t,n,i,r){const a=nr(e,t),s=e.orient,u=e.gridScale,c=Sx(s,1,-1),f=v1e(e.offset,c);let d,g,p;const y={enter:d={opacity:ot},update:p={opacity:Yr},exit:g={opacity:ot}};Wn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Gr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=Tn(s,{signal:"height"},{signal:"width"}),E=u?{scale:u,range:0,mult:c,offset:f}:{value:0,offset:f},S=u?{scale:u,range:1,mult:c,offset:f}:Ge(b,{mult:c,offset:f});return d.x=p.x=Tn(s,v,E),d.y=p.y=ba(s,v,E),d.x2=p.x2=ba(s,S),d.y2=p.y2=Tn(s,S),g.x=Tn(s,v),g.y=ba(s,v),Cr({type:RT,role:jge,key:Gr,from:i,encode:y},n)}function v1e(e,t){if(t!==1)if(!Ae(e))e=bn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ge({},e);for(;n.mult!=null;)if(Ae(n.mult))n=n.mult=Ge({},n.mult);else return n.mult=bn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function b1e(e,t,n,i,r,a){const s=nr(e,t),u=e.orient,c=Sx(u,-1,1);let f,d,g;const p={enter:f={opacity:ot},update:g={opacity:Yr},exit:d={opacity:ot}};Wn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=$n(r);y.mult=c;const v={scale:e.scale,field:Gr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return g.y=f.y=Tn(u,ot,v),g.y2=f.y2=Tn(u,y),d.x=Tn(u,v),g.x=f.x=ba(u,ot,v),g.x2=f.x2=ba(u,y),d.y=ba(u,v),Cr({type:RT,role:Ige,key:Gr,from:i,encode:p},n)}function YS(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function x1e(e,t,n,i,r,a){const s=nr(e,t),u=e.orient,c=e.scale,f=Sx(u,-1,1),d=Zl(s("labelFlush")),g=Zl(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const E=$n(r);E.mult=f,E.offset=$n(s("labelPadding")||0),E.offset.mult=f;const S={scale:c,field:Gr,band:.5,offset:wP(a.offset,s("labelOffset"))},_=Tn(u,v?YS(c,d,'"left"','"right"','"center"'):{value:"center"},o1e(u,"left","right")),w=Tn(u,FP(u,"bottom","top"),v?YS(c,d,'"top"','"bottom"','"middle"'):{value:"middle"}),D=YS(c,d,`-(${g})`,g,0);v=v&&g;const T={opacity:ot,x:Tn(u,S,E),y:ba(u,S,E)},M={enter:T,update:b={opacity:Yr,text:{field:kT},x:T.x,y:T.y,align:_,baseline:w},exit:{opacity:ot,x:T.x,y:T.y}};Wn(M,{dx:!p&&v?Tn(u,D):null,dy:!y&&v?ba(u,D):null}),Wn(M,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const $=s("labelBound");let F=s("labelOverlap");return F=F||$?{separation:s("labelSeparation"),method:F,order:"datum.index",bound:$?{scale:c,orient:u,tolerance:$}:null}:void 0,b.align!==_&&(b.align=id(b.align,_)),b.baseline!==w&&(b.baseline=id(b.baseline,w)),Cr({type:Rc,role:qge,style:kp,key:Gr,from:i,encode:M,overlap:F},n)}function E1e(e,t,n,i){const r=nr(e,t),a=e.orient,s=Sx(a,-1,1);let u,c;const f={enter:u={opacity:ot,anchor:$n(r("titleAnchor",null)),align:{signal:zT}},update:c=Ge({},u,{opacity:Yr,text:$n(e.title)}),exit:{opacity:ot}},d={signal:`lerp(range("${e.scale}"), ${xx(0,1,.5)})`};return c.x=Tn(a,d),c.y=ba(a,d),u.angle=Tn(a,ot,g1e(s,90)),u.baseline=Tn(a,FP(a,Lu,Ma),{value:Lu}),c.angle=u.angle,c.baseline=u.baseline,Wn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),A1e(r,a,f,n),f.update.align=id(f.update.align,u.align),f.update.angle=id(f.update.angle,u.angle),f.update.baseline=id(f.update.baseline,u.baseline),Cr({type:Rc,role:Pge,style:OT,from:i,encode:f},n)}function A1e(e,t,n,i){const r=(u,c)=>u!=null?(n.update[c]=id($n(u),n.update[c]),!1):!Hf(c,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?$n(s):Tn(t,$n(s),$n(a))}function S1e(e,t){const n=p1e(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,u=r.style,c=nr(e,n),f=bme(c),d={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},g=Fe(t.add(Ta({},[d]))),p=Fe(t.add(_pe({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(y1e(e,n,i.grid,p,f)),d.ticks&&(v=c("tickSize"),y.push(b1e(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(x1e(e,n,i.labels,p,v,f))),d.domain&&y.push(m1e(e,n,i.domain,g)),d.title&&y.push(E1e(e,n,i.title,g)),Ax(Gg({role:Lge,from:g,encode:rh(_1e(c,e),r,Op),marks:y,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:a,interactive:s,style:u}),t)}function _1e(e,t){const n={enter:{},update:{}};return Wn(n,{orient:e("orient"),offset:e("offset")||0,position:ca(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function OP(e,t,n){const i=Ee(e.signals),r=Ee(e.scales);return n||i.forEach(a=>fP(a,t)),Ee(e.projections).forEach(a=>nme(a,t)),r.forEach(a=>Hpe(a,t)),Ee(e.data).forEach(a=>a1e(a,t)),r.forEach(a=>Gpe(a,t)),(n||i).forEach(a=>Spe(a,t)),Ee(e.axes).forEach(a=>S1e(a,t)),Ee(e.marks).forEach(a=>Ax(a,t)),Ee(e.legends).forEach(a=>Xme(a,t)),e.title&&e1e(e.title,t),t.parseLambdas(),t}const w1e=e=>rh({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function C1e(e,t){const n=t.config,i=Fe(t.root=t.add(Hv())),r=D1e(e,n);r.forEach(f=>fP(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(Ta()),s=t.add(gP(cP(w1e(e.encode),bx,$T,e.style,t,{pulse:Fe(a)}))),u=t.add(yP({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Fe(s)}));t.operators.pop(),t.pushState(Fe(s),Fe(u),null),OP(e,t,r),t.operators.push(u);let c=t.add(hP({mark:i,pulse:Fe(u)}));return c=t.add(mP({pulse:Fe(c)})),c=t.add(Nc({pulse:Fe(c)})),t.addData("root",new gc(t,a,a,c)),t}function M0(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function D1e(e,t){const n=s=>ca(e[s],t[s]),i=[M0("background",n("background")),M0("autosize",Rge(n("autosize"))),M0("padding",Bge(n("padding"))),M0("width",n("width")||0),M0("height",n("height")||0)],r=i.reduce((s,u)=>(s[u.name]=u,s),{}),a={};return Ee(e.signals).forEach(s=>{_e(r,s.name)?s=Ge(r[s.name],s):i.push(s),a[s.name]=s}),Ee(t.signals).forEach(s=>{!_e(a,s.name)&&!_e(r,s.name)&&i.push(s)}),i}function NP(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function yR(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}NP.prototype=yR.prototype={parse(e){return OP(e,this)},fork(){return new yR(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof cC?Fe(e):e;return this.add(Lpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,u;i&&(s=i.data||(i.data={}),u=s[r]||(s[r]=[]),u.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Fe(this.add(Nc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Fe(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return st(this._parent)},encode(){return st(this._encode)},lookup(){return st(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Se(e))return Pg(e,t);e.signal||ne("Unsupported field reference: "+ve(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Fe(this.add($pe(r)))}return i},compareRef(e){let t=!1;const n=a=>bn(a)?(t=!0,this.signalRef(a.signal)):hpe(a)?(t=!0,this.exprRef(a.expr)):a,i=Ee(e.field).map(n),r=Ee(e.order).map(n);return t?Fe(this.add(iR({fields:i,orders:r}))):tR(i,r)},keyRef(e,t){let n=!1;const i=a=>bn(a)?(n=!0,Fe(r[a.signal])):a,r=this.signals;return e=Ee(e).map(i),n?Fe(this.add(Tpe({fields:e,flat:t}))):lpe(e,t)},sortRef(e){if(!e)return e;const t=yx(e.op,e.field),n=e.order||cpe;return n.signal?Fe(this.add(iR({fields:t,orders:this.signalRef(n.signal)}))):tR(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ne("Duplicate signal name: "+ve(e));const n=t instanceof cC?t:this.add(Hv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ne("Unrecognized signal name: "+ve(e)),this.signals[e]},signalRef(e){return this.signals[e]?Fe(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(Hv(null))),Fe(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=fs(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ae(e)?e:this.signalRef(e.signal||qT(e))},exprRef(e,t){const n={expr:fs(e,this)};return t&&(n.expr.$name=t),Fe(this.add(Cpe(n)))},addBinding(e,t){this.bindings||ne("Nested signals do not support binding: "+ve(e)),this.bindings.push(Ge({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&ne("Duplicate scale or projection name: "+ve(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,jpe(t))},addProjection(e,t){this.addScaleProj(e,Bpe(t))},getScale(e){return this.scales[e]||ne("Unrecognized scale name: "+ve(e)),this.scales[e]},scaleRef(e){return Fe(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&ne("Duplicate data set name: "+ve(e)),this.data[e]=t},getData(e){return this.data[e]||ne("Undefined data set name: "+ve(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&ne("Duplicate data set name: "+ve(e)),this.addData(e,gc.fromEntries(this,t))}};function qT(e){return(se(e)?$1e:T1e)(e)}function $1e(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Ae(r)?r.signal||qT(r):ve(r))}return n+"]"}function T1e(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ve(i)+":"+(Ae(r)?r.signal||qT(r):ve(r));return t+"}"}function M1e(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function F1e(e,t,n){return Ae(e)||ne("Input Vega specification must be an object."),t=Gd(M1e(),t,e.config),C1e(e,new NP(t,n)).toRuntime()}var k1e="5.33.0";Ge(gd,Eee,Zae,Tse,gue,ule,Rce,gce,Bce,ofe,yfe,_fe);const O1e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:hn,CanvasHandler:Sp,CanvasRenderer:rv,DATE:Qi,DAY:ii,DAYOFYEAR:ls,Dataflow:Jf,Debug:$z,DisallowedObjectProperties:wz,Error:e3,EventStream:Sb,Gradient:EU,GroupItem:Yb,HOURS:Sr,Handler:f$,HybridHandler:dj,HybridRenderer:vw,Info:Dz,Item:Gb,MILLISECONDS:Aa,MINUTES:_r,MONTH:oi,Marks:wr,MultiPulse:w3,None:Cz,Operator:Ot,Parameters:Ab,Pulse:wu,QUARTER:Wi,RenderType:yu,Renderer:Ap,ResourceLoader:$U,SECONDS:Wr,SVGHandler:JU,SVGRenderer:y$,SVGStringRenderer:fj,Scenegraph:GU,TIME_UNITS:p3,Transform:te,View:KI,WEEK:yn,Warn:t3,YEAR:Xn,accessor:tr,accessorFields:si,accessorName:tn,array:Ee,ascending:ip,bandwidthNRD:T3,bin:uB,bootstrapCI:lB,boundClip:Aj,boundContext:vp,boundItem:hw,boundMark:qU,boundStroke:_o,changeset:Mc,clampRange:Uz,codegenExpression:wI,compare:a3,constant:hi,cumulativeLogNormal:R3,cumulativeNormal:wb,cumulativeUniform:U3,dayofyear:p7,debounce:s3,defaultLocale:x3,definition:aB,densityLogNormal:N3,densityNormal:M3,densityUniform:L3,domChild:mn,domClear:Ur,domCreate:pu,domFind:c$,dotbin:cB,error:ne,expressionFunction:un,extend:Ge,extent:ss,extentIndex:jz,falsy:au,fastmap:Xd,field:Xr,flush:qz,font:Zb,fontFamily:Ep,fontSize:vs,format:ny,formatLocale:zy,formats:S3,hasOwnProperty:_e,id:np,identity:di,inferType:V7,inferTypes:W7,ingest:mt,inherits:be,inrange:Yf,interpolate:qD,interpolateColors:Pb,interpolateRange:oU,intersect:vj,intersectBoxLine:Xf,intersectPath:WD,intersectPoint:QD,intersectRule:MU,isArray:se,isBoolean:Hu,isDate:Su,isFunction:Ye,isIterable:Iz,isNumber:dt,isObject:Ae,isRegExp:o3,isString:Se,isTuple:xb,key:u3,lerp:Pz,lineHeight:Ru,loader:vb,locale:Y7,logger:lb,lruCache:Hz,markup:m$,merge:Gz,mergeConfig:Gd,multiLineOffset:o$,one:Hd,pad:Yz,panLinear:Oz,panLog:Nz,panPow:Rz,panSymlog:zz,parse:F1e,parseExpression:AI,parseSelector:Qu,path:Mb,pathCurves:YD,pathEqual:Sj,pathParse:xd,pathRectangle:_U,pathRender:Fg,pathSymbols:SU,pathTrail:wU,peek:st,point:Jb,projection:z$,quantileLogNormal:z3,quantileNormal:Cb,quantileUniform:j3,quantiles:D3,quantizeInterpolator:uU,quarter:Bz,quartiles:$3,get random(){return Qr},randomInteger:wJ,randomKDE:k3,randomLCG:_J,randomLogNormal:dB,randomMixture:hB,randomNormal:F3,randomUniform:gB,read:K7,regressionConstant:q3,regressionExp:mB,regressionLinear:I3,regressionLoess:bB,regressionLog:pB,regressionPoly:vB,regressionPow:yB,regressionQuad:P3,renderModule:ex,repeat:B0,resetDefaultLocale:EK,resetSVGClipId:DU,resetSVGDefIds:pae,responseType:Z7,runtimeContext:UI,sampleCurve:$b,sampleLogNormal:O3,sampleNormal:_b,sampleUniform:B3,scale:gt,sceneEqual:v$,sceneFromJSON:PU,scenePickVisit:Qy,sceneToJSON:IU,sceneVisit:Sa,sceneZOrder:ZD,scheme:ID,serializeXML:oj,setHybridRendererOptions:fae,setRandom:AJ,span:rp,splitAccessPath:ps,stringValue:ve,textMetrics:xr,timeBin:k7,timeFloor:A7,timeFormatLocale:wg,timeInterval:Zd,timeOffset:w7,timeSequence:$7,timeUnitSpecifier:g7,timeUnits:m3,toBoolean:l3,toDate:c3,toNumber:ri,toSet:Ea,toString:f3,transform:sB,transforms:gd,truncate:Xz,truthy:Vr,tupleid:ke,typeParsers:W_,utcFloor:S7,utcInterval:Kd,utcOffset:C7,utcSequence:T7,utcdayofyear:v7,utcquarter:Lz,utcweek:b7,version:k1e,visitArray:uu,week:m7,writeConfig:Yd,zero:hu,zoomLinear:n3,zoomLog:i3,zoomPow:My,zoomSymlog:r3},Symbol.toStringTag,{value:"Module"}));function oh(e,t,n){return e.fields=t||[],e.fname=n,e}function N1e(e){return e.length===1?R1e(e[0]):z1e(e)}const R1e=e=>function(t){return t[e]},z1e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function XS(e){throw Error(e)}function B1e(e){const t=[],n=e.length;let i=null,r=0,a="",s,u,c;e=e+"";function f(){t.push(a+e.substring(s,u)),a="",s=u+1}for(s=u=0;u<n;++u)if(c=e[u],c==="\\")a+=e.substring(s,u++),s=u;else if(c===i)f(),i=null,r=-1;else{if(i)continue;s===r&&c==='"'||s===r&&c==="'"?(s=u+1,i=c):c==="."&&!r?u>s?f():s=u+1:c==="["?(u>s&&f(),r=s=u+1):c==="]"&&(r||XS("Access path missing open bracket: "+e),r>0&&f(),r=0,s=u+1)}return r&&XS("Access path missing closing bracket: "+e),i&&XS("Access path missing closing quote: "+e),u>s&&(u++,f()),t}function L1e(e,t,n){const i=B1e(e);return e=i.length===1?i[0]:e,oh(N1e(i),[e],e)}L1e("id");oh(e=>e,[],"identity");oh(()=>0,[],"zero");oh(()=>1,[],"one");oh(()=>!0,[],"true");oh(()=>!1,[],"false");const U1e=new Set([...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function"),"__proto__"]),j1e=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0);function q1e(e){return typeof e=="string"}function I1e(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var P1e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},H1e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},G1e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Y1e=Array.prototype.slice,Dl=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Y1e.call(t,1))},X1e=(e,t=0,n=1,i=0,r=0,a=0,s=0)=>q1e(e)?new Date(e):new Date(e,t,n,i,r,a,s);var V1e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:X1e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Dl("join",arguments)},indexof:function(){return Dl("indexOf",arguments)},lastindexof:function(){return Dl("lastIndexOf",arguments)},slice:function(){return Dl("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(j1e),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Dl("substring",arguments,String)},split:function(){return Dl("split",arguments,String)},replace:function(){return Dl("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const W1e=["view","item","group","xy","x","y"],yC=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&yC.add(setImmediate);const Q1e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:P1e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),yC.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||V1e[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>H1e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>G1e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);e.memberDepth-=1;const a=e(i.value);return U1e.has(r)?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):yC.has(a)?console.error(`Prevented interpretation of method "${r}" which could lead to insecure code execution`):n[r]=a,n},{})};function F0(e,t,n,i,r,a){const s=u=>Q1e[u.type](s,u);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,W1e.forEach(u=>s.fn[u]=(...c)=>r.vega[u](...c)),s(e)}var Z1e={operator(e,t){const n=t.ast,i=e.functions;return r=>F0(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>F0(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>F0(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return F0(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,u)=>{const c=s.datum;let f=0,d;for(const g in i)d=F0(i[g].ast,r,u,c,void 0,s),s[g]!==d&&(s[g]=d,f=1);return n!=="rule"&&I1e(s,i,a),f}}};const K1e="5.23.0",J1e={version:K1e};function IT(e){return he(e,"or")}function PT(e){return he(e,"and")}function HT(e){return he(e,"not")}function Cy(e,t){if(HT(e))Cy(e.not,t);else if(PT(e))for(const n of e.and)Cy(n,t);else if(IT(e))for(const n of e.or)Cy(n,t);else t(e)}function rd(e,t){return HT(e)?{not:rd(e.not,t)}:PT(e)?{and:e.and.map(n=>rd(n,t))}:IT(e)?{or:e.or.map(n=>rd(n,t))}:t(e)}const je=structuredClone;function RP(e){throw new Error(e)}function Td(e,t){const n={};for(const i of t)_e(e,i)&&(n[i]=e[i]);return n}function Xi(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Mt(e)).join(",")})`};function nt(e){if(dt(e))return e;const t=Se(e)?e:Mt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function vC(e){return e===!1||e===null}function Ze(e,t){return e.includes(t)}function Md(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function GT(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function zP(e,...t){for(const n of t)eye(e,n??{});return e}function eye(e,t){for(const n of fe(t))Yd(e,n,t[n],!0)}function Ka(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function tye(e,t){const n=fe(e),i=fe(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function BP(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function YT(e,t){for(const n of e)if(t.has(n))return!0;return!1}function bC(e){const t=new Set;for(const n of e){const r=ps(n).map((s,u)=>u===0?s:`[${s}]`),a=r.map((s,u)=>r.slice(0,u+1).join(""));for(const s of a)t.add(s)}return t}function XT(e,t){return e===void 0||t===void 0?!0:YT(bC(e),bC(t))}function Tt(e){return fe(e).length===0}const fe=Object.keys,Vn=Object.values,Uu=Object.entries;function Yg(e){return e===!0||e===!1}function Gt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function bg(e,t){return HT(e)?`!(${bg(e.not,t)})`:PT(e)?`(${e.and.map(n=>bg(n,t)).join(") && (")})`:IT(e)?`(${e.or.map(n=>bg(n,t)).join(") || (")})`:t(e)}function Gv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Gv(e[n],t)&&delete e[n],Tt(e)}function Np(e){return e.charAt(0).toUpperCase()+e.substr(1)}function VT(e,t="datum"){const n=ps(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ve).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function LP(e,t="datum"){return`${t}[${ve(ps(e).join("."))}]`}function xt(e){return`datum['${e.replaceAll("'","\\'")}']`}function nye(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Kr(e){return`${ps(e).map(nye).join("\\.")}`}function pc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function uh(e){return`${ps(e).join(".")}`}function Fd(e){return e?ps(e).length:0}function sn(...e){return e.find(t=>t!==void 0)}let UP=42;function jP(e){const t=++UP;return e?String(e)+t:t}function iye(){UP=42}function qP(e){return IP(e)?e:`__${e}`}function IP(e){return e.startsWith("__")}function Xg(e){if(e!==void 0)return(e%360+360)%360}function _x(e){return dt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const vR=Object.getPrototypeOf(structuredClone({}));function vr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!vr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!vr(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==vR.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==vR.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!vr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Mt(e){const t=[];return(function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return a+"]"}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,u=Object.keys(i).sort();for(a="",r=0;r<u.length;r++){const c=u[r],f=n(i[c]);f&&(a&&(a+=","),a+=JSON.stringify(c)+":"+f)}return t.splice(s,1),`{${a}}`})(e)}function he(e,t){return Ae(e)&&_e(e,t)&&e[t]!==void 0}const ho="row",go="column",wx="facet",Yt="x",Nn="y",Fa="x2",As="y2",Zu="xOffset",lh="yOffset",ka="radius",Co="radius2",ta="theta",Do="theta2",Oa="latitude",Na="longitude",Ra="latitude2",Jr="longitude2",Ku="time",Ki="color",Ss="fill",_s="stroke",Ji="shape",$o="size",zc="angle",To="opacity",Ju="fillOpacity",el="strokeOpacity",tl="strokeWidth",nl="strokeDash",Rp="text",kd="order",zp="detail",Cx="key",mc="tooltip",Dx="href",$x="url",Tx="description",rye={x:1,y:1,x2:1,y2:1},PP={theta:1,theta2:1,radius:1,radius2:1};function HP(e){return _e(PP,e)}const WT={longitude:1,longitude2:1,latitude:1,latitude2:1};function GP(e){switch(e){case Oa:return"y";case Ra:return"y2";case Na:return"x";case Jr:return"x2"}}function YP(e){return _e(WT,e)}const aye=fe(WT),QT={...rye,...PP,...WT,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ad(e){return e===Ki||e===Ss||e===_s}const XP={row:1,column:1,facet:1},Hr=fe(XP),ZT={...QT,...XP},sye=fe(ZT),{order:L3e,detail:U3e,tooltip:j3e,...oye}=ZT,{row:q3e,column:I3e,facet:P3e,...uye}=oye;function lye(e){return _e(uye,e)}function VP(e){return _e(ZT,e)}const cye=[Fa,As,Ra,Jr,Do,Co];function WP(e){return Bc(e)!==e}function Bc(e){switch(e){case Fa:return Yt;case As:return Nn;case Ra:return Oa;case Jr:return Na;case Do:return ta;case Co:return ka}return e}function ju(e){if(HP(e))switch(e){case ta:return"startAngle";case Do:return"endAngle";case ka:return"outerRadius";case Co:return"innerRadius"}return e}function ws(e){switch(e){case Yt:return Fa;case Nn:return As;case Oa:return Ra;case Na:return Jr;case ta:return Do;case ka:return Co}}function er(e){switch(e){case Yt:case Fa:return"width";case Nn:case As:return"height"}}function QP(e){switch(e){case Yt:return"xOffset";case Nn:return"yOffset";case Fa:return"x2Offset";case As:return"y2Offset";case ta:return"thetaOffset";case ka:return"radiusOffset";case Do:return"theta2Offset";case Co:return"radius2Offset"}}function KT(e){switch(e){case Yt:return"xOffset";case Nn:return"yOffset"}}function fye(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const dye=fe(QT),{x:H3e,y:G3e,x2:Y3e,y2:X3e,xOffset:V3e,yOffset:W3e,latitude:Q3e,longitude:Z3e,latitude2:K3e,longitude2:J3e,theta:eDe,theta2:tDe,radius:nDe,radius2:iDe,...JT}=QT,hye=fe(JT),eM={x:1,y:1},Mo=fe(eM);function on(e){return _e(eM,e)}const tM={theta:1,radius:1},gye=fe(tM);function Mx(e){return e==="width"?Yt:Nn}const ZP={xOffset:1,yOffset:1};function Bp(e){return _e(ZP,e)}const pye={time:1};function VS(e){return e in pye}const{text:rDe,tooltip:aDe,href:sDe,url:oDe,description:uDe,detail:lDe,key:cDe,order:fDe,...KP}=JT,mye=fe(KP);function yye(e){return _e(JT,e)}function vye(e){switch(e){case Ki:case Ss:case _s:case $o:case Ji:case To:case tl:case nl:return!0;case Ju:case el:case zc:case Ku:return!1}}const JP={...eM,...tM,...ZP,...KP},nM=fe(JP);function Cs(e){return _e(JP,e)}function bye(e,t){return Eye(e)[t]}const eH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dDe,...xye}=eH;function Eye(e){switch(e){case Ki:case Ss:case _s:case Tx:case zp:case Cx:case mc:case Dx:case kd:case To:case Ju:case el:case tl:case wx:case ho:case go:return eH;case Yt:case Nn:case Zu:case lh:case Oa:case Na:case Ku:return xye;case Fa:case As:case Ra:case Jr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case $o:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case nl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ji:return{point:"always",geoshape:"always"};case Rp:return{text:"always"};case zc:return{point:"always",square:"always",text:"always"};case $x:return{image:"always"};case ta:return{text:"always",arc:"always"};case ka:return{text:"always",arc:"always"};case Do:case Co:return{arc:"always"}}}function WS(e){switch(e){case Yt:case Nn:case ta:case ka:case Zu:case lh:case $o:case zc:case tl:case To:case Ju:case el:case Ku:case Fa:case As:case Do:case Co:return;case wx:case ho:case go:case Ji:case nl:case Rp:case mc:case Dx:case $x:case Tx:return"discrete";case Ki:case Ss:case _s:return"flexible";case Oa:case Na:case Ra:case Jr:case zp:case Cx:case kd:return}}const Aye={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Sye={count:1,min:1,max:1};function Eo(e){return he(e,"argmin")}function il(e){return he(e,"argmax")}function iM(e){return Se(e)&&_e(Aye,e)}const _ye=new Set(["count","valid","missing","distinct"]);function Fx(e){return Se(e)&&_ye.has(e)}function wye(e){return Se(e)&&Ze(["min","max"],e)}const Cye=new Set(["count","sum","distinct","valid","missing"]),Dye=new Set(["mean","average","median","q1","q3","min","max"]);function tH(e){return Hu(e)&&(e=Px(e,void 0)),"bin"+fe(e).map(t=>kx(e[t])?Gt(`_${t}_${Uu(e[t])}`):Gt(`_${t}_${e[t]}`)).join("")}function Nt(e){return e===!0||Lc(e)&&!e.binned}function jn(e){return e==="binned"||Lc(e)&&e.binned===!0}function Lc(e){return Ae(e)}function kx(e){return he(e,"param")}function bR(e){switch(e){case ho:case go:case $o:case Ki:case Ss:case _s:case tl:case To:case Ju:case el:case Ji:return 6;case nl:return 4;default:return 10}}function Lp(e){return he(e,"expr")}function qn(e,{level:t}={level:0}){const n=fe(e||{}),i={};for(const r of n)i[r]=t===0?mr(e[r]):qn(e[r],{level:t-1});return i}function nH(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:u,subtitleColor:c,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,E={...b,...u?{fill:u}:{}},S={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},_={...c?{subtitleColor:c}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...g?{subtitleFontStyle:g}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},w=Td(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:E,subtitleMarkConfig:w,nonMarkTitleProperties:S,subtitle:_}}function du(e){return Se(e)||se(e)&&Se(e[0])}function Te(e){return he(e,"signal")}function Uc(e){return he(e,"step")}function $ye(e){return se(e)?!1:he(e,"fields")&&!he(e,"data")}function Tye(e){return se(e)?!1:he(e,"fields")&&he(e,"data")}function uo(e){return se(e)?!1:he(e,"field")&&he(e,"data")}const Mye={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Fye=fe(Mye),kye={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},xC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function iH(e){const t=se(e.condition)?e.condition.map(xR):xR(e.condition);return{...mr(e),condition:t}}function mr(e){if(Lp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function xR(e){if(Lp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ut(e){if(Lp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Te(e)?e:e!==void 0?{value:e}:void 0}function Oye(e){return Te(e)?e.signal:ve(e)}function ER(e){return Te(e)?e.signal:ve(e.value)}function ya(e){return Te(e)?e.signal:e==null?null:ve(e)}function Nye(e,t,n){for(const i of n){const r=ds(i,t.markDef,t.config);r!==void 0&&(e[i]=Ut(r))}return e}function rH(e){return[].concat(e.type,e.style??[])}function $t(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&he(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:ds(e,t,n,i)}function ds(e,t,n,{vgChannel:i}={}){const r=EC(e,t,n.style);return sn(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function EC(e,t,n){return aH(e,rH(t),n)}function aH(e,t,n){t=Ee(t);let i;for(const r of t){const a=n[r];he(a,e)&&(i=a[e])}return i}function sH(e,t){return Ee(e).reduce((n,i)=>(n.field.push(xe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function oH(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(vr(r,i))return;n.push(i)}),n}function uH(e,t){return vr(e,t)||!t?e:e?[...Ee(e),...Ee(t)].join(", "):t}function lH(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((du(n)||Te(n))&&(du(i)||Te(i)))return{explicit:e.explicit,value:uH(n,i)};if(du(n)||Te(n))return{explicit:e.explicit,value:n};if(du(i)||Te(i))return{explicit:e.explicit,value:i};if(!du(n)&&!Te(n)&&!du(i)&&!Te(i))return{explicit:e.explicit,value:oH(n,i)};throw new Error("It should never reach here")}function rM(e){return`Invalid specification ${Mt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Rye='Autosize "fit" only works for single views and layered views.';function AR(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function SR(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function _R(e){return e?`Dropping "fit-${e}" because spec has discrete ${er(e)}.`:'Dropping "fit" because spec has discrete size.'}function aM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function wR(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function zye(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Bye(e){return`The "nearest" transform is not supported for ${e} marks.`}function cH(e){return`Selection not supported for ${e} yet.`}function Lye(e){return`Cannot find a selection named "${e}".`}const Uye="Scale bindings are currently only supported for scales with unbinned, continuous domains.",jye="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",qye="Legend bindings are only supported for selections over an individual field or encoding channel.";function Iye(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Pye(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Hye="The same selection must be used to override scale domains in a layered view.",Gye='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Yye(e){return`Unknown repeated value "${e}".`}function CR(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Xye="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",sM="Animation involving facet, layer, or concat is currently unsupported.";function Vye(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ve(e)}.`}function Wye(e,t,n,i){return(e.length?"Multiple ":"No ")+`matching ${ve(t)} encoding found for selection ${ve(n.param)}. Using "field": ${ve(i)}.`}const Qye="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Zye(e){return`Unrecognized parse "${e}".`}function DR(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Kye="Attempt to add the same child twice.";function Jye(e){return`Ignoring an invalid transform: ${Mt(e)}.`}const eve='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function $R(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function tve(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Mt(t)} is overridden by a child projection ${Mt(n)}.`}const nve="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ive(e){return`${e}Offset dropped because ${e} is continuous`}function rve(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Mt(n)}}.`}function fH(e){return`Invalid field type "${e}".`}function ave(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function sve(e){return`Invalid aggregation operator "${e}".`}function dH(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function ove(e){return`Position range does not support relative band size for ${e}.`}function AC(e,t){return`Dropping ${Mt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const uve="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ox(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function lve(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function cve(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function fve(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function dve(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function QS(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function hve(e){return`The ${e} for range marks cannot be an expression`}function gve(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function pve(e,t){return`Specified orient "${e}" overridden with "${t}".`}function mve(e){return`Cannot use the scale property "${e}" with non-color channel.`}function yve(e){return`Cannot use the relative band size with ${e} scale.`}function vve(e){return`Using unaggregated domain with raw field has no effect (${Mt(e)}).`}function bve(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function xve(e){return`Unaggregated domain is currently unsupported for log scale (${Mt(e)}).`}function Eve(e){return`Cannot apply size to non-oriented mark "${e}".`}function Ave(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Sve(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function hH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function gH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function _ve(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Mt(n)} and ${Mt(i)}). Using ${Mt(n)}.`}function wve(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Mt(n)} and ${Mt(i)}). Using the union of the two domains.`}function Cve(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Dve(e){return`Dropping sort property ${Mt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const TR="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",$ve="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Tve="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Mve="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Fve(e){return`Cannot stack "${e}" if there is already "${e}2".`}function kve(e){return`Stack is applied to a non-linear scale (${e}).`}function Ove(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Yv(e,t){return`Invalid ${e}: ${Mt(t)}.`}function Nve(e){return`Dropping day from datetime ${Mt(e)} as day cannot be combined with other units.`}function Rve(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function zve(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Bve(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function MR(e){return`1D error band does not support ${e}.`}function pH(e){return`Channel ${e} is required for "binned" bin.`}function Lve(e){return`Channel ${e} should not be used with "binned" bin.`}function Uve(e){return`Domain for ${e} is required for threshold scale.`}const mH=lb(t3);let yc=mH;function jve(e){return yc=e,yc}function qve(){return yc=mH,yc}function oM(...e){yc.error(...e)}function ge(...e){yc.warn(...e)}function Ive(...e){yc.debug(...e)}function jc(e){if(e&&Ae(e)){for(const t of lM)if(he(e,t))return!0}return!1}const yH=["january","february","march","april","may","june","july","august","september","october","november","december"],Pve=yH.map(e=>e.substr(0,3)),vH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Hve=vH.map(e=>e.substr(0,3));function Gve(e){if(_x(e)&&(e=+e),dt(e))return e>4&&ge(Yv("quarter",e)),e-1;throw new Error(Yv("quarter",e))}function Yve(e){if(_x(e)&&(e=+e),dt(e))return e-1;{const t=e.toLowerCase(),n=yH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Pve.indexOf(i);if(r!==-1)return r;throw new Error(Yv("month",e))}}function Xve(e){if(_x(e)&&(e=+e),dt(e))return e%7;{const t=e.toLowerCase(),n=vH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Hve.indexOf(i);if(r!==-1)return r;throw new Error(Yv("day",e))}}function uM(e,t){const n=[];if(t&&e.day!==void 0&&fe(e).length>1&&(ge(Nve(e)),e=je(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Yve(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Gve(e.quarter):e.quarter;n.push(dt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Xve(e.day):e.day;n.push(dt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function vc(e){const n=uM(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Vve(e){const n=uM(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Wve(e){const t=uM(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const bH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},lM=fe(bH);function Qve(e){return _e(bH,e)}function qc(e){return Ae(e)?e.binned:xH(e)}function xH(e){return e&&e.startsWith("binned")}function cM(e){return e.startsWith("utc")}function Zve(e){return e.substring(3)}const Kve={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Nx(e){return lM.filter(t=>AH(e,t))}function EH(e){const t=Nx(e);return t[t.length-1]}function AH(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Jve(e,t,{end:n}={end:!1}){const i=VT(t),r=cM(e)?"utc":"";function a(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`}let s;const u={};for(const c of lM)AH(e,c)&&(u[c]=a(c),s=c);return n&&(u[s]+="+1"),Vve(u)}function SH(e){if(!e)return;const t=Nx(e);return`timeUnitSpecifier(${Mt(t)}, ${Mt(Kve)})`}function ebe(e,t,n){if(!e)return;const i=SH(e);return`${n||cM(e)?"utc":"time"}Format(${t}, ${i})`}function Fn(e){if(!e)return;let t;return Se(e)?xH(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ae(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),cM(t.unit)&&(t.utc=!0,t.unit=Zve(t.unit)),t}function tbe(e){const{utc:t,...n}=Fn(e);return n.unit?(t?"utc":"")+fe(n).map(i=>Gt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+fe(n).map(i=>Gt(`_${i}_${n[i]}`)).join("")}function _H(e,t=n=>n){const n=Fn(e),i=EH(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=wH(i,n.step),u={...r,[s]:+r[s]+a};return`${t(vc(u))} - ${t(vc(r))}`}}const nbe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function ibe(e){return _e(nbe,e)}function wH(e,t=1){if(ibe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function rbe(e){return he(e,"param")}function fM(e){return!!e?.field&&e.equal!==void 0}function dM(e){return!!e?.field&&e.lt!==void 0}function hM(e){return!!e?.field&&e.lte!==void 0}function gM(e){return!!e?.field&&e.gt!==void 0}function pM(e){return!!e?.field&&e.gte!==void 0}function mM(e){if(e?.field){if(se(e.range)&&e.range.length===2)return!0;if(Te(e.range))return!0}return!1}function yM(e){return!!e?.field&&(se(e.oneOf)||se(e.in))}function abe(e){return!!e?.field&&e.valid!==void 0}function CH(e){return yM(e)||fM(e)||mM(e)||dM(e)||gM(e)||hM(e)||pM(e)}function Ha(e,t){return Hx(e,{timeUnit:t,wrapTime:!0})}function sbe(e,t){return e.map(n=>Ha(n,t))}function DH(e,t=!0){const{field:n}=e,i=Fn(e.timeUnit),{unit:r,binned:a}=i||{},s=xe(e,{expr:"datum"}),u=r?`time(${a?s:Jve(r,n)})`:s;if(fM(e))return`${u}===${Ha(e.equal,r)}`;if(dM(e)){const c=e.lt;return`${u}<${Ha(c,r)}`}else if(gM(e)){const c=e.gt;return`${u}>${Ha(c,r)}`}else if(hM(e)){const c=e.lte;return`${u}<=${Ha(c,r)}`}else if(pM(e)){const c=e.gte;return`${u}>=${Ha(c,r)}`}else{if(yM(e))return`indexof([${sbe(e.oneOf,r).join(",")}], ${u}) !== -1`;if(abe(e))return Rx(u,e.valid);if(mM(e)){const{range:c}=qn(e),f=Te(c)?{signal:`${c.signal}[0]`}:c[0],d=Te(c)?{signal:`${c.signal}[1]`}:c[1];if(f!==null&&d!==null&&t)return"inrange("+u+", ["+Ha(f,r)+", "+Ha(d,r)+"])";const g=[];return f!==null&&g.push(`${u} >= ${Ha(f,r)}`),d!==null&&g.push(`${u} <= ${Ha(d,r)}`),g.length>0?g.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Mt(e)}`)}function Rx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function obe(e){return CH(e)&&e.timeUnit?{...e,timeUnit:Fn(e.timeUnit)}:e}const Up={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function ube(e){return e==="quantitative"||e==="temporal"}function $H(e){return e==="ordinal"||e==="nominal"}const bc=Up.quantitative,vM=Up.ordinal,Od=Up.temporal,bM=Up.nominal,ch=Up.geojson;function lbe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case bc:return"quantitative";case"t":case Od:return"temporal";case"o":case vM:return"ordinal";case"n":case bM:return"nominal";case ch:return"geojson"}}const In={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},SC={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function cbe(e,t){const n=SC[e],i=SC[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const fbe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function FR(e){return fbe[e]}const TH=new Set(["linear","log","pow","sqrt","symlog"]),MH=new Set([...TH,"time","utc"]);function FH(e){return TH.has(e)}const kH=new Set(["quantile","quantize","threshold"]),dbe=new Set([...MH,...kH,"sequential","identity"]),hbe=new Set(["ordinal","bin-ordinal","point","band"]);function kn(e){return hbe.has(e)}function _a(e){return dbe.has(e)}function Ja(e){return MH.has(e)}function Nd(e){return kH.has(e)}const gbe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function pbe(e){return!Se(e)&&he(e,"name")}function OH(e){return he(e,"param")}function mbe(e){return he(e,"unionWith")}function ybe(e){return Ae(e)&&"field"in e}const vbe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:hDe,domain:gDe,range:pDe,rangeMax:mDe,rangeMin:yDe,scheme:vDe,...bbe}=vbe,xbe=fe(bbe);function _C(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ja(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ja(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ja(e);case"nice":return Ja(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return _a(e)&&!Ze(["log","time","utc","threshold","quantile"],e)}}function NH(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return ad(e)?void 0:mve(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Ebe(e,t){return Ze([vM,bM],t)?e===void 0||kn(e):t===Od?Ze([In.TIME,In.UTC,void 0],e):t===bc?FH(e)||Nd(e)||e===void 0:!0}function Abe(e,t,n=!1){if(!Cs(e))return!1;switch(e){case Yt:case Nn:case Zu:case lh:case ta:case ka:return Ja(t)||t==="band"?!0:t==="point"?!n:!1;case Ku:return Ze(["linear","band"],t);case $o:case tl:case To:case Ju:case el:case zc:return Ja(t)||Nd(t)||Ze(["band","point","ordinal"],t);case Ki:case Ss:case _s:return t!=="band";case nl:case Ji:return t==="ordinal"||Nd(t)}}function Sbe(e){return Ae(e)&&"value"in e}const Fi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},RH=Fi.arc,zx=Fi.area,Bx=Fi.bar,_be=Fi.image,Lx=Fi.line,Ux=Fi.point,wbe=Fi.rect,Xv=Fi.rule,zH=Fi.text,xM=Fi.tick,Cbe=Fi.trail,EM=Fi.circle,AM=Fi.square,BH=Fi.geoshape;function rl(e){return["line","area","trail"].includes(e)}function Vg(e){return["rect","bar","image","arc","tick"].includes(e)}const Dbe=new Set(fe(Fi));function hs(e){return he(e,"type")}const $be=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Tbe=["fill","fillOpacity"],Mbe=[...$be,...Tbe],Fbe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},kR=fe(Fbe),ZS=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],kbe={area:["line","point"],bar:ZS,rect:ZS,line:["point"],tick:["bandSize","thickness",...ZS]},Obe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Nbe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},LH=fe(Nbe);function xc(e){return he(e,"band")}const Rbe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},zbe=5,SM={binSpacing:0,continuousBandSize:zbe,minBandSize:.25,timeUnitBandPosition:.5},Bbe={...SM,binSpacing:1},Lbe={...SM,thickness:1};function Ube(e){return hs(e)?e.type:e}function UH(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function _M({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!_a(i)||r)return"always-valid";const a=UH($t("invalid",e,t),{isPath:rl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function jbe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function jH({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function qH({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),u=Ca(t),c=Fx(u?.aggregate),f=_M({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:c});if(u&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:Rx(xe(u,{expr:"datum"}),!1),...qbe(d,n,i)}}}function qbe(e,t,n){if(Sbe(e)){const{value:i}=e;return Te(i)?{signal:i.signal}:{value:i}}return jH({scale:t,scaleName:n,mode:"zeroOrMin"})}function wM(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,u=Bc(t),c=CM(e),f=qH({scaleChannel:u,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,c]:c}function Ibe(e){const{datum:t}=e;return jc(t)?vc(t):`${Mt(t)}`}function Kl(e,t,n,i){const r={};if(t&&(r.scale=t),Ds(e)){const{datum:a}=e;jc(a)?r.signal=vc(a):Te(a)?r.signal=a.signal:Lp(a)?r.signal=a.expr:r.value=a}else r.field=xe(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function Vv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const u=!Te(s)&&0<s&&s<1?"datum":void 0,c=xe(t,{expr:u,suffix:r}),f=n!==void 0?xe(n,{expr:u}):xe(t,{suffix:a,expr:u}),d={};if(s===0||s===1){d.scale=e;const g=s===0?c:f;d.field=g}else{const g=Te(s)?`(1-${s.signal}) * ${c} + ${s.signal} * ${f}`:`${1-s} * ${c} + ${s} * ${f}`;d.signal=`scale("${e}", ${g})`}return i&&(d.offset=i),d}function Pbe({scaleName:e,fieldDef:t}){const n=xe(t,{expr:"datum"}),i=xe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function CM({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:u,offset:c,defaultRef:f,bandPosition:d}){if(t){if(qe(t)){const g=s?.get("type");if(Ti(t)){d??(d=qu({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:p,timeUnit:y,type:v}=t;if(Nt(p)||d&&y&&v===Od)return u?.impute?Kl(t,a,{binSuffix:"mid"},{offset:c}):d&&!kn(g)?Vv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:c}):Kl(t,a,Hp(t,e)?{binSuffix:"range"}:{},{offset:c});if(jn(p)){if(ye(n))return Vv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:c});ge(pH(e===Yt?Fa:As))}}return Kl(t,a,kn(g)?{binSuffix:"range"}:{},{offset:c,band:g==="band"?d??t.bandPosition??.5:void 0})}else if(wa(t)){const g=t.value,p=c?{offset:c}:{};return{...xg(e,g),...p}}}return Ye(f)&&(f=f()),f&&{...f,...c?{offset:c}:{}}}function xg(e,t){return Ze(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ze(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ut(t)}function Ec(e){return e&&e!=="number"&&e!=="time"}function IH(e,t,n){return`${e}(${t}${n?`, ${Mt(n)}`:""})`}const Hbe="  ";function DM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Ec(n))return va({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=PH(e,i,r),u=Rd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(u==="quantitative"){if(r&&a.normalizedNumberFormatType)return va({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return va({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(u==="temporal"&&a.timeFormatType&&ye(e)&&e.timeUnit===void 0)return va({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}if(Bd(e)){const c=Ybe({field:s,timeUnit:ye(e)?Fn(e.timeUnit)?.unit:void 0,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:Ic(e)&&e.scale?.type===In.UTC});return c?{signal:c}:void 0}if(t=wC({type:u,specifiedFormat:t,config:a,normalizeStack:r}),ye(e)&&Nt(e.bin)){const c=xe(e,{expr:i,binSuffix:"end"});return{signal:jp(s,c,t,n,a)}}else return t||Rd(e)==="quantitative"?{signal:`${YH(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function PH(e,t,n){return ye(e)?n?`${xe(e,{expr:t,suffix:"end"})}-${xe(e,{expr:t,suffix:"start"})}`:xe(e,{expr:t}):Ibe(e)}function va({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??(s=PH(e,i,r)),s!=="datum.value"&&ye(e)&&Nt(e.bin)){const u=xe(e,{expr:i,binSuffix:"end"});return{signal:jp(s,u,t,n,a)}}return{signal:IH(n,s,t)}}function HH(e,t,n,i,r,a){if(!(Se(i)&&Ec(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&Rd(e)==="quantitative"&&(r.normalizedNumberFormatType&&zd(e)&&e.stack==="normalize"||r.numberFormatType))){if(zd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return wC({type:"quantitative",config:r,normalizeStack:!0});if(Bd(e)){const s=ye(e)?Fn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Gbe({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return wC({type:t,specifiedFormat:n,config:r})}}function GH(e,t,n){if(e&&(Te(e)||e==="number"||e==="time"))return e;if(Bd(t)&&n!=="time"&&n!=="utc")return ye(t)&&Fn(t?.timeUnit)?.utc?"utc":"time"}function wC({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Se(t))return t;if(e===bc)return i?n.normalizedNumberFormat:n.numberFormat}function Gbe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:SH(t)}:i?void 0:n.timeFormat)}function YH(e,t){return`format(${e}, "${t||""}")`}function OR(e,t,n,i){return Ec(n)?IH(n,e,t):YH(e,(Se(t)?t:void 0)??i.numberFormat)}function jp(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return jp(e,t,r.numberFormat,r.numberFormatType,r);const a=OR(e,n,i,r),s=OR(t,n,i,r);return`${Rx(e,!1)} ? "null" : ${a} + "${Hbe}" + ${s}`}function Ybe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=Se(n)?n:r,`${a?"utc":"time"}Format(${e}, '${n}')`):ebe(t,e,a)}const jx="min",Xbe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function NR(e){return _e(Xbe,e)}function Vbe(e){return he(e,"encoding")}function po(e){return e&&(e.op==="count"||he(e,"field"))}function XH(e){return e&&se(e)}function qp(e){return he(e,"row")||he(e,"column")}function $M(e){return he(e,"header")}function qx(e){return he(e,"facet")}function Wbe(e){return he(e,"param")}function Qbe(e){return!Se(e)&&he(e,"repeat")}function RR(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function TM(e){return he(e,"sort")}function qu({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(qe(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ye(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return ds("timeUnitBandPosition",n,i);if(Nt(a))return .5}}function VH({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const u=er(e),c=$t(s?"size":u,i,r,{vgChannel:u});if(c!==void 0)return c;if(ye(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:ds("timeUnitBandSize",i,r)};if(Nt(d)&&!kn(a))return{band:1}}if(Vg(i.type))return a?kn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function WH(e,t,n,i){return Nt(e.bin)||e.timeUnit&&Ti(e)&&e.type==="temporal"?qu({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function QH(e){return he(e,"sort")&&!he(e,"field")}function Ip(e){return he(e,"condition")}function Ix(e){const t=e?.condition;return!!t&&!se(t)&&ye(t)}function Pp(e){const t=e?.condition;return!!t&&!se(t)&&qe(t)}function Zbe(e){const t=e?.condition;return!!t&&(se(t)||wa(t))}function ye(e){return he(e,"field")||e?.aggregate==="count"}function Rd(e){return e?.type}function Ds(e){return he(e,"datum")}function Au(e){return Ti(e)&&!Qv(e)||Wv(e)}function zR(e){return Ti(e)&&e.type==="quantitative"&&!e.bin||Wv(e)}function Wv(e){return Ds(e)&&dt(e.datum)}function qe(e){return ye(e)||Ds(e)}function Ti(e){return e&&(he(e,"field")||e.aggregate==="count")&&he(e,"type")}function wa(e){return he(e,"value")}function Ic(e){return he(e,"scale")||he(e,"sort")}function zd(e){return he(e,"axis")||he(e,"stack")||he(e,"impute")}function ZH(e){return he(e,"legend")}function KH(e){return he(e,"format")||he(e,"formatType")}function Kbe(e){return Xi(e,["legend","axis","header","scale"])}function Jbe(e){return he(e,"op")}function xe(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(txe(e))n=qP("count");else{let s;if(!t.nofn)if(Jbe(e))s=e.op;else{const{bin:u,aggregate:c,timeUnit:f}=e;Nt(u)?(s=tH(u),r=(t.binSuffix??"")+(t.suffix??"")):c?il(c)?(a=`["${n}"]`,n=`argmax_${c.argmax}`):Eo(c)?(a=`["${n}"]`,n=`argmin_${c.argmin}`):s=String(c):f&&!qc(f)&&(s=tbe(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?uh(n):t.expr?LP(n,t.expr)+a:Kr(n)+a}function Qv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ye(e)&&!!e.bin;case"temporal":return!1}throw new Error(fH(e.type))}function exe(e){return Ic(e)&&Nd(e.scale?.type)}function txe(e){return e.aggregate==="count"}function nxe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Nt(i))return`${n} (binned)`;if(r&&!qc(r)){const s=Fn(r)?.unit;if(s)return`${n} (${Nx(s).join("-")})`}else if(a)return il(a)?`${n} for max ${a.argmax}`:Eo(a)?`${n} for min ${a.argmin}`:`${Np(a)} of ${n}`;return n}function ixe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(il(t))return`${r} for argmax(${t.argmax})`;if(Eo(t))return`${r} for argmin(${t.argmin})`;const a=i&&!qc(i)?Fn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||Nt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const JH=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return ixe(e);default:return nxe(e,t)}};let eG=JH;function tG(e){eG=e}function rxe(){tG(JH)}function sd(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=MM(e)?.title;if(!ye(e))return r??e.title;const a=e,s=i?FM(a,t):void 0;return n?sn(r,a.title,s):r??a.title??s}function MM(e){if(zd(e)&&e.axis)return e.axis;if(ZH(e)&&e.legend)return e.legend;if($M(e)&&e.header)return e.header}function FM(e,t){return eG(e,t)}function Zv(e){if(KH(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=MM(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function axe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(TM(e)&&se(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!il(n)&&!Eo(n))return"quantitative";if(Ic(e)&&e.scale?.type)switch(SC[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Ca(e){if(ye(e))return e;if(Ix(e))return e.condition}function vn(e){if(qe(e))return e;if(Pp(e))return e.condition}function nG(e,t,n,i={}){if(Se(e)||dt(e)||Hu(e)){const r=Se(e)?"string":dt(e)?"number":"boolean";return ge(rve(t,r,e)),{value:e}}return qe(e)?Kv(e,t,n,i):Pp(e)?{...e,condition:Kv(e.condition,t,n,i)}:e}function Kv(e,t,n,i){if(KH(e)){const{format:r,formatType:a,...s}=e;if(Ec(a)&&!n.customFormatTypes)return ge($R(t)),Kv(s,t,n,i)}else{const r=zd(e)?"axis":ZH(e)?"legend":$M(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...u}=e[r];if(Ec(s)&&!n.customFormatTypes)return ge($R(t)),Kv({...e,[r]:u},t,n,i)}}return ye(e)?kM(e,t,i):sxe(e)}function sxe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=dt(n)?"quantitative":Se(n)?"nominal":jc(n)?"temporal":void 0,{...e,type:t}}function kM(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,u={...e};if(!n&&i&&!iM(i)&&!il(i)&&!Eo(i)&&(ge(sve(i)),delete u.aggregate),r&&(u.timeUnit=Fn(r)),s&&(u.field=`${s}`),Nt(a)&&(u.bin=Px(a,t)),jn(a)&&!on(t)&&ge(Lve(t)),Ti(u)){const{type:c}=u,f=lbe(c);c!==f&&(u.type=f),c!=="quantitative"&&Fx(i)&&(ge(ave(c,i)),u.type="quantitative")}else if(!WP(t)){const c=axe(u,t);u.type=c}if(Ti(u)){const{compatible:c,warning:f}=oxe(u,t)||{};c===!1&&ge(f)}if(TM(u)&&Se(u.sort)){const{sort:c}=u;if(NR(c))return{...u,sort:{encoding:c}};const f=c.substring(1);if(c.charAt(0)==="-"&&NR(f))return{...u,sort:{encoding:f,order:"descending"}}}if($M(u)){const{header:c}=u;if(c){const{orient:f,...d}=c;if(f)return{...u,header:{...d,labelOrient:c.labelOrient||f,titleOrient:c.titleOrient||f}}}}return u}function Px(e,t){return Hu(e)?{maxbins:bR(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:bR(t)}:e}const jf={compatible:!0};function oxe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case ho:case go:case wx:return Qv(e)?jf:{compatible:!1,warning:cve(t)};case Yt:case Nn:case Zu:case lh:case Ki:case Ss:case _s:case Rp:case zp:case Cx:case mc:case Dx:case $x:case zc:case ta:case ka:case Tx:return jf;case Na:case Jr:case Oa:case Ra:return n!==bc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:jf;case To:case Ju:case el:case tl:case $o:case Do:case Co:case Fa:case As:case Ku:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:jf;case Ji:case nl:return!Qv(e)&&!exe(e)?{compatible:!1,warning:fve(t)}:jf;case kd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:jf}}function Bd(e){const{formatType:t}=Zv(e);return t==="time"||!t&&uxe(e)}function uxe(e){return e&&(e.type==="temporal"||ye(e)&&!!e.timeUnit)}function Hx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Fn(t)?.unit;let s=a||n==="temporal",u;return Lp(e)?u=e.expr:Te(e)?u=e.signal:jc(e)?(s=!0,u=vc(e)):(Se(e)||dt(e))&&s&&(u=`datetime(${Mt(e)})`,Qve(a)&&(dt(e)&&e<1e4||Se(e)&&isNaN(Date.parse(e)))&&(u=vc({[a]:e}))),u?i&&s?`time(${u})`:u:r?void 0:Mt(e)}function iG(e,t){const{type:n}=e;return t.map(i=>{const r=ye(e)&&!qc(e.timeUnit)?e.timeUnit:void 0,a=Hx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Hp(e,t){return Nt(e.bin)?Cs(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const BR={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Gp(e){return e?.condition}const rG=["domain","grid","labels","ticks","title"],lxe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},aG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},cxe={...aG,style:1,labelExpr:1,encoding:1};function LR(e){return _e(cxe,e)}const fxe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},sG=fe(fxe);function Fo(e){return he(e,"mark")}class Gx{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Fo(t)?Ube(t.mark)===this.name:!1}}function Jl(e,t){const n=e&&e[t];return n?se(n)?Md(n,i=>!!i.field):ye(n)||Ix(n):!1}function oG(e,t){const n=e&&e[t];return n?se(n)?Md(n,i=>!!i.field):ye(n)||Ds(n)||Pp(n):!1}function uG(e,t){if(on(t)){const n=e[t];if((ye(n)||Ds(n))&&($H(n.type)||ye(n)&&n.timeUnit)){const i=KT(t);return oG(e,i)}}return!1}function lG(e){return Md(sye,t=>{if(Jl(e,t)){const n=e[t];if(se(n))return Md(n,i=>!!i.aggregate);{const i=Ca(n);return i&&!!i.aggregate}}return!1})}function cG(e,t){const n=[],i=[],r=[],a=[],s={};return OM(e,(u,c)=>{if(ye(u)){const{field:f,aggregate:d,bin:g,timeUnit:p,...y}=u;if(d||p||g){const b=MM(u)?.title;let E=xe(u,{forAs:!0});const S={...b?[]:{title:sd(u,t,{allowDisabling:!0})},...y,field:E};if(d){let _;if(il(d)?(_="argmax",E=xe({op:"argmax",field:d.argmax},{forAs:!0}),S.field=`${E}.${f}`):Eo(d)?(_="argmin",E=xe({op:"argmin",field:d.argmin},{forAs:!0}),S.field=`${E}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(_=d),_){const w={op:_,as:E};f&&(w.field=f),a.push(w)}}else if(n.push(E),Ti(u)&&Nt(g)){if(i.push({bin:g,field:f,as:E}),n.push(xe(u,{binSuffix:"end"})),Hp(u,c)&&n.push(xe(u,{binSuffix:"range"})),on(c)){const _={field:`${E}_end`};s[`${c}2`]=_}S.bin="binned",WP(c)||(S.type=bc)}else if(p&&!qc(p)){r.push({timeUnit:p,field:f,as:E});const _=Ti(u)&&u.type!==Od&&"time";_&&(c===Rp||c===mc?S.formatType=_:yye(c)?S.legend={formatType:_,...S.legend}:on(c)&&(S.axis={formatType:_,...S.axis}))}s[c]=S}else n.push(f),s[c]=e[c]}else s[c]=e[c]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function dxe(e,t,n){const i=bye(t,n);if(i){if(i==="binned"){const r=e[t===Fa?Yt:Nn];return!!(ye(r)&&ye(e[t])&&jn(r.bin))}}else return!1;return!0}function hxe(e,t,n,i){const r={};for(const a of fe(e))VP(a)||ge(lve(a));for(let a of dye){if(!e[a])continue;const s=e[a];if(Bp(a)){const u=fye(a),c=r[u];if(ye(c)&&ube(c.type)&&ye(s)&&!c.timeUnit){ge(ive(u));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(ge(nve),a=ta),!dxe(e,a,t)){ge(Ox(a,t));continue}if(a===$o&&t==="line"&&Ca(e[a])?.aggregate){ge(uve);continue}if(a===Ki&&(n?"fill"in e:"stroke"in e)){ge(dH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===zp||a===kd&&!se(s)&&!wa(s)||a===mc&&se(s)){if(s){if(a===kd){const u=e[a];if(QH(u)){r[a]=u;continue}}r[a]=Ee(s).reduce((u,c)=>(ye(c)?u.push(kM(c,a)):ge(AC(c,a)),u),[])}}else{if(a===mc&&s===null)r[a]=null;else if(!ye(s)&&!Ds(s)&&!wa(s)&&!Ip(s)&&!Te(s)){ge(AC(s,a));continue}r[a]=nG(s,a,i)}}return r}function Yx(e,t){const n={};for(const i of fe(e)){const r=nG(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function gxe(e){const t=[];for(const n of fe(e))if(Jl(e,n)){const i=e[n],r=Ee(i);for(const a of r)ye(a)?t.push(a):Ix(a)&&t.push(a.condition)}return t}function OM(e,t,n){if(e)for(const i of fe(e)){const r=e[i];if(se(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function pxe(e,t,n,i){return e?fe(e).reduce((r,a)=>{const s=e[a];return se(s)?s.reduce((u,c)=>t.call(i,u,c,a),r):t.call(i,r,s,a)},n):n}function fG(e,t){return fe(t).reduce((n,i)=>{switch(i){case Yt:case Nn:case Dx:case Tx:case $x:case Fa:case As:case Zu:case lh:case ta:case Do:case ka:case Co:case Ku:case Oa:case Na:case Ra:case Jr:case Rp:case Ji:case zc:case mc:return n;case kd:if(e==="line"||e==="trail")return n;case zp:case Cx:{const r=t[i];if(se(r)||ye(r))for(const a of Ee(r))a.aggregate||n.push(xe(a,{}));return n}case $o:if(e==="trail")return n;case Ki:case Ss:case _s:case To:case Ju:case el:case nl:case tl:{const r=Ca(t[i]);return r&&!r.aggregate&&n.push(xe(r,{})),n}}},[])}function mxe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(se(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return se(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function CC(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:u})=>{const c=i?` of ${NM(t)}`:"";return{field:s+t.field,type:t.type,title:Te(u)?{signal:`${u}"${escape(c)}"`}:u+c}}),a=gxe(n).map(Kbe);return{tooltip:[...r,...Ka(a,nt)]}}function NM(e){const{title:t,field:n}=e;return sn(t,n)}function RM(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:u,mark:c,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=NM(n);return dG(e,u,r,{mark:c,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...Se(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...g}})}}function dG(e,t,n,i){const{clip:r,color:a,opacity:s}=e,u=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...hs(i.mark)?i.mark:{type:i.mark},style:`${u}-${String(t)}`,...Hu(e[t])?{}:e[t]}}]:[]}function hG(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],u=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:H1(a,n),continuousAxisChannelDef2:H1(s,n),continuousAxisChannelDefError:H1(u,n),continuousAxisChannelDefError2:H1(c,n),continuousAxis:r}}function H1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&ge(Bve(n,t)),i}else return e}function gG(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(hs(n)&&n.orient)return n.orient;if(Au(r)){if(Au(a)){const s=ye(r)&&r.aggregate,u=ye(a)&&a.aggregate;if(!s&&u===t)return"vertical";if(!u&&s===t)return"horizontal";if(s===t&&u===t)throw new Error("Both x and y cannot have aggregate");return Bd(a)&&!Bd(r)?"horizontal":"vertical"}return"horizontal"}else{if(Au(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Jv="boxplot",yxe=["box","median","outliers","rule","ticks"],vxe=new Gx(Jv,mG);function pG(e){return dt(e)?"tukey":e}function mG(e,{config:t}){e={...e,encoding:Yx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,u=hs(n)?n:{type:n};r&&ge(cH("boxplot"));const c=u.extent??t.boxplot.extent,f=$t("size",u,t),d=u.invalid,g=pG(c),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:E,groupby:S,aggregate:_,encodingWithoutContinuousAxis:w,ticksOrient:D,boxOrient:T,customTooltipWithoutAggregatedField:M}=bxe(e,c,t),$=uh(b.field),{color:F,size:N,...U}=w,B=Ba=>RM(u,E,b,Ba,t.boxplot),X=B(U),G=B(w),P=(Ae(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=B({...U,...N?{size:N}:{},color:{condition:{test:`${xt(`lower_box_${b.field}`)} >= ${xt(`upper_box_${b.field}`)}`,...F||{value:P}}}}),O=CC([{fieldPrefix:g==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:g==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,w),j={type:"tick",color:"black",opacity:1,orient:D,invalid:d,aria:!1},Y=g==="min-max"?O:CC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,w),V=[...X({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...X({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...X({partName:"ticks",mark:j,positionPrefix:"lower_whisker",extraEncoding:Y}),...X({partName:"ticks",mark:j,positionPrefix:"upper_whisker",extraEncoding:Y})],ee=[...g!=="tukey"?V:[],...G({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:T,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:O}),...z({partName:"median",mark:{type:"tick",invalid:d,...Ae(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:D,aria:!1},positionPrefix:"mid_box",extraEncoding:O})];if(g==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:ee};const R=xt(`lower_box_${b.field}`),q=xt(`upper_box_${b.field}`),J=`(${q} - ${R})`,ce=`${R} - ${c} * ${J}`,me=`${q} + ${c} * ${J}`,Me=xt(b.field),Pe={joinaggregate:yG(b.field),groupby:S},_t={transform:[{filter:`(${ce} <= ${Me}) && (${Me} <= ${me})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${$}`},{op:"max",field:b.field,as:`upper_whisker_${$}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${$}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${$}`},..._],groupby:S}],layer:V},{tooltip:pe,...Le}=U,{scale:ze,axis:de}=b,qt=NM(b),Xe=Xi(de,["title"]),It=dG(u,"outliers",t.boxplot,{transform:[{filter:`(${Me} < ${ce}) || (${Me} > ${me})`}],mark:"point",encoding:{[E]:{field:b.field,type:b.type,...qt!==void 0?{title:qt}:{},...ze!==void 0?{scale:ze}:{},...Tt(Xe)?{}:{axis:Xe}},...Le,...F?{color:F}:{},...M?{tooltip:M}:{}}})[0];let it;const Rt=[...p,...y,Pe];return It?it={transform:Rt,layer:[It,_t]}:(it=_t,it.transform.unshift(...Rt)),{...s,layer:[it,{transform:v,layer:ee}]}}function yG(e){const t=uh(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function bxe(e,t,n){const i=gG(e,Jv),{continuousAxisChannelDef:r,continuousAxis:a}=hG(e,i,Jv),s=r.field,u=uh(s),c=pG(t),f=[...yG(s),{op:"median",field:s,as:`mid_box_${u}`},{op:"min",field:s,as:(c==="min-max"?"lower_whisker_":"min_")+u},{op:"max",field:s,as:(c==="min-max"?"upper_whisker_":"max_")+u}],d=c==="min-max"||c==="tukey"?[]:[{calculate:`${xt(`upper_box_${u}`)} - ${xt(`lower_box_${u}`)}`,as:`iqr_${u}`},{calculate:`min(${xt(`upper_box_${u}`)} + ${xt(`iqr_${u}`)} * ${t}, ${xt(`max_${u}`)})`,as:`upper_whisker_${u}`},{calculate:`max(${xt(`lower_box_${u}`)} - ${xt(`iqr_${u}`)} * ${t}, ${xt(`min_${u}`)})`,as:`lower_whisker_${u}`}],{[a]:g,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=mxe(p),{bins:b,timeUnits:E,aggregate:S,groupby:_,encoding:w}=cG(v,n),D=i==="vertical"?"horizontal":"vertical",T=i,M=[...b,...E,{aggregate:[...S,...f],groupby:_},...d];return{bins:b,timeUnits:E,transform:M,groupby:_,aggregate:S,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:w,ticksOrient:D,boxOrient:T,customTooltipWithoutAggregatedField:y}}const zM="errorbar",xxe=["ticks","rule"],Exe=new Gx(zM,vG);function vG(e,{config:t}){e={...e,encoding:Yx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:u,outerSpec:c,tooltipEncoding:f}=bG(e,zM,t);delete a.size;const d=RM(u,r,i,a,t.errorbar),g=u.thickness,p=u.size,y={type:"tick",orient:s,aria:!1,...g!==void 0?{thickness:g}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...g!==void 0?{size:g}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...c,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function Axe(e,t){const{encoding:n}=e;if(Sxe(n))return{orient:gG(e,t),inputType:"raw"};const i=_xe(n),r=wxe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const u=n.x2,c=n.y2;if(qe(u)&&qe(c))throw new Error(`${t} cannot have both x2 and y2`);if(qe(u)){if(Au(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(qe(c)){if(Au(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const u=n.xError,c=n.xError2,f=n.yError,d=n.yError2;if(qe(c)&&!qe(u))throw new Error(`${t} cannot have xError2 without xError`);if(qe(d)&&!qe(f))throw new Error(`${t} cannot have yError2 without yError`);if(qe(u)&&qe(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(qe(u)){if(Au(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(qe(f)){if(Au(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Sxe(e){return(qe(e.x)||qe(e.y))&&!qe(e.x2)&&!qe(e.y2)&&!qe(e.xError)&&!qe(e.xError2)&&!qe(e.yError)&&!qe(e.yError2)}function _xe(e){return qe(e.x2)||qe(e.y2)}function wxe(e){return qe(e.xError)||qe(e.xError2)||qe(e.yError)||qe(e.yError2)}function bG(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...u}=e,c=hs(i)?i:{type:i};a&&ge(cH(t));const{orient:f,inputType:d}=Axe(e,t),{continuousAxisChannelDef:g,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=hG(e,f,t),{errorBarSpecificAggregate:E,postAggregateCalculates:S,tooltipSummary:_,tooltipTitleWithFieldName:w}=Cxe(c,g,p,y,v,d,t,n),{[b]:D,[b==="x"?"x2":"y2"]:T,[b==="x"?"xError":"yError"]:M,[b==="x"?"xError2":"yError2"]:$,...F}=r,{bins:N,timeUnits:U,aggregate:B,groupby:X,encoding:G}=cG(F,n),P=[...B,...E],z=d!=="raw"?[]:X,O=CC(_,g,G,w);return{transform:[...u.transform??[],...N,...U,...P.length===0?[]:[{aggregate:P,groupby:z}],...S],groupby:z,continuousAxisChannelDef:g,continuousAxis:b,encodingWithoutContinuousAxis:G,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:O}}function Cxe(e,t,n,i,r,a,s,u){let c=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":u.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ge(zve(y,v,s)),v==="stderr"||v==="stdev")c=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${xt(`center_${d}`)} + ${xt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${xt(`center_${d}`)} - ${xt(`extent_${d}`)}`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:Np(y)},{fieldPrefix:"upper_",titlePrefix:UR(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:UR(y,v,"-")}],p=!0;else{let b,E,S;v==="ci"?(b="mean",E="ci0",S="ci1"):(b="median",E="q1",S="q3"),c=[{op:E,field:d,as:`lower_${d}`},{op:S,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:sd({field:d,aggregate:S,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:sd({field:d,aggregate:E,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:sd({field:d,aggregate:b,type:"quantitative"},u,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ge(Rve(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:xt(n.field),as:`upper_${d}`},{calculate:xt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${xt(d)} + ${xt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${xt(d)} + ${xt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${xt(d)} - ${xt(i.field)}`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:pc(pc(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:c,tooltipSummary:g,tooltipTitleWithFieldName:p}}function UR(e,t,n){return`${Np(e)} ${n} ${t}`}const BM="errorband",Dxe=["band","borders"],$xe=new Gx(BM,xG);function xG(e,{config:t}){e={...e,encoding:Yx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:u,tooltipEncoding:c}=bG(e,BM,t),f=s,d=RM(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return g?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?ge(MR("interpolate")):f.tension&&ge(MR("tension")),{...u,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:c})]}}const EG={};function LM(e,t,n){const i=new Gx(e,t);EG[e]={normalizer:i,parts:n}}function Txe(){return fe(EG)}LM(Jv,mG,yxe);LM(zM,vG,xxe);LM(BM,xG,Dxe);const Mxe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],AG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},SG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Fxe=fe(AG),kxe=fe(SG),Oxe={header:1,headerRow:1,headerColumn:1,headerFacet:1},_G=fe(Oxe),wG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Nxe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Rxe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Da="_vgsid_",zxe={point:{on:"click",fields:[Da],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function UM(e){return e==="legend"||!!e?.legend}function KS(e){return UM(e)&&Ae(e)}function jM(e){return!!e?.select}function CG(e){const t=[];for(const n of e||[]){if(jM(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function Bxe(e){return Xx(e)||IM(e)||qM(e)}function qM(e){return he(e,"concat")}function Xx(e){return he(e,"vconcat")}function IM(e){return he(e,"hconcat")}function DG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function gs(e){return he(e,"step")}function jR(e){return he(e,"view")||he(e,"width")||he(e,"height")}const qR=20,Lxe={align:1,bounds:1,center:1,columns:1,spacing:1},Uxe=fe(Lxe);function jxe(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(qx(e)&&!qp(e.facet)||qM(e))&&(r.columns=s),Xx(e)&&(r.columns=1);for(const u of Uxe)if(e[u]!==void 0)if(u==="spacing"){const c=e[u];r[u]=dt(c)?c:{row:c.row??a,column:c.column??a}}else r[u]=e[u];return r}function DC(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function $C(e,t){const n=eb(e,t);return gs(n)?n.step:$G}function eb(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return sn(n,{step:e.step})}const $G=20,qxe={continuousWidth:200,continuousHeight:200,step:$G},Ixe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:qxe,mark:Obe,arc:{},area:{},bar:Bbe,circle:{},geoshape:{},image:{},line:{},point:{},rect:SM,rule:{color:"black"},square:{},text:{color:"black"},tick:Lbe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:gbe,projection:{},legend:Nxe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:zxe,style:{},title:{},facet:{spacing:qR},concat:{spacing:qR},normalizedNumberFormat:".0%"},Qs=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],IR={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},PR={blue:Qs[0],orange:Qs[1],red:Qs[2],teal:Qs[3],green:Qs[4],yellow:Qs[5],purple:Qs[6],pink:Qs[7],brown:Qs[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Pxe(e={}){return{signals:[{name:"color",value:Ae(e)?{...PR,...e}:PR}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Hxe(e){return{signals:[{name:"fontSize",value:Ae(e)?{...IR,...e}:IR}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Gxe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function TG(e){const t=fe(e||{}),n={};for(const i of t){const r=e[i];n[i]=Gp(r)?iH(r):mr(r)}return n}function Yxe(e){const t=fe(e),n={};for(const i of t)n[i]=TG(e[i]);return n}const Xxe=[...LH,...sG,..._G,"background","padding","legend","lineBreak","scale","style","title","view"];function MG(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=Gd({},je(Ixe),n?Gxe(n):{},t?Pxe(t):{},i?Hxe(i):{},a||{});r&&Yd(s,"selection",r,!0);const u=Xi(s,Xxe);for(const c of["background","lineBreak","padding"])s[c]&&(u[c]=mr(s[c]));for(const c of LH)s[c]&&(u[c]=qn(s[c]));for(const c of sG)s[c]&&(u[c]=TG(s[c]));for(const c of _G)s[c]&&(u[c]=qn(s[c]));if(s.legend&&(u.legend=qn(s.legend)),s.scale){const{invalid:c,...f}=s.scale,d=qn(c,{level:1});u.scale={...qn(f),...fe(d).length>0?{invalid:d}:{}}}return s.style&&(u.style=Yxe(s.style)),s.title&&(u.title=qn(s.title)),s.view&&(u.view=qn(s.view)),u}const Vxe=new Set(["view",...Dbe]),Wxe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Qxe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...kbe};function Zxe(e){e=je(e);for(const t of Wxe)delete e[t];if(e.axis)for(const t in e.axis)Gp(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Mxe)delete e.legend[t];if(e.mark){for(const t of kR)delete e.mark[t];e.mark.tooltip&&Ae(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(CG(e.params)),delete e.params);for(const t of Vxe){for(const i of kR)delete e[t][i];const n=Qxe[t];if(n)for(const i of n)delete e[t][i];Jxe(e,t)}for(const t of Txe())delete e[t];Kxe(e);for(const t in e)Ae(e[t])&&Tt(e[t])&&delete e[t];return Tt(e)?void 0:e}function Kxe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=nH(e.title);Tt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Tt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Tt(i)?delete e.title:e.title=i}function Jxe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};Tt(a)||(e.style[n??t]=a),delete e[t]}function Vx(e){return he(e,"layer")}function e2e(e){return he(e,"repeat")}function t2e(e){return!se(e.repeat)&&he(e.repeat,"layer")}class PM{map(t,n){return qx(t)?this.mapFacet(t,n):e2e(t)?this.mapRepeat(t,n):IM(t)?this.mapHConcat(t,n):Xx(t)?this.mapVConcat(t,n):qM(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Vx(t))return this.mapLayer(t,n);if(Fo(t))return this.mapUnit(t,n);throw new Error(rM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const n2e={zero:1,center:1,normalize:1};function i2e(e){return _e(n2e,e)}const r2e=new Set([RH,Bx,zx,Xv,Ux,EM,AM,Lx,zH,xM]),a2e=new Set([Bx,zx,RH]);function qf(e){return ye(e)&&Rd(e)==="quantitative"&&!e.bin}function HR(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],u=e[r];if(ye(s)&&ye(u))if(qf(s)&&qf(u)){if(s.stack)return t;if(u.stack)return r;const c=ye(s)&&!!s.aggregate,f=ye(u)&&!!u.aggregate;if(c!==f)return c?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(qf(s))return t;if(qf(u))return r}else{if(qf(s))return a&&n==="vertical"?void 0:t;if(qf(u))return a&&n==="horizontal"?void 0:r}}function s2e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function FG(e,t){const n=hs(e)?e:{type:e},i=n.type;if(!r2e.has(i))return null;const r=HR(t,"x",n)||HR(t,"theta",n);if(!r)return null;const a=t[r],s=ye(a)?xe(a,{}):void 0,u=s2e(r),c=[],f=new Set;if(t[u]){const b=t[u],E=ye(b)?xe(b,{}):void 0;E&&E!==s&&(c.push(u),f.add(E))}const d=u==="x"?"xOffset":"yOffset",g=t[d],p=ye(g)?xe(g,{}):void 0;p&&p!==s&&(c.push(d),f.add(p));const y=hye.reduce((b,E)=>{if(E!=="tooltip"&&Jl(t,E)){const S=t[E];for(const _ of Ee(S)){const w=Ca(_);if(w.aggregate)continue;const D=xe(w,{});(!D||!f.has(D))&&b.push({channel:E,fieldDef:w})}}return b},[]);let v;return a.stack!==void 0?Hu(a.stack)?v=a.stack?"zero":null:v=a.stack:a2e.has(i)&&(v="zero"),!v||!i2e(v)||lG(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==In.LINEAR&&a?.stack&&ge(kve(a.scale.type)),qe(t[ws(r)])?(a.stack!==void 0&&ge(Fve(r)),null):(ye(a)&&a.aggregate&&!Cye.has(a.aggregate)&&ge(Ove(a.aggregate)),{groupbyChannels:c,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:rl(i),stackBy:y,offset:v}))}function kG(e,t,n){const i=qn(e),r=$t("orient",i,n);if(i.orient=c2e(i.type,t,r),r!==void 0&&r!==i.orient&&ge(pve(i.orient,r)),i.type==="bar"&&i.orient){const c=$t("cornerRadiusEnd",i,n);if(c!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Rbe[i.orient];for(const d of f)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=$t("opacity",i,n),s=$t("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=u2e(i.type,t)),$t("cursor",i,n)===void 0&&(i.cursor=o2e(i,t,n)),i}function o2e(e,t,n){return t.href||e.href||$t("href",e,n)?"pointer":e.cursor}function u2e(e,t){if(Ze([Ux,xM,EM,AM],e)&&!lG(t))return .7}function l2e(e,t,{graticule:n}){if(n)return!1;const i=ds("filled",e,t),r=e.type;return sn(i,r!==Ux&&r!==Lx&&r!==Xv)}function c2e(e,t,n){switch(e){case Ux:case EM:case AM:case zH:case wbe:case _be:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case Bx:if(ye(i)&&(jn(i.bin)||ye(r)&&r.aggregate&&!i.aggregate))return"vertical";if(ye(r)&&(jn(r.bin)||ye(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(ye(i)&&i.type===bc&&!Nt(i.bin)||Wv(i))&&ye(r)&&jn(r.bin)?"horizontal":"vertical";if(!s)return(ye(r)&&r.type===bc&&!Nt(r.bin)||Wv(r))&&ye(i)&&jn(i.bin)?"vertical":"horizontal"}case Xv:if(a&&!(ye(i)&&jn(i.bin))&&s&&!(ye(r)&&jn(r.bin)))return;case zx:if(s)return ye(r)&&jn(r.bin)?"horizontal":"vertical";if(a)return ye(i)&&jn(i.bin)?"vertical":"horizontal";if(e===Xv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case Lx:case xM:{const u=zR(i),c=zR(r);if(n)return n;if(u&&!c)return e!=="tick"?"horizontal":"vertical";if(!u&&c)return e!=="tick"?"vertical":"horizontal";if(u&&c)return"vertical";{const f=Ti(i)&&i.type===Od,d=Ti(r)&&r.type===Od;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function f2e(e){const{point:t,line:n,...i}=e;return fe(i).length>1?i:i.type}function d2e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Xi(e[t],["point","line"])});return e}function JS(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ae(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ae(t.point)?t.point:{}:void 0}function GR(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class h2e{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Fo(t)){const{mark:i,encoding:r}=t,a=hs(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!JS(a,n[a.type],r);case"area":return!!JS(a,n[a.type],r)||!!GR(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:u,name:c,encoding:f,...d}=t,g=Yx(f,r),p=hs(u)?u:{type:u},y=JS(p,r[p.type],g),v=p.type==="area"&&GR(p,r[p.type]),b=[{name:c,...a?{params:a}:{},mark:f2e({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:Xi(g,["shape"])}],E=FG(kG(p,g,r),g);let S=g;if(E){const{fieldChannel:_,offset:w}=E;S={...g,[_]:{...g[_],...w?{stack:w}:{}}}}return S=Xi(S,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...Td(p,["clip","interpolate","tension","tooltip"]),...v},encoding:S}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...Td(p,["clip","tooltip"]),...y},encoding:S}),i({...d,layer:b},{...n,config:d2e(r)})}}function g2e(e,t){return t?qp(e)?NG(e,t):OG(e,t):e}function e_(e,t){return t?NG(e,t):e}function TC(e,t,n){const i=t[e];if(Qbe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ge(Yye(i.repeat));return}return t}function OG(e,t){if(e=TC("field",e,t),e!==void 0){if(e===null)return null;if(TM(e)&&po(e.sort)){const n=TC("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function YR(e,t){if(ye(e))return OG(e,t);{const n=TC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function XR(e,t){if(qe(e)){const n=YR(e,t);if(n)return n;if(Ip(e))return{condition:e.condition}}else{if(Pp(e)){const n=YR(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function NG(e,t){const n={};for(const i in e)if(he(e,i)){const r=e[i];if(se(r))n[i]=r.map(a=>XR(a,t)).filter(a=>a);else{const a=XR(r,t);a!==void 0&&(n[i]=a)}}return n}class p2e{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Fo(t)){const{encoding:n,mark:i}=t;if(i==="line"||hs(i)&&i.type==="line")for(const r of cye){const a=Bc(r),s=n[a];if(n[r]&&(ye(s)&&!jn(s.bin)||Ds(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ge(gve(!!r.x2,!!r.y2)),i({...t,mark:Ae(a)?{...a,type:"rule"}:"rule"},n)}}class m2e extends PM{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[vxe,Exe,$xe,new h2e,new p2e]}map(t,n){if(Fo(t)){const i=Jl(t.encoding,ho),r=Jl(t.encoding,go),a=Jl(t.encoding,wx);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=e_(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const u=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(s,n.config))return c.run(s,n,u);return s}mapRepeat(t,n){return t2e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:u,layer:c}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||u?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...u?{column:u}:{}},spec:{repeat:{layer:c},spec:r}},n):{...a,layer:c.map(g=>{const p={...f,layer:g},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Gt(g)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!se(i)&&t.columns&&(t=Xi(t,["columns"]),ge(CR("repeat")));const u=[],{repeater:c={},repeaterPrefix:f=""}=n,d=!se(i)&&i.row||[c?c.row:null],g=!se(i)&&i.column||[c?c.column:null],p=se(i)&&i||[c?c.repeat:null];for(const v of p)for(const b of d)for(const E of g){const S={repeat:v,row:b,column:E,layer:c.layer},_=(r.name?`${r.name}_`:"")+f+"child__"+(se(i)?`${Gt(v)}`:(i.row?`row_${Gt(b)}`:"")+(i.column?`column_${Gt(E)}`:"")),w=this.map(r,{...n,repeater:S,repeaterPrefix:_});w.name=_,u.push(Xi(w,["data"]))}const y=se(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:u}}mapFacet(t,n){const{facet:i}=t;return qp(i)&&t.columns&&(t=Xi(t,["columns"]),ge(CR("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:u}=n,c=WR({parentProjection:s,projection:r}),f=VR({parentEncoding:a,encoding:e_(i,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...f?{encoding:f}:{}},{config:u})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:u,width:c,projection:f,height:d,view:g,params:p,encoding:y,...v}=t,{facetMapping:b,layout:E}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),S=e_(s,n.repeater);return this.mapFacet({...v,...E,facet:b,spec:{...c?{width:c}:{},...d?{height:d}:{},...g?{view:g}:{},...f?{projection:f}:{},mark:u,encoding:S,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&ge(dve([...i?[ho]:[],...r?[go]:[]]));const s={},u={};for(const c of[ho,go]){const f=t[c];if(f){const{align:d,center:g,spacing:p,columns:y,...v}=f;s[c]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(u[b]??(u[b]={}),u[b][c]=f[b])}}return{facetMapping:s,layout:u}}else{const{align:s,center:u,spacing:c,columns:f,...d}=a;return{facetMapping:g2e(d,n.repeater),layout:{...s?{align:s}:{},...u?{center:u}:{},...c?{spacing:c}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...u}=t,c={...r,parentEncoding:VR({parentEncoding:n,encoding:a,layer:!0}),parentProjection:WR({parentProjection:i,projection:s})};return super.mapLayer({...u,...t.name?{name:[c.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},c)}}function VR({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...fe(e),...fe(t)]);for(const a of r){const s=t[a],u=e[a];if(qe(s)){const c={...u,...s};i[a]=c}else Pp(s)?i[a]={...s,condition:{...u,...s.condition}}:s||s===null?i[a]=s:(n||wa(u)||Te(u)||qe(u)||se(u))&&(i[a]=u)}}else i=t;return!i||Tt(i)?void 0:i}function WR(e){const{parentProjection:t,projection:n}=e;return t&&n&&ge(tve({parentProjection:t,projection:n})),n??t}function HM(e){return he(e,"filter")}function y2e(e){return he(e,"stop")}function RG(e){return he(e,"lookup")}function v2e(e){return he(e,"data")}function b2e(e){return he(e,"param")}function x2e(e){return he(e,"pivot")}function E2e(e){return he(e,"density")}function A2e(e){return he(e,"quantile")}function S2e(e){return he(e,"regression")}function _2e(e){return he(e,"loess")}function w2e(e){return he(e,"sample")}function C2e(e){return he(e,"window")}function D2e(e){return he(e,"joinaggregate")}function $2e(e){return he(e,"flatten")}function T2e(e){return he(e,"calculate")}function zG(e){return he(e,"bin")}function M2e(e){return he(e,"impute")}function F2e(e){return he(e,"timeUnit")}function k2e(e){return he(e,"aggregate")}function O2e(e){return he(e,"stack")}function N2e(e){return he(e,"fold")}function R2e(e){return he(e,"extent")&&!he(e,"density")&&!he(e,"regression")}function z2e(e){return e.map(t=>HM(t)?{filter:rd(t.filter,obe)}:t)}class B2e extends PM{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=QR(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=QR(t,n),t.encoding){const i={};for(const[r,a]of Uu(t.encoding))i[r]=BG(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:Uu(i).map(([a,s])=>{const{init:u,bind:c,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const g of Vn(n.selectionPredicates[a]??{}))g.empty=f!=="none";return{name:a,value:u,select:d,bind:c}})}:t}}function QR(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(HM(a))return{filter:MC(a,t)};if(zG(a)&&Lc(a.bin))return{...a,bin:LG(a.bin)};if(RG(a)){const{selection:s,...u}=a.from;return s?{...a,from:{param:s,...u}}:a}return a});return{...i,transform:r}}return e}function BG(e,t){const n=je(e);if(ye(n)&&Lc(n.bin)&&(n.bin=LG(n.bin)),Ic(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(Ip(n))if(se(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...u}=i;return a?i:{...u,test:MC(i,t)}});else{const{selection:i,param:r,test:a,...s}=BG(n.condition,t);n.condition=r?n.condition:{...s,test:MC(n.condition,t)}}return n}function LG(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function MC(e,t){const n=i=>rd(i,r=>{var a;const s=t.emptySelections[r]??!0,u={param:r,empty:s};return(a=t.selectionPredicates)[r]??(a[r]=[]),t.selectionPredicates[r].push(u),u});return e.selection?n(e.selection):rd(e.test||e.filter,i=>i.selection?n(i.selection):i)}class FC extends PM{map(t,n){const i=n.selections??[];if(t.params&&!Fo(t)){const r=[];for(const a of t.params)jM(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const u of s.views)(Se(u)&&(u===t.name||r.includes(u))||se(u)&&u.map(c=>r.indexOf(c)).every((c,f,d)=>c!==-1&&(f===0||c>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=FC.prototype[e];FC.prototype[e]=function(n,i){return t.call(this,n,L2e(n,i))}}function L2e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function UG(e,t){t===void 0&&(t=MG(e.config));const n=I2e(e,t),{width:i,height:r}=e,a=P2e(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const U2e=new m2e,j2e=new B2e,q2e=new FC;function I2e(e,t={}){const n={config:t};return q2e.map(U2e.map(j2e.map(e,n),n),n)}function ZR(e){return Se(e)?{type:e}:e??{}}function P2e(e,t,n){let{width:i,height:r}=t;const a=Fo(e)||Vx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(ge(AR("width")),i=void 0),r=="container"&&(ge(AR("height")),r=void 0));const u={type:"pad",...s,...n?ZR(n.autosize):{},...ZR(e.autosize)};if(u.type==="fit"&&!a&&(ge(Rye),u.type="pad"),i=="container"&&!(u.type=="fit"||u.type=="fit-x")&&ge(SR("width")),r=="container"&&!(u.type=="fit"||u.type=="fit-y")&&ge(SR("height")),!vr(u,{type:"pad"}))return u}function H2e(e){return["fit","fit-x","fit-y"].includes(e)}function G2e(e){return e?`fit-${Mx(e)}`:"fit"}const Y2e=["background","padding"];function KR(e,t){const n={};for(const i of Y2e)e&&e[i]!==void 0&&(n[i]=mr(e[i]));return t&&(n.params=e.params),n}class ko{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ko(je(this.explicit),je(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return sn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of fe(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Xa(e){return{explicit:!0,value:e}}function hr(e){return{explicit:!1,value:e}}function jG(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:Wx(t,n,i,r)}}function Wx(e,t,n,i){return e.explicit&&t.explicit&&ge(_ve(n,i,e.value,t.value)),e}function Iu(e,t,n,i,r=Wx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:vr(e.value,t.value)?e:r(e,t,n,i)}class X2e extends ko{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Ld(e){return he(e,"url")}function Wg(e){return he(e,"values")}function qG(e){return he(e,"name")&&!Ld(e)&&!Wg(e)&&!$u(e)}function $u(e){return e&&(IG(e)||PG(e)||GM(e))}function IG(e){return he(e,"sequence")}function PG(e){return he(e,"sphere")}function GM(e){return he(e,"graticule")}var Wt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Wt||(Wt={}));function HG({invalid:e,isPath:t}){switch(UH(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function V2e(e){const{marks:t,scales:n}=HG(e);return t===n?Wt.Main:n==="include-invalid-values"?Wt.PreFilterInvalid:Wt.PostFilterInvalid}class St{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ge(Kye);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Vi extends St{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${jP()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function t_(e){return e.as!==void 0}function JR(e){return`${e}_end`}class is extends St{clone(){return new is(null,je(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:u,timeUnit:c}=a;if(c){let f;if(qc(c)){if(Vt(n)){const{mark:d,markDef:g,config:p}=n,y=qu({fieldDef:a,markDef:g,config:p});(Vg(d)||y)&&(f={timeUnit:Fn(c),field:u})}}else f={as:xe(a,{forAs:!0}),field:u,timeUnit:c};if(Vt(n)){const{mark:d,markDef:g,config:p}=n,y=qu({fieldDef:a,markDef:g,config:p});Vg(d)&&on(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[nt(f)]=f)}return r},{});return Tt(i)?null:new is(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Fn(i),s={...r,timeUnit:a};return new is(t,{[nt(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Uu(this.timeUnits)){const a=t_(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Vn(this.timeUnits).map(t=>t_(t)?t.as:JR(t.field)))}dependentFields(){return new Set(Vn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${nt(this.timeUnits)}`}assemble(){const t=[];for(const n of Vn(this.timeUnits)){const{rectBandPosition:i}=n,r=Fn(n.timeUnit);if(t_(n)){const{field:a,as:s}=n,{unit:u,utc:c,...f}=r,d=[s,`${s}_end`];t.push({field:Kr(a),type:"timeunit",...u?{units:Nx(u)}:{},...c?{timezone:"utc"}:{},...f,as:d}),t.push(...e9(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),u=GG({timeUnit:r,field:s}),c=JR(s);t.push({type:"formula",expr:u,as:c}),t.push(...e9([s,c],i,r))}}return t}}const Qx="offsetted_rect_start",Zx="offsetted_rect_end";function GG({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=EH(i),{part:s,step:u}=wH(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${xt(t)}, ${n?-u:u})`}function e9([e,t],n,i){if(n!==void 0&&n!==.5){const r=xt(e),a=xt(t);return[{type:"formula",expr:t9([GG({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${Qx}`},{type:"formula",expr:t9([r,a],n+.5),as:`${e}_${Zx}`}]}return[]}function t9([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Yp="_tuple_fields";class W2e{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Q2e={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new W2e),a={},s={},u=new Set,c=(v,b)=>{const E=b==="visual"?v.channel:v.field;let S=Gt(`${i}_${E}`);for(let _=1;u.has(S);_++)S=Gt(`${i}_${E}_${_}`);return u.add(S),{[b]:S}},f=t.type,d=e.config.selection[f],g=n.value!==void 0?Ee(n.value):null;let{fields:p,encodings:y}=Ae(n.select)?n.select:{};if(!p&&!y&&g){for(const v of g)if(Ae(v))for(const b of fe(v))lye(b)?(y||(y=[])).push(b):f==="interval"?(ge(Gye),y=d.encodings):(p??(p=[])).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let E=b.field;if(b.aggregate){ge(zye(v,b.aggregate));continue}else if(!E){ge(wR(v));continue}if(b.timeUnit&&!qc(b.timeUnit)){E=e.vgField(v);const S={timeUnit:b.timeUnit,as:E,field:b.field};s[nt(S)]=S}if(!a[E]){const S=f==="interval"&&Cs(v)&&_a(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",_={field:E,channel:v,type:S,index:r.items.length};_.signals={...c(_,"data"),...c(_,"visual")},r.items.push(a[E]=_),r.hasField[E]=a[E],r.hasSelectionId=r.hasSelectionId||E===Da,YP(v)?(_.geoChannel=v,_.channel=GP(v),r.hasChannel[_.channel]=a[E]):r.hasChannel[v]=a[E]}}else ge(wR(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...c(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===Da}g&&(t.init=g.map(v=>r.items.map(b=>Ae(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),Tt(s)||(r.timeUnit=new is(null,s))},signals:(e,t,n)=>{const i=t.name+Yp;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(WG)})}},YG="_curr",Dy="anim_value",Gf="anim_clock",kC="eased_anim_clock",XG="min_extent",VG="max_range_extent",n_="last_tick_at",i_="is_playing",Z2e=1/60*1e3,K2e=(e,t)=>[{name:kC,update:Gf},{name:`${e}_domain`,init:`domain('${t}')`},{name:XG,init:`extent(${e}_domain)[0]`},{name:VG,init:`extent(range('${t}'))[1]`},{name:Dy,update:`invert('${t}', ${kC})`}],J2e={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(rs(t)&&(n=n.concat([{name:Gf,init:"0",on:[{events:{type:"timer",throttle:Z2e},update:`${i_} ? (${Gf} + (now() - ${n_}) > ${VG} ? 0 : ${Gf} + (now() - ${n_})) : ${Gf}`}]},{name:n_,init:"now()",on:[{events:[{signal:Gf},{signal:i_}],update:"now()"}]},{name:i_,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+Yp,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",u=Vn(e.component.selection??{}).reduce((d,g)=>g.type==="interval"?d.concat(g.name+od):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${u?` && ${u}`:""}`;let f=`unit: ${ec(e)}, `;if(t.project.hasSelectionId)f+=`${Da}: ${s}[${ve(Da)}]`;else if(rs(t))f+=`fields: ${r}, values: [${Dy} ? ${Dy} : ${XG}]`;else{const d=a.items.map(g=>e.fieldDef(g.channel)?.bin?`[${s}[${ve(e.vgField(g.channel,{}))}], ${s}[${ve(e.vgField(g.channel,{binSuffix:"end"}))}]]`:`${s}[${ve(g.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(rs(t))return n.concat(K2e(t.name,e.scaleName(Ku)),[{name:i+So,on:[{events:[{signal:kC},{signal:Dy}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+So,on:d?[{events:d,update:`${c} ? {${f}} : null`,force:!0}]:[]}])}}};function WG(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Kr(r.field),r}function Ac(e,t=!0,n=di){if(se(e)){const i=e.map(r=>Ac(r,t,n));return t?`[${i.join(", ")}]`:i}else if(jc(e))return n(t?vc(e):Wve(e));return t?n(Mt(e)):e}function eEe(e,t){for(const n of Vn(e.component.selection??{})){const i=n.name;let r=`${i}${So}, ${n.resolve==="global"?"true":`{unit: ${ec(e)}}`}`;for(const a of Jx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+DEe,on:[{events:{signal:n.name+So},update:`modify(${ve(n.name+Sc)}, ${r})`}]})}return YM(t)}function tEe(e,t){if(e.component.selection&&fe(e.component.selection).length){const n=ve(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Qu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return YM(t)}function nEe(e,t){let n=!1;for(const i of Vn(e.component.selection??{})){const r=i.name,a=ve(r+Sc);if(t.filter(u=>u.name===r).length===0){const u=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${dY}(${a}, ${ve(u)}${c}`})}n=!0;for(const u of Jx)u.defined(i)&&u.topLevelSignals&&(t=u.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),YM(t)}function iEe(e,t){const n=[],i=[],r=ec(e,{escape:!1});for(const a of Vn(e.component.selection??{})){const s={name:a.name+Sc};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Da}}]),a.init){const c=a.project.items.map(WG);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[Da]:Ac(f,!1)[0]})):a.init.map(f=>({unit:r,fields:c,values:Ac(f,!1)}))}if([...n,...t].filter(c=>c.name===a.name+Sc).length||n.push(s),rs(a)&&t.length){const c=e.lookupDataSource(e.getDataName(Wt.Main)),f=t.find(g=>g.name===c),d=f.transform.find(g=>g.type==="filter"&&g.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const g={name:f.name+YG,source:f.name,transform:[d]};i.push(g)}}}return n.concat(t,i)}function QG(e,t){for(const n of Vn(e.component.selection??{}))for(const i of Jx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function rEe(e,t){for(const n of e.children)Vt(n)&&(t=QG(n,t));return t}function aEe(e,t,n,i){const r=SY(e,t.param,t);return{signal:_a(n.get("type"))&&se(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function YM(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const mo={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Cs(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&ge(jye),!a||!_a(s)){ge(Uye);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(u=>u.name===s.signals.data).length===0);if(!e.parent||NC(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(dY))r.update=`{${i.map(s=>`${ve(Kr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const u=`${ve(Kr(s.field))}: ${s.signals.data}`;a.includes(u)||(a=`${a.substring(0,a.length-1)}, ${u}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!NC(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function OC(e,t){return`domain(${ve(e.scaleName(t))})`}function NC(e){return e.parent&&ph(e.parent)&&(!e.parent.parent||NC(e.parent.parent))}const od="_brush",ZG="_scale_trigger",k0="geo_interval_init_tick",KG="_init",sEe="_center",oEe={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...Ae(n.select)?n.select:{}};r.fields=[Da],r.encodings||(r.encodings=n.value?fe(n.value):[Na,Oa]),n.select={type:"interval",...r}}if(t.translate&&!mo.defined(t)){const r=`!event.item || event.item.mark.name !== ${ve(t.name+od)}`;for(const a of t.events){if(!a.between){ge(`${a} is not an ordered event stream for interval selections.`);continue}const s=Ee((i=a.between[0]).filter??(i.filter=[]));s.includes(r)||s.push(r)}}},signals:(e,t,n)=>{const i=t.name,r=i+So,a=Vn(t.project.hasChannel).filter(u=>u.channel===Yt||u.channel===Nn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((u,c)=>u.concat(uEe(e,t,c,s&&s[c.index])),[])),e.hasProjection){const u=ve(e.projectionName()),c=e.projectionName()+sEe,{x:f,y:d}=t.project.hasChannel,g=f&&f.signals.visual,p=d&&d.signals.visual,y=f?s&&s[f.index]:`${c}[0]`,v=d?s&&s[d.index]:`${c}[1]`,b=T=>e.getSizeSignalRef(T).signal,E=`[[${g?g+"[0]":"0"}, ${p?p+"[0]":"0"}],[${g?g+"[1]":b("width")}, ${p?p+"[1]":b("height")}]]`;s&&(n.unshift({name:i+KG,init:`[scale(${u}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${u}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(M=>M.name===c)||n.unshift({name:c,update:`invert(${u}, [${b("width")}/2, ${b("height")}/2])`})));const S=`intersect(${E}, {markname: ${ve(e.getName("marks"))}}, unit.mark)`,_=`{unit: ${ec(e)}}`,w=`vlSelectionTuples(${S}, ${_})`,D=a.map(T=>T.signals.visual);return n.concat({name:r,on:[{events:[...D.length?[{signal:D.join(" || ")}]:[],...s?[{signal:k0}]:[]],update:w}]})}else{if(!mo.defined(t)){const f=i+ZG,d=a.map(g=>{const p=g.channel,{data:y,visual:v}=g.signals,b=ve(e.scaleName(p)),E=e.getScaleComponent(p).get("type"),S=_a(E)?"+":"";return`(!isArray(${y}) || (${S}invert(${b}, ${v})[0] === ${S}${y}[0] && ${S}invert(${b}, ${v})[1] === ${S}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(g=>({scale:e.scaleName(g.channel)})),update:d.join(" && ")+` ? ${f} : {}`}]})}const u=a.map(f=>f.signals.data),c=`unit: ${ec(e)}, fields: ${i+Yp}, values`;return n.concat({name:r,...s?{init:`{${c}: ${Ac(s)}}`}:{},...u.length?{on:[{events:[{signal:u.join(" || ")}],update:`${u.join(" && ")} ? {${c}: [${u}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Vt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===k0).length||n.unshift({name:k0,value:null,on:[{events:"timer{1}",update:`${k0} === null ? {} : ${k0}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,u=a?.signals.visual,c=`data(${ve(t.name+Sc)})`;if(mo.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${u}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${u}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const E of fe(f))f[E]=[{test:`${c}.length && ${c}[0].unit === ${ec(e)}`,...f[E]},{value:0}];const{fill:d,fillOpacity:g,cursor:p,...y}=t.mark,v=fe(y).reduce((E,S)=>(E[S]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${u}[0] !== ${u}[1]`].filter(_=>_).join(" && "),value:y[S]},{value:null}],E),{}),b=p??(t.translate?"move":null);return[{name:`${i+od}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:g}},update:f}},...n,{name:i+od,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function uEe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,u=ve(r?e.scaleName(a):e.projectionName()),c=p=>`scale(${u}, ${p})`,f=e.getSizeSignalRef(a===Yt?"width":"height").signal,d=`${a}(unit)`,g=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=mo.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,E=i?{init:Ac(i,!0,c)}:{value:[]};return g.push({events:{signal:t.name+ZG},update:_a(b)?`[${c(`${p}[0]`)}, ${c(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...E,on:g},{name:p,...i?{init:Ac(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${u}, ${s})`}]}]}else{const p=a===Yt?0:1,y=t.name+KG,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:g}]}}function fh({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=Ip(t)&&t.condition;let s=[];a&&(s=Ee(a).map(f=>{const d=r(f);if(Wbe(f)){const{param:g,empty:p}=f;return{test:AY(e,{param:g,empty:p}),...d}}else return{test:rb(e,f.test),...d}})),i!==void 0&&s.push(i);const u=r(t);return u!==void 0&&s.push(u),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function XM(e,t="text"){const n=e.encoding[t];return fh({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>Kx(i,e.config),invalidValueRef:void 0})}function Kx(e,t,n="datum"){if(e){if(wa(e))return Ut(e.value);if(qe(e)){const{format:i,formatType:r}=Zv(e);return DM({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function JG(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(se(s))return{tooltip:n9({tooltip:s},a,r,t)};{const u=t.reactiveGeom?"datum.datum":"datum";return fh({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=Kx(f,r,u);if(d)return d;if(f===null)return;let g=$t("tooltip",i,r);if(g===!0&&(g={content:"encoding"}),Se(g))return{value:g};if(Ae(g))return Te(g)?g:g.content==="encoding"?n9(n,a,r,t):{signal:u}},invalidValueRef:void 0})}}function eY(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",u=[];function c(d,g){const p=Bc(g),y=Ti(d)?d:{...d,type:e[p].type},v=y.title||FM(y,r),b=Ee(v).join(", ").replaceAll(/"/g,'\\"');let E;if(on(g)){const S=g==="x"?"x2":"y2",_=Ca(e[S]);if(jn(y.bin)&&_){const w=xe(y,{expr:s}),D=xe(_,{expr:s}),{format:T,formatType:M}=Zv(y);E=jp(w,D,T,M,r),a.add(S)}}if((on(g)||g===ta||g===ka)&&t&&t.fieldChannel===g&&t.offset==="normalize"){const{format:S,formatType:_}=Zv(y);E=DM({fieldOrDatumDef:y,format:S,formatType:_,expr:s,config:r,normalizeStack:!0}).signal}E??(E=Kx(y,r,s).signal),u.push({channel:g,key:b,value:E})}OM(e,(d,g)=>{ye(d)?c(d,g):Ix(d)&&c(d.condition,g)});const f={};for(const{channel:d,key:g,value:p}of u)!a.has(d)&&!f[g]&&(f[g]=p);return f}function n9(e,t,n,{reactiveGeom:i}={}){const r=eY(e,t,n,{reactiveGeom:i}),a=Uu(r).map(([s,u])=>`"${s}": ${u}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function lEe(e){const{markDef:t,config:n}=e,i=$t("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...cEe(e),...fEe(e)}}function cEe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=$t("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:_e(kye,t)?{}:{ariaRoleDescription:{value:t}}}function fEe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return fh({model:e,channelDef:a,vgChannel:"description",mainRefFn:c=>Kx(c,e.config),invalidValueRef:void 0});const s=$t("description",n,i);if(s!=null)return{description:Ut(s)};if(i.aria===!1)return{};const u=eY(t,r,i);if(!Tt(u))return{description:{signal:Uu(u).map(([c,f],d)=>`"${d>0?"; ":""}${c}: " + (${f})`).join(" + ")}}}function Pn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:u,defaultValue:c}=n;const f=r[e];u===void 0&&(c??(c=$t(e,i,a,{vgChannel:s,ignoreVgConfig:!Ip(f)})),c!==void 0&&(u=Ut(c)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},g=qH({...d,scaleChannel:e,channelDef:f});return fh({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:g,mainRefFn:y=>CM({...d,channel:e,channelDef:y,stack:null,defaultRef:u})})}function tY(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??$t("filled",n,r),u=Ze(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,c=$t(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??u,f=$t(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",g={...c?{fill:Ut(c)}:{},...f?{stroke:Ut(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&ge(dH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...g,...Pn("color",e,{vgChannel:d,defaultValue:s?c:f}),...Pn("fill",e,{defaultValue:i.fill?c:void 0}),...Pn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function dEe(e){const{encoding:t,mark:n}=e,i=t.order;return!rl(n)&&wa(i)?fh({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Ut(r.value),invalidValueRef:void 0}):{}}function Ud({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],u=n[a];if((a==="xOffset"||a==="yOffset")&&u)return{offsetType:"encoding",offset:CM({channel:a,channelDef:u,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Ut(s),bandPosition:r})};const c=t[a];return c?{offsetType:"visual",offset:c}:{}}function _i(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:u}=t,c=r[e],f=r[ws(e)],d=t.scaleName(e),g=t.getScaleComponent(e),{offset:p,offsetType:y}=Ud({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=VM({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),b=!c&&on(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:hEe({channel:e,channelDef:c,channel2Def:f,markDef:a,config:s,scaleName:d,scale:g,stack:u,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function hEe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(qe(n)&&r&&t===r.fieldChannel){if(ye(n)){let u=n.bandPosition;if(u===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(u=.5),u!==void 0)return Vv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:u,offset:a})}return Kl(n,i,{suffix:"end"},{offset:a})}return wM(e)}function VM({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const u=Bc(n),c=ju(n),f=$t(n,a,s,{vgChannel:c});if(f!==void 0)return xg(n,f);switch(t){case"zeroOrMin":return i9({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:u,config:s});case"zeroOrMax":return i9({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:u,config:s});case"mid":return{...e[er(n)],mult:.5}}}}function i9({mainChannel:e,config:t,...n}){const i=jH(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const gEe={left:"x",center:"xc",right:"x2"},pEe={top:"y",middle:"yc",bottom:"y2"};function nY(e,t,n,i="middle"){if(e==="radius"||e==="theta")return ju(e);const r=e==="x"?"align":"baseline",a=$t(r,t,n);let s;return Te(a)?(ge(hve(r)),s=void 0):s=a,e==="x"?gEe[s||(i==="top"?"left":"center")]:pEe[s||i]}function tb(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?iY(e,t,{defaultPos:n,defaultPos2:i}):_i(e,t,{defaultPos:n})}function iY(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=ws(e),u=er(e),c=mEe(t,i,s),f=c[u]?nY(e,r,a):ju(e);return{..._i(e,t,{defaultPos:n,vgChannel:f}),...c}}function mEe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:u}=e,c=Bc(n),f=er(n),d=ju(n),g=i[c],p=e.scaleName(c),y=e.getScaleComponent(c),{offset:v}=n in i||n in a?Ud({channel:n,markDef:a,encoding:i,model:e}):Ud({channel:c,markDef:a,encoding:i,model:e});if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const E=er(n),S=e.markDef[E];return S!=null?{[E]:{value:S}}:{[d]:{field:e.getName(n)}}}const b=yEe({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:u,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:G1(n,a)||G1(n,{[n]:EC(n,a,u.style),[f]:EC(f,a,u.style)})||G1(n,u[r])||G1(n,u.mark)||{[d]:VM({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function yEe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:u,offset:c,defaultRef:f}){return qe(t)&&u&&e.charAt(0)===u.fieldChannel.charAt(0)?Kl(t,a,{suffix:"start"},{offset:c}):wM({channel:e,channelDef:n,scaleName:a,scale:s,stack:u,markDef:i,config:r,offset:c,defaultRef:f})}function G1(e,t){const n=er(e),i=ju(e);if(t[i]!==void 0)return{[i]:xg(e,t[i])};if(t[e]!==void 0)return{[i]:xg(e,t[e])};if(t[n]){const r=t[n];if(xc(r))ge(ove(n));else return{[n]:xg(e,r)}}}function Ao(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=ws(t),u=er(t),c=i[t],f=i[s],d=e.getScaleComponent(t),g=d?d.get("type"):void 0,p=r.orient,y=i[u]??i.size??$t("size",r,n,{vgChannel:u}),v=QP(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return ye(c)&&(Nt(c.bin)||jn(c.bin)||c.timeUnit&&!f)&&!(y&&!xc(y))&&!i[v]&&!kn(g)?xEe({fieldDef:c,fieldDef2:f,channel:t,model:e}):(qe(c)&&kn(g)||b)&&!f?bEe(c,t,e):iY(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function vEe(e,t,n,i,r,a,s){if(xc(r))if(n){const c=n.get("type");if(c==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=ds("minBandSize",{type:s},i);return{signal:d?`max(${ya(d)}, ${f})`:f}}else r.band!==1&&(ge(yve(c)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Te(r))return r;if(r)return{value:r}}if(n){const c=n.get("range");if(Uc(c)&&dt(c.step))return{value:c.step-2}}if(!a){const{bandPaddingInner:c,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:g}=i.scale,p=sn(c,s==="tick"?g:s==="bar"?f:d);if(Te(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(dt(p))return{signal:`${1-p} * ${e}`}}return{value:$C(i.view,e)-2}}function bEe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,u=i.orient,c=n.scaleName(t),f=n.getScaleComponent(t),d=er(t),g=ws(t),p=QP(t),y=n.scaleName(p),v=n.getScaleComponent(KT(t)),b=i.type==="tick"||u==="horizontal"&&t==="y"||u==="vertical"&&t==="x";let E;(r.size||i.size)&&(b?E=Pn("size",n,{vgChannel:d,defaultRef:Ut(i.size)}):ge(Eve(i.type)));const S=!!E,_=VH({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});E=E||{[d]:vEe(d,y||c,v||f,a,_,!!e,i.type)};const w=(f||v)?.get("type")==="band"&&xc(_)&&!S?"top":"middle",D=nY(t,i,a,w),T=D==="xc"||D==="yc",{offset:M,offsetType:$}=Ud({channel:t,markDef:i,encoding:r,model:n,bandPosition:T?.5:0}),F=wM({channel:t,channelDef:e,markDef:i,config:a,scaleName:c,scale:f,stack:s,offset:M,defaultRef:VM({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:f}),bandPosition:T?$==="encoding"?0:.5:Te(_)?{signal:`(1-${_})/2`}:xc(_)?(1-_.band)/2:0});if(d)return{[D]:F,...E};{const N=ju(g),U=E[d],B=M?{...U,offset:M}:U;return{[D]:F,[N]:se(F)?[F[0],{...F[1],offset:B}]:{...F,offset:B}}}}function r9(e,t,n,i,r,a,s){if(HP(e))return 0;const u=e==="x"||e==="y2",c=u?-t/2:t/2;if(Te(n)||Te(r)||Te(i)||a){const f=ya(n),d=ya(r),g=ya(i),p=ya(a),v=a?`(${s} < ${p} ? ${u?"":"-"}0.5 * (${p} - (${s})) : ${c})`:c,b=g?`${g} + `:"",E=f?`(${f} ? -1 : 1) * `:"",S=d?`(${d} + ${v})`:v;return{signal:b+E+S}}else return r=r||0,i+(n?-r-c:+r+c)}function xEe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,u=i.getScaleComponent(n),c=i.scaleName(n),f=u?u.get("type"):void 0,d=u.get("reverse"),g=VH({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=on(n)?$t("binSpacing",a,r)??0:0,b=ws(n),E=ju(n),S=ju(b),_=ds("minBandSize",a,r),{offset:w}=Ud({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:D}=Ud({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),T=Pbe({fieldDef:e,scaleName:c}),M=r9(n,v,d,y,w,_,T),$=r9(b,v,d,y,D??w,_,T),F=Te(g)?{signal:`(1-${g.signal})/2`}:xc(g)?(1-g.band)/2:.5,N=qu({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Nt(e.bin)||e.timeUnit){const U=e.timeUnit&&N!==.5;return{[S]:a9({fieldDef:e,scaleName:c,bandPosition:F,offset:$,useRectOffsetField:U}),[E]:a9({fieldDef:e,scaleName:c,bandPosition:Te(F)?{signal:`1-${F.signal}`}:1-F,offset:M,useRectOffsetField:U})}}else if(jn(e.bin)){const U=Kl(e,c,{},{offset:$});if(ye(t))return{[S]:U,[E]:Kl(t,c,{},{offset:M})};if(Lc(e.bin)&&e.bin.step)return{[S]:U,[E]:{signal:`scale("${c}", ${xe(e,{expr:"datum"})} + ${e.bin.step})`,offset:M}}}ge(pH(b))}function a9({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Vv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:Qx,endSuffix:Zx}:{}})}const EEe=new Set(["aria","width","height"]);function na(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?tY(e):{};return{...AEe(e.markDef,t),...s9("fill",n),...s9("stroke",i),...Pn("opacity",e),...Pn("fillOpacity",e),...Pn("strokeOpacity",e),...Pn("strokeWidth",e),...Pn("strokeDash",e),...dEe(e),...JG(e),...XM(e,"href"),...lEe(e)}}function s9(e,t){return t?{[e]:t}:{}}function AEe(e,t){return Fye.reduce((n,i)=>(!EEe.has(i)&&he(e,i)&&t[i]!=="ignore"&&(n[i]=Ut(e[i])),n),{})}function WM(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!Cs(a)||!(s=e.getScaleType(a)))return;const u=Fx(r.aggregate),c=_M({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:u});if(jbe(c)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>Rx(a,!0)).join(" && ")}}}function o9(e,t){if(t!==void 0)return{[e]:Ut(t)}}const r_="voronoi",rY={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(r_)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(rl(a))return ge(Bye(a)),n;const s={name:e.getName(r_),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...JG(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let u=0,c=!1;return n.forEach((f,d)=>{const g=f.name??"";g===e.component.mark[0].name?u=d:g.includes(r_)&&(c=!0)}),c||n.splice(u+1,0,s),n}},aY={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!UM(e.bind),parse:(e,t,n)=>hY(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init&&t.init[0],u=rY.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((c,f)=>{const d=Gt(`${i}_${c.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Ac(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${u}[${ve(c.field)}] : null`}]:[],bind:a[c.field]??a[c.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+So),s=i+Yp,u=r.items.map(f=>Gt(`${i}_${f.field}`)),c=u.map(f=>`${f} !== null`).join(" && ");return u.length&&(a.update=`${c} ? {fields: ${s}, values: [${u.join(", ")}]} : null`),delete a.value,delete a.on,n}},nb="_toggle",sY={defined:e=>e.type==="point"&&!rs(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+nb,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+So,i=t.name+nb;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${ec(e)}}, `)+`${i} ? ${n} : null`}},SEe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!rs(e),parse:(e,t)=>{t.clear&&(t.clear=Se(t.clear)?Qu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(aY.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Gt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(u=>u.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+So);i(r,"null"),sY.defined(t)&&(r=n.findIndex(a=>a.name===t.name+nb),i(r,"false"))}return n}},oY={defined:e=>{const t=e.resolve==="global"&&e.bind&&UM(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Da;return t&&!n&&ge(qye),t&&n},parse:(e,t,n)=>{const i=je(n);if(i.select=Se(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},hY(t,i),Ae(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const u of t.events)u.filter=Ee(u.filter??[]),u.filter.includes(s)||u.filter.push(s)}const r=KS(t.bind)?t.bind.legend:"click",a=Se(r)?Qu(r,"view"):Ee(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=KS(t.bind)&&t.bind.legend,a=s=>u=>{const c=je(u);return c.markname=s,c};for(const s of t.project.items){if(!s.hasLegend)continue;const u=`${Gt(s.field)}_legend`,c=`${i}_${u}`;if(n.filter(d=>d.name===c).length===0){const d=r.merge.map(a(`${u}_symbols`)).concat(r.merge.map(a(`${u}_labels`))).concat(r.merge.map(a(`${u}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+So),s=i+Yp,u=r.items.filter(p=>p.hasLegend).map(p=>Gt(`${i}_${Gt(p.field)}_legend`)),f=`${u.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${u.join(", ")}]} : null`;t.events&&u.length>0?a.on.push({events:u.map(p=>({signal:p})),update:f}):u.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+nb),g=KS(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:g}):d.on[0].events=g),n}};function _Ee(e,t,n){const i=e.fieldDef(t)?.field;for(const r of Vn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&oY.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const uY="_translate_anchor",lY="_translate_delta",wEe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=mo.defined(t),a=i+uY,{x:s,y:u}=t.project.hasChannel;let c=Qu(t.translate,"scope");return r||(c=c.map(f=>(f.between[0].markname=i+od,f))),n.push({name:a,value:{},on:[{events:c.map(f=>f.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${r?OC(e,Yt):`slice(${s.signals.visual})`}`:"")+(u!==void 0?`, extent_y: ${r?OC(e,Nn):`slice(${u.signals.visual})`}`:"")+"}"}]},{name:i+lY,value:{},on:[{events:c,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&u9(e,t,s,"width",n),u!==void 0&&u9(e,t,u,"height",n),n}};function u9(e,t,n,i,r){const a=t.name,s=a+uY,u=a+lY,c=n.channel,f=mo.defined(t),d=r.find(T=>T.name===n.signals[f?"data":"visual"]),g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),y=p&&p.get("type"),v=p&&p.get("reverse"),b=f?c===Yt?v?"":"-":v?"-":"":"",E=`${s}.extent_${c}`,S=`${b}${u}.${c} / ${f?`${g}`:`span(${E})`}`,_=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",w=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",D=`${_}(${E}, ${S}${w})`;d.on.push({events:{signal:u},update:f?D:`clampRange(${D}, 0, ${g})`})}const cY="_zoom_anchor",fY="_zoom_delta",CEe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=mo.defined(t),a=i+fY,{x:s,y:u}=t.project.hasChannel,c=ve(e.scaleName(Yt)),f=ve(e.scaleName(Nn));let d=Qu(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+od,g))),n.push({name:i+cY,on:[{events:d,update:r?"{"+[c?`x: invert(${c}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>g).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&l9(e,t,s,"width",n),u!==void 0&&l9(e,t,u,"height",n),n}};function l9(e,t,n,i,r){const a=t.name,s=n.channel,u=mo.defined(t),c=r.find(_=>_.name===n.signals[u?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),g=d&&d.get("type"),p=u?OC(e,s):c.name,y=a+fY,v=`${a}${cY}.${s}`,b=!u||!d?"zoomLinear":g==="log"?"zoomLog":g==="symlog"?"zoomSymlog":g==="pow"?"zoomPow":"zoomLinear",E=u?g==="pow"?`, ${d.get("exponent")??1}`:g==="symlog"?`, ${d.get("constant")??1}`:"":"",S=`${b}(${p}, ${v}, ${y}${E})`;c.on.push({events:{signal:y},update:u?S:`clampRange(${S}, 0, ${f})`})}const Sc="_store",So="_tuple",DEe="_modify",dY="vlSelectionResolve",Jx=[J2e,oEe,Q2e,sY,aY,mo,oY,SEe,wEe,CEe,rY];function $Ee(e){let t=e.parent;for(;t&&!Ar(t);)t=t.parent;return t}function ec(e,{escape:t}={escape:!0}){let n=t?ve(e.name):e.name;const i=$Ee(e);if(i){const{facet:r}=i;for(const a of Hr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ve(i.vgField(a))}])`)}return n}function QM(e){return Vn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function hY(e,t){(Se(t.select)||!t.select.on)&&delete e.events,(Se(t.select)||!t.select.clear)&&delete e.clear,(Se(t.select)||!t.select.toggle)&&delete e.toggle}function rs(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}const TEe="RawCode",MEe="Literal",FEe="Property",kEe="Identifier",OEe="ArrayExpression",NEe="BinaryExpression",REe="CallExpression",zEe="ConditionalExpression",BEe="LogicalExpression",LEe="MemberExpression",UEe="ObjectExpression",jEe="UnaryExpression";function za(e){this.type=e}za.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=qEe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function qEe(e){switch(e.type){case OEe:return e.elements;case NEe:case BEe:return[e.left,e.right];case REe:return[e.callee].concat(e.arguments);case zEe:return[e.test,e.consequent,e.alternate];case LEe:return[e.object,e.property];case UEe:return e.properties;case FEe:return[e.key,e.value];case jEe:return[e.argument];case kEe:case MEe:case TEe:default:return[]}}var $s,De,ae,ci,At,e2=1,Xp=2,_c=3,al=4,t2=5,Pc=6,Ii=7,Vp=8,IEe=9;$s={};$s[e2]="Boolean";$s[Xp]="<end>";$s[_c]="Identifier";$s[al]="Keyword";$s[t2]="Null";$s[Pc]="Numeric";$s[Ii]="Punctuator";$s[Vp]="String";$s[IEe]="RegularExpression";var PEe="ArrayExpression",HEe="BinaryExpression",GEe="CallExpression",YEe="ConditionalExpression",gY="Identifier",XEe="Literal",VEe="LogicalExpression",WEe="MemberExpression",QEe="ObjectExpression",ZEe="Property",KEe="UnaryExpression",Mn="Unexpected token %0",JEe="Unexpected number",eAe="Unexpected string",tAe="Unexpected identifier",nAe="Unexpected reserved word",iAe="Unexpected end of input",RC="Invalid regular expression",a_="Invalid regular expression: missing /",pY="Octal literals are not allowed in strict mode.",rAe="Duplicate data property in object literal not allowed in strict mode",Yn="ILLEGAL",Qg="Disabled.",aAe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),sAe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function n2(e,t){if(!e)throw new Error("ASSERT: "+t)}function eo(e){return e>=48&&e<=57}function ZM(e){return"0123456789abcdefABCDEF".includes(e)}function Eg(e){return"01234567".includes(e)}function oAe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Zg(e){return e===10||e===13||e===8232||e===8233}function Wp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&aAe.test(String.fromCharCode(e))}function ib(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&sAe.test(String.fromCharCode(e))}const uAe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function mY(){for(;ae<ci;){const e=De.charCodeAt(ae);if(oAe(e)||Zg(e))++ae;else break}}function zC(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ae<ci&&ZM(De[ae])?(i=De[ae++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ft({},Mn,Yn);return String.fromCharCode(r)}function lAe(){var e,t,n,i;for(e=De[ae],t=0,e==="}"&&ft({},Mn,Yn);ae<ci&&(e=De[ae++],!!ZM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ft({},Mn,Yn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function yY(){var e,t;for(e=De.charCodeAt(ae++),t=String.fromCharCode(e),e===92&&(De.charCodeAt(ae)!==117&&ft({},Mn,Yn),++ae,e=zC("u"),(!e||e==="\\"||!Wp(e.charCodeAt(0)))&&ft({},Mn,Yn),t=e);ae<ci&&(e=De.charCodeAt(ae),!!ib(e));)++ae,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),De.charCodeAt(ae)!==117&&ft({},Mn,Yn),++ae,e=zC("u"),(!e||e==="\\"||!ib(e.charCodeAt(0)))&&ft({},Mn,Yn),t+=e);return t}function cAe(){var e,t;for(e=ae++;ae<ci;){if(t=De.charCodeAt(ae),t===92)return ae=e,yY();if(ib(t))++ae;else break}return De.slice(e,ae)}function fAe(){var e,t,n;return e=ae,t=De.charCodeAt(ae)===92?yY():cAe(),t.length===1?n=_c:uAe.hasOwnProperty(t)?n=al:t==="null"?n=t2:t==="true"||t==="false"?n=e2:n=_c,{type:n,value:t,start:e,end:ae}}function s_(){var e=ae,t=De.charCodeAt(ae),n,i=De[ae],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ae,{type:Ii,value:String.fromCharCode(t),start:e,end:ae};default:if(n=De.charCodeAt(ae+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ae+=2,{type:Ii,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ae};case 33:case 61:return ae+=2,De.charCodeAt(ae)===61&&++ae,{type:Ii,value:De.slice(e,ae),start:e,end:ae}}}if(s=De.substr(ae,4),s===">>>=")return ae+=4,{type:Ii,value:s,start:e,end:ae};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ae+=3,{type:Ii,value:a,start:e,end:ae};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ae+=2,{type:Ii,value:r,start:e,end:ae};if(r==="//"&&ft({},Mn,Yn),"<>=!+-*%&|^/".includes(i))return++ae,{type:Ii,value:i,start:e,end:ae};ft({},Mn,Yn)}function dAe(e){let t="";for(;ae<ci&&ZM(De[ae]);)t+=De[ae++];return t.length===0&&ft({},Mn,Yn),Wp(De.charCodeAt(ae))&&ft({},Mn,Yn),{type:Pc,value:parseInt("0x"+t,16),start:e,end:ae}}function hAe(e){let t="0"+De[ae++];for(;ae<ci&&Eg(De[ae]);)t+=De[ae++];return(Wp(De.charCodeAt(ae))||eo(De.charCodeAt(ae)))&&ft({},Mn,Yn),{type:Pc,value:parseInt(t,8),octal:!0,start:e,end:ae}}function c9(){var e,t,n;if(n=De[ae],n2(eo(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ae,e="",n!=="."){if(e=De[ae++],n=De[ae],e==="0"){if(n==="x"||n==="X")return++ae,dAe(t);if(Eg(n))return hAe(t);n&&eo(n.charCodeAt(0))&&ft({},Mn,Yn)}for(;eo(De.charCodeAt(ae));)e+=De[ae++];n=De[ae]}if(n==="."){for(e+=De[ae++];eo(De.charCodeAt(ae));)e+=De[ae++];n=De[ae]}if(n==="e"||n==="E")if(e+=De[ae++],n=De[ae],(n==="+"||n==="-")&&(e+=De[ae++]),eo(De.charCodeAt(ae)))for(;eo(De.charCodeAt(ae));)e+=De[ae++];else ft({},Mn,Yn);return Wp(De.charCodeAt(ae))&&ft({},Mn,Yn),{type:Pc,value:parseFloat(e),start:t,end:ae}}function gAe(){var e="",t,n,i,r,a=!1;for(t=De[ae],n2(t==="'"||t==='"',"String literal must starts with a quote"),n=ae,++ae;ae<ci;)if(i=De[ae++],i===t){t="";break}else if(i==="\\")if(i=De[ae++],!i||!Zg(i.charCodeAt(0)))switch(i){case"u":case"x":De[ae]==="{"?(++ae,e+=lAe()):e+=zC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Eg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ae<ci&&Eg(De[ae])&&(a=!0,r=r*8+"01234567".indexOf(De[ae++]),"0123".includes(i)&&ae<ci&&Eg(De[ae])&&(r=r*8+"01234567".indexOf(De[ae++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&De[ae]===`
`&&++ae;else{if(Zg(i.charCodeAt(0)))break;e+=i}return t!==""&&ft({},Mn,Yn),{type:Vp,value:e,octal:a,start:n,end:ae}}function pAe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ft({},RC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ft({},RC)}try{return new RegExp(e,t)}catch{return null}}function mAe(){var e,t,n,i,r;for(e=De[ae],n2(e==="/","Regular expression literal must start with a slash"),t=De[ae++],n=!1,i=!1;ae<ci;)if(e=De[ae++],t+=e,e==="\\")e=De[ae++],Zg(e.charCodeAt(0))&&ft({},a_),t+=e;else if(Zg(e.charCodeAt(0)))ft({},a_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||ft({},a_),r=t.substr(1,t.length-2),{value:r,literal:t}}function yAe(){var e,t,n;for(t="",n="";ae<ci&&(e=De[ae],!!ib(e.charCodeAt(0)));)++ae,e==="\\"&&ae<ci?ft({},Mn,Yn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ft({},RC,n),{value:n,literal:t}}function vAe(){var e,t,n,i;return At=null,mY(),e=ae,t=mAe(),n=yAe(),i=pAe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ae}}function bAe(e){return e.type===_c||e.type===al||e.type===e2||e.type===t2}function vY(){if(mY(),ae>=ci)return{type:Xp,start:ae,end:ae};const e=De.charCodeAt(ae);return Wp(e)?fAe():e===40||e===41||e===59?s_():e===39||e===34?gAe():e===46?eo(De.charCodeAt(ae+1))?c9():s_():eo(e)?c9():s_()}function Gi(){const e=At;return ae=e.end,At=vY(),ae=e.end,e}function bY(){const e=ae;At=vY(),ae=e}function xAe(e){const t=new za(PEe);return t.elements=e,t}function f9(e,t,n){const i=new za(e==="||"||e==="&&"?VEe:HEe);return i.operator=e,i.left=t,i.right=n,i}function EAe(e,t){const n=new za(GEe);return n.callee=e,n.arguments=t,n}function AAe(e,t,n){const i=new za(YEe);return i.test=e,i.consequent=t,i.alternate=n,i}function KM(e){const t=new za(gY);return t.name=e,t}function rg(e){const t=new za(XEe);return t.value=e.value,t.raw=De.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function d9(e,t,n){const i=new za(WEe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function SAe(e){const t=new za(QEe);return t.properties=e,t}function h9(e,t,n){const i=new za(ZEe);return i.key=t,i.value=n,i.kind=e,i}function _Ae(e,t){const n=new za(KEe);return n.operator=e,n.argument=t,n.prefix=!0,n}function ft(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(n2(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ae,n.description=r,n}function i2(e){e.type===Xp&&ft(e,iAe),e.type===Pc&&ft(e,JEe),e.type===Vp&&ft(e,eAe),e.type===_c&&ft(e,tAe),e.type===al&&ft(e,nAe),ft(e,Mn,e.value)}function fi(e){const t=Gi();(t.type!==Ii||t.value!==e)&&i2(t)}function jt(e){return At.type===Ii&&At.value===e}function o_(e){return At.type===al&&At.value===e}function wAe(){const e=[];for(ae=At.start,fi("[");!jt("]");)jt(",")?(Gi(),e.push(null)):(e.push(wc()),jt("]")||fi(","));return Gi(),xAe(e)}function g9(){ae=At.start;const e=Gi();return e.type===Vp||e.type===Pc?(e.octal&&ft(e,pY),rg(e)):KM(e.value)}function CAe(){var e,t,n,i;if(ae=At.start,e=At,e.type===_c)return n=g9(),fi(":"),i=wc(),h9("init",n,i);if(e.type===Xp||e.type===Ii)i2(e);else return t=g9(),fi(":"),i=wc(),h9("init",t,i)}function DAe(){var e=[],t,n,i,r={},a=String;for(ae=At.start,fi("{");!jt("}");)t=CAe(),t.key.type===gY?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ft({},rAe):r[i]=!0,e.push(t),jt("}")||fi(",");return fi("}"),SAe(e)}function $Ae(){fi("(");const e=JM();return fi(")"),e}const TAe={if:1};function MAe(){var e,t,n;if(jt("("))return $Ae();if(jt("["))return wAe();if(jt("{"))return DAe();if(e=At.type,ae=At.start,e===_c||TAe[At.value])n=KM(Gi().value);else if(e===Vp||e===Pc)At.octal&&ft(At,pY),n=rg(Gi());else{if(e===al)throw new Error(Qg);e===e2?(t=Gi(),t.value=t.value==="true",n=rg(t)):e===t2?(t=Gi(),t.value=null,n=rg(t)):jt("/")||jt("/=")?(n=rg(vAe()),bY()):i2(Gi())}return n}function FAe(){const e=[];if(fi("("),!jt(")"))for(;ae<ci&&(e.push(wc()),!jt(")"));)fi(",");return fi(")"),e}function kAe(){ae=At.start;const e=Gi();return bAe(e)||i2(e),KM(e.value)}function OAe(){return fi("."),kAe()}function NAe(){fi("[");const e=JM();return fi("]"),e}function RAe(){var e,t,n;for(e=MAe();;)if(jt("."))n=OAe(),e=d9(".",e,n);else if(jt("("))t=FAe(),e=EAe(e,t);else if(jt("["))n=NAe(),e=d9("[",e,n);else break;return e}function p9(){const e=RAe();if(At.type===Ii&&(jt("++")||jt("--")))throw new Error(Qg);return e}function $y(){var e,t;if(At.type!==Ii&&At.type!==al)t=p9();else{if(jt("++")||jt("--"))throw new Error(Qg);if(jt("+")||jt("-")||jt("~")||jt("!"))e=Gi(),t=$y(),t=_Ae(e.value,t);else{if(o_("delete")||o_("void")||o_("typeof"))throw new Error(Qg);t=p9()}}return t}function m9(e){let t=0;if(e.type!==Ii&&e.type!==al)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function zAe(){var e,t,n,i,r,a,s,u,c,f;if(e=At,c=$y(),i=At,r=m9(i),r===0)return c;for(i.prec=r,Gi(),t=[e,At],s=$y(),a=[c,i,s];(r=m9(At))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),u=a.pop().value,c=a.pop(),t.pop(),n=f9(u,c,s),a.push(n);i=Gi(),i.prec=r,a.push(i),t.push(At),n=$y(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=f9(a[f-1].value,a[f-2],n),f-=2;return n}function wc(){var e,t,n;return e=zAe(),jt("?")&&(Gi(),t=wc(),fi(":"),n=wc(),e=AAe(e,t,n)),e}function JM(){const e=wc();if(jt(","))throw new Error(Qg);return e}function BAe(e){De=e,ae=0,ci=De.length,At=null,bY();const t=JM();if(At.type!==Xp)throw new Error("Unexpect token after expression.");return t}function BC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...BC(e.object)),t.push(...BC(e.property))),t)}function xY(e){return e.object.type==="MemberExpression"?xY(e.object):e.object.name==="datum"}function EY(e){const t=BAe(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&xY(i)&&n.add(BC(i).slice(1).join("."))}),n}class dh extends St{clone(){return new dh(null,this.model,je(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=rb(this.model,this.filter,this),this._dependentFields=EY(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function LAe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Gt(a.name),u=a.select,c=Se(u)?u:u.type,f=Ae(u)?je(u):{type:c},d=i[c];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=je(d[y]??f[y])));const g=n[s]={...f,name:s,type:c,init:a.value,bind:a.bind,events:Se(f.on)?Qu(f.on,"scope"):Ee(je(f.on))};if(rs(g)&&(r++,r>1)){delete n[s];continue}const p=je(a);for(const y of Jx)y.defined(g)&&y.parse&&y.parse(e,g,p)}return r>1&&ge(Xye),n}function AY(e,t,n,i="datum"){const r=Se(t)?t:t.param,a=Gt(r),s=ve(a+Sc);let u;try{u=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(u.project.timeUnit){const p=n??e.component.data.raw,y=u.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const c=u.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=u.resolve==="global"?")":`, ${ve(u.resolve)})`,d=`${c}${s}, ${i}${f}`,g=`length(data(${s}))`;return t.empty===!1?`${g} && ${d}`:`!${g} || ${d}`}function SY(e,t,n){const i=Gt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&ge(Vye(a));else if(r&&!a){const u=s.project.items.filter(c=>c.channel===r);!u.length||u.length>1?(a=s.project.items[0].field,ge(Wye(u,r,n,a))):a=u[0].field}return`${s.name}[${ve(Kr(a))}]`}function UAe(e,t){for(const[n,i]of Uu(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Vi(new dh(t,e,{param:n}),r,Wt.Lookup,e.component.data.outputNodeRefCounts)}}function rb(e,t,n){return bg(t,i=>Se(i)?i:rbe(i)?AY(e,i,n):DH(i))}function jAe(e,t){if(e)return se(e)&&!du(e)?e.map(n=>FM(n,t)).join(", "):e}function u_(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function ag(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:u,title:c,zindex:f,...d}=e.combine();if(!r){for(const g in d){const p=g,y=lxe[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(Gp(v)){const{condition:b,...E}=v,S=Ee(b),_=BR[p];if(_){const{vgProp:w,part:D}=_,T=[...S.map(M=>{const{test:$,...F}=M;return{test:rb(null,$),...F}}),E];u_(d,D,w,T),delete d[p]}else if(_===null){const w={signal:S.map(D=>{const{test:T,...M}=D;return`${rb(null,T)} ? ${ER(M)} : `}).join("")+ER(E)};d[p]=w}}else if(Te(v)){const b=BR[p];if(b){const{vgProp:E,part:S}=b;u_(d,S,E,v),delete d[p]}}Ze(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:g}=d.encode;d.encode={...g?{grid:g}:{}},Tt(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:sn(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(u!==void 0){let p=u;d.encode?.labels?.update&&Te(d.encode.labels.update.text)&&(p=pc(u,"datum.label",d.encode.labels.update.text.signal)),u_(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of rG)e.hasAxisPart(p)||delete d.encode[p];Tt(d.encode)&&delete d.encode}const g=jAe(c,n);return{scale:s,orient:a,grid:!1,...g?{title:g}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:sn(f,0)}}}}function _Y(e){const{axes:t}=e.component,n=[];for(const i of Mo)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function qAe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>ag(r,"grid",t)),...i.map(r=>ag(r,"grid",t)),...n.map(r=>ag(r,"main",t)),...i.map(r=>ag(r,"main",t))].filter(r=>r)}function y9(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},u=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...fe(s),...fe(u)]),f={};for(const d of c.values())f[d]={signal:`${i.signal} === "${a}" ? ${ya(s[d])} : ${ya(u[d])}`};return f}return t[r]})])}function IAe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:FH(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Te(n)?"axisOrient":`axis${Np(n)}`,u=[...r,...r.map(f=>a+f.substr(4))],c=["axis",s,a];return{vlOnlyAxisConfig:y9(u,i,e,n),vgAxisConfig:y9(c,i,e,n),axisConfigStyle:PAe([...c,...u],i)}}function PAe(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Ee(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function LC(e,t,n,i={}){const r=aH(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const v9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??HAe(n,e),gridScale:({model:e,channel:t})=>GAe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||CY(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||wY(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??XAe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??VAe(t.type,n,ye(t)&&!!t.timeUnit,ye(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??QAe({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:ZAe,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=DY(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return oH(r?[RR(r)]:[],ye(s)?[RR(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>KAe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??JAe(n,t)};function HAe(e,t){return!kn(e)&&ye(t)&&!Nt(t?.bin)&&!jn(t?.bin)}function GAe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function YAe(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Te(a)?a:Xg(a);{const{configValue:s}=LC("labelAngle",i,t?.style,r);return s!==void 0?Xg(s):n===Yt&&Ze([bM,vM],e.type)&&!(ye(e)&&e.timeUnit)?270:void 0}}function UC(e){return`(((${e.signal} % 360) + 360) % 360)`}function wY(e,t,n,i){if(e!==void 0)if(n==="x"){if(Te(e)){const r=UC(e),a=Te(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Te(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Te(e)){const r=UC(e),a=Te(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Te(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function CY(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Te(e)){const s=UC(e),u=Te(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${u} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Te(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function XAe(e,t){if(t==="x"&&Ze(["quantitative","temporal"],e))return!0}function VAe(e,t,n,i){if(n&&!Ae(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function WAe(e){return e==="x"?"bottom":"left"}function QAe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!kn(t)&&t!=="log"){if(ye(e)){if(Nt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ze(["month","hours","day","quarter"],Fn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ZAe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ye(t)){const{timeUnit:n}=t;if(n){const i=_H(n);if(i)return{signal:i}}}}function DY(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return uH(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function KAe(e,t){const n=e.values;if(se(n))return iG(t,n);if(Te(n))return n}function JAe(e,t){return e==="rect"&&Qv(t)?1:0}class jd extends St{clone(){return new jd(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=EY(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Ic(i)&&XH(i.sort)){const{field:a,timeUnit:s}=i,u=i.sort,c=u.map((f,d)=>`${DH({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+u.length;t=new jd(t,{calculate:c,as:qd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${nt(this.transform)}`}}function qd(e,t,n){return xe(e,{prefix:t,suffix:"sort_index",...n})}function r2(e,t){return Ze(["top","bottom"],t)?"column":Ze(["left","right"],t)||e==="row"?"row":"column"}function Id(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return sn((t||{})[e],r[e],n.header[e])}function a2(e,t,n,i){const r={};for(const a of e){const s=Id(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const e5=["row","column"],t5=["header","footer"];function eSe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:u}=a2(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=r2(t,u),f=Xg(s);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...TY(f,c),...$Y(c,f,a),...MY(i,r,t,Fxe,AG)}}}function $Y(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=CY(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function TY(e,t){const n=wY(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function tSe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of t5)if(n[r])for(const a of n[r]){const s=iSe(e,t,r,n,a);s!=null&&i.push(s)}return i}function nSe(e,t){const{sort:n}=e;return po(n)?{field:xe(n,{expr:"datum"}),order:n.order??"ascending"}:se(n)?{field:qd(e,t,{expr:"datum"}),order:"ascending"}:{field:xe(e,{expr:"datum"}),order:n??"ascending"}}function jC(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:u,labelExpr:c}=a2(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=DM({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=r2(t,u);return{text:{signal:c?pc(pc(c,"datum.label",f),"datum.value",xe(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...TY(a,d),...$Y(d,a,s),...MY(n,e,t,kxe,SG)}}function iSe(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,u=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:g}=a2(["labelOrient"],s.header,u,t);(t==="row"&&!Ze(["top","bottom"],g)||t==="column"&&!Ze(["left","right"],g))&&(a=jC(s,t,u))}const c=Ar(e)&&!qp(e.facet),f=r.axes,d=f?.length>0;if(a||d){const g=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:nSe(s,t)}:{},...d&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const rSe={column:{start:0,end:1},row:{start:1,end:0}};function aSe(e,t){return rSe[t][e]}function sSe(e,t){const n={};for(const i of Hr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=a2(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),u=r2(i,s),c=aSe(a,u);c!==void 0&&(n[u]=c)}}return Tt(n)?void 0:n}function MY(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const u=Id(s,t?.header,e,n);u!==void 0&&(a[r[s]]=u)}return a}function n5(e){return[...Y1(e,"width"),...Y1(e,"height"),...Y1(e,"childWidth"),...Y1(e,"childHeight")]}function Y1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),u=a.get("range");if(kn(s)&&Uc(u)){const c=e.scaleName(n);return Ar(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[b9(c,u)]:[b9(c,u),{name:r,update:FY(c,a,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",u=DC(e.config.view,a?"width":"height"),c=`isFinite(${s}) ? ${s} : ${u}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:r,value:i}]}function b9(e,t){const n=`${e}_step`;return Te(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function FY(e,t,n){const i=t.get("type"),r=t.get("padding"),a=sn(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ya(s)}, ${ya(a)}) * ${e}_step`}function kY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function OY(e,t){return fe(e).reduce((n,i)=>({...n,...fh({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Ut(r.value),invalidValueRef:void 0})}),{})}function NY(e,t){if(Ar(t))return e==="theta"?"independent":"shared";if(ph(t))return"shared";if(l5(t))return on(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function i5(e,t){const n=e.scale[t],i=on(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ge(Cve(t)),"independent"):e[i][t]||"shared"}const oSe={...Rxe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},RY=fe(oSe);class uSe extends ko{}const x9={symbols:lSe,gradient:cSe,labels:fSe,entries:dSe};function lSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:u,config:c,mark:f}=n,d=s.filled&&f!=="trail";let g={...Nye({},n,Mbe),...tY(n,{filled:d})};const p=r.get("symbolOpacity")??c.legend.symbolOpacity,y=r.get("symbolFillColor")??c.legend.symbolFillColor,v=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,b=p===void 0?zY(u.opacity)??s.opacity:void 0;if(g.fill){if(i==="fill"||d&&i===Ki)delete g.fill;else if(he(g.fill,"field"))y?delete g.fill:(g.fill=Ut(c.legend.symbolBaseFillColor??"black"),g.fillOpacity=Ut(b??1));else if(se(g.fill)){const E=qC(u.fill??u.color)??s.fill??(d&&s.color);E&&(g.fill=Ut(E))}}if(g.stroke){if(i==="stroke"||!d&&i===Ki)delete g.stroke;else if(he(g.stroke,"field")||v)delete g.stroke;else if(se(g.stroke)){const E=sn(qC(u.stroke||u.color),s.stroke,d?s.color:void 0);E&&(g.stroke={value:E})}}if(i!==To){const E=ye(t)&&LY(n,r,t);E?g.opacity=[{test:E,...Ut(b??1)},Ut(c.legend.unselectedOpacity)]:b&&(g.opacity=Ut(b))}return g={...g,...e},Tt(g)?void 0:g}function cSe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let u={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?zY(s.opacity)||a.opacity:void 0;return f&&(u.opacity=Ut(f)),u={...u,...e},Tt(u)?void 0:u}function fSe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,u=ye(t)?LY(n,r,t):void 0,c=u?[{test:u,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let g;Ec(d)?g=va({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?g=va({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ye(t)&&t.timeUnit===void 0&&(g=va({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...c?{opacity:c}:{},...g?{text:g}:{},...e};return Tt(p)?void 0:p}function dSe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function zY(e){return BY(e,(t,n)=>Math.max(t,n.value))}function qC(e){return BY(e,(t,n)=>sn(t,n.value))}function BY(e,t){if(Zbe(e))return Ee(e.condition).reduce(t,e.value);if(wa(e))return e.value}function LY(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ve(n.field);return i.map(a=>`(!length(data(${ve(Gt(a)+Sc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const E9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return HH(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return GH(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??bSe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??xSe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??gSe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>sd(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(ad(n)&&Ja(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>hSe(t,e)};function hSe(e,t){const n=e.values;if(se(n))return iG(t,n);if(Te(n))return n}function gSe(e,t,n,i){if(t!=="shape"){const r=qC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function pSe(e){const{legend:t}=e;return sn(t.type,mSe(e))}function mSe({channel:e,timeUnit:t,scaleType:n}){if(ad(e)){if(Ze(["quarter","month","day"],t))return"symbol";if(Ja(n))return"gradient"}return"symbol"}function ySe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??vSe(n,t)}function vSe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function bSe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:u,gradientVerticalMinLength:c}=e;if(Ja(r))return n==="horizontal"?i==="top"||i==="bottom"?A9(t,"width",s,a):s:A9(t,"height",c,u)}function A9(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function xSe(e){if(Ze(["quantile","threshold","log","symlog"],e))return"greedy"}function UY(e){const t=Vt(e)?ESe(e):wSe(e);return e.component.legends=t,t}function ESe(e){const{encoding:t}=e,n={};for(const i of[Ki,...wG]){const r=vn(t[i]);!r||!e.getScaleComponent(i)||i===Ji&&ye(r)&&r.type===ch||(n[i]=_Se(e,i))}return n}function ASe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function SSe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function _Se(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,u=new uSe({},ASe(e,t));_Ee(e,t,u);const c=n!==void 0?!n:s.disable;if(u.set("disable",c,n!==void 0),c)return u;n=n||{};const f=e.getScaleComponent(t).get("type"),d=vn(r[t]),g=ye(d)?Fn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=pSe({legend:n,channel:t,timeUnit:g,scaleType:f}),v=ySe({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const D of RY){if(y==="gradient"&&D.startsWith("symbol")||y==="symbol"&&D.startsWith("gradient"))continue;const T=D in E9?E9[D](b):n[D];if(T!==void 0){const M=SSe(T,D,n,e.fieldDef(t));(M||a.legend[D]===void 0)&&u.set(D,T,M)}}const E=n?.encoding??{},S=u.get("selections"),_={},w={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:u,legendType:y};for(const D of["labels","legend","title","symbols","gradient","entries"]){const T=OY(E[D]??{},e),M=D in x9?x9[D](T,w):T;M!==void 0&&!Tt(M)&&(_[D]={...S?.length&&ye(d)?{name:`${Gt(d.field)}_legend_${D}`}:{},...S?.length?{interactive:!!S}:{},update:M})}return Tt(_)||u.set("encode",_,!!n?.encoding),u}function wSe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){UY(i);for(const r of fe(i.component.legends))n.legend[r]=i5(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=jY(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of fe(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function jY(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of RY){const s=Iu(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(u,c)=>{switch(a){case"symbolType":return CSe(u,c);case"title":return lH(u,c);case"type":return r=!0,hr("symbol")}return Wx(u,c,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&Gv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Gv(e.explicit,["encode","gradient"])),e}function CSe(e,t){return t.value==="circle"?t:e}function DSe(e,t,n,i){var r,a;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(a=e.encode[t]).update??(a.update={}),e.encode[t].update[n]=i}function qY(e){const t=e.component.legends,n={};for(const r of fe(t)){const a=e.getScaleComponent(r),s=Mt(a.get("domains"));if(n[s])for(const u of n[s])jY(u,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return Vn(n).flat().map(r=>$Se(r,e.config)).filter(r=>r!==void 0)}function $Se(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const u of wG)a[u]&&delete s[u]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Te(a.encode.labels.update.text)&&(s=pc(i,"datum.label",a.encode.labels.update.text.signal)),DSe(a,"labels","text",{signal:s})}return a}}function TSe(e){return ph(e)||l5(e)?MSe(e):IY(e)}function MSe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),IY(e))}function IY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,u)=>{const c=Te(u)?u.signal:`data('${e.lookupDataSource(u)}')`;return Ze(s,c)||s.push(c),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const FSe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class PY extends ko{constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function HY(e){e.component.projection=Vt(e)?kSe(e):RSe(e)}function kSe(e){if(e.hasProjection){const t=qn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?OSe(e):void 0,a=new PY(e.projectionName(!0),{...qn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function OSe(e){const t=[],{encoding:n}=e;for(const i of[[Na,Oa],[Jr,Ra]])(vn(n[i[0]])||vn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ji)&&e.typedFieldDef(Ji).type===ch&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Wt.Main)),t}function NSe(e,t){const n=GT(FSe,r=>!!(!_e(e.explicit,r)&&!_e(t.explicit,r)||_e(e.explicit,r)&&_e(t.explicit,r)&&vr(e.get(r),t.get(r))));if(vr(e.size,t.size)){if(n)return e;if(vr(e.explicit,{}))return t;if(vr(t.explicit,{}))return e}return null}function RSe(e){if(e.children.length===0)return;let t;for(const i of e.children)HY(i);const n=GT(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=NSe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new PY(i,t.specifiedProjection,t.size,je(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function zSe(e,t,n,i){if(Hp(t,n)){const r=Vt(e)?e.axis(n)??e.legend(n)??{}:{},a=xe(t,{expr:"datum"}),s=xe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:xe(t,{binSuffix:"range",forAs:!0}),formula:jp(a,s,r.format,r.formatType,i)}}return{}}function GY(e,t){return`${tH(e)}_${t}`}function BSe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function r5(e,t,n){const i=Px(n,void 0)??{},r=GY(i,t);return e.getName(`${r}_bins`)}function LSe(e){return"as"in e}function S9(e,t,n){let i,r;LSe(e)?i=Se(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[xe(e,{forAs:!0}),xe(e,{binSuffix:"end",forAs:!0})];const a={...Px(t,void 0)},s=GY(a,e.field),{signal:u,extentSignal:c}=BSe(n,s);if(kx(a.extent)){const d=a.extent;r=SY(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...u?{signal:u}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class as extends St{clone(){return new as(null,je(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(Ti(a)&&Nt(a.bin)){const{key:u,binComponent:c}=S9(a,a.bin,n);r[u]={...c,...r[u],...zSe(n,a,s,n.config)}}return r},{});return Tt(i)?null:new as(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=S9(n,n.bin,i);return new as(t,{[r]:a})}merge(t,n){for(const i of fe(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ka([...this.bins[i].as,...t.bins[i].as],nt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Vn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Vn(this.bins).map(t=>t.field))}hash(){return`Bin ${nt(this.bins)}`}assemble(){return Vn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,u={type:"bin",field:Kr(t.field),as:i,signal:t.signal,...kx(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:Kr(t.field),signal:t.extentSignal}),u.extent={signal:t.extentSignal}),n.push(u);for(const c of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:xe({field:i[f]},{expr:"datum"}),as:c[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function USe(e,t,n,i){const r=Vt(i)?i.encoding[ws(t)]:void 0;if(Ti(n)&&Vt(i)&&WH(n,r,i.markDef,i.config)){e.add(xe(n,{})),e.add(xe(n,{suffix:"end"}));const{mark:a,markDef:s,config:u}=i,c=qu({fieldDef:n,markDef:s,config:u});Vg(a)&&c!==.5&&on(t)&&(e.add(xe(n,{suffix:Qx})),e.add(xe(n,{suffix:Zx}))),n.bin&&Hp(n,t)&&e.add(xe(n,{binSuffix:"range"}))}else if(YP(t)){const a=GP(t);e.add(i.getName(a))}else e.add(xe(n));return Ic(n)&&ybe(n.scale?.range)&&e.add(n.scale.range.field),e}function jSe(e,t){for(const n of fe(t)){const i=t[n];for(const r of fe(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class xa extends St{clone(){return new xa(null,new Set(this.dimensions),je(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,u)=>{const{aggregate:c,field:f}=s;if(c)if(c==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([xe(s,{forAs:!0})]);else{if(Eo(c)||il(c)){const d=Eo(c)?"argmin":"argmax",g=c[d];r[g]??(r[g]={}),r[g][d]=new Set([xe({op:d,field:g},{forAs:!0})])}else r[f]??(r[f]={}),r[f][c]=new Set([xe(s,{forAs:!0})]);Cs(u)&&n.scaleDomain(u)==="unaggregated"&&(r[f]??(r[f]={}),r[f].min=new Set([xe({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([xe({field:f,aggregate:"max"},{forAs:!0})]))}else USe(a,u,s,n)}),a.size+fe(r).length===0)?null:new xa(t,a,r)}static makeFromTransform(t,n){var i;const r=new Set,a={};for(const s of n.aggregate){const{op:u,field:c,as:f}=s;u&&(u==="count"?(a["*"]??(a["*"]={}),a["*"].count=new Set([f||xe(s,{forAs:!0})])):(a[c]??(a[c]={}),(i=a[c])[u]??(i[u]=new Set),a[c][u].add(f||xe(s,{forAs:!0}))))}for(const s of n.groupby??[])r.add(s);return r.size+fe(a).length===0?null:new xa(t,r,a)}merge(t){return BP(this.dimensions,t.dimensions)?(jSe(this.measures,t.measures),!0):(Ive("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...fe(this.measures)])}producedFields(){const t=new Set;for(const n of fe(this.measures))for(const i of fe(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${nt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of fe(this.measures))for(const s of fe(this.measures[a]))for(const u of this.measures[a][s])i.push(u),t.push(s),n.push(a==="*"?null:Kr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Kr),ops:t,fields:n,as:i}}}class hh extends St{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Hr){const s=n.facet[a];if(s){const{bin:u,sort:c}=s;this[a]={name:n.getName(`${a}_domain`),fields:[xe(s),...Nt(u)?[xe(s,{binSuffix:"end"})]:[]],...po(c)?{sortField:c}:se(c)?{sortIndexField:qd(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Hr)this[n]&&(t+=` ${n.charAt(0)}:${nt(this[n])}`);return t}get fields(){const t=[];for(const n of Hr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Hr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Mo){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(kn(r)&&Uc(a)){const s=s2(this.childModel,n),u=u5(s);u?t[n]=u:ge(aM(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],u=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),u.push(`distinct_${i[r]}`));const{sortField:c,sortIndexField:f}=this[t];if(c){const{op:d=jx,field:g}=c;a.push(g),s.push(d),u.push(xe(c,{forAs:!0}))}else f&&(a.push(f),s.push("max"),u.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:u}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const c of e5){for(const f of t5){const d=(i[c]&&i[c][f])??[];for(const g of d)if(g.axes?.length>0){a[c]=!0;break}}if(a[c]){const f=`length(data("${this.facet.name}"))`,d=c==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:u}=a;return(s||u)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const u=[].concat(i.x??[],i.y??[]),c=u.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[go,ho])this[u]&&t.push(this.assembleRowColumnHeaderData(u,n,i));if(s){const u=this.assembleFacetHeaderData(i);u&&t.push(...u)}return t}}function _9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function qSe(e,t){const n=VT(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=_9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=_9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ge(Zye(t)),null}function ISe(e){const t={};return Cy(e.filter,n=>{if(CH(n)){let i=null;fM(n)?i=mr(n.equal):hM(n)?i=mr(n.lte):dM(n)?i=mr(n.lt):gM(n)?i=mr(n.gt):pM(n)?i=mr(n.gte):mM(n)?i=n.range[0]:yM(n)&&(i=(n.oneOf??n.in)[0]),i&&(jc(i)?t[n.field]="date":dt(i)?t[n.field]="number":Se(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function PSe(e){const t={};function n(i){Bd(i)?t[i.field]="date":i.type==="quantitative"&&wye(i.aggregate)?t[i.field]="number":Fd(i.field)>1?i.field in t||(t[i.field]="flatten"):Ic(i)&&po(i.sort)&&Fd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Vt(e)||Ar(e))&&e.forEachFieldDef((i,r)=>{if(Ti(i))n(i);else{const a=Bc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Vt(e)){const{mark:i,markDef:r,encoding:a}=e;if(rl(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",u=a[s];ye(u)&&u.type==="quantitative"&&!(u.field in t)&&(t[u.field]="number")}}return t}function HSe(e){const t={};if(Vt(e)&&e.component.selection)for(const n of fe(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&Fd(r.field)>1&&(t[r.field]="flatten")}return t}class ai extends St{clone(){return new ai(null,je(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${nt(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!$u(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const u of fe(i)){const c=r.getWithExplicit(u);c.value!==void 0&&(c.explicit||c.value===i[u]||c.value==="derived"||i[u]==="flatten"?delete i[u]:ge(DR(u,i[u],c.value)))}for(const u of fe(n)){const c=r.get(u);c!==void 0&&(c===n[u]?delete n[u]:ge(DR(u,n[u],c)))}const a=new ko(n,i);r.copyAll(a);const s={};for(const u of fe(a.combine())){const c=a.get(u);c!==null&&(s[u]=c)}return fe(s).length===0||r.parseNothing?null:new ai(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of fe(this._parse)){const i=this._parse[n];Fd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(fe(this._parse))}dependentFields(){return new Set(fe(this._parse))}assembleTransforms(t=!1){return fe(this._parse).filter(n=>t?Fd(n)>1:!0).map(n=>{const i=qSe(n,this._parse[n]);return i?{type:"formula",expr:i,as:uh(n)}:null}).filter(n=>n!==null)}}class Pu extends St{clone(){return new Pu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Da])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Da}}}class Qp extends St{clone(){return new Qp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${nt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Zp extends St{clone(){return new Zp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${nt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Cc extends St{constructor(t){super(null),t??(t={name:"source"});let n;if($u(t)||(n=t.format?{...Xi(t.format,["parse"])}:{}),Wg(t))this._data={values:t.values};else if(Ld(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ze(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else PG(t)?this._data={values:[{type:"Sphere"}]}:(qG(t)||$u(t))&&(this._data={});this._generator=$u(t),t.name&&(this._name=t.name),n&&!Tt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var w9=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},GSe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},sg;function a5(e){return e instanceof Cc||e instanceof Qp||e instanceof Zp}class s5{constructor(){sg.set(this,void 0),w9(this,sg,!1,"f")}setModified(){w9(this,sg,!0,"f")}get modifiedFlag(){return GSe(this,sg,"f")}}sg=new WeakMap;class Hc extends s5{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class o5 extends s5{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class YSe extends o5{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of fe(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class XSe extends o5{constructor(t){super(),this.requiresSelectionId=t&&QM(t)}run(t){t instanceof Pu&&(this.requiresSelectionId&&(a5(t.parent)||t.parent instanceof xa||t.parent instanceof ai)||(this.setModified(),t.remove()))}}class VSe extends s5{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof is&&(i=t.producedFields(),YT(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class WSe extends o5{constructor(){super()}run(t){t instanceof Vi&&!t.isRequired()&&(this.setModified(),t.remove())}}class QSe extends Hc{run(t){if(!a5(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ai)if(t instanceof ai)this.setModified(),t.merge(n);else{if(XT(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class ZSe extends Hc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ai);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const u=s.parse;for(const c of fe(u))c in r?r[c]!==u[c]&&a.add(c):r[c]=u[c]}for(const s of a)delete r[s];if(!Tt(r)){this.setModified();const s=new ai(t,r);for(const u of n){if(u instanceof ai)for(const c of fe(r))delete u.parse[c];t.removeChild(u),u.parent=s,u instanceof ai&&fe(u.parse).length===0&&u.remove()}}}}}class KSe extends Hc{run(t){t instanceof Vi||t.numChildren()>0||t instanceof hh||t instanceof Cc||(this.setModified(),t.remove())}}class JSe extends Hc{run(t){const n=t.children.filter(r=>r instanceof is),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class e_e extends Hc{run(t){const n=t.children.filter(r=>r instanceof xa),i={};for(const r of n){const a=nt(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of fe(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const u of a)s.merge(u)&&(t.removeChild(u),u.parent=s,u.remove(),this.setModified())}}}}class t_e extends Hc{constructor(t){super(),this.model=t}run(t){const n=!(a5(t)||t instanceof dh||t instanceof ai||t instanceof Pu),i=[],r=[];for(const a of t.children)a instanceof as&&(n&&!XT(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof as?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class n_e extends Hc{run(t){const n=[...t.children];if(!Md(n,s=>s instanceof Vi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Vi){let u=s;for(;u.numChildren()===1;){const[c]=u.children;if(c instanceof Vi)u=c;else break}r.push(...u.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=u,this.setModified()):a=u}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class Gc extends St{clone(){return new Gc(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ka(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`JoinAggregateTransform ${nt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class Pd extends St{clone(){return new Pd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:u}=i;if(s==="include-invalid-values"&&u==="include-invalid-values")return null;const c=n.reduceFieldDef((f,d,g)=>{const p=Cs(g)&&n.getScaleComponent(g);if(p){const y=p.get("type"),{aggregate:v}=d,b=_M({scaleChannel:g,markDef:a,config:r,scaleType:y,isCountAggregate:Fx(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return fe(c).length?new Pd(t,c):null}dependentFields(){return new Set(fe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${nt(this.filter)}`}assemble(){const t=fe(this.filter).reduce((n,i)=>{const r=this.filter[i],a=xe(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${IC(a)}))`):r.type==="quantitative"&&n.push(IC(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function IC(e){return`isValid(${e}) && isFinite(+${e})`}function i_e(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=xe(i);return r&&t.push(r),t},[])}function r_e(e){return se(e)&&e.every(t=>Se(t))&&e.length>1}class yo extends St{clone(){return new yo(null,je(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,u=[],c=[];if(n.sort!==void 0)for(const g of n.sort)u.push(g.field),c.push(sn(g.order,"ascending"));const f={field:u,order:c};let d;return r_e(a)?d=a:Se(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new yo(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:u,impute:c}=i,f=a.map(y=>{const v=r[y];return Ca(v)}).filter(y=>!!y),d=i_e(n),g=n.encoding.order;let p;if(se(g)||ye(g))p=sH(g);else{const y=QH(g)?g.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new yo(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:u,impute:c,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${nt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[xe(r,{binSuffix:"mid"})]:[xe(r,{}),xe(r,{binSuffix:"end"})]:[xe(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:u,impute:c,as:f}=this._stack;if(c)for(const d of i){const{bandPosition:g=.5,bin:p}=d;if(p){const y=xe(d,{expr:"datum"}),v=xe(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${IC(y)} ? ${g}*${y}+${1-g}*${v} : ${y}`,as:xe(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:xe(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:u}),t}}class gh extends St{clone(){return new gh(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ka(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??xe(t)}hash(){return`WindowTransform ${nt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const g of this.transform.window)n.push(g.op),i.push(this.getDefaultName(g)),r.push(g.param===void 0?null:g.param),t.push(g.field===void 0?null:g.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(g=>iM(g)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const u=[],c=[];if(this.transform.sort!==void 0)for(const g of this.transform.sort)u.push(g.field),c.push(g.order??"ascending");const f={field:u,order:c},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function a_e(e){function t(n){if(!(n instanceof hh)){const i=n.clone();if(i instanceof Vi){const r=HC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof xa||i instanceof yo||i instanceof gh||i instanceof Gc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function PC(e){if(e instanceof hh)if(e.numChildren()===1&&!(e.children[0]instanceof Vi)){const t=e.children[0];(t instanceof xa||t instanceof yo||t instanceof gh||t instanceof Gc)&&t.addDimensions(e.fields),t.swapWithParent(),PC(e)}else{const t=e.model.component.data.main;YY(t);const n=a_e(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(PC)}function YY(e){if(e instanceof Vi&&e.type===Wt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof hh||(t.swapWithParent(),YY(e))}}const HC="scale_",X1=5;function GC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!GC(t.children))return!1}return!0}function sa(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function C9(e,t,n){let i=e.sources,r=!1;return r=sa(new WSe,i)||r,r=sa(new XSe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=sa(new KSe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=sa(new QSe,i)||r,r=sa(new t_e(t),i)||r,r=sa(new VSe,i)||r,r=sa(new ZSe,i)||r,r=sa(new e_e,i)||r,r=sa(new JSe,i)||r,r=sa(new YSe,i)||r,r=sa(new n_e,i)||r),e.sources=i,r}function s_e(e,t){GC(e.sources);let n=0,i=0;for(let r=0;r<X1&&C9(e,t,!0);r++)n++;e.sources.map(PC);for(let r=0;r<X1&&C9(e,t,!1);r++)i++;GC(e.sources),Math.max(n,i)===X1&&ge(`Maximum optimization runs(${X1}) reached.`)}class _n{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new _n(()=>t(n))}}function XY(e){Vt(e)?o_e(e):u_e(e)}function o_e(e){const t=e.component.scales;for(const n of fe(t)){const i=c_e(e,n);if(t[n].setWithExplicit("domains",i),d_e(e,n),e.component.data.isFaceted){let a=e;for(;!Ar(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const u of i.value)uo(u)&&(u.data=HC+u.data.replace(HC,""))}}}function u_e(e){for(const n of e.children)XY(n);const t=e.component.scales;for(const n of fe(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Iu(i,s.getWithExplicit("domains"),"domains","scale",YC);const u=s.get("selectionExtent");r&&u&&r.param!==u.param&&ge(Hye),r=u}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function l_e(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=D9(t,n);if(!r){ge(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=D9(t,n);if(r)return"unaggregated"}return e}function c_e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=l_e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&vn(i.x2)?vn(i.x)?Iu(ou(n,r,e,"x"),ou(n,r,e,"x2"),"domain","scale",YC):ou(n,r,e,"x2"):t==="y"&&vn(i.y2)?vn(i.y)?Iu(ou(n,r,e,"y"),ou(n,r,e,"y2"),"domain","scale",YC):ou(n,r,e,"y2"):ou(n,r,e,t)}function f_e(e,t,n){return e.map(i=>({signal:`{data: ${Hx(i,{timeUnit:n,type:t})}}`}))}function l_(e,t,n){const i=Fn(n)?.unit;return t==="temporal"||i?f_e(e,t,i):[e]}function ou(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:u,stack:c}=n,f=vn(r[i]),{type:d}=f,g=f.timeUnit,p=V2e({invalid:ds("invalid",a,u),isPath:rl(s)});if(mbe(t)){const b=ou(e,void 0,n,i),E=l_(t.unionWith,d,g);return Xa([...E,...b.value])}else{if(Te(t))return Xa([t]);if(t&&t!=="unaggregated"&&!OH(t))return Xa(l_(t,d,g))}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return hr([[0,1]]);const b=n.requestDataName(p);return hr([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=Cs(i)&&ye(f)?h_e(n,i,e):void 0;if(Ds(f)){const b=l_([f.datum],d,g);return hr(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return hr([{data:n.requestDataName(p),field:xe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:xe({field:b,aggregate:"max"})}])}else if(Nt(v.bin)){if(kn(e))return hr(e==="bin-ordinal"?[]:[{data:Yg(y)?n.requestDataName(p):n.requestDataName(Wt.Raw),field:n.vgField(i,Hp(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Ae(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Nt(b)){const E=r5(n,v.field,b);return hr([new _n(()=>{const S=n.getSignalName(E);return`[${S}.start, ${S}.stop]`})])}else return hr([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Ze(["time","utc"],e)){const b=r[ws(i)];if(WH(v,b,a,u)){const E=n.requestDataName(p),S=qu({fieldDef:v,fieldDef2:b,markDef:a,config:u}),_=Vg(s)&&S!==.5&&on(i);return hr([{data:E,field:n.vgField(i,_?{suffix:Qx}:{})},{data:E,field:n.vgField(i,{suffix:_?Zx:"end"})}])}}return hr(y?[{data:Yg(y)?n.requestDataName(p):n.requestDataName(Wt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function c_(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":jx),...i?{field:Kr(i)}:{},...r?{order:r}:{}}}function d_e(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=OH(i)?i:void 0,s=Lc(r)&&kx(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function h_e(e,t,n){if(!kn(n))return;const i=e.fieldDef(t),r=i.sort;if(XH(r))return{op:"min",field:qd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(u=>u.fieldDef.field)]):void 0;if(po(r)){const u=a&&!s.has(r.field);return c_(r,u)}else if(Vbe(r)){const{encoding:u,order:c}=r,f=e.fieldDef(u),{aggregate:d,field:g}=f,p=a&&!s.has(g);if(Eo(d)||il(d))return c_({field:xe(f),order:c},p);if(iM(d)||!d)return c_({op:d,field:g,order:c},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ze(["ascending",void 0],r))return!0}}function D9(e,t){const{aggregate:n,type:i}=e;return n?Se(n)&&!Dye.has(n)?{valid:!1,reason:bve(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:xve(e)}:{valid:!0}:{valid:!1,reason:vve(e)}}function YC(e,t,n,i){return e.explicit&&t.explicit&&ge(wve(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function g_e(e){const t=Ka(e.map(s=>{if(uo(s)){const{sort:u,...c}=s;return c}return s}),nt),n=Ka(e.map(s=>{if(uo(s)){const u=s.sort;return u!==void 0&&!Yg(u)&&("op"in u&&u.op==="count"&&delete u.field,u.order==="ascending"&&delete u.order),u}}).filter(s=>s!==void 0),nt);if(t.length===0)return;if(t.length===1){const s=e[0];if(uo(s)&&n.length>0){let u=n[0];if(n.length>1){ge(TR);const c=n.filter(f=>Ae(f)&&"op"in f&&f.op!=="min");n.every(f=>Ae(f)&&"op"in f)&&c.length===1?u=c[0]:u=!0}else if(Ae(u)&&"field"in u){const c=u.field;s.field===c&&(u=u.order?{order:u.order}:!0)}return{...s,sort:u}}return s}const i=Ka(n.map(s=>Yg(s)||!("op"in s)||Se(s.op)&&_e(Sye,s.op)?s:(ge(Dve(s)),!0)),nt);let r;i.length===1?r=i[0]:i.length>1&&(ge(TR),r=!0);const a=Ka(e.map(s=>uo(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(u=>u.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function u5(e){if(uo(e)&&Se(e.field))return e.field;if($ye(e)){let t;for(const n of e.fields)if(uo(n)&&Se(n.field)){if(!t)t=n.field;else if(t!==n.field)return ge($ve),t}return ge(Tve),t}else if(Tye(e)){ge(Mve);const t=e.fields[0];return Se(t)?t:void 0}}function s2(e,t){const i=e.component.scales[t].get("domains").map(r=>(uo(r)&&(r.data=e.lookupDataSource(r.data)),r));return g_e(i)}function VY(e){return ph(e)||l5(e)?e.children.reduce((t,n)=>t.concat(VY(n)),$9(e)):$9(e)}function $9(e){return fe(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:u,domains:c,range:f,reverse:d,...g}=r,p=p_e(r.range,a,n,e),y=s2(e,n),v=u?aEe(e,u,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...g}),t},[])}function p_e(e,t,n,i){if(on(n)){if(Uc(e))return{step:{signal:`${t}_step`}}}else if(Ae(e)&&uo(e))return{...e,data:i.lookupDataSource(e.data)};return e}class WY extends ko{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ze([In.LOG,In.TIME,In.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ze([In.LINEAR,In.SQRT,In.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const u of i){if(se(u)){const c=u[0],f=u[u.length-1];if(dt(c)&&dt(f))if(c<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const m_e=["range","scheme"];function y_e(e){const t=e.component.scales;for(const n of nM){const i=t[n];if(!i)continue;const r=v_e(n,e);i.setWithExplicit("range",r)}}function T9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=er(t),s=e.getName(a);if(Ae(i)&&i.binned&&i.step!==void 0)return new _n(()=>{const u=e.scaleName(t),c=`(domain("${u}")[1] - domain("${u}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${c})`});if(Nt(i)){const u=r5(e,r,i);return new _n(()=>{const c=e.getSignalName(u),f=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function v_e(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const g of m_e)if(n[g]!==void 0){const p=_C(a,g),y=NH(e,g);if(!p)ge(hH(a,g,e));else if(y)ge(y);else switch(g){case"range":{const v=n.range;if(se(v)){if(on(e))return Xa(v.map(b=>{if(b==="width"||b==="height"){const E=t.getName(b),S=t.getSignalName.bind(t);return _n.fromName(S,E)}return b}))}else if(Ae(v))return Xa({data:t.requestDataName(Wt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Xa(v)}case"scheme":return Xa(b_e(n[g]))}}const s=e===Yt||e==="xOffset"?"width":"height",u=i[s];if(gs(u)){if(on(e))if(kn(a)){const g=ZY(u,t,e);if(g)return Xa({step:g})}else ge(gH(s));else if(Bp(e)){const g=e===Zu?"x":"y";if(t.getScaleComponent(g).get("type")==="band"){const v=KY(u,a);if(v)return Xa(v)}}}const{rangeMin:c,rangeMax:f}=n,d=x_e(e,t);return(c!==void 0||f!==void 0)&&_C(a,"rangeMin")&&se(d)&&d.length===2?Xa([c??d[0],f??d[1]]):hr(d)}function b_e(e){return pbe(e)?{scheme:e.name,...Xi(e,["name"])}:{scheme:e}}function QY(e,t,n,{center:i}={}){const r=er(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===Nn&&_a(n)?i?[_n.fromName(u=>`${s(u)}/2`,a),_n.fromName(u=>`-${s(u)}/2`,a)]:[_n.fromName(s,a),0]:i?[_n.fromName(u=>`-${s(u)}/2`,a),_n.fromName(u=>`${s(u)}/2`,a)]:[0,_n.fromName(s,a)]}function x_e(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=vn(a[e]),c=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Yt:case Nn:{if(Ze(["point","band"],c)){const g=JY(e,n,i.view);if(gs(g))return{step:ZY(g,t,e)}}return QY(e,t,c)}case Zu:case lh:return E_e(e,t,c);case $o:{const g=__e(r,i),p=w_e(r,n,t,i);return Nd(c)?S_e(g,p,A_e(c,i,f,e)):[g,p]}case ta:return[0,Math.PI*2];case zc:return[0,360];case ka:return[0,new _n(()=>{const g=t.getSignalName(Ar(t.parent)?"child_width":"width"),p=t.getSignalName(Ar(t.parent)?"child_height":"height");return`min(${g},${p})/2`})];case Ku:return{step:1e3/i.scale.framesPerSecond};case tl:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case nl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ji:return"symbol";case Ki:case Ss:case _s:return c==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case To:case Ju:case el:return[i.scale.minOpacity,i.scale.maxOpacity]}}function ZY(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=KT(n),s=i[a];if(DG({step:e,offsetIsDiscrete:qe(s)&&$H(s.type)})==="offset"&&oG(i,a)){const c=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(c.get("type")==="band"){const p=c.get("paddingInner")??c.get("padding")??0,y=c.get("paddingOuter")??c.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const g=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${Oye(g)})`}}else return e.step}function KY(e,t){if(DG({step:e,offsetIsDiscrete:kn(t)})==="offset")return{step:e.step}}function E_e(e,t,n){const i=e===Zu?"x":"y",r=t.getScaleComponent(i);if(!r)return QY(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:u,config:c}=t;if(a==="band"){const f=JY(i,t.size,t.config.view);if(gs(f)){const d=KY(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(ye(f)&&f.timeUnit){const d=_H(f.timeUnit,v=>`scale('${s}', ${v})`),g=t.config.scale.bandWithNestedOffsetPaddingInner,p=qu({fieldDef:f,markDef:u,config:c})-.5,y=p!==0?` + ${p}`:"";if(g){const v=Te(g)?`${g.signal}/2`+y:`${g/2+p}`,b=Te(g)?`(1 - ${g.signal}/2)`+y:`${1-g/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return RP(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function JY(e,t,n){const i=e===Yt?"width":"height",r=t[i];return r||eb(n,i)}function A_e(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&se(n)?n.length+1:(ge(Uve(i)),3)}}function S_e(e,t,n){const i=()=>{const r=ya(t),a=ya(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Te(t)?new _n(i):{signal:i()}}function __e(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Ox("size",e))}const M9=.95;function w_e(e,t,n,i){const r={x:T9(n,"x"),y:T9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=F9(t,r,i.view);return dt(a)?a-1:new _n(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=F9(t,r,i.view);return dt(a)?Math.pow(M9*a,2):new _n(()=>`pow(${M9} * ${a.signal}, 2)`)}}throw new Error(Ox("size",e))}function F9(e,t,n){const i=gs(e.width)?e.width.step:$C(n,"width"),r=gs(e.height)?e.height.step:$C(n,"height");return t.x||t.y?new _n(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function eX(e,t){Vt(e)?C_e(e,t):nX(e,t)}function C_e(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const u of fe(n)){const c=s[u],f=n[u],d=e.getScaleComponent(u),g=vn(r[u]),p=c[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),E=_C(y,t),S=NH(u,t);if(p!==void 0&&(E?S&&ge(S):ge(hH(y,t,u))),E&&S===void 0)if(p!==void 0){const _=g.timeUnit,w=g.type;switch(t){case"domainMax":case"domainMin":jc(c[t])||w==="temporal"||_?f.set(t,{signal:Hx(c[t],{type:w,timeUnit:_})},!0):f.set(t,c[t],!0);break;default:f.copyKeyFromObject(t,c)}}else{const _=he(k9,t)?k9[t]({model:e,channel:u,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:a,config:i,hasNestedOffsetScale:uG(r,u),hasSecondaryRangeChannel:!!r[ws(u)]}):i.scale[t];_!==void 0&&f.set(t,_,!1)}}}const k9={bins:({model:e,fieldOrDatumDef:t})=>ye(t)?D_e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>$_e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>T_e(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>M_e(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>F_e(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>k_e(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=ye(e)?e.sort:void 0;return O_e(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>N_e(e,t,n,i,r,a.scale,s)};function tX(e){Vt(e)?y_e(e):nX(e,"range")}function nX(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?tX(i):eX(i,t);for(const i of fe(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const u=s.getWithExplicit(t);r=Iu(r,u,t,"scale",jG((c,f)=>{switch(t){case"range":return c.step&&f.step?c.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function D_e(e,t){const n=t.bin;if(Nt(n)){const i=r5(e,t.field,n);return new _n(()=>e.getSignalName(i))}else if(jn(n)&&Lc(n)&&n.step!==void 0)return{step:n.step}}function $_e(e,t){if(Ze([Ki,Ss,_s],e)&&t!=="nominal")return"hcl"}function T_e(e,t,n,i,r,a){if(!(Ca(a)?.bin||se(n)||r!=null||i!=null||Ze([In.TIME,In.UTC],e)))return on(t)?!0:void 0}function M_e(e,t,n,i,r,a){if(on(e)){if(Ja(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:u}=r;if(s==="bar"&&!(ye(i)&&(i.bin||i.timeUnit))&&(u==="vertical"&&e==="x"||u==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===In.POINT)return n.pointPadding}}function F_e(e,t,n,i,r,a=!1){if(e===void 0){if(on(t)){const{bandPaddingInner:s,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:sn(s,n==="bar"?u:n==="tick"?f:c)}else if(Bp(t)&&i===In.BAND)return r.offsetBandPaddingInner}}function k_e(e,t,n,i,r,a=!1){if(e===void 0){if(on(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:u}=r;if(a)return u;if(n===In.BAND)return sn(s,Te(i)?{signal:`${i.signal}/2`}:i/2)}else if(Bp(t)){if(n===In.POINT)return .5;if(n===In.BAND)return r.offsetBandPaddingOuter}}}function O_e(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return _a(e)&&t==="descending"?Te(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(_a(e)&&t==="descending")return!0}function N_e(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&_a(r)){if(se(n)){const c=n[0],f=n[n.length-1];if(dt(c)&&c<=0&&dt(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Nd(r))return!0;if(!(ye(t)&&t.bin)&&Ze([...Mo,...gye],e)){const{orient:c,type:f}=i;return Ze(["bar","area","line","trail"],f)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:Ze(["bar","area"],f)&&!s?!0:a?.zero}return!1}function R_e(e,t,n,i,r=!1){const a=z_e(t,n,i,r),{type:s}=e;return Cs(t)?s!==void 0?Abe(t,s)?ye(n)&&!Ebe(s,n.type)?(ge(Sve(s,a)),a):s:(ge(Ave(t,s,a)),a):a:null}function z_e(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(ad(e)||WS(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ge(QS(e,"ordinal")),"ordinal";if(VS(e))return"band";if(on(e)||Bp(e)){if(Ze(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in tM)return"band";const r=n[er(e)];return xc(r)||zd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return ad(e)?"time":WS(e)==="discrete"?(ge(QS(e,"temporal")),"ordinal"):ye(t)&&t.timeUnit&&Fn(t.timeUnit).utc?"utc":VS(e)?"band":"time";case"quantitative":return ad(e)?ye(t)&&Nt(t.bin)?"bin-ordinal":"linear":WS(e)==="discrete"?(ge(QS(e,"quantitative")),"ordinal"):VS(e)?"band":"linear";case"geojson":return}throw new Error(fH(t.type))}function B_e(e,{ignoreRange:t}={}){iX(e),XY(e);for(const n of xbe)eX(e,n);t||tX(e)}function iX(e){Vt(e)?e.component.scales=L_e(e):e.component.scales=j_e(e)}function L_e(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of nM){const s=vn(t[a]);if(s&&n===BH&&a===Ji&&s.type===ch)continue;let u=s&&s.scale;if(s&&u!==null&&u!==!1){u??(u={});const c=uG(t,a),f=R_e(u,a,s,i,c);r[a]=new WY(e.scaleName(`${a}`,!0),{value:f,explicit:u.type===f})}}return r}const U_e=jG((e,t)=>FR(e)-FR(t));function j_e(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const a of e.children){iX(a);for(const s of fe(a.component.scales))if((t=r.scale)[s]??(t[s]=NY(s,e)),r.scale[s]==="shared"){const u=i[s],c=a.component.scales[s].getWithExplicit("type");u?cbe(u.value,c.value)?i[s]=Iu(u,c,"type","scale",U_e):(r.scale[s]="independent",delete i[s]):i[s]=c}}for(const a of fe(i)){const s=e.scaleName(a,!0),u=i[a];n[a]=new WY(s,u);for(const c of e.children){const f=c.component.scales[a];f&&(c.renameScale(f.get("name"),s),f.merged=!0)}}return n}class f_{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Vt(e){return e?.type==="unit"}function Ar(e){return e?.type==="facet"}function l5(e){return e?.type==="concat"}function ph(e){return e?.type==="layer"}class c5{constructor(t,n,i,r,a,s,u){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=qn(u),this.name=t.name??r,this.title=du(t.title)?{text:t.title}:t.title?qn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new f_,this.projectionNameMap=i?i.projectionNameMap:new f_,this.signalNameMap=i?i.signalNameMap:new f_,this.data=t.data,this.description=t.description,this.transforms=z2e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:jxe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:qx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new ko,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?je(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){B_e(this)}parseProjection(){HY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){UY(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of fe(i)){const s=i[a];s!==void 0&&(r[a]=Ut(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ut(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Tt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=sSe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Hr)t[i].title&&n.push(eSe(this,i));for(const i of e5)n=n.concat(tSe(this,i));return n}assembleAxes(){return qAe(this.component.axes,this.config)}assembleLegends(){return qY(this)}assembleProjections(){return TSe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...nH(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ze(["unit","layer"],this.type)?Ze(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),Tt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Ar(this.parent)?VY(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Gt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Wt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Ar(this.parent)){const n=kY(t),i=Mx(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(kn(a)&&Uc(s)){const u=r.get("name"),c=s2(this,i),f=u5(c);if(f){const d=xe({aggregate:"distinct",field:f},{expr:"datum"});return{signal:FY(u,r,d)}}else return ge(aM(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(VP(t)&&Cs(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(Lye(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class rX extends c5{vgField(t,n={}){const i=this.fieldDef(t);if(i)return xe(i,n)}reduceFieldDef(t,n){return pxe(this.getMapping(),(i,r,a)=>{const s=Ca(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){OM(this.getMapping(),(i,r)=>{const a=Ca(i);a&&t(a,r)},n)}}class o2 extends St{clone(){return new o2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${nt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class u2 extends St{clone(){return new u2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${nt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class l2 extends St{clone(){return new l2(this.parent,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${nt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class c2 extends St{clone(){return new c2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${nt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class ud extends St{clone(){return new ud(null,je(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Na,Oa],[Jr,Ra]]){const a=r.map(s=>{const u=vn(n.encoding[s]);return ye(u)?u.field:Ds(u)?{expr:`${u.datum}`}:wa(u)?{expr:`${u.value}`}:void 0});(a[0]||a[1])&&(t=new ud(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Ji)){const r=n.typedFieldDef(Ji);r.type===ch&&(t=new ud(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Se);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${nt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Kg extends St{clone(){return new Kg(null,this.projection,je(this.fields),je(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Na,Oa],[Jr,Ra]]){const r=i.map(s=>{const u=vn(n.encoding[s]);return ye(u)?u.field:Ds(u)?{expr:`${u.datum}`}:wa(u)?{expr:`${u.value}`}:void 0}),a=i[0]===Jr?"2":"";(r[0]||r[1])&&(t=new Kg(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Se))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${nt(this.fields)} ${nt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class tc extends St{clone(){return new tc(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new tc(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(ye(r)&&ye(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const u=r.impute?a:a.impute?r:void 0,{method:c,value:f,frame:d,keyvals:g}=s.impute,p=fG(n.mark,i);return new tc(t,{impute:s.field,key:u.field,...c?{method:c}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...g!==void 0?{keyvals:g}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${nt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:u=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...i?{keyvals:y2e(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:u,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,f,d]}else return[c]}}class f2 extends St{clone(){return new f2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${nt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Jg extends St{clone(){return new Jg(null,je(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let u=null;if(v2e(s)){let c=oX(s.data,a);c||(c=new Cc(s.data),a.push(c));const f=n.getName(`lookup_${r}`);u=new Vi(c,f,Wt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=u}else if(b2e(s)){const c=s.param;i={as:c,...i};let f;try{f=n.getSelectionComponent(Gt(c),c)}catch{throw new Error(Iye(c))}if(u=f.materialized,!u)throw new Error(Pye(c))}return new Jg(t,i,u.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ee(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${nt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ee(this.transform.as)}:{}};else{let n=this.transform.as;Se(n)||(ge(eve),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class d2 extends St{clone(){return new d2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${nt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class h2 extends St{clone(){return new h2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${nt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class g2 extends St{clone(){return new g2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ka((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${nt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class p2 extends St{clone(){return new p2(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${nt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function aX(e){let t=0;function n(i,r){if(i instanceof Cc&&!i.isGenerator&&!Ld(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof ai&&(i.parent instanceof Cc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof hh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof Qp||i instanceof Zp||i instanceof Pd||i instanceof dh||i instanceof jd||i instanceof Kg||i instanceof xa||i instanceof Jg||i instanceof gh||i instanceof Gc||i instanceof c2||i instanceof l2||i instanceof o2||i instanceof f2||i instanceof d2||i instanceof h2||i instanceof Pu||i instanceof p2||i instanceof g2||i instanceof u2)&&r.transform.push(i.assemble()),(i instanceof as||i instanceof is||i instanceof tc||i instanceof yo||i instanceof ud)&&r.transform.push(...i.assemble()),i instanceof Vi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Vi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Vi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function q_e(e){const t=[],n=aX(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function I_e(e,t){const n=[],i=aX(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const u=s.assemble();i(s,u)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,u]of n.entries())(u.transform??[]).length===0&&!u.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const u of s.transform??[])u.type==="lookup"&&(u.from=e.outputNodes[u.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function P_e(e){return e==="top"||e==="left"||Te(e)?"header":"footer"}function H_e(e){for(const t of Hr)G_e(e,t);O9(e,"x"),O9(e,"y")}function G_e(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],u=Id("title",null,i,t);let c=sd(s,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});r.component.layoutHeaders[t].title&&(c=se(c)?c.join(", "):c,c+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=Id("labelOrient",s.header,i,t),d=s.header!==null?sn(s.header?.labels,i.header.labels,!0):!1,g=Ze(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?c:null,facetFieldDef:s,[g]:t==="facet"?[]:[sX(e,t,d)]}}}function sX(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function O9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=i5(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const u of n.component.axes[t]){const c=P_e(u.get("orient"));s[c]??(s[c]=[sX(e,a,!1)]);const f=ag(u,"main",e.config,{header:!0});f&&s[c][0].axes.push(f),u.mainExtracted=!0}}}}function Y_e(e){f5(e),ab(e,"width"),ab(e,"height")}function X_e(e){f5(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";ab(e,t),ab(e,n)}function f5(e){for(const t of e.children)t.parseLayoutSize()}function ab(e,t){const n=kY(t),i=Mx(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const u of e.children){const c=u.component.layoutSize.getWithExplicit(n),f=r.scale[i]??NY(i,e);if(f==="independent"&&c.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==c.value){s=void 0;break}s=Iu(s,c,n,"")}else s=c}if(s){for(const u of e.children)e.renameSignal(u.getName(n),e.getName(t)),u.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function V_e(e){const{size:t,component:n}=e;for(const i of Mo){const r=er(i);if(t[r]){const a=t[r];n.layoutSize.set(r,gs(a)?"step":a,!0)}else{const a=W_e(e,r);n.layoutSize.set(r,a,!1)}}}function W_e(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(kn(a)){const u=eb(i.view,t);return Uc(s)||gs(u)?"step":u}else return DC(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return DC(i.view,t);{const a=eb(i.view,t);return gs(a)?a.step:a}}}function XC(e,t,n){return xe(t,{suffix:`by_${xe(e)}`,...n})}class Ag extends rX{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=m5(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!qp(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=fe(t),i={};for(const r of n){if(![ho,go].includes(r)){ge(Ox(r,"facet"));break}const a=t[r];if(a.field===void 0){ge(AC(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=kM(t,n);return i.header?i.header=qn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return he(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=m2(this),this.child.parseData()}parseLayoutSize(){f5(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>rs(t))&&oM(sM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),H_e(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Hr)for(const i of t5){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const u=Id("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(u)){const c=r2(n,u);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end"}}if(a?.[0]){const u=n==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(u)&&(t[c]??(t[c]={}),t[c][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Ag))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Ag?{...this.channelHasField("column")?{encode:{update:{columns:{field:xe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Ag){if(this.child.channelHasField("column")){const r=xe(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Mo){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),u=a.get("range");if(kn(s)&&Uc(u)){const c=s2(this.child,r),f=u5(c);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):ge(aM(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:u}=this.getCardinalityAggregateForChild(),c=[];for(const d of Hr){const g=this.facet[d];if(g){c.push(xe(g));const{bin:p,sort:y}=g;if(Nt(p)&&c.push(xe(g,{binSuffix:"end"})),po(y)){const{field:v,op:b=jx}=y,E=XC(g,y);i&&r?(a.push(E),s.push("max"),u.push(E)):(a.push(v),s.push(b),u.push(E))}else if(se(y)){const v=qd(g,d);a.push(v),s.push("max"),u.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:c,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:u}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?po(i.sort)?[XC(i,i.sort,{expr:"datum"})]:se(i.sort)?[qd(i,t,{expr:"datum"})]:[xe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(po(r)?r.order:!se(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return jC(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of e5)if(t[r]){const a=Id("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return jC(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=q_e(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:Hr.map(c=>this.facetSortFields(c)).flat(),order:Hr.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(tEe(this,[]))}]}getMapping(){return this.facet}}function Q_e(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(po(a.sort)){const{field:s,op:u=jx}=a.sort;e=r=new Gc(e,{joinaggregate:[{op:u,field:s,as:XC(a,a.sort,{forAs:!0})}],groupby:[xe(a)]})}return r}return null}function oX(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const u=i.format?.mesh;if(!((r||u)&&r!==u)){if(Wg(e)&&Wg(i)){if(vr(e.values,i.values))return n}else if(Ld(e)&&Ld(i)){if(e.url===i.url)return n}else if(qG(e)&&e.name===n.dataName)return n}}return null}function Z_e(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Cc({values:[]});return t.push(i),i}const n=oX(e.data,t);if(n)return $u(e.data)||(n.data.format=zP({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Cc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function K_e(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(T2e(r))s=e=new jd(e,r),a="derived";else if(HM(r)){const u=ISe(r);s=e=ai.makeWithAncestors(e,{},u,n)??e,e=new dh(e,t,r.filter)}else if(zG(r))s=e=as.makeFromTransform(e,r,t),a="number";else if(F2e(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new ai(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=is.makeFromTransform(e,r);else if(k2e(r))s=e=xa.makeFromTransform(e,r),a="number",QM(t)&&(e=new Pu(e));else if(RG(r))s=e=Jg.make(e,t,r,i++),a="derived";else if(C2e(r))s=e=new gh(e,r),a="number";else if(D2e(r))s=e=new Gc(e,r),a="number";else if(O2e(r))s=e=yo.makeFromTransform(e,r),a="derived";else if(N2e(r))s=e=new c2(e,r),a="derived";else if(R2e(r))s=e=new u2(e,r),a="derived";else if($2e(r))s=e=new l2(e,r),a="derived";else if(x2e(r))s=e=new g2(e,r),a="derived";else if(w2e(r))e=new p2(e,r);else if(M2e(r))s=e=tc.makeFromTransform(e,r),a="derived";else if(E2e(r))s=e=new o2(e,r),a="derived";else if(A2e(r))s=e=new d2(e,r),a="derived";else if(S2e(r))s=e=new h2(e,r),a="derived";else if(_2e(r))s=e=new f2(e,r),a="derived";else{ge(Jye(r));continue}if(s&&a!==void 0)for(const u of s.producedFields()??[])n.set(u,a,!1)}return e}function m2(e){let t=Z_e(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&($u(r)||Ld(r)||Wg(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new X2e;$u(r)?(IG(r)?t=new Zp(t,r.sequence):GM(r)&&(t=new Qp(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=ai.makeExplicit(t,e,s)??t,t=new Pu(t);const u=e.parent&&ph(e.parent);(Vt(e)||Ar(e))&&u&&(t=as.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=K_e(t,e,s));const c=HSe(e),f=PSe(e);t=ai.makeWithAncestors(t,{},{...c,...f},s)??t,Vt(e)&&(t=ud.parseAll(t,e),t=Kg.parseAll(t,e)),(Vt(e)||Ar(e))&&(u||(t=as.makeFromEncoding(t,e)??t),t=is.makeFromEncoding(t,e)??t,t=jd.parseAllForSortIndex(t,e));const d=t=V1(Wt.Raw,e,t);if(Vt(e)){const E=xa.makeFromEncoding(t,e);E&&(t=E,QM(e)&&(t=new Pu(t))),t=tc.makeFromEncoding(t,e)??t,t=yo.makeFromEncoding(t,e)??t}let g,p;if(Vt(e)){const{markDef:E,mark:S,config:_}=e,w=$t("invalid",E,_),{marks:D,scales:T}=p=HG({invalid:w,isPath:rl(S)});D!==T&&T==="include-invalid-values"&&(g=t=V1(Wt.PreFilterInvalid,e,t)),D==="exclude-invalid-values"&&(t=Pd.make(t,e,p)??t)}const y=t=V1(Wt.Main,e,t);let v;if(Vt(e)&&p){const{marks:E,scales:S}=p;E==="include-invalid-values"&&S==="exclude-invalid-values"&&(t=Pd.make(t,e,p)??t,v=t=V1(Wt.PostFilterInvalid,e,t))}Vt(e)&&UAe(e,y);let b=null;if(Ar(e)){const E=e.getName("facet");t=Q_e(t,e.facet)??t,b=new hh(t,e,E,y.getSource()),n[E]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:g,postFilterInvalid:v}}function V1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Vi(n,a,e,r);return i[a]=s,s}class J_e extends c5{constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&ge(Qye),this.children=this.getChildren(t).map((a,s)=>m5(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=m2(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of fe(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>rs(t))&&oM(sM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Xx(t)?t.vconcat:IM(t)?t.hconcat:t.concat}parseLayoutSize(){X_e(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=n5(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function ewe(e){return e===!1||e===null}const twe={disable:1,gridScale:1,scale:1,...aG,labelExpr:1,encode:1},uX=fe(twe);class d5 extends ko{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new d5(je(this.explicit),je(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!ewe(this.get(t))}hasOrientSignalRef(){return Te(this.explicit.orient)}}function nwe(e,t,n){const{encoding:i,config:r}=e,a=vn(i[t])??vn(i[ws(t)]),s=e.axis(t)||{},{format:u,formatType:c}=s;if(Ec(c))return{text:va({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:r}),...n};if(u===void 0&&c===void 0&&r.customFormatTypes){if(Rd(a)==="quantitative"){if(zd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:va({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:va({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(Rd(a)==="temporal"&&r.timeFormatType&&ye(a)&&!a.timeUnit)return{text:va({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function iwe(e){return Mo.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[cwe(n,e)]),t),{})}const rwe={bottom:"top",top:"bottom",left:"right",right:"left"};function awe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of fe(r.component.axes))n.axis[a]=i5(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=swe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of Mo){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:u,explicit:c}=s.getWithExplicit("orient");if(!Te(u)){if(i[u]>0&&!c){const f=rwe[u];i[u]>i[f]&&s.set("orient",f,!1)}i[u]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function swe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(s.explicit&&u.explicit&&s.value!==u.value)return;e[i]=owe(r,a)}}}else return t.map(n=>n.clone());return e}function owe(e,t){for(const n of uX){const i=Iu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return lH(r,a);case"gridScale":return{explicit:r.explicit,value:sn(r.value,a.value)}}return Wx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function uwe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Te(n.labelAngle)?n.labelAngle:Xg(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===DY(i,r))return!0}return e===n[t]}const lwe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function cwe(e,t){let n=t.axis(e);const i=new d5,r=vn(t.encoding[e]),{mark:a,config:s}=t,u=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||WAe(e),c=t.getScaleComponent(e).get("type"),f=IAe(e,c,u,t.config),d=n!==void 0?!n:LC("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const g=YAe(r,n,e,s.style,f),p=GH(n.formatType,r,c),y=HH(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:u,labelAngle:g,format:y,formatType:p,mark:a,config:s};for(const S of uX){const _=S in v9?v9[S](v):LR(S)?n[S]:void 0,w=_!==void 0,D=uwe(_,S,n,t,e);if(w&&D)i.set(S,_,D);else{const{configValue:T=void 0,configFrom:M=void 0}=LR(S)&&S!=="values"?LC(S,s.style,n.style,f):{},$=T!==void 0;w&&!$?i.set(S,_,D):(M!=="vgAxisConfig"||lwe.has(S)&&$||Gp(T)||Te(T))&&i.set(S,T,!1)}}const b=n.encoding??{},E=rG.reduce((S,_)=>{if(!i.hasAxisPart(_))return S;const w=OY(b[_]??{},t),D=_==="labels"?nwe(t,e,w):w;return D!==void 0&&!Tt(D)&&(S[_]={update:D}),S},{});return Tt(E)||i.set("encode",E,!!n.encoding||n.labelAngle!==void 0),i}function fwe({encoding:e,size:t}){for(const n of Mo){const i=er(n);gs(t[i])&&Au(e[n])&&(delete t[i],ge(gH(i)))}return t}const dwe={vgMark:"arc",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._i("x",e,{defaultPos:"mid"}),..._i("y",e,{defaultPos:"mid"}),...Ao(e,"radius"),...Ao(e,"theta")})},hwe={vgMark:"area",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...tb("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...tb("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...WM(e)})},gwe={vgMark:"rect",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ao(e,"x"),...Ao(e,"y")})},pwe={vgMark:"shape",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ye(n)&&n.type===ch?{field:xe(n,{expr:"datum"})}:{}}]}},mwe={vgMark:"image",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ao(e,"x"),...Ao(e,"y"),...XM(e,"url")})},ywe={vgMark:"line",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._i("x",e,{defaultPos:"mid"}),..._i("y",e,{defaultPos:"mid"}),...Pn("size",e,{vgChannel:"strokeWidth"}),...WM(e)})},vwe={vgMark:"trail",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._i("x",e,{defaultPos:"mid"}),..._i("y",e,{defaultPos:"mid"}),...Pn("size",e),...WM(e)})};function h5(e,t){const{config:n}=e;return{...na(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._i("x",e,{defaultPos:"mid"}),..._i("y",e,{defaultPos:"mid"}),...Pn("size",e),...Pn("angle",e),...bwe(e,n,t)}}function bwe(e,t,n){return n?{shape:{value:n}}:Pn("shape",e)}const xwe={vgMark:"symbol",encodeEntry:e=>h5(e)},Ewe={vgMark:"symbol",encodeEntry:e=>h5(e,"circle")},Awe={vgMark:"symbol",encodeEntry:e=>h5(e,"square")},Swe={vgMark:"rect",encodeEntry:e=>({...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ao(e,"x"),...Ao(e,"y")})},_we={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...tb("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...tb("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Pn("size",e,{vgChannel:"strokeWidth"})}}},wwe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...na(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),..._i("x",e,{defaultPos:"mid"}),..._i("y",e,{defaultPos:"mid"}),...XM(e),...Pn("size",e,{vgChannel:"fontSize"}),...Pn("angle",e),...o9("align",Cwe(e.markDef,n,t)),...o9("baseline",Dwe(e.markDef,n,t)),..._i("radius",e,{defaultPos:null}),..._i("theta",e,{defaultPos:null})}}};function Cwe(e,t,n){if($t("align",e,n)===void 0)return"center"}function Dwe(e,t,n){if($t("baseline",e,n)===void 0)return"middle"}const $we={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...na(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ao(e,r),..._i(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Ut($t("thickness",n,t))}}},W1={arc:dwe,area:hwe,bar:gwe,circle:Ewe,geoshape:pwe,image:mwe,line:ywe,point:xwe,rect:Swe,rule:_we,square:Awe,text:wwe,tick:$we,trail:vwe};function Twe(e){if(Ze([Lx,zx,Cbe],e.mark)){const t=fG(e.mark,e.encoding);if(t.length>0)return Mwe(e,t)}else if(e.mark===Bx){const t=xC.some(n=>$t(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Fwe(e)}return g5(e)}const N9="faceted_path_";function Mwe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:N9+e.requestDataName(Wt.Main),data:e.requestDataName(Wt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:g5(e,{fromPrefix:N9})}]}const R9="stack_group_";function Fwe(e){const[t]=g5(e,{fromPrefix:R9}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const g=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${g.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...Td(t.encode.update,["y","yc","y2","height",...xC]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Xi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...Td(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Xi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of xC){const d=ds(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Ut(d)),d&&(t.encode.update[f]={value:0})}const u=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),g=xe(d);g&&u.push(g),(d?.bin||d?.timeUnit)&&u.push(xe(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const g=ds(d,e.markDef,e.config);return g!==void 0?{...f,[d]:Ut(g)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Wt.Main),name:R9+e.requestDataName(Wt.Main),groupby:u,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function kwe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!se(s)&&wa(s)&&vC(s.value)||!s&&vC($t("order",r,a)))){if((se(s)||ye(s))&&!n)return sH(s,{expr:"datum"});if(rl(i)){const u=r.orient==="horizontal"?"y":"x",c=t[u];if(ye(c))return{field:u}}}}function g5(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=sn(i.clip,Owe(e),Nwe(e)),u=rH(i),c=r.key,f=kwe(e),d=Rwe(e),g=$t("aria",i,a),p=W1[n].postEncodingTransform?W1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:W1[n].vgMark,...s?{clip:s}:{},...u?{style:u}:{},...c?{key:c.field}:{},...f?{sort:f}:{},...d||{},...g===!1?{aria:g}:{},from:{data:t.fromPrefix+e.requestDataName(Wt.Main)},encode:{update:W1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function Owe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function Nwe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Rwe(e){if(!e.component.selection)return null;const t=fe(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=fe(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class lX extends rX{constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,jR(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=f=>(f.from?.data&&(f.from.data=this.lookupDataSource(f.from.data),"time"in this.encoding&&(f.from.data=f.from.data+YG)),f.from?.facet?.data&&(f.from.facet.data=this.lookupDataSource(f.from.facet.data)),f);const s=hs(t.mark)?{...t.mark}:{type:t.mark},u=s.type;s.filled===void 0&&(s.filled=l2e(s,a,{graticule:t.data&&GM(t.data)}));const c=this.encoding=hxe(t.encoding||{},u,s.filled,a);this.markDef=kG(s,c,a),this.size=fwe({encoding:c,size:jR(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=FG(this.markDef,c),this.specifiedScales=this.initScales(u,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>jM(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===BH,i=t&&aye.some(r=>qe(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return nM.reduce((i,r)=>{const a=vn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=qn(t);return se(n)&&(r.domain=n.map(mr)),se(i)&&(r.range=i.map(mr)),r}initAxes(t){return Mo.reduce((n,i)=>{const r=t[i];if(qe(r)||i===Yt&&qe(t.x2)||i===Nn&&qe(t.y2)){const a=qe(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=fe(t),i={};for(const r of n){const a=t[r];i[r]=Gp(a)?iH(a):mr(a)}return i}initLegends(t){return mye.reduce((n,i)=>{const r=vn(t[i]);if(r&&vye(i)){const a=r.legend;n[i]=a&&qn(a)}return n},{})}parseData(){this.component.data=m2(this)}parseLayoutSize(){V_e(this)}parseSelections(){this.component.selection=LAe(this,this.selection)}parseMarkGroup(){this.component.mark=Twe(this)}parseAxesAndHeaders(){this.component.axes=iwe(this)}assembleSelectionTopLevelSignals(t){return nEe(this,t)}assembleSignals(){return[..._Y(this),...eEe(this,[])]}assembleSelectionData(t){return iEe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return n5(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!ph(this.parent))&&(t=QG(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Jl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Ca(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ti(n)?n:null}}class p5 extends c5{constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((u,c)=>{if(Vx(u))return new p5(u,this,this.getName(`layer_${c}`),s,a);if(Fo(u))return new lX(u,this,this.getName(`layer_${c}`),s,a);throw new Error(rM(u))})}parseData(){this.component.data=m2(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Y_e(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of fe(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>rs(t))&&oM(sM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){awe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),_Y(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),n5(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Ee(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return rEe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),qY(this))}}function m5(e,t,n,i,r){if(qx(e))return new Ag(e,t,n,r);if(Vx(e))return new p5(e,t,n,i,r);if(Fo(e))return new lX(e,t,n,i,r);if(Bxe(e))return new J_e(e,t,n,r);throw new Error(rM(e))}function zwe(e,t={}){t.logger&&jve(t.logger),t.fieldTitle&&tG(t.fieldTitle);try{const n=MG(Gd(t.config,e.config)),i=UG(e,n),r=m5(i,null,"",void 0,n);return r.parse(),s_e(r.component.data,r),{spec:Lwe(r,Bwe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&qve(),t.fieldTitle&&rxe()}}function Bwe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Se(t)&&(t={type:t}),r&&a&&H2e(t.type)){if(r==="step"&&a==="step")ge(_R()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";ge(_R(Mx(s)));const u=s==="width"?"height":"width";t.type=G2e(u)}}return{...fe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...KR(n,!1),...KR(e,!0)}}function Lwe(e,t,n={},i){const r=e.config?Zxe(e.config):void 0,a=I_e(e.component.data,n),s=e.assembleSelectionData(a),u=e.assembleProjections(),c=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let g=e.assembleLayoutSignals();g=g.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...y,...c?{title:c}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...u.length>0?{projections:u}:{},...e.assembleGroup([...g,...e.assembleSelectionTopLevelSignals([]),...CG(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const Uwe=J1e.version,jwe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Fd,accessPathWithDatum:VT,accessWithDatumToUnescapedPath:xt,compile:zwe,contains:Ze,deepEqual:vr,deleteNestedProperty:Gv,duplicate:je,entries:Uu,every:GT,fieldIntersection:XT,flatAccessWithDatum:LP,getFirstDefined:sn,hasIntersection:YT,hasProperty:he,hash:nt,internalField:qP,isBoolean:Yg,isEmpty:Tt,isEqual:tye,isInternalField:IP,isNullOrFalse:vC,isNumeric:_x,keys:fe,logicalExpr:bg,mergeDeep:zP,never:RP,normalize:UG,normalizeAngle:Xg,omit:Xi,pick:Td,prefixGenerator:bC,removePathFromField:uh,replaceAll:pc,replacePathInField:Kr,resetIdCounter:iye,setEqual:BP,some:Md,stringify:Mt,titleCase:Np,unique:Ka,uniqueId:jP,vals:Vn,varName:Gt,version:Uwe},Symbol.toStringTag,{value:"Module"}));function cX(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var qwe="3.0.0",Iwe={version:qwe};const If="#fff",z9="#888",Pwe={background:"#333",view:{stroke:z9},title:{color:If,subtitleColor:If},style:{"guide-label":{fill:If},"guide-title":{fill:If}},axis:{domainColor:If,gridColor:z9,tickColor:If}},$l="#4572a7",Hwe={background:"#fff",arc:{fill:$l},area:{fill:$l},line:{stroke:$l,strokeWidth:2},path:{stroke:$l},rect:{fill:$l},shape:{stroke:$l},symbol:{fill:$l,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Tl="#30a2da",d_="#cbcbcb",Gwe="#999",Ywe="#333",B9="#f0f0f0",L9="#333",Xwe={arc:{fill:Tl},area:{fill:Tl},axis:{domainColor:d_,grid:!0,gridColor:d_,gridWidth:1,labelColor:Gwe,labelFontSize:10,titleColor:Ywe,tickColor:d_,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:B9,group:{fill:B9},legend:{labelColor:L9,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:L9,titleFontSize:14,titlePadding:10},line:{stroke:Tl,strokeWidth:2},path:{stroke:Tl,strokeWidth:.5},rect:{fill:Tl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Tl},bar:{binSpacing:2,fill:Tl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ml="#000",Vwe={group:{fill:"#e5e5e5"},arc:{fill:Ml},area:{fill:Ml},line:{stroke:Ml},path:{stroke:Ml},rect:{fill:Ml},shape:{stroke:Ml},symbol:{fill:Ml,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Wwe=22,Qwe="normal",U9="Benton Gothic, sans-serif",j9=11.5,Zwe="normal",Fl="#82c6df",h_="Benton Gothic Bold, sans-serif",q9="normal",I9=13,O0={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},Kwe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:h_,fontSize:Wwe,fontWeight:Qwe},arc:{fill:Fl},area:{fill:Fl},line:{stroke:Fl,strokeWidth:2},path:{stroke:Fl},rect:{fill:Fl},shape:{stroke:Fl},symbol:{fill:Fl,size:30},axis:{labelFont:U9,labelFontSize:j9,labelFontWeight:Zwe,titleFont:h_,titleFontSize:I9,titleFontWeight:q9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:U9,labelFontSize:j9,symbolType:"square",titleFont:h_,titleFontSize:I9,titleFontWeight:q9},range:{category:O0["category-6"],diverging:O0["fireandice-6"],heatmap:O0["fire-7"],ordinal:O0["fire-7"],ramp:O0["fire-7"]}},kl="#ab5787",Q1="#979797",Jwe={background:"#f9f9f9",arc:{fill:kl},area:{fill:kl},line:{stroke:kl},path:{stroke:kl},rect:{fill:kl},shape:{stroke:kl},symbol:{fill:kl,size:30},axis:{domainColor:Q1,domainWidth:.5,gridWidth:.2,labelColor:Q1,tickColor:Q1,tickWidth:.2,titleColor:Q1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Ol="#3e5c69",eCe={background:"#fff",arc:{fill:Ol},area:{fill:Ol},line:{stroke:Ol},path:{stroke:Ol},rect:{fill:Ol},shape:{stroke:Ol},symbol:{fill:Ol},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Lr="#1696d2",P9="#000000",tCe="#FFFFFF",Z1="Lato",g_="Lato",nCe="Lato",iCe="#DEDDDD",rCe=18,N0={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},aCe={background:tCe,title:{anchor:"start",fontSize:rCe,font:Z1},axisX:{domain:!0,domainColor:P9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:g_,labelAngle:0,tickColor:P9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Z1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:iCe,gridWidth:1,labelFontSize:12,labelFont:g_,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Z1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:g_,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Z1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:N0["six-groups-cat-1"],diverging:N0["diverging-colors"],heatmap:N0["diverging-colors"],ordinal:N0["six-groups-seq"],ramp:N0["shades-blue"]},area:{fill:Lr},rect:{fill:Lr},line:{color:Lr,stroke:Lr,strokeWidth:5},trail:{color:Lr,stroke:Lr,strokeWidth:0,size:1},path:{stroke:Lr,strokeWidth:.5},point:{filled:!0},text:{font:nCe,color:Lr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Lr,stroke:null}},arc:{fill:Lr},shape:{stroke:Lr},symbol:{fill:Lr,size:30}},Nl="#3366CC",H9="#ccc",K1="Arial, sans-serif",sCe={arc:{fill:Nl},area:{fill:Nl},path:{stroke:Nl},rect:{fill:Nl},shape:{stroke:Nl},symbol:{stroke:Nl},circle:{fill:Nl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:K1,fontSize:12},"guide-title":{font:K1,fontSize:12},"group-title":{font:K1,fontSize:12}},title:{font:K1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:H9,tickColor:H9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},y5=e=>e*(1/3+1),G9=y5(9),Y9=y5(10),X9=y5(12),R0="Segoe UI",V9="wf_standard-font, helvetica, arial, sans-serif",W9="#252423",z0="#605E5C",Q9="transparent",oCe="#C8C6C4",ua="#118DFF",uCe="#12239E",lCe="#E66C37",cCe="#6B007B",fCe="#E044A7",dCe="#744EC2",hCe="#D9B300",gCe="#D64550",fX=ua,dX="#DEEFFF",Z9=[dX,fX],pCe=[dX,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",fX],mCe={view:{stroke:Q9},background:Q9,font:R0,header:{titleFont:V9,titleFontSize:X9,titleColor:W9,labelFont:R0,labelFontSize:Y9,labelColor:z0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:z0,labelFontSize:G9,titleFont:V9,titleColor:W9,titleFontSize:X9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:oCe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ua},line:{stroke:ua,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:R0,fontSize:G9,fill:z0},arc:{fill:ua},area:{fill:ua,line:!0,opacity:.6},path:{stroke:ua},rect:{fill:ua},point:{fill:ua,filled:!0,size:75},shape:{stroke:ua},symbol:{fill:ua,strokeWidth:1.5,size:50},legend:{titleFont:R0,titleFontWeight:"bold",titleColor:z0,labelFont:R0,labelFontSize:Y9,labelColor:z0,symbolType:"circle",symbolSize:75},range:{category:[ua,uCe,lCe,cCe,fCe,dCe,hCe,gCe],diverging:Z9,heatmap:Z9,ordinal:pCe}},p_='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',yCe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',m_=400,J1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},vCe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],bCe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function y2({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=J1.gridBg[e],r=J1.textPrimary[e],a=J1.textSecondary[e],s=n==="dark"?vCe:bCe,u=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:u},area:{fill:u},path:{stroke:u},rect:{fill:u},shape:{stroke:u},symbol:{stroke:u},circle:{fill:u},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:p_,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:yCe,labelFontWeight:m_,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:J1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:p_,fill:a,fontWeight:m_},"guide-title":{font:p_,fill:a,fontWeight:m_}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const xCe=y2({theme:"white",background:"#ffffff"}),ECe=y2({theme:"g10",background:"#f4f4f4"}),ACe=y2({theme:"g90",background:"#262626"}),SCe=y2({theme:"g100",background:"#161616"}),_Ce=Iwe.version,wCe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:ECe,carbong100:SCe,carbong90:ACe,carbonwhite:xCe,dark:Pwe,excel:Hwe,fivethirtyeight:Xwe,ggplot2:Vwe,googlecharts:sCe,latimes:Kwe,powerbi:mCe,quartz:Jwe,urbaninstitute:aCe,version:_Ce,vox:eCe},Symbol.toStringTag,{value:"Module"}));function mh(e,t,n){return e.fields=t||[],e.fname=n,e}function CCe(e){return e.length===1?DCe(e[0]):$Ce(e)}const DCe=e=>function(t){return t[e]},$Ce=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function y_(e){throw Error(e)}function TCe(e){const t=[],n=e.length;let i=null,r=0,a="",s,u,c;e=e+"";function f(){t.push(a+e.substring(s,u)),a="",s=u+1}for(s=u=0;u<n;++u)if(c=e[u],c==="\\")a+=e.substring(s,u++),s=u;else if(c===i)f(),i=null,r=-1;else{if(i)continue;s===r&&c==='"'||s===r&&c==="'"?(s=u+1,i=c):c==="."&&!r?u>s?f():s=u+1:c==="["?(u>s&&f(),r=s=u+1):c==="]"&&(r||y_("Access path missing open bracket: "+e),r>0&&f(),r=0,s=u+1)}return r&&y_("Access path missing closing bracket: "+e),i&&y_("Access path missing closing quote: "+e),u>s&&(u++,f()),t}function MCe(e,t,n){const i=TCe(e);return e=i.length===1?i[0]:e,mh(CCe(i),[e],e)}MCe("id");mh(e=>e,[],"identity");mh(()=>0,[],"zero");mh(()=>1,[],"one");mh(()=>!0,[],"true");mh(()=>!1,[],"false");[...Object.getOwnPropertyNames(Object.prototype).filter(e=>typeof Object.prototype[e]=="function")];var FCe=Array.isArray;function K9(e){return e===Object(e)}function kCe(e){return typeof e=="string"}function OCe(e,t,n,i){if(FCe(e))return`[${e.map(r=>t(kCe(r)?r:J9(r,n))).join(", ")}]`;if(K9(e)){let r="";const{title:a,image:s,...u}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const c=Object.keys(u);if(c.length>0){r+="<table>";for(const f of c){let d=u[f];d!==void 0&&(K9(d)&&(d=J9(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function NCe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function J9(e,t){return JSON.stringify(e,NCe(t))}var RCe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const hX="vg-tooltip-element",zCe={offsetX:10,offsetY:10,id:hX,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:BCe,maxDepth:2,formatTooltip:OCe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function BCe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function LCe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return RCe.toString().replaceAll(hX,e)}function gX(e,t,{offsetX:n,offsetY:i}){const r=pX({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(mX(r[s],t))return r[s];return r["top-left"]}function UCe(e,t,n,i,r){const{position:a,offsetX:s,offsetY:u}=r,c=e._el.getBoundingClientRect(),f=e._origin,d=jCe(c,f,n),g=pX(d,i,s,u),p=Array.isArray(a)?a:[a];for(const y of p)if(mX(g[y],i)&&!qCe(t,g[y],i))return g[y];return gX(t,i,r)}function jCe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const u=i.x2-i.x1,c=i.y2-i.y1;return{x1:r,x2:r+u,y1:a,y2:a+c}}function pX(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,u=r-t.width/2,c=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:u,y:f},bottom:{x:u,y:g},left:{x:s,y:d},right:{x:c,y:d},"top-left":{x:s,y:f},"top-right":{x:c,y:f},"bottom-left":{x:s,y:g},"bottom-right":{x:c,y:g}}}function mX(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function qCe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class ICe{call;options;el;constructor(t){this.options={...zCe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=LCe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?UCe(t,n,i,this.el.getBoundingClientRect(),this.options):gX(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var v_={};var PCe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),HCe=Object.prototype.hasOwnProperty;function VC(e,t){return HCe.call(e,t)}function WC(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)VC(e,r)&&i.push(r);return i}function br(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function QC(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Bl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function yX(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ZC(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(ZC(e[t]))return!0}else if(typeof e=="object"){for(var i=WC(e),r=i.length,a=0;a<r;a++)if(ZC(e[i[a]]))return!0}}return!1}function ez(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var vX=(function(e){PCe(t,e);function t(n,i,r,a,s){var u=this.constructor,c=e.call(this,ez(n,{name:i,index:r,operation:a,tree:s}))||this;return c.name=i,c.index=r,c.operation=a,c.tree=s,Object.setPrototypeOf(c,u.prototype),c.message=ez(n,{name:i,index:r,operation:a,tree:s}),c}return t})(Error),Jt=vX,GCe=br,Kf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=sb(n,this.path);i&&(i=br(i));var r=nc(n,{op:"remove",path:this.from}).removed;return nc(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=sb(n,this.from);return nc(n,{op:"add",path:this.path,value:br(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:ep(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},YCe={add:function(e,t,n){return QC(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Kf.move,copy:Kf.copy,test:Kf.test,_get:Kf._get};function sb(e,t){if(t=="")return e;var n={op:"_get",path:t};return nc(e,n),n.value}function nc(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):ob(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=sb(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=ep(e,t.value),s.test===!1)throw new Jt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Jt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=br(e));var u=t.path||"",c=u.split("/"),f=e,d=1,g=c.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=ob;;){if(y=c[d],y&&y.indexOf("~")!=-1&&(y=yX(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=c.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!QC(y))throw new Jt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);QC(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Jt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=YCe[t.op].call(t,f,y,e);if(s.test===!1)throw new Jt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=g){var s=Kf[t.op].call(t,f,y,e);if(s.test===!1)throw new Jt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Jt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function v2(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Jt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=br(e));for(var a=new Array(t.length),s=0,u=t.length;s<u;s++)a[s]=nc(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function XCe(e,t,n){var i=nc(e,t);if(i.test===!1)throw new Jt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function ob(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Jt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Kf[e.op]){if(typeof e.path!="string")throw new Jt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Jt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Jt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Jt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&ZC(e.value))throw new Jt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Jt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Jt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},u=bX([s],n);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new Jt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Jt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function bX(e,t,n){try{if(!Array.isArray(e))throw new Jt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)v2(br(t),br(e),n||!0);else{n=n||ob;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Jt)return r;throw r}}function ep(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!ep(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var u=Object.keys(e);if(a=u.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(u[r]))return!1;for(r=a;r--!==0;)if(s=u[r],!ep(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var VCe=Object.freeze({__proto__:null,JsonPatchError:Jt,_areEquals:ep,applyOperation:nc,applyPatch:v2,applyReducer:XCe,deepClone:GCe,getValueByPointer:sb,validate:bX,validator:ob});var v5=new WeakMap,WCe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),QCe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function ZCe(e){return v5.get(e)}function KCe(e,t){return e.observers.get(t)}function JCe(e,t){e.observers.delete(t.callback)}function e3e(e,t){t.unobserve()}function t3e(e,t){var n=[],i,r=ZCe(e);if(!r)r=new WCe(e),v5.set(e,r);else{var a=KCe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=br(e),t){i.callback=t,i.next=null;var s=function(){KC(i)},u=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u))}return i.patches=n,i.object=e,i.unobserve=function(){KC(i),clearTimeout(i.next),JCe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u),window.removeEventListener("change",u))},r.observers.set(t,new QCe(t,i)),i}function KC(e,t){t===void 0&&(t=!1);var n=v5.get(e.object);b5(n.value,e.object,e.patches,"",t),e.patches.length&&v2(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function b5(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=WC(t),s=WC(e),u=!1,c=s.length-1;c>=0;c--){var f=s[c],d=e[f];if(VC(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?b5(d,g,n,i+"/"+Bl(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+Bl(f),value:br(d)}),n.push({op:"replace",path:i+"/"+Bl(f),value:br(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Bl(f),value:br(d)}),n.push({op:"remove",path:i+"/"+Bl(f)}),u=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!u&&a.length==s.length))for(var c=0;c<a.length;c++){var f=a[c];!VC(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+Bl(f),value:br(t[f])})}}}function n3e(e,t,n){n===void 0&&(n=!1);var i=[];return b5(e,t,i,"",n),i}var i3e=Object.freeze({__proto__:null,compare:n3e,generate:KC,observe:t3e,unobserve:e3e});Object.assign({},VCe,i3e,{JsonPatchError:vX,deepClone:br,escapePathComponent:Bl,unescapePathComponent:yX});function r3e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var b_,tz;function a3e(){if(tz)return b_;tz=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return b_=e,b_}var x_,nz;function x5(){if(nz)return x_;nz=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return x_=i=>i?typeof i!="object"?e:i:t,x_}var ey={exports:{}},E_,iz;function E5(){if(iz)return E_;iz=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return E_={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},E_}var A_,rz;function b2(){return rz||(rz=1,A_=typeof process=="object"&&v_&&v_.NODE_DEBUG&&/\bsemver\b/i.test(v_.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),A_}var az;function A5(){return az||(az=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=E5(),a=b2();t=e.exports={};const s=t.re=[],u=t.safeRe=[],c=t.src=[],f=t.safeSrc=[],d=t.t={};let g=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=E=>{for(const[S,_]of y)E=E.split(`${S}*`).join(`${S}{0,${_}}`).split(`${S}+`).join(`${S}{1,${_}}`);return E},b=(E,S,_)=>{const w=v(S),D=g++;a(E,D,S),d[E]=D,c[D]=S,f[D]=w,s[D]=new RegExp(S,_?"g":void 0),u[D]=new RegExp(w,_?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NONNUMERICIDENTIFIER]}|${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),b("FULL",`^${c[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),b("LOOSE",`^${c[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),b("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",c[d.COERCE],!0),b("COERCERTLFULL",c[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(ey,ey.exports)),ey.exports}var S_,sz;function s3e(){if(sz)return S_;sz=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return S_={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},S_}var __,oz;function S5(){if(oz)return __;oz=1;const e=b2(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=E5(),{safeRe:i,t:r}=A5(),a=x5(),{compareIdentifiers:s}=s3e();class u{constructor(f,d){if(d=a(d),f instanceof u){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const g=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!g)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof u)){if(typeof f=="string"&&f===this.version)return 0;f=new u(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof u||(f=new u(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof u||(f=new u(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const g=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}compareBuild(f){f instanceof u||(f=new u(f,this.options));let d=0;do{const g=this.build[d],p=f.build[d];if(e("build compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}inc(f,d,g){if(f.startsWith("pre")){if(!d&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,g),this.inc("pre",d,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,g),this.inc("pre",d,g);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(g)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];g===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return __=u,__}var w_,uz;function yh(){if(uz)return w_;uz=1;const e=S5();return w_=(n,i,r)=>new e(n,r).compare(new e(i,r)),w_}var C_,lz;function o3e(){if(lz)return C_;lz=1;const e=yh();return C_=(n,i,r)=>e(n,i,r)===0,C_}var D_,cz;function u3e(){if(cz)return D_;cz=1;const e=yh();return D_=(n,i,r)=>e(n,i,r)!==0,D_}var $_,fz;function l3e(){if(fz)return $_;fz=1;const e=yh();return $_=(n,i,r)=>e(n,i,r)>0,$_}var T_,dz;function c3e(){if(dz)return T_;dz=1;const e=yh();return T_=(n,i,r)=>e(n,i,r)>=0,T_}var M_,hz;function f3e(){if(hz)return M_;hz=1;const e=yh();return M_=(n,i,r)=>e(n,i,r)<0,M_}var F_,gz;function d3e(){if(gz)return F_;gz=1;const e=yh();return F_=(n,i,r)=>e(n,i,r)<=0,F_}var k_,pz;function h3e(){if(pz)return k_;pz=1;const e=o3e(),t=u3e(),n=l3e(),i=c3e(),r=f3e(),a=d3e();return k_=(u,c,f,d)=>{switch(c){case"===":return typeof u=="object"&&(u=u.version),typeof f=="object"&&(f=f.version),u===f;case"!==":return typeof u=="object"&&(u=u.version),typeof f=="object"&&(f=f.version),u!==f;case"":case"=":case"==":return e(u,f,d);case"!=":return t(u,f,d);case">":return n(u,f,d);case">=":return i(u,f,d);case"<":return r(u,f,d);case"<=":return a(u,f,d);default:throw new TypeError(`Invalid operator: ${c}`)}},k_}var O_,mz;function g3e(){if(mz)return O_;mz=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new u(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new u(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}O_=t;const n=x5(),{safeRe:i,t:r}=A5(),a=h3e(),s=b2(),u=S5(),c=xX();return O_}var N_,yz;function xX(){if(yz)return N_;yz=1;const e=/\s+/g;class t{constructor(z,O){if(O=r(O),z instanceof t)return z.loose===!!O.loose&&z.includePrerelease===!!O.includePrerelease?z:new t(z.raw,O);if(z instanceof a)return this.raw=z.value,this.set=[[z]],this.formatted=void 0,this;if(this.options=O,this.loose=!!O.loose,this.includePrerelease=!!O.includePrerelease,this.raw=z.trim().replace(e," "),this.set=this.raw.split("||").map(j=>this.parseRange(j.trim())).filter(j=>j.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const j=this.set[0];if(this.set=this.set.filter(Y=>!b(Y[0])),this.set.length===0)this.set=[j];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&E(Y[0])){this.set=[Y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let z=0;z<this.set.length;z++){z>0&&(this.formatted+="||");const O=this.set[z];for(let j=0;j<O.length;j++)j>0&&(this.formatted+=" "),this.formatted+=O[j].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(z){const j=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+z,Y=i.get(j);if(Y)return Y;const V=this.options.loose,ee=V?c[f.HYPHENRANGELOOSE]:c[f.HYPHENRANGE];z=z.replace(ee,X(this.options.includePrerelease)),s("hyphen replace",z),z=z.replace(c[f.COMPARATORTRIM],d),s("comparator trim",z),z=z.replace(c[f.TILDETRIM],g),s("tilde trim",z),z=z.replace(c[f.CARETTRIM],p),s("caret trim",z);let R=z.split(" ").map(me=>_(me,this.options)).join(" ").split(/\s+/).map(me=>B(me,this.options));V&&(R=R.filter(me=>(s("loose invalid filter",me,this.options),!!me.match(c[f.COMPARATORLOOSE])))),s("range list",R);const q=new Map,J=R.map(me=>new a(me,this.options));for(const me of J){if(b(me))return[me];q.set(me.value,me)}q.size>1&&q.has("")&&q.delete("");const ce=[...q.values()];return i.set(j,ce),ce}intersects(z,O){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(j=>S(j,O)&&z.set.some(Y=>S(Y,O)&&j.every(V=>Y.every(ee=>V.intersects(ee,O)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new u(z,this.options)}catch{return!1}for(let O=0;O<this.set.length;O++)if(G(this.set[O],z,this.options))return!0;return!1}}N_=t;const n=a3e(),i=new n,r=x5(),a=g3e(),s=b2(),u=S5(),{safeRe:c,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=A5(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=E5(),b=P=>P.value==="<0.0.0-0",E=P=>P.value==="",S=(P,z)=>{let O=!0;const j=P.slice();let Y=j.pop();for(;O&&j.length;)O=j.every(V=>Y.intersects(V,z)),Y=j.pop();return O},_=(P,z)=>(s("comp",P,z),P=M(P,z),s("caret",P),P=D(P,z),s("tildes",P),P=F(P,z),s("xrange",P),P=U(P,z),s("stars",P),P),w=P=>!P||P.toLowerCase()==="x"||P==="*",D=(P,z)=>P.trim().split(/\s+/).map(O=>T(O,z)).join(" "),T=(P,z)=>{const O=z.loose?c[f.TILDELOOSE]:c[f.TILDE];return P.replace(O,(j,Y,V,ee,R)=>{s("tilde",P,j,Y,V,ee,R);let q;return w(Y)?q="":w(V)?q=`>=${Y}.0.0 <${+Y+1}.0.0-0`:w(ee)?q=`>=${Y}.${V}.0 <${Y}.${+V+1}.0-0`:R?(s("replaceTilde pr",R),q=`>=${Y}.${V}.${ee}-${R} <${Y}.${+V+1}.0-0`):q=`>=${Y}.${V}.${ee} <${Y}.${+V+1}.0-0`,s("tilde return",q),q})},M=(P,z)=>P.trim().split(/\s+/).map(O=>$(O,z)).join(" "),$=(P,z)=>{s("caret",P,z);const O=z.loose?c[f.CARETLOOSE]:c[f.CARET],j=z.includePrerelease?"-0":"";return P.replace(O,(Y,V,ee,R,q)=>{s("caret",P,Y,V,ee,R,q);let J;return w(V)?J="":w(ee)?J=`>=${V}.0.0${j} <${+V+1}.0.0-0`:w(R)?V==="0"?J=`>=${V}.${ee}.0${j} <${V}.${+ee+1}.0-0`:J=`>=${V}.${ee}.0${j} <${+V+1}.0.0-0`:q?(s("replaceCaret pr",q),V==="0"?ee==="0"?J=`>=${V}.${ee}.${R}-${q} <${V}.${ee}.${+R+1}-0`:J=`>=${V}.${ee}.${R}-${q} <${V}.${+ee+1}.0-0`:J=`>=${V}.${ee}.${R}-${q} <${+V+1}.0.0-0`):(s("no pr"),V==="0"?ee==="0"?J=`>=${V}.${ee}.${R}${j} <${V}.${ee}.${+R+1}-0`:J=`>=${V}.${ee}.${R}${j} <${V}.${+ee+1}.0-0`:J=`>=${V}.${ee}.${R} <${+V+1}.0.0-0`),s("caret return",J),J})},F=(P,z)=>(s("replaceXRanges",P,z),P.split(/\s+/).map(O=>N(O,z)).join(" ")),N=(P,z)=>{P=P.trim();const O=z.loose?c[f.XRANGELOOSE]:c[f.XRANGE];return P.replace(O,(j,Y,V,ee,R,q)=>{s("xRange",P,j,Y,V,ee,R,q);const J=w(V),ce=J||w(ee),me=ce||w(R),Me=me;return Y==="="&&Me&&(Y=""),q=z.includePrerelease?"-0":"",J?Y===">"||Y==="<"?j="<0.0.0-0":j="*":Y&&Me?(ce&&(ee=0),R=0,Y===">"?(Y=">=",ce?(V=+V+1,ee=0,R=0):(ee=+ee+1,R=0)):Y==="<="&&(Y="<",ce?V=+V+1:ee=+ee+1),Y==="<"&&(q="-0"),j=`${Y+V}.${ee}.${R}${q}`):ce?j=`>=${V}.0.0${q} <${+V+1}.0.0-0`:me&&(j=`>=${V}.${ee}.0${q} <${V}.${+ee+1}.0-0`),s("xRange return",j),j})},U=(P,z)=>(s("replaceStars",P,z),P.trim().replace(c[f.STAR],"")),B=(P,z)=>(s("replaceGTE0",P,z),P.trim().replace(c[z.includePrerelease?f.GTE0PRE:f.GTE0],"")),X=P=>(z,O,j,Y,V,ee,R,q,J,ce,me,Me)=>(w(j)?O="":w(Y)?O=`>=${j}.0.0${P?"-0":""}`:w(V)?O=`>=${j}.${Y}.0${P?"-0":""}`:ee?O=`>=${O}`:O=`>=${O}${P?"-0":""}`,w(J)?q="":w(ce)?q=`<${+J+1}.0.0-0`:w(me)?q=`<${J}.${+ce+1}.0-0`:Me?q=`<=${J}.${ce}.${me}-${Me}`:P?q=`<${J}.${ce}.${+me+1}-0`:q=`<=${q}`,`${O} ${q}`.trim()),G=(P,z,O)=>{for(let j=0;j<P.length;j++)if(!P[j].test(z))return!1;if(z.prerelease.length&&!O.includePrerelease){for(let j=0;j<P.length;j++)if(s(P[j].semver),P[j].semver!==a.ANY&&P[j].semver.prerelease.length>0){const Y=P[j].semver;if(Y.major===z.major&&Y.minor===z.minor&&Y.patch===z.patch)return!0}return!1}return!0};return N_}var R_,vz;function p3e(){if(vz)return R_;vz=1;const e=xX();return R_=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},R_}var m3e=p3e(),EX=r3e(m3e);function y3e(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function u(f){f.source===i&&(s=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function c(){s<=0||(i.postMessage(n,a),setTimeout(c,r),s-=1)}setTimeout(c,r)}var v3e=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function AX(e,...t){for(const n of t)b3e(e,n);return e}function b3e(e,t){for(const n of Object.keys(t))Yd(e,n,t[n],!0)}const Ga=O1e;let tp=jwe;const bz=typeof window<"u"?window:void 0;tp===void 0&&bz?.vl?.compile&&(tp=bz.vl);const x3e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},E3e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},og={vega:"Vega","vega-lite":"Vega-Lite"},ub={vega:Ga.version,"vega-lite":tp?tp.version:"not available"},A3e={vega:e=>e,"vega-lite":(e,t,n)=>tp.compile(e,{config:n,logger:t}).spec},S3e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,_3e="chart-wrapper";function w3e(e){return typeof e=="function"}function xz(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${og[i]} JSON Source`}function C3e(e,t,n){if(e.$schema){const i=cX(e.$schema);n&&n!==i.library&&t.warn(`The given visualization spec is written in ${og[i.library]}, but mode argument sets ${og[n]??n}.`);const r=i.library;return EX(ub[r],`^${i.version.slice(1)}`)||t.warn(`The input spec uses ${og[r]} ${i.version}, but the current version of ${og[r]} is v${ub[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":n??"vega"}function SX(e){return!!(e&&"load"in e)}function Ez(e){return SX(e)?e:Ga.loader(e)}function D3e(e){const t=e.usermeta?.embedOptions??{};return Se(t.defaultStyle)&&(t.defaultStyle=!1),t}async function $3e(e,t,n={}){let i,r;Se(t)?(r=Ez(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=D3e(i),s=a.loader;(!r||s)&&(r=Ez(n.loader??s));const u=await Az(a,r),c=await Az(n,r),f={...AX(c,u),config:Gd(c.config??{},u.config??{})};return await M3e(e,i,f,r)}async function Az(e,t){const n=Se(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=Se(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function T3e(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function M3e(e,t,n={},i){const r=n.theme?Gd(wCe[n.theme],n.config??{}):n.config,a=Hu(n.actions)?n.actions:AX({},x3e,n.actions??{}),s={...E3e,...n.i18n},u=n.renderer??"svg",c=n.logger??lb(Ga.Warn);n.logLevel!==void 0&&c.level(n.logLevel);const f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:M,rootContainer:$}=T3e(d);if(!M.getElementById(T)){const F=document.createElement("style");F.id=T,F.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?v3e.toString():n.defaultStyle,$.appendChild(F)}}const g=C3e(t,c,n.mode);let p=A3e[g](t,c,r);if(g==="vega-lite"&&p.$schema){const T=cX(p.$schema);EX(ub.vega,`^${T.version.slice(1)}`)||c.warn(`The compiled spec uses Vega ${T.version}, but current version is v${ub.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const T=document.createElement("div");T.classList.add(_3e),d.appendChild(T),y=T}const v=n.patch;if(v&&(p=v instanceof Function?v(p):v2(p,v,!0,!1).newDocument),n.formatLocale&&Ga.formatLocale(n.formatLocale),n.timeFormatLocale&&Ga.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const M=n.expressionFunctions[T];"fn"in M?Ga.expressionFunction(T,M.fn,M.visitor):M instanceof Function&&Ga.expressionFunction(T,M)}const{ast:b}=n,E=Ga.parse(p,g==="vega-lite"?{}:r,{ast:b}),S=new(n.viewClass||Ga.View)(E,{loader:i,logger:c,renderer:u,...b?{expr:Ga.expressionInterpreter??n.expr??Z1e}:{}});if(S.addSignalListener("autosize",(T,M)=>{const{type:$}=M;$=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):$=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):$=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:M}=n,$=T&&!SX(T)?T?.baseURL:void 0,F=w3e(M)?M:new ICe({baseURL:$,...M===!0?{}:M}).call;S.tooltip(F)}let{hover:_}=n;if(_===void 0&&(_=g==="vega"),_){const{hoverSet:T,updateSet:M}=typeof _=="boolean"?{}:_;S.hover(T,M)}n&&(n.width!=null&&S.width(n.width),n.height!=null&&S.height(n.height),n.padding!=null&&S.padding(n.padding)),await S.initialize(y,n.bind).runAsync();let w;if(a!==!1){let T=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const $=document.createElement("details");$.title=s.CLICK_TO_VIEW_ACTIONS,d.append($),T=$;const F=document.createElement("summary");F.innerHTML=S3e,$.append(F),w=N=>{$.contains(N.target)||$.removeAttribute("open")},document.addEventListener("click",w)}const M=document.createElement("div");if(T.append(M),M.classList.add("vega-actions"),a===!0||a.export!==!1){for(const $ of["svg","png"])if(a===!0||a.export===!0||a.export[$]){const F=s[`${$.toUpperCase()}_ACTION`],N=document.createElement("a"),U=Ae(n.scaleFactor)?n.scaleFactor[$]:n.scaleFactor;N.text=F,N.href="#",N.target="_blank",N.download=`${f}.${$}`,N.addEventListener("mousedown",async function(B){B.preventDefault();const X=await S.toImageURL($,U);this.href=X}),M.append(N)}}if(a===!0||a.source!==!1){const $=document.createElement("a");$.text=s.SOURCE_ACTION,$.href="#",$.addEventListener("click",function(F){xz(qA(t),n.sourceHeader??"",n.sourceFooter??"",g),F.preventDefault()}),M.append($)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const $=document.createElement("a");$.text=s.COMPILED_ACTION,$.href="#",$.addEventListener("click",function(F){xz(qA(p),n.sourceHeader??"",n.sourceFooter??"","vega"),F.preventDefault()}),M.append($)}if(a===!0||a.editor!==!1){const $=n.editorUrl??"https://vega.github.io/editor/",F=document.createElement("a");F.text=s.EDITOR_ACTION,F.href="#",F.addEventListener("click",function(N){y3e(window,$,{config:r,mode:v?"vega":g,renderer:u,spec:qA(v?p:t)}),N.preventDefault()}),M.append(F)}}function D(){w&&document.removeEventListener("click",w),S.finalize()}return{view:S,spec:t,vgSpec:p,finalize:D,embedOptions:n}}const ty="http://localhost:4000";function F3e(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function k3e(e,t){if(!t?.encoding)return e;const n=[];Object.values(t.encoding).forEach(a=>{Array.isArray(a)?a.forEach(s=>s?.field&&n.push(s)):a?.field&&n.push(a)});const i=Array.from(new Map(n.map(a=>[a.field,a])).values());return e.map(a=>{const s={};return i.forEach((u,c)=>{let f=a[c];u.type==="quantitative"&&(f=f!=null?Number(f):null),u.type==="temporal"&&(u.timeUnit?f=f!=null?String(f):null:f=f!=null?new Date(f):null),s[u.field]=f}),s})}function O3e(e){return new Date(e).toLocaleDateString([],{month:"short",day:"numeric"})}async function Sz(e,t){const n=await fetch(e,t);if(!n.ok)throw new Error(`HTTP ${n.status}`);return n.json()}function N3e(){const[e,t]=Ui.useState([]),[n,i]=Ui.useState([]),[r,a]=Ui.useState(null),[s,u]=Ui.useState(""),[c,f]=Ui.useState(!1),[d,g]=Ui.useState(!1),[p,y]=Ui.useState(null),v=Ui.useRef(null),b=Ui.useMemo(()=>!!ty,[]),E=Ui.useMemo(()=>{const F=typeof localStorage<"u"?localStorage.getItem("cube_chat_user_id"):null;if(F)return F;const N=crypto.randomUUID();return typeof localStorage<"u"&&localStorage.setItem("cube_chat_user_id",N),N},[]);Ui.useEffect(()=>{b&&S()},[b]),Ui.useEffect(()=>{v.current?.scrollIntoView({behavior:"smooth"})},[e.length]);const S=async()=>{g(!0);try{const F=await Sz(`${ty}/api/conversations?userId=${encodeURIComponent(E)}`);i(F)}catch(F){const N=F instanceof Error?F.message:"Unable to load conversations";y(N)}finally{g(!1)}},_=async F=>{try{const N=await Sz(`${ty}/api/conversations/${F}/messages?userId=${encodeURIComponent(E)}`);a(F),t(N),y(null)}catch(N){const U=N instanceof Error?N.message:"Unable to load messages";y(U)}},w=async()=>{const F=s.trim();if(!F||!b)return;f(!0),y(null);const N=new Date().toISOString(),U={role:"user",content:F,timestamp:N},B={role:"assistant",content:"",timestamp:N};t(X=>[...X,U,B]),u("");try{const X=await fetch(`${ty}/api/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:E,content:F,conversationId:r??void 0})});if(!X.ok||!X.body)throw new Error(`HTTP ${X.status}`);const G=X.body.getReader(),P=new TextDecoder;let z="";for(;;){const{done:O,value:j}=await G.read();if(O)break;z+=P.decode(j,{stream:!0});const Y=z.split(`
`);z=Y.pop()??"";for(const V of Y)if(V.trim())try{const ee=JSON.parse(V);ee.type==="delta"&&typeof ee.content=="string"?t(R=>{const q=[...R],J=q[q.length-1];if(J&&J.role==="assistant"){const ce=ee.content,me=[...J.assistantChunks||[]];me.push(ce);const Me=[...J.segments||[]];Me.push({type:"text",value:ce}),q[q.length-1]={...J,content:me.join(""),assistantChunks:me,segments:Me}}return q}):ee.type==="event"&&ee.raw?t(R=>{const q=[...R],J=q[q.length-1];if(J&&J.role==="assistant"){const ce={...J.metadata||{}},me=Array.isArray(ce.events)?ce.events:ce.events?[ce.events]:[],Me=me[me.length-1];if(Me&&JSON.stringify(Me)===JSON.stringify(ee.raw))return q;const Pe=[...J.segments||[]],_t=it=>{const Rt=Pe[Pe.length-1];Rt&&Rt.type===it.type&&JSON.stringify(Rt.value)===JSON.stringify(it.value)||Pe.push(it)},pe=(it,Rt)=>{if(Rt==null)return it;const Ba=it[it.length-1];return Ba&&JSON.stringify(Ba)===JSON.stringify(Rt)?it:[...it,Rt]},Le=[...J.thinkingSteps||[]];let ze=J.thinkingBuffer||"";if(ee.raw.thinking){ze+=String(ee.raw.thinking);const it=ze.split(/\n+/);ze=it.pop()||"";for(const Rt of it)Rt.trim()&&(Le.push(Rt),_t({type:"thinking",value:Rt}));ee.raw.isInProcess===!1&&ze.trim()&&(Le.push(ze),_t({type:"thinking",value:ze}),ze=""),ce.thinking=[...Le,ze].join(`
`)}const de=pe([...J.toolCalls||[]],ee.raw.toolCall);let qt=[...J.toolResults||[]],Xe=[...J.sqlToolCalls||[]],It=[...J.sqlToolResults||[]];ee.raw.toolCall?.result&&(qt=pe(qt,ee.raw.toolCall.result)),ee.raw.toolCall?.input&&(Xe=pe(Xe,ee.raw.toolCall.input)),ee.raw.toolCall?.result&&(It=pe(It,ee.raw.toolCall.result)),ee.raw.toolCall&&_t({type:"toolCall",value:{call:ee.raw.toolCall,result:ee.raw.toolCall?.result}}),ee.raw.chartType&&(ce.chartType=ee.raw.chartType),ee.raw.visualization!==void 0&&(ce.visualization=ee.raw.visualization),ee.raw.query!==void 0&&(ce.query=ee.raw.query),ce.events=[...me,ee.raw],q[q.length-1]={...J,metadata:ce,thinkingSteps:Le,thinkingBuffer:ze,toolCalls:de,toolResults:qt,sqlToolCalls:Xe,sqlToolResults:It,segments:Pe}}return q}):ee.type==="done"&&ee.messages&&(a(ee.conversationId||r),ee.messages.map(R=>{if(R.role!=="assistant")return R;const q=R.metadata||{};return{...R,assistantChunks:R.assistantChunks||(R.content?[R.content]:[]),thinkingSteps:R.thinkingSteps||(q.thinking?[q.thinking]:[]),toolCalls:R.toolCalls||(q.toolCall?Array.isArray(q.toolCall)?q.toolCall:[q.toolCall]:[]),toolResults:R.toolResults||(q.toolCallResult?Array.isArray(q.toolCallResult)?q.toolCallResult:[q.toolCallResult]:[]),sqlToolCalls:R.sqlToolCalls||(q.sqlToolCall?Array.isArray(q.sqlToolCall)?q.sqlToolCall:[q.sqlToolCall]:[]),sqlToolResults:R.sqlToolResults||(q.sqlToolCallResult?Array.isArray(q.sqlToolCallResult)?q.sqlToolCallResult:[q.sqlToolCallResult]:[]),metadata:q}}),S())}catch(ee){console.warn("Failed to parse stream line",ee,V)}}}catch(X){const G=X instanceof Error?X.message:"Unknown error";y(G)}finally{f(!1)}},D=F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),w())},T=()=>{a(null),t([]),y(null),u("")},M=F=>{navigator.clipboard.writeText(F).catch(()=>y("Unable to copy to clipboard"))},$=Ui.useCallback(async(F,N)=>{if(!(!N||!F))try{await $3e(N,F,{actions:!1,renderer:"canvas"})}catch(U){console.warn("Failed to render vega",U)}},[]);return le.jsxs("div",{className:"layout",children:[le.jsxs("aside",{className:"sidebar",children:[le.jsxs("div",{className:"sidebar-header",children:[le.jsxs("div",{children:[le.jsx("p",{className:"eyebrow",children:"Cube Chat"}),le.jsx("h2",{children:"Conversations"})]}),le.jsx("button",{className:"ghost",onClick:T,disabled:c,children:"New chat"})]}),!b&&le.jsxs("div",{className:"banner warn",children:[le.jsx("strong",{children:"Missing backend."})," Set VITE_BACKEND_URL."]}),d?le.jsx("p",{className:"muted",children:"Loading"}):le.jsxs("div",{className:"conversation-list",children:[n.length===0&&le.jsx("p",{className:"muted",children:"No conversations yet."}),n.map(F=>le.jsxs("button",{className:`conversation ${F.id===r?"active":""}`,onClick:()=>_(F.id),children:[le.jsx("div",{className:"conversation-title",children:F.title||"Untitled"}),le.jsx("div",{className:"conversation-meta",children:F.lastTimestamp&&le.jsx("span",{children:O3e(F.lastTimestamp)})})]},F.id))]})]}),le.jsxs("div",{className:"app-shell",children:[le.jsxs("header",{className:"topbar",children:[le.jsxs("div",{children:[le.jsx("p",{className:"eyebrow",children:"Ask your data"}),le.jsx("h1",{children:"Data Q&A"}),le.jsx("p",{className:"subtitle",children:"Chat via backend proxy with Cube."})]}),le.jsx("div",{className:"actions",children:le.jsx("button",{className:"ghost",onClick:T,disabled:c&&!e.length,children:"Clear chat"})})]}),p&&le.jsxs("div",{className:"banner error",children:[le.jsx("strong",{children:"Error:"})," ",p]}),le.jsxs("main",{className:"panel",children:[le.jsxs("section",{className:"messages","aria-live":"polite",children:[e.length===0&&le.jsx("div",{className:"empty",children:"Start by asking a question about your data."}),e.map((F,N)=>le.jsxs("article",{className:`bubble ${F.role}`,children:[le.jsxs("div",{className:"bubble-header",children:[le.jsx("span",{className:"role",children:F.role}),le.jsx("span",{className:"time",children:F3e(F.timestamp)}),F.role==="assistant"&&le.jsx("button",{className:"ghost small",onClick:()=>M(F.content),children:"Copy"})]}),F.segments?le.jsx("div",{className:"stack",children:(()=>{const U=[];let B="",X="";const G=()=>{B&&(U.push(le.jsx("p",{className:"content",children:B},`t-${U.length}`)),B="")},P=()=>{X.trim()&&(U.push(le.jsxs("div",{className:"thinking inline",children:[le.jsx("div",{className:"label",children:"Thinking"}),le.jsx("pre",{style:{whiteSpace:"pre-wrap"},children:X.trim()})]},`th-${U.length}`)),X="")};return F.segments?.forEach(z=>{if(z.type==="text"){B+=String(z.value??"");return}if(z.type==="thinking"){X+=(X?" ":"")+String(z.value??"").replace(/\s+/g," ");return}if(G(),P(),z.type==="toolCall"){const O=z.value,j=O?.call,Y=O?.result;if(j?.name==="cubeSqlApi"){let V=null;try{V=j.input?JSON.parse(j.input):null}catch{V=null}let ee=null;try{ee=Y?JSON.parse(Y):null}catch{ee=null}const R=ee?.vegaSpec||{},q=k3e(ee?.data||[],R);R.data={values:q},U.push(le.jsxs("div",{className:"info-block",children:[le.jsx("div",{className:"label",children:"SQL Query"}),le.jsxs("div",{className:"stack",children:[V?.queryTitle&&le.jsx("div",{className:"meta-row",children:le.jsx("strong",{children:V.queryTitle})}),V?.description&&le.jsx("div",{className:"meta-row",children:V.description}),V?.sqlQuery&&le.jsx("pre",{className:"code-block",children:V.sqlQuery}),!V?.sqlQuery&&le.jsx("pre",{children:JSON.stringify(j,null,2)}),R&&q&&le.jsxs("div",{className:"vega-block",children:[le.jsx("div",{className:"label",children:"Chart"}),le.jsx("div",{className:"vega-host",ref:J=>{$(R,J)}})]})]})]},`tc-${U.length}`))}else U.push(le.jsxs("div",{className:"info-block",children:[le.jsx("div",{className:"label",children:"Toolcall"}),le.jsx("pre",{children:JSON.stringify(j,null,2)}),Y!==void 0&&le.jsxs(le.Fragment,{children:[le.jsx("div",{className:"label",children:"Result"}),le.jsx("pre",{children:JSON.stringify(Y,null,2)})]})]},`tc-${U.length}`))}}),G(),P(),U})()}):le.jsx("p",{className:"content",children:F.content}),F.metadata&&le.jsxs("div",{className:"meta padded",children:[F.metadata.chartType&&le.jsxs("div",{className:"meta-row",children:[le.jsx("span",{className:"label",children:"Chart:"})," ",F.metadata.chartType]}),F.metadata.visualization!==void 0?le.jsxs("details",{children:[le.jsx("summary",{children:"Visualization config"}),le.jsx("pre",{children:JSON.stringify(F.metadata.visualization,null,2)})]}):null,F.metadata.query!==void 0?le.jsxs("details",{children:[le.jsx("summary",{children:"Generated query"}),le.jsx("pre",{children:JSON.stringify(F.metadata.query,null,2)})]}):null,F.metadata.chartType&&le.jsxs("div",{className:"meta-row",children:[le.jsx("span",{className:"label",children:"Chart:"})," ",F.metadata.chartType]}),F.metadata.visualization!==void 0?le.jsxs("details",{children:[le.jsx("summary",{children:"Visualization config"}),le.jsx("pre",{children:JSON.stringify(F.metadata.visualization,null,2)})]}):null,F.metadata.query!==void 0?le.jsxs("details",{children:[le.jsx("summary",{children:"Generated query"}),le.jsx("pre",{children:JSON.stringify(F.metadata.query,null,2)})]}):null,F.metadata.thinking&&le.jsxs("details",{children:[le.jsx("summary",{children:"Thinking"}),le.jsx("pre",{children:F.metadata.thinking})]}),!!F.metadata.toolCall&&le.jsxs("details",{children:[le.jsx("summary",{children:"Tool calls"}),le.jsx("pre",{children:JSON.stringify(F.metadata.toolCall,null,2)})]}),!!F.metadata.toolCallResult&&le.jsxs("details",{children:[le.jsx("summary",{children:"Tool results"}),le.jsx("pre",{children:JSON.stringify(F.metadata.toolCallResult,null,2)})]}),!!F.metadata.sqlToolCall&&le.jsxs("details",{children:[le.jsx("summary",{children:"SQL tool calls"}),le.jsx("pre",{children:JSON.stringify(F.metadata.sqlToolCall,null,2)})]}),!!F.metadata.sqlToolCallResult&&le.jsxs("details",{children:[le.jsx("summary",{children:"SQL tool results"}),le.jsx("pre",{children:JSON.stringify(F.metadata.sqlToolCallResult,null,2)})]}),!!F.metadata.events&&le.jsxs("details",{children:[le.jsx("summary",{children:"Raw events"}),le.jsx("pre",{children:JSON.stringify(F.metadata.events,null,2)})]})]})]},N)),c&&le.jsx("article",{className:"bubble assistant typing",children:le.jsxs("div",{className:"dots","aria-label":"Assistant is typing",children:[le.jsx("span",{}),le.jsx("span",{}),le.jsx("span",{})]})}),le.jsx("div",{ref:v})]}),le.jsxs("section",{className:"composer","aria-label":"Message composer",children:[le.jsx("label",{className:"sr-only",htmlFor:"chat-input",children:"Ask a question"}),le.jsx("textarea",{id:"chat-input",value:s,onChange:F=>u(F.target.value),onKeyDown:D,placeholder:"Ask about sales, revenue, trends...",rows:4,disabled:c||!b}),le.jsxs("div",{className:"composer-actions",children:[le.jsx("span",{className:"hint",children:"Shift+Enter for newline"}),le.jsx("button",{onClick:w,disabled:c||!b||!s.trim(),children:c?"Sending":"Send"})]})]})]})]})]})}tQ.createRoot(document.getElementById("root")).render(le.jsx(Ui.StrictMode,{children:le.jsx(N3e,{})}));
